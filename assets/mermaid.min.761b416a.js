import{D as jot,E as g5}from"./app.5c915869.js";function Uot(kc,Bd){for(var es=0;es<Bd.length;es++){const Ui=Bd[es];if(typeof Ui!="string"&&!Array.isArray(Ui)){for(const Vr in Ui)if(Vr!=="default"&&!(Vr in kc)){const Hi=Object.getOwnPropertyDescriptor(Ui,Vr);Hi&&Object.defineProperty(kc,Vr,Hi.get?Hi:{enumerable:!0,get:()=>Ui[Vr]})}}}return Object.freeze(Object.defineProperty(kc,Symbol.toStringTag,{value:"Module"}))}var y5={exports:{}};(function(kc,Bd){(function(es,Ui){kc.exports=Ui()})(g5,function(){var es=Object.defineProperty,Ui=(t,e,n)=>e in t?es(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vr=(t,e,n)=>(Ui(t,typeof e!="symbol"?e+"":e,n),n),Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof g5<"u"?g5:typeof self<"u"?self:{};function wB(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function Ta(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var m5={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hi,function(){var n;function r(){return n.apply(null,arguments)}function i(g){return g instanceof Array||Object.prototype.toString.call(g)==="[object Array]"}function a(g){return g!=null&&Object.prototype.toString.call(g)==="[object Object]"}function o(g,E){return Object.prototype.hasOwnProperty.call(g,E)}function s(g){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(g).length===0;for(var E in g)if(o(g,E))return;return 1}function l(g){return g===void 0}function u(g){return typeof g=="number"||Object.prototype.toString.call(g)==="[object Number]"}function h(g){return g instanceof Date||Object.prototype.toString.call(g)==="[object Date]"}function f(g,E){for(var N=[],R=g.length,Z=0;Z<R;++Z)N.push(E(g[Z],Z));return N}function d(g,E){for(var N in E)o(E,N)&&(g[N]=E[N]);return o(E,"toString")&&(g.toString=E.toString),o(E,"valueOf")&&(g.valueOf=E.valueOf),g}function p(g,E,N,R){return ji(g,E,N,R,!0).utc()}function m(g){return g._pf==null&&(g._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),g._pf}function _(g){if(g._isValid==null){var E=m(g),N=b.call(E.parsedDateParts,function(R){return R!=null}),N=!isNaN(g._d.getTime())&&E.overflow<0&&!E.empty&&!E.invalidEra&&!E.invalidMonth&&!E.invalidWeekday&&!E.weekdayMismatch&&!E.nullInput&&!E.invalidFormat&&!E.userInvalidated&&(!E.meridiem||E.meridiem&&N);if(g._strict&&(N=N&&E.charsLeftOver===0&&E.unusedTokens.length===0&&E.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(g))return N;g._isValid=N}return g._isValid}function y(g){var E=p(NaN);return g!=null?d(m(E),g):m(E).userInvalidated=!0,E}var b=Array.prototype.some||function(g){for(var E=Object(this),N=E.length>>>0,R=0;R<N;R++)if(R in E&&g.call(this,E[R],R,E))return!0;return!1},k=r.momentProperties=[],T=!1;function x(g,E){var N,R,Z,ht=k.length;if(l(E._isAMomentObject)||(g._isAMomentObject=E._isAMomentObject),l(E._i)||(g._i=E._i),l(E._f)||(g._f=E._f),l(E._l)||(g._l=E._l),l(E._strict)||(g._strict=E._strict),l(E._tzm)||(g._tzm=E._tzm),l(E._isUTC)||(g._isUTC=E._isUTC),l(E._offset)||(g._offset=E._offset),l(E._pf)||(g._pf=m(E)),l(E._locale)||(g._locale=E._locale),0<ht)for(N=0;N<ht;N++)l(Z=E[R=k[N]])||(g[R]=Z);return g}function A(g){x(this,g),this._d=new Date(g._d!=null?g._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),T===!1&&(T=!0,r.updateOffset(this),T=!1)}function C(g){return g instanceof A||g!=null&&g._isAMomentObject!=null}function L(g){r.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+g)}function S(g,E){var N=!0;return d(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,g),N){for(var R,Z,ht=[],vt=arguments.length,St=0;St<vt;St++){if(R="",typeof arguments[St]=="object"){for(Z in R+=`
[`+St+"] ",arguments[0])o(arguments[0],Z)&&(R+=Z+": "+arguments[0][Z]+", ");R=R.slice(0,-2)}else R=arguments[St];ht.push(R)}L(g+`
Arguments: `+Array.prototype.slice.call(ht).join("")+`
`+new Error().stack),N=!1}return E.apply(this,arguments)},E)}var D={};function v(g,E){r.deprecationHandler!=null&&r.deprecationHandler(g,E),D[g]||(L(E),D[g]=!0)}function M(g){return typeof Function<"u"&&g instanceof Function||Object.prototype.toString.call(g)==="[object Function]"}function w(g,E){var N,R=d({},g);for(N in E)o(E,N)&&(a(g[N])&&a(E[N])?(R[N]={},d(R[N],g[N]),d(R[N],E[N])):E[N]!=null?R[N]=E[N]:delete R[N]);for(N in g)o(g,N)&&!o(E,N)&&a(g[N])&&(R[N]=d({},R[N]));return R}function I(g){g!=null&&this.set(g)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;var B=Object.keys||function(g){var E,N=[];for(E in g)o(g,E)&&N.push(E);return N};function $(g,E,N){var R=""+Math.abs(g);return(0<=g?N?"+":"":"-")+Math.pow(10,Math.max(0,E-R.length)).toString().substr(1)+R}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,K=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,nt={},z={};function Y(g,E,N,R){var Z=typeof R=="string"?function(){return this[R]()}:R;g&&(z[g]=Z),E&&(z[E[0]]=function(){return $(Z.apply(this,arguments),E[1],E[2])}),N&&(z[N]=function(){return this.localeData().ordinal(Z.apply(this,arguments),g)})}function rt(g,E){return g.isValid()?(E=lt(E,g.localeData()),nt[E]=nt[E]||function(N){for(var R,Z=N.match(F),ht=0,vt=Z.length;ht<vt;ht++)z[Z[ht]]?Z[ht]=z[Z[ht]]:Z[ht]=(R=Z[ht]).match(/\[[\s\S]/)?R.replace(/^\[|\]$/g,""):R.replace(/\\/g,"");return function(St){for(var zt="",It=0;It<vt;It++)zt+=M(Z[It])?Z[It].call(St,N):Z[It];return zt}}(E),nt[E](g)):g.localeData().invalidDate()}function lt(g,E){var N=5;function R(Z){return E.longDateFormat(Z)||Z}for(K.lastIndex=0;0<=N&&K.test(g);)g=g.replace(K,R),K.lastIndex=0,--N;return g}var J={};function Q(g,E){var N=g.toLowerCase();J[N]=J[N+"s"]=J[E]=g}function q(g){return typeof g=="string"?J[g]||J[g.toLowerCase()]:void 0}function it(g){var E,N,R={};for(N in g)o(g,N)&&(E=q(N))&&(R[E]=g[N]);return R}var ut={};function V(g,E){ut[g]=E}function j(g){return g%4==0&&g%100!=0||g%400==0}function P(g){return g<0?Math.ceil(g)||0:Math.floor(g)}function X(E){var E=+E,N=0;return N=E!=0&&isFinite(E)?P(E):N}function O(g,E){return function(N){return N!=null?(U(this,g,N),r.updateOffset(this,E),this):G(this,g)}}function G(g,E){return g.isValid()?g._d["get"+(g._isUTC?"UTC":"")+E]():NaN}function U(g,E,N){g.isValid()&&!isNaN(N)&&(E==="FullYear"&&j(g.year())&&g.month()===1&&g.date()===29?(N=X(N),g._d["set"+(g._isUTC?"UTC":"")+E](N,g.month(),ie(N,g.month()))):g._d["set"+(g._isUTC?"UTC":"")+E](N))}var H=/\d/,le=/\d\d/,xt=/\d{3}/,Jo=/\d{4}/,so=/[+-]?\d{6}/,ot=/\d\d?/,Dt=/\d\d\d\d?/,Mt=/\d\d\d\d\d\d?/,wt=/\d{1,3}/,co=/\d{1,4}/,oo=/[+-]?\d{1,6}/,Et=/\d+/,bt=/[+-]?\d+/,mt=/Z|[+-]\d\d:?\d\d/gi,Tt=/Z|[+-]\d\d(?::?\d\d)?/gi,kt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function st(g,E,N){te[g]=M(E)?E:function(R,Z){return R&&N?N:E}}function Qt(g,E){return o(te,g)?te[g](E._strict,E._locale):new RegExp($t(g.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(N,R,Z,ht,vt){return R||Z||ht||vt})))}function $t(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var te={},Ht={};function qt(g,E){var N,R,Z=E;for(typeof g=="string"&&(g=[g]),u(E)&&(Z=function(ht,vt){vt[E]=X(ht)}),R=g.length,N=0;N<R;N++)Ht[g[N]]=Z}function oe(g,E){qt(g,function(N,R,Z,ht){Z._w=Z._w||{},E(N,Z._w,Z,ht)})}var Xt,Rt=0,Pt=1,yt=2,Ct=3,pt=4,Ft=5,dt=6,Se=7,gt=8;function ie(g,E){if(isNaN(g)||isNaN(E))return NaN;var N=(E%(N=12)+N)%N;return g+=(E-N)/12,N==1?j(g)?29:28:31-N%7%2}Xt=Array.prototype.indexOf||function(g){for(var E=0;E<this.length;++E)if(this[E]===g)return E;return-1},Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(g){return this.localeData().monthsShort(this,g)}),Y("MMMM",0,0,function(g){return this.localeData().months(this,g)}),Q("month","M"),V("month",8),st("M",ot),st("MM",ot,le),st("MMM",function(g,E){return E.monthsShortRegex(g)}),st("MMMM",function(g,E){return E.monthsRegex(g)}),qt(["M","MM"],function(g,E){E[Pt]=X(g)-1}),qt(["MMM","MMMM"],function(g,E,N,R){R=N._locale.monthsParse(g,R,N._strict),R!=null?E[Pt]=R:m(N).invalidMonth=g});var se="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ve="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),de=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,be=kt,Gt=kt;function ee(g,E){var N;if(g.isValid()){if(typeof E=="string"){if(/^\d+$/.test(E))E=X(E);else if(!u(E=g.localeData().monthsParse(E)))return}N=Math.min(g.date(),ie(g.year(),E)),g._d["set"+(g._isUTC?"UTC":"")+"Month"](E,N)}}function fe(g){return g!=null?(ee(this,g),r.updateOffset(this,!0),this):G(this,"Month")}function ye(){function g(vt,St){return St.length-vt.length}for(var E,N=[],R=[],Z=[],ht=0;ht<12;ht++)E=p([2e3,ht]),N.push(this.monthsShort(E,"")),R.push(this.months(E,"")),Z.push(this.months(E,"")),Z.push(this.monthsShort(E,""));for(N.sort(g),R.sort(g),Z.sort(g),ht=0;ht<12;ht++)N[ht]=$t(N[ht]),R[ht]=$t(R[ht]);for(ht=0;ht<24;ht++)Z[ht]=$t(Z[ht]);this._monthsRegex=new RegExp("^("+Z.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+R.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+N.join("|")+")","i")}function pe(g){return j(g)?366:365}Y("Y",0,0,function(){var g=this.year();return g<=9999?$(g,4):"+"+g}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),Q("year","y"),V("year",1),st("Y",bt),st("YY",ot,le),st("YYYY",co,Jo),st("YYYYY",oo,so),st("YYYYYY",oo,so),qt(["YYYYY","YYYYYY"],Rt),qt("YYYY",function(g,E){E[Rt]=g.length===2?r.parseTwoDigitYear(g):X(g)}),qt("YY",function(g,E){E[Rt]=r.parseTwoDigitYear(g)}),qt("Y",function(g,E){E[Rt]=parseInt(g,10)}),r.parseTwoDigitYear=function(g){return X(g)+(68<X(g)?1900:2e3)};var Md=O("FullYear",!0);function ma(g,E,N,R,Z,ht,vt){var St;return g<100&&0<=g?(St=new Date(g+400,E,N,R,Z,ht,vt),isFinite(St.getFullYear())&&St.setFullYear(g)):St=new Date(g,E,N,R,Z,ht,vt),St}function $e(g){var E;return g<100&&0<=g?((E=Array.prototype.slice.call(arguments))[0]=g+400,E=new Date(Date.UTC.apply(null,E)),isFinite(E.getUTCFullYear())&&E.setUTCFullYear(g)):E=new Date(Date.UTC.apply(null,arguments)),E}function Pe(g,E,N){return N=7+E-N,N-(7+$e(g,0,N).getUTCDay()-E)%7-1}function Zt(g,vt,St,R,Z){var ht,vt=1+7*(vt-1)+(7+St-R)%7+Pe(g,R,Z),St=vt<=0?pe(ht=g-1)+vt:vt>pe(g)?(ht=g+1,vt-pe(g)):(ht=g,vt);return{year:ht,dayOfYear:St}}function lr(g,E,N){var R,Z,ht=Pe(g.year(),E,N),ht=Math.floor((g.dayOfYear()-ht-1)/7)+1;return ht<1?R=ht+cn(Z=g.year()-1,E,N):ht>cn(g.year(),E,N)?(R=ht-cn(g.year(),E,N),Z=g.year()+1):(Z=g.year(),R=ht),{week:R,year:Z}}function cn(g,Z,N){var R=Pe(g,Z,N),Z=Pe(g+1,Z,N);return(pe(g)-R+Z)/7}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),Q("week","w"),Q("isoWeek","W"),V("week",5),V("isoWeek",5),st("w",ot),st("ww",ot,le),st("W",ot),st("WW",ot,le),oe(["w","ww","W","WW"],function(g,E,N,R){E[R.substr(0,1)]=X(g)});function Je(g,E){return g.slice(E,7).concat(g.slice(0,E))}Y("d",0,"do","day"),Y("dd",0,0,function(g){return this.localeData().weekdaysMin(this,g)}),Y("ddd",0,0,function(g){return this.localeData().weekdaysShort(this,g)}),Y("dddd",0,0,function(g){return this.localeData().weekdays(this,g)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),Q("day","d"),Q("weekday","e"),Q("isoWeekday","E"),V("day",11),V("weekday",11),V("isoWeekday",11),st("d",ot),st("e",ot),st("E",ot),st("dd",function(g,E){return E.weekdaysMinRegex(g)}),st("ddd",function(g,E){return E.weekdaysShortRegex(g)}),st("dddd",function(g,E){return E.weekdaysRegex(g)}),oe(["dd","ddd","dddd"],function(g,E,N,R){R=N._locale.weekdaysParse(g,R,N._strict),R!=null?E.d=R:m(N).invalidWeekday=g}),oe(["d","e","E"],function(g,E,N,R){E[R]=X(g)});var Ye="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Nt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),At=kt,Kt=kt,Ne=kt;function ze(){function g(It,ue){return ue.length-It.length}for(var E,N,R,Z=[],ht=[],vt=[],St=[],zt=0;zt<7;zt++)R=p([2e3,1]).day(zt),E=$t(this.weekdaysMin(R,"")),N=$t(this.weekdaysShort(R,"")),R=$t(this.weekdays(R,"")),Z.push(E),ht.push(N),vt.push(R),St.push(E),St.push(N),St.push(R);Z.sort(g),ht.sort(g),vt.sort(g),St.sort(g),this._weekdaysRegex=new RegExp("^("+St.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+vt.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+ht.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+Z.join("|")+")","i")}function De(){return this.hours()%12||12}function _n(g,E){Y(g,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),E)})}function Xe(g,E){return E._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,De),Y("k",["kk",2],0,function(){return this.hours()||24}),Y("hmm",0,0,function(){return""+De.apply(this)+$(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+De.apply(this)+$(this.minutes(),2)+$(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+$(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+$(this.minutes(),2)+$(this.seconds(),2)}),_n("a",!0),_n("A",!1),Q("hour","h"),V("hour",13),st("a",Xe),st("A",Xe),st("H",ot),st("h",ot),st("k",ot),st("HH",ot,le),st("hh",ot,le),st("kk",ot,le),st("hmm",Dt),st("hmmss",Mt),st("Hmm",Dt),st("Hmmss",Mt),qt(["H","HH"],Ct),qt(["k","kk"],function(g,E,N){g=X(g),E[Ct]=g===24?0:g}),qt(["a","A"],function(g,E,N){N._isPm=N._locale.isPM(g),N._meridiem=g}),qt(["h","hh"],function(g,E,N){E[Ct]=X(g),m(N).bigHour=!0}),qt("hmm",function(g,E,N){var R=g.length-2;E[Ct]=X(g.substr(0,R)),E[pt]=X(g.substr(R)),m(N).bigHour=!0}),qt("hmmss",function(g,E,N){var R=g.length-4,Z=g.length-2;E[Ct]=X(g.substr(0,R)),E[pt]=X(g.substr(R,2)),E[Ft]=X(g.substr(Z)),m(N).bigHour=!0}),qt("Hmm",function(g,E,N){var R=g.length-2;E[Ct]=X(g.substr(0,R)),E[pt]=X(g.substr(R))}),qt("Hmmss",function(g,E,N){var R=g.length-4,Z=g.length-2;E[Ct]=X(g.substr(0,R)),E[pt]=X(g.substr(R,2)),E[Ft]=X(g.substr(Z))}),kt=O("Hours",!0);var We,io={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:se,monthsShort:ve,week:{dow:0,doy:6},weekdays:Ye,weekdaysMin:Nt,weekdaysShort:tt,meridiemParse:/[ap]\.?m?\.?/i},Ae={},ba={};function Td(g){return g&&g.toLowerCase().replace("_","-")}function xu(g){for(var E,N,R,Z,ht=0;ht<g.length;){for(E=(Z=Td(g[ht]).split("-")).length,N=(N=Td(g[ht+1]))?N.split("-"):null;0<E;){if(R=ur(Z.slice(0,E).join("-")))return R;if(N&&N.length>=E&&function(vt,St){for(var zt=Math.min(vt.length,St.length),It=0;It<zt;It+=1)if(vt[It]!==St[It])return It;return zt}(Z,N)>=E-1)break;E--}ht++}return We}function ur(g){var E;if(Ae[g]===void 0&&!0&&t&&t.exports&&g.match("^[^/\\\\]*$")!=null)try{E=We._abbr,Ta("./locale/"+g),Yt(E)}catch{Ae[g]=null}return Ae[g]}function Yt(g,E){return g&&((E=l(E)?Bt(g):ce(g,E))?We=E:typeof console<"u"&&console.warn&&console.warn("Locale "+g+" not found. Did you forget to load it?")),We._abbr}function ce(g,E){if(E===null)return delete Ae[g],null;var N,R=io;if(E.abbr=g,Ae[g]!=null)v("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),R=Ae[g]._config;else if(E.parentLocale!=null)if(Ae[E.parentLocale]!=null)R=Ae[E.parentLocale]._config;else{if((N=ur(E.parentLocale))==null)return ba[E.parentLocale]||(ba[E.parentLocale]=[]),ba[E.parentLocale].push({name:g,config:E}),null;R=N._config}return Ae[g]=new I(w(R,E)),ba[g]&&ba[g].forEach(function(Z){ce(Z.name,Z.config)}),Yt(g),Ae[g]}function Bt(g){var E;if(!(g=g&&g._locale&&g._locale._abbr?g._locale._abbr:g))return We;if(!i(g)){if(E=ur(g))return E;g=[g]}return xu(g)}function Fe(g){var E=g._a;return E&&m(g).overflow===-2&&(E=E[Pt]<0||11<E[Pt]?Pt:E[yt]<1||E[yt]>ie(E[Rt],E[Pt])?yt:E[Ct]<0||24<E[Ct]||E[Ct]===24&&(E[pt]!==0||E[Ft]!==0||E[dt]!==0)?Ct:E[pt]<0||59<E[pt]?pt:E[Ft]<0||59<E[Ft]?Ft:E[dt]<0||999<E[dt]?dt:-1,m(g)._overflowDayOfYear&&(E<Rt||yt<E)&&(E=yt),m(g)._overflowWeeks&&E===-1&&(E=Se),m(g)._overflowWeekday&&E===-1&&(E=gt),m(g).overflow=E),g}var et=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Vn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ct=/Z|[+-]\d\d(?::?\d\d)?/,In=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],a5=/^\/?Date\((-?\d+)/i,Ed=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,o5={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fn(g){var E,N,R,Z,ht,vt,zt=g._i,St=et.exec(zt)||Vn.exec(zt),zt=In.length,It=gc.length;if(St){for(m(g).iso=!0,E=0,N=zt;E<N;E++)if(In[E][1].exec(St[1])){Z=In[E][0],R=In[E][2]!==!1;break}if(Z==null)g._isValid=!1;else{if(St[3]){for(E=0,N=It;E<N;E++)if(gc[E][1].exec(St[3])){ht=(St[2]||" ")+gc[E][0];break}if(ht==null)return void(g._isValid=!1)}if(R||ht==null){if(St[4]){if(!ct.exec(St[4]))return void(g._isValid=!1);vt="Z"}g._f=Z+(ht||"")+(vt||""),wu(g)}else g._isValid=!1}}else g._isValid=!1}function _a(g,E,N,R,Z,ht){return g=[function(vt){vt=parseInt(vt,10);{if(vt<=49)return 2e3+vt;if(vt<=999)return 1900+vt}return vt}(g),ve.indexOf(E),parseInt(N,10),parseInt(R,10),parseInt(Z,10)],ht&&g.push(parseInt(ht,10)),g}function yc(g){var E,N,R,Z,ht=Ed.exec(g._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));ht?(E=_a(ht[4],ht[3],ht[2],ht[5],ht[6],ht[7]),N=ht[1],R=E,Z=g,N&&tt.indexOf(N)!==new Date(R[0],R[1],R[2]).getDay()?(m(Z).weekdayMismatch=!0,Z._isValid=!1):(g._a=E,g._tzm=(N=ht[8],R=ht[9],Z=ht[10],N?o5[N]:R?0:60*(((N=parseInt(Z,10))-(R=N%100))/100)+R),g._d=$e.apply(null,g._a),g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),m(g).rfc2822=!0)):g._isValid=!1}function zi(g,E,N){return g!=null?g:E!=null?E:N}function ku(g){var E,N,R,Z,ht,vt,St,zt,It,ue,re,tn=[];if(!g._d){for(R=g,Z=new Date(r.now()),N=R._useUTC?[Z.getUTCFullYear(),Z.getUTCMonth(),Z.getUTCDate()]:[Z.getFullYear(),Z.getMonth(),Z.getDate()],g._w&&g._a[yt]==null&&g._a[Pt]==null&&((Z=(R=g)._w).GG!=null||Z.W!=null||Z.E!=null?(zt=1,It=4,ht=zi(Z.GG,R._a[Rt],lr(Me(),1,4).year),vt=zi(Z.W,1),((St=zi(Z.E,1))<1||7<St)&&(ue=!0)):(zt=R._locale._week.dow,It=R._locale._week.doy,re=lr(Me(),zt,It),ht=zi(Z.gg,R._a[Rt],re.year),vt=zi(Z.w,re.week),Z.d!=null?((St=Z.d)<0||6<St)&&(ue=!0):Z.e!=null?(St=Z.e+zt,(Z.e<0||6<Z.e)&&(ue=!0)):St=zt),vt<1||vt>cn(ht,zt,It)?m(R)._overflowWeeks=!0:ue!=null?m(R)._overflowWeekday=!0:(re=Zt(ht,vt,St,zt,It),R._a[Rt]=re.year,R._dayOfYear=re.dayOfYear)),g._dayOfYear!=null&&(Z=zi(g._a[Rt],N[Rt]),(g._dayOfYear>pe(Z)||g._dayOfYear===0)&&(m(g)._overflowDayOfYear=!0),ue=$e(Z,0,g._dayOfYear),g._a[Pt]=ue.getUTCMonth(),g._a[yt]=ue.getUTCDate()),E=0;E<3&&g._a[E]==null;++E)g._a[E]=tn[E]=N[E];for(;E<7;E++)g._a[E]=tn[E]=g._a[E]==null?E===2?1:0:g._a[E];g._a[Ct]===24&&g._a[pt]===0&&g._a[Ft]===0&&g._a[dt]===0&&(g._nextDay=!0,g._a[Ct]=0),g._d=(g._useUTC?$e:ma).apply(null,tn),ht=g._useUTC?g._d.getUTCDay():g._d.getDay(),g._tzm!=null&&g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),g._nextDay&&(g._a[Ct]=24),g._w&&g._w.d!==void 0&&g._w.d!==ht&&(m(g).weekdayMismatch=!0)}}function wu(g){if(g._f===r.ISO_8601)fn(g);else if(g._f===r.RFC_2822)yc(g);else{g._a=[],m(g).empty=!0;for(var E,N,R,Z,ht,vt=""+g._i,St=vt.length,zt=0,It=lt(g._f,g._locale).match(F)||[],ue=It.length,re=0;re<ue;re++)N=It[re],(E=(vt.match(Qt(N,g))||[])[0])&&(0<(R=vt.substr(0,vt.indexOf(E))).length&&m(g).unusedInput.push(R),vt=vt.slice(vt.indexOf(E)+E.length),zt+=E.length),z[N]?(E?m(g).empty=!1:m(g).unusedTokens.push(N),R=N,ht=g,(Z=E)!=null&&o(Ht,R)&&Ht[R](Z,ht._a,ht,R)):g._strict&&!E&&m(g).unusedTokens.push(N);m(g).charsLeftOver=St-zt,0<vt.length&&m(g).unusedInput.push(vt),g._a[Ct]<=12&&m(g).bigHour===!0&&0<g._a[Ct]&&(m(g).bigHour=void 0),m(g).parsedDateParts=g._a.slice(0),m(g).meridiem=g._meridiem,g._a[Ct]=function(tn,vn,bi){return bi==null?vn:tn.meridiemHour!=null?tn.meridiemHour(vn,bi):tn.isPM!=null?((tn=tn.isPM(bi))&&vn<12&&(vn+=12),vn=tn||vn!==12?vn:0):vn}(g._locale,g._a[Ct],g._meridiem),(St=m(g).era)!==null&&(g._a[Rt]=g._locale.erasConvertYear(St,g._a[Rt])),ku(g),Fe(g)}}function Rn(g){var E,N,R,Z=g._i,ht=g._f;return g._locale=g._locale||Bt(g._l),Z===null||ht===void 0&&Z===""?y({nullInput:!0}):(typeof Z=="string"&&(g._i=Z=g._locale.preparse(Z)),C(Z)?new A(Fe(Z)):(h(Z)?g._d=Z:i(ht)?function(vt){var St,zt,It,ue,re,tn,vn=!1,bi=vt._f.length;if(bi===0)return m(vt).invalidFormat=!0,vt._d=new Date(NaN);for(ue=0;ue<bi;ue++)re=0,tn=!1,St=x({},vt),vt._useUTC!=null&&(St._useUTC=vt._useUTC),St._f=vt._f[ue],wu(St),_(St)&&(tn=!0),re=(re+=m(St).charsLeftOver)+10*m(St).unusedTokens.length,m(St).score=re,vn?re<It&&(It=re,zt=St):(It==null||re<It||tn)&&(It=re,zt=St,tn&&(vn=!0));d(vt,zt||St)}(g):ht?wu(g):l(ht=(Z=g)._i)?Z._d=new Date(r.now()):h(ht)?Z._d=new Date(ht.valueOf()):typeof ht=="string"?(N=Z,(E=a5.exec(N._i))!==null?N._d=new Date(+E[1]):(fn(N),N._isValid===!1&&(delete N._isValid,yc(N),N._isValid===!1&&(delete N._isValid,N._strict?N._isValid=!1:r.createFromInputFallback(N))))):i(ht)?(Z._a=f(ht.slice(0),function(vt){return parseInt(vt,10)}),ku(Z)):a(ht)?(E=Z)._d||(R=(N=it(E._i)).day===void 0?N.date:N.day,E._a=f([N.year,N.month,R,N.hour,N.minute,N.second,N.millisecond],function(vt){return vt&&parseInt(vt,10)}),ku(E)):u(ht)?Z._d=new Date(ht):r.createFromInputFallback(Z),_(g)||(g._d=null),g))}function ji(g,E,N,R,Z){var ht={};return E!==!0&&E!==!1||(R=E,E=void 0),N!==!0&&N!==!1||(R=N,N=void 0),(a(g)&&s(g)||i(g)&&g.length===0)&&(g=void 0),ht._isAMomentObject=!0,ht._useUTC=ht._isUTC=Z,ht._l=N,ht._i=g,ht._f=E,ht._strict=R,(Z=new A(Fe(Rn(Z=ht))))._nextDay&&(Z.add(1,"d"),Z._nextDay=void 0),Z}function Me(g,E,N,R){return ji(g,E,N,R,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(g){g._d=new Date(g._i+(g._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){},Dt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=Me.apply(null,arguments);return this.isValid()&&g.isValid()?g<this?this:g:y()}),Mt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=Me.apply(null,arguments);return this.isValid()&&g.isValid()?this<g?this:g:y()});function mc(g,E){var N,R;if(!(E=E.length===1&&i(E[0])?E[0]:E).length)return Me();for(N=E[0],R=1;R<E.length;++R)E[R].isValid()&&!E[R][g](N)||(N=E[R]);return N}var Wr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function va(E){var E=it(E),N=E.year||0,R=E.quarter||0,Z=E.month||0,ht=E.week||E.isoWeek||0,vt=E.day||0,St=E.hour||0,zt=E.minute||0,It=E.second||0,ue=E.millisecond||0;this._isValid=function(re){var tn,vn,bi=!1,p5=Wr.length;for(tn in re)if(o(re,tn)&&(Xt.call(Wr,tn)===-1||re[tn]!=null&&isNaN(re[tn])))return!1;for(vn=0;vn<p5;++vn)if(re[Wr[vn]]){if(bi)return!1;parseFloat(re[Wr[vn]])!==X(re[Wr[vn]])&&(bi=!0)}return!0}(E),this._milliseconds=+ue+1e3*It+6e4*zt+1e3*St*60*60,this._days=+vt+7*ht,this._months=+Z+3*R+12*N,this._data={},this._locale=Bt(),this._bubble()}function xr(g){return g instanceof va}function bc(g){return g<0?-1*Math.round(-1*g):Math.round(g)}function Qo(g,E){Y(g,0,0,function(){var N=this.utcOffset(),R="+";return N<0&&(N=-N,R="-"),R+$(~~(N/60),2)+E+$(~~N%60,2)})}Qo("Z",":"),Qo("ZZ",""),st("Z",Tt),st("ZZ",Tt),qt(["Z","ZZ"],function(g,E,N){N._useUTC=!0,N._tzm=Ar(Tt,g)});var Tu=/([\+\-]|\d\d)/gi;function Ar(g,N){var N=(N||"").match(g);return N===null?null:(N=60*(g=((N[N.length-1]||[])+"").match(Tu)||["-",0,0])[1]+X(g[2]))===0?0:g[0]==="+"?N:-N}function s5(g,E){var N;return E._isUTC?(E=E.clone(),N=(C(g)||h(g)?g:Me(g)).valueOf()-E.valueOf(),E._d.setTime(E._d.valueOf()+N),r.updateOffset(E,!1),E):Me(g).local()}function c5(g){return-Math.round(g._d.getTimezoneOffset())}function sB(){return!!this.isValid()&&this._isUTC&&this._offset===0}r.updateOffset=function(){};var Oot=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Iot=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function mi(g,E){var N,R=g,Z=null;return xr(g)?R={ms:g._milliseconds,d:g._days,M:g._months}:u(g)||!isNaN(+g)?(R={},E?R[E]=+g:R.milliseconds=+g):(Z=Oot.exec(g))?(N=Z[1]==="-"?-1:1,R={y:0,d:X(Z[yt])*N,h:X(Z[Ct])*N,m:X(Z[pt])*N,s:X(Z[Ft])*N,ms:X(bc(1e3*Z[dt]))*N}):(Z=Iot.exec(g))?(N=Z[1]==="-"?-1:1,R={y:Ko(Z[2],N),M:Ko(Z[3],N),w:Ko(Z[4],N),d:Ko(Z[5],N),h:Ko(Z[6],N),m:Ko(Z[7],N),s:Ko(Z[8],N)}):R==null?R={}:typeof R=="object"&&("from"in R||"to"in R)&&(E=function(ht,vt){var St;return!ht.isValid()||!vt.isValid()?{milliseconds:0,months:0}:(vt=s5(vt,ht),ht.isBefore(vt)?St=cB(ht,vt):((St=cB(vt,ht)).milliseconds=-St.milliseconds,St.months=-St.months),St)}(Me(R.from),Me(R.to)),(R={}).ms=E.milliseconds,R.M=E.months),Z=new va(R),xr(g)&&o(g,"_locale")&&(Z._locale=g._locale),xr(g)&&o(g,"_isValid")&&(Z._isValid=g._isValid),Z}function Ko(g,E){return g=g&&parseFloat(g.replace(",",".")),(isNaN(g)?0:g)*E}function cB(g,E){var N={};return N.months=E.month()-g.month()+12*(E.year()-g.year()),g.clone().add(N.months,"M").isAfter(E)&&--N.months,N.milliseconds=+E-+g.clone().add(N.months,"M"),N}function lB(g,E){return function(N,R){var Z;return R===null||isNaN(+R)||(v(E,"moment()."+E+"(period, number) is deprecated. Please use moment()."+E+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),Z=N,N=R,R=Z),uB(this,mi(N,R),g),this}}function uB(g,vt,N,R){var Z=vt._milliseconds,ht=bc(vt._days),vt=bc(vt._months);g.isValid()&&(R=R==null||R,vt&&ee(g,G(g,"Month")+vt*N),ht&&U(g,"Date",G(g,"Date")+ht*N),Z&&g._d.setTime(g._d.valueOf()+Z*N),R&&r.updateOffset(g,ht||vt))}mi.fn=va.prototype,mi.invalid=function(){return mi(NaN)},se=lB(1,"add"),Ye=lB(-1,"subtract");function hB(g){return typeof g=="string"||g instanceof String}function Rot(g){return C(g)||h(g)||hB(g)||u(g)||function(E){var N=i(E),R=!1;return N&&(R=E.filter(function(Z){return!u(Z)&&hB(E)}).length===0),N&&R}(g)||function(E){var N,R,Z=a(E)&&!s(E),ht=!1,vt=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],St=vt.length;for(N=0;N<St;N+=1)R=vt[N],ht=ht||o(E,R);return Z&&ht}(g)||g==null}function Cd(g,Z){if(g.date()<Z.date())return-Cd(Z,g);var N=12*(Z.year()-g.year())+(Z.month()-g.month()),R=g.clone().add(N,"months"),Z=Z-R<0?(Z-R)/(R-g.clone().add(N-1,"months")):(Z-R)/(g.clone().add(1+N,"months")-R);return-(N+Z)||0}function dB(g){return g===void 0?this._locale._abbr:((g=Bt(g))!=null&&(this._locale=g),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Nt=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(g){return g===void 0?this.localeData():this.locale(g)});function fB(){return this._locale}var pB=126227808e5;function _c(g,E){return(g%E+E)%E}function gB(g,E,N){return g<100&&0<=g?new Date(g+400,E,N)-pB:new Date(g,E,N).valueOf()}function yB(g,E,N){return g<100&&0<=g?Date.UTC(g+400,E,N)-pB:Date.UTC(g,E,N)}function l5(g,E){return E.erasAbbrRegex(g)}function u5(){for(var g=[],E=[],N=[],R=[],Z=this.eras(),ht=0,vt=Z.length;ht<vt;++ht)E.push($t(Z[ht].name)),g.push($t(Z[ht].abbr)),N.push($t(Z[ht].narrow)),R.push($t(Z[ht].name)),R.push($t(Z[ht].abbr)),R.push($t(Z[ht].narrow));this._erasRegex=new RegExp("^("+R.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+E.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+g.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+N.join("|")+")","i")}function Sd(g,E){Y(0,[g,g.length],0,E)}function mB(g,E,N,R,Z){var ht;return g==null?lr(this,R,Z).year:(ht=cn(g,R,Z),function(vt,St,zt,It,ue){return vt=Zt(vt,St,zt,It,ue),St=$e(vt.year,0,vt.dayOfYear),this.year(St.getUTCFullYear()),this.month(St.getUTCMonth()),this.date(St.getUTCDate()),this}.call(this,g,E=ht<E?ht:E,N,R,Z))}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),st("N",l5),st("NN",l5),st("NNN",l5),st("NNNN",function(g,E){return E.erasNameRegex(g)}),st("NNNNN",function(g,E){return E.erasNarrowRegex(g)}),qt(["N","NN","NNN","NNNN","NNNNN"],function(g,E,N,R){R=N._locale.erasParse(g,R,N._strict),R?m(N).era=R:m(N).invalidEra=g}),st("y",Et),st("yy",Et),st("yyy",Et),st("yyyy",Et),st("yo",function(g,E){return E._eraYearOrdinalRegex||Et}),qt(["y","yy","yyy","yyyy"],Rt),qt(["yo"],function(g,E,N,R){var Z;N._locale._eraYearOrdinalRegex&&(Z=g.match(N._locale._eraYearOrdinalRegex)),N._locale.eraYearOrdinalParse?E[Rt]=N._locale.eraYearOrdinalParse(g,Z):E[Rt]=parseInt(g,10)}),Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Sd("gggg","weekYear"),Sd("ggggg","weekYear"),Sd("GGGG","isoWeekYear"),Sd("GGGGG","isoWeekYear"),Q("weekYear","gg"),Q("isoWeekYear","GG"),V("weekYear",1),V("isoWeekYear",1),st("G",bt),st("g",bt),st("GG",ot,le),st("gg",ot,le),st("GGGG",co,Jo),st("gggg",co,Jo),st("GGGGG",oo,so),st("ggggg",oo,so),oe(["gggg","ggggg","GGGG","GGGGG"],function(g,E,N,R){E[R.substr(0,2)]=X(g)}),oe(["gg","GG"],function(g,E,N,R){E[R]=r.parseTwoDigitYear(g)}),Y("Q",0,"Qo","quarter"),Q("quarter","Q"),V("quarter",7),st("Q",H),qt("Q",function(g,E){E[Pt]=3*(X(g)-1)}),Y("D",["DD",2],"Do","date"),Q("date","D"),V("date",9),st("D",ot),st("DD",ot,le),st("Do",function(g,E){return g?E._dayOfMonthOrdinalParse||E._ordinalParse:E._dayOfMonthOrdinalParseLenient}),qt(["D","DD"],yt),qt("Do",function(g,E){E[yt]=X(g.match(ot)[0])}),co=O("Date",!0),Y("DDD",["DDDD",3],"DDDo","dayOfYear"),Q("dayOfYear","DDD"),V("dayOfYear",4),st("DDD",wt),st("DDDD",xt),qt(["DDD","DDDD"],function(g,E,N){N._dayOfYear=X(g)}),Y("m",["mm",2],0,"minute"),Q("minute","m"),V("minute",14),st("m",ot),st("mm",ot,le),qt(["m","mm"],pt);var ao,Jo=O("Minutes",!1),oo=(Y("s",["ss",2],0,"second"),Q("second","s"),V("second",15),st("s",ot),st("ss",ot,le),qt(["s","ss"],Ft),O("Seconds",!1));for(Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Q("millisecond","ms"),V("millisecond",16),st("S",wt,H),st("SS",wt,le),st("SSS",wt,xt),ao="SSSS";ao.length<=9;ao+="S")st(ao,Et);function Fot(g,E){E[dt]=X(1e3*("0."+g))}for(ao="S";ao.length<=9;ao+="S")qt(ao,Fot);so=O("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName"),H=A.prototype;function bB(g){return g}H.add=se,H.calendar=function(N,Z){arguments.length===1&&(arguments[0]?Rot(arguments[0])?(N=arguments[0],Z=void 0):function(ht){for(var vt=a(ht)&&!s(ht),St=!1,zt=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],It=0;It<zt.length;It+=1)St=St||o(ht,zt[It]);return vt&&St}(arguments[0])&&(Z=arguments[0],N=void 0):Z=N=void 0);var N=N||Me(),R=s5(N,this).startOf("day"),R=r.calendarFormat(this,R)||"sameElse",Z=Z&&(M(Z[R])?Z[R].call(this,N):Z[R]);return this.format(Z||this.localeData().calendar(R,this,Me(N)))},H.clone=function(){return new A(this)},H.diff=function(g,E,N){var R,Z,ht;if(!this.isValid())return NaN;if(!(R=s5(g,this)).isValid())return NaN;switch(Z=6e4*(R.utcOffset()-this.utcOffset()),E=q(E)){case"year":ht=Cd(this,R)/12;break;case"month":ht=Cd(this,R);break;case"quarter":ht=Cd(this,R)/3;break;case"second":ht=(this-R)/1e3;break;case"minute":ht=(this-R)/6e4;break;case"hour":ht=(this-R)/36e5;break;case"day":ht=(this-R-Z)/864e5;break;case"week":ht=(this-R-Z)/6048e5;break;default:ht=this-R}return N?ht:P(ht)},H.endOf=function(g){var E,N;if((g=q(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(N=this._isUTC?yB:gB,g){case"year":E=N(this.year()+1,0,1)-1;break;case"quarter":E=N(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":E=N(this.year(),this.month()+1,1)-1;break;case"week":E=N(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":E=N(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":E=N(this.year(),this.month(),this.date()+1)-1;break;case"hour":E=this._d.valueOf(),E+=36e5-_c(E+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":E=this._d.valueOf(),E+=6e4-_c(E,6e4)-1;break;case"second":E=this._d.valueOf(),E+=1e3-_c(E,1e3)-1;break}return this._d.setTime(E),r.updateOffset(this,!0),this},H.format=function(g){return g=g||(this.isUtc()?r.defaultFormatUtc:r.defaultFormat),g=rt(this,g),this.localeData().postformat(g)},H.from=function(g,E){return this.isValid()&&(C(g)&&g.isValid()||Me(g).isValid())?mi({to:this,from:g}).locale(this.locale()).humanize(!E):this.localeData().invalidDate()},H.fromNow=function(g){return this.from(Me(),g)},H.to=function(g,E){return this.isValid()&&(C(g)&&g.isValid()||Me(g).isValid())?mi({from:this,to:g}).locale(this.locale()).humanize(!E):this.localeData().invalidDate()},H.toNow=function(g){return this.to(Me(),g)},H.get=function(g){return M(this[g=q(g)])?this[g]():this},H.invalidAt=function(){return m(this).overflow},H.isAfter=function(g,E){return g=C(g)?g:Me(g),!(!this.isValid()||!g.isValid())&&((E=q(E)||"millisecond")==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(E).valueOf())},H.isBefore=function(g,E){return g=C(g)?g:Me(g),!(!this.isValid()||!g.isValid())&&((E=q(E)||"millisecond")==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(E).valueOf()<g.valueOf())},H.isBetween=function(g,E,N,R){return g=C(g)?g:Me(g),E=C(E)?E:Me(E),!!(this.isValid()&&g.isValid()&&E.isValid())&&((R=R||"()")[0]==="("?this.isAfter(g,N):!this.isBefore(g,N))&&(R[1]===")"?this.isBefore(E,N):!this.isAfter(E,N))},H.isSame=function(N,E){var N=C(N)?N:Me(N);return!(!this.isValid()||!N.isValid())&&((E=q(E)||"millisecond")==="millisecond"?this.valueOf()===N.valueOf():(N=N.valueOf(),this.clone().startOf(E).valueOf()<=N&&N<=this.clone().endOf(E).valueOf()))},H.isSameOrAfter=function(g,E){return this.isSame(g,E)||this.isAfter(g,E)},H.isSameOrBefore=function(g,E){return this.isSame(g,E)||this.isBefore(g,E)},H.isValid=function(){return _(this)},H.lang=Nt,H.locale=dB,H.localeData=fB,H.max=Mt,H.min=Dt,H.parsingFlags=function(){return d({},m(this))},H.set=function(g,E){if(typeof g=="object")for(var N=function(ht){var vt,St=[];for(vt in ht)o(ht,vt)&&St.push({unit:vt,priority:ut[vt]});return St.sort(function(zt,It){return zt.priority-It.priority}),St}(g=it(g)),R=N.length,Z=0;Z<R;Z++)this[N[Z].unit](g[N[Z].unit]);else if(M(this[g=q(g)]))return this[g](E);return this},H.startOf=function(g){var E,N;if((g=q(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(N=this._isUTC?yB:gB,g){case"year":E=N(this.year(),0,1);break;case"quarter":E=N(this.year(),this.month()-this.month()%3,1);break;case"month":E=N(this.year(),this.month(),1);break;case"week":E=N(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":E=N(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":E=N(this.year(),this.month(),this.date());break;case"hour":E=this._d.valueOf(),E-=_c(E+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":E=this._d.valueOf(),E-=_c(E,6e4);break;case"second":E=this._d.valueOf(),E-=_c(E,1e3);break}return this._d.setTime(E),r.updateOffset(this,!0),this},H.subtract=Ye,H.toArray=function(){var g=this;return[g.year(),g.month(),g.date(),g.hour(),g.minute(),g.second(),g.millisecond()]},H.toObject=function(){var g=this;return{years:g.year(),months:g.month(),date:g.date(),hours:g.hours(),minutes:g.minutes(),seconds:g.seconds(),milliseconds:g.milliseconds()}},H.toDate=function(){return new Date(this.valueOf())},H.toISOString=function(g){if(!this.isValid())return null;var E=(g=g!==!0)?this.clone().utc():this;return E.year()<0||9999<E.year()?rt(E,g?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?g?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",rt(E,"Z")):rt(E,g?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},H.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var g,E="moment",N="";return this.isLocal()||(E=this.utcOffset()===0?"moment.utc":"moment.parseZone",N="Z"),E="["+E+'("]',g=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(E+g+"-MM-DD[T]HH:mm:ss.SSS"+(N+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(H[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),H.toJSON=function(){return this.isValid()?this.toISOString():null},H.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},H.unix=function(){return Math.floor(this.valueOf()/1e3)},H.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},H.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},H.eraName=function(){for(var g,E=this.localeData().eras(),N=0,R=E.length;N<R;++N)if(g=this.clone().startOf("day").valueOf(),E[N].since<=g&&g<=E[N].until||E[N].until<=g&&g<=E[N].since)return E[N].name;return""},H.eraNarrow=function(){for(var g,E=this.localeData().eras(),N=0,R=E.length;N<R;++N)if(g=this.clone().startOf("day").valueOf(),E[N].since<=g&&g<=E[N].until||E[N].until<=g&&g<=E[N].since)return E[N].narrow;return""},H.eraAbbr=function(){for(var g,E=this.localeData().eras(),N=0,R=E.length;N<R;++N)if(g=this.clone().startOf("day").valueOf(),E[N].since<=g&&g<=E[N].until||E[N].until<=g&&g<=E[N].since)return E[N].abbr;return""},H.eraYear=function(){for(var g,E,N=this.localeData().eras(),R=0,Z=N.length;R<Z;++R)if(g=N[R].since<=N[R].until?1:-1,E=this.clone().startOf("day").valueOf(),N[R].since<=E&&E<=N[R].until||N[R].until<=E&&E<=N[R].since)return(this.year()-r(N[R].since).year())*g+N[R].offset;return this.year()},H.year=Md,H.isLeapYear=function(){return j(this.year())},H.weekYear=function(g){return mB.call(this,g,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},H.isoWeekYear=function(g){return mB.call(this,g,this.isoWeek(),this.isoWeekday(),1,4)},H.quarter=H.quarters=function(g){return g==null?Math.ceil((this.month()+1)/3):this.month(3*(g-1)+this.month()%3)},H.month=fe,H.daysInMonth=function(){return ie(this.year(),this.month())},H.week=H.weeks=function(g){var E=this.localeData().week(this);return g==null?E:this.add(7*(g-E),"d")},H.isoWeek=H.isoWeeks=function(g){var E=lr(this,1,4).week;return g==null?E:this.add(7*(g-E),"d")},H.weeksInYear=function(){var g=this.localeData()._week;return cn(this.year(),g.dow,g.doy)},H.weeksInWeekYear=function(){var g=this.localeData()._week;return cn(this.weekYear(),g.dow,g.doy)},H.isoWeeksInYear=function(){return cn(this.year(),1,4)},H.isoWeeksInISOWeekYear=function(){return cn(this.isoWeekYear(),1,4)},H.date=co,H.day=H.days=function(g){if(!this.isValid())return g!=null?this:NaN;var E,N,R=this._isUTC?this._d.getUTCDay():this._d.getDay();return g!=null?(E=g,N=this.localeData(),g=typeof E!="string"?E:isNaN(E)?typeof(E=N.weekdaysParse(E))=="number"?E:null:parseInt(E,10),this.add(g-R,"d")):R},H.weekday=function(g){if(!this.isValid())return g!=null?this:NaN;var E=(this.day()+7-this.localeData()._week.dow)%7;return g==null?E:this.add(g-E,"d")},H.isoWeekday=function(g){return this.isValid()?g!=null?(E=g,N=this.localeData(),N=typeof E=="string"?N.weekdaysParse(E)%7||7:isNaN(E)?null:E,this.day(this.day()%7?N:N-7)):this.day()||7:g!=null?this:NaN;var E,N},H.dayOfYear=function(g){var E=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return g==null?E:this.add(g-E,"d")},H.hour=H.hours=kt,H.minute=H.minutes=Jo,H.second=H.seconds=oo,H.millisecond=H.milliseconds=so,H.utcOffset=function(g,E,N){var R,Z=this._offset||0;if(!this.isValid())return g!=null?this:NaN;if(g==null)return this._isUTC?Z:c5(this);if(typeof g=="string"){if((g=Ar(Tt,g))===null)return this}else Math.abs(g)<16&&!N&&(g*=60);return!this._isUTC&&E&&(R=c5(this)),this._offset=g,this._isUTC=!0,R!=null&&this.add(R,"m"),Z!==g&&(!E||this._changeInProgress?uB(this,mi(g-Z,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this},H.utc=function(g){return this.utcOffset(0,g)},H.local=function(g){return this._isUTC&&(this.utcOffset(0,g),this._isUTC=!1,g&&this.subtract(c5(this),"m")),this},H.parseZone=function(){var g;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((g=Ar(mt,this._i))!=null?this.utcOffset(g):this.utcOffset(0,!0)),this},H.hasAlignedHourOffset=function(g){return!!this.isValid()&&(g=g?Me(g).utcOffset():0,(this.utcOffset()-g)%60==0)},H.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},H.isLocal=function(){return!!this.isValid()&&!this._isUTC},H.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},H.isUtc=sB,H.isUTC=sB,H.zoneAbbr=function(){return this._isUTC?"UTC":""},H.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},H.dates=S("dates accessor is deprecated. Use date instead.",co),H.months=S("months accessor is deprecated. Use month instead",fe),H.years=S("years accessor is deprecated. Use year instead",Md),H.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(g,E){return g!=null?(this.utcOffset(g=typeof g!="string"?-g:g,E),this):-this.utcOffset()}),H.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var g,E={};return x(E,this),(E=Rn(E))._a?(g=(E._isUTC?p:Me)(E._a),this._isDSTShifted=this.isValid()&&0<function(N,R,Z){for(var ht=Math.min(N.length,R.length),vt=Math.abs(N.length-R.length),St=0,zt=0;zt<ht;zt++)(Z&&N[zt]!==R[zt]||!Z&&X(N[zt])!==X(R[zt]))&&St++;return St+vt}(E._a,g.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),le=I.prototype;function Ad(g,E,N,ht){var Z=Bt(),ht=p().set(ht,E);return Z[N](ht,g)}function _B(g,E,N){if(u(g)&&(E=g,g=void 0),g=g||"",E!=null)return Ad(g,E,N,"month");for(var R=[],Z=0;Z<12;Z++)R[Z]=Ad(g,Z,N,"month");return R}function h5(g,E,N,R){E=(typeof g=="boolean"?u(E)&&(N=E,E=void 0):(E=g,g=!1,u(N=E)&&(N=E,E=void 0)),E||"");var Z,ht=Bt(),vt=g?ht._week.dow:0,St=[];if(N!=null)return Ad(E,(N+vt)%7,R,"day");for(Z=0;Z<7;Z++)St[Z]=Ad(E,(Z+vt)%7,R,"day");return St}le.calendar=function(g,E,N){return M(g=this._calendar[g]||this._calendar.sameElse)?g.call(E,N):g},le.longDateFormat=function(g){var E=this._longDateFormat[g],N=this._longDateFormat[g.toUpperCase()];return E||!N?E:(this._longDateFormat[g]=N.match(F).map(function(R){return R==="MMMM"||R==="MM"||R==="DD"||R==="dddd"?R.slice(1):R}).join(""),this._longDateFormat[g])},le.invalidDate=function(){return this._invalidDate},le.ordinal=function(g){return this._ordinal.replace("%d",g)},le.preparse=bB,le.postformat=bB,le.relativeTime=function(g,E,N,R){var Z=this._relativeTime[N];return M(Z)?Z(g,E,N,R):Z.replace(/%d/i,g)},le.pastFuture=function(g,E){return M(g=this._relativeTime[0<g?"future":"past"])?g(E):g.replace(/%s/i,E)},le.set=function(g){var E,N;for(N in g)o(g,N)&&(M(E=g[N])?this[N]=E:this["_"+N]=E);this._config=g,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},le.eras=function(g,E){for(var N,R=this._eras||Bt("en")._eras,Z=0,ht=R.length;Z<ht;++Z){switch(typeof R[Z].since){case"string":N=r(R[Z].since).startOf("day"),R[Z].since=N.valueOf();break}switch(typeof R[Z].until){case"undefined":R[Z].until=1/0;break;case"string":N=r(R[Z].until).startOf("day").valueOf(),R[Z].until=N.valueOf();break}}return R},le.erasParse=function(g,E,N){var R,Z,ht,vt,St,zt=this.eras();for(g=g.toUpperCase(),R=0,Z=zt.length;R<Z;++R)if(ht=zt[R].name.toUpperCase(),vt=zt[R].abbr.toUpperCase(),St=zt[R].narrow.toUpperCase(),N)switch(E){case"N":case"NN":case"NNN":if(vt===g)return zt[R];break;case"NNNN":if(ht===g)return zt[R];break;case"NNNNN":if(St===g)return zt[R];break}else if(0<=[ht,vt,St].indexOf(g))return zt[R]},le.erasConvertYear=function(g,E){var N=g.since<=g.until?1:-1;return E===void 0?r(g.since).year():r(g.since).year()+(E-g.offset)*N},le.erasAbbrRegex=function(g){return o(this,"_erasAbbrRegex")||u5.call(this),g?this._erasAbbrRegex:this._erasRegex},le.erasNameRegex=function(g){return o(this,"_erasNameRegex")||u5.call(this),g?this._erasNameRegex:this._erasRegex},le.erasNarrowRegex=function(g){return o(this,"_erasNarrowRegex")||u5.call(this),g?this._erasNarrowRegex:this._erasRegex},le.months=function(g,E){return g?(i(this._months)?this._months:this._months[(this._months.isFormat||de).test(E)?"format":"standalone"])[g.month()]:i(this._months)?this._months:this._months.standalone},le.monthsShort=function(g,E){return g?(i(this._monthsShort)?this._monthsShort:this._monthsShort[de.test(E)?"format":"standalone"])[g.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},le.monthsParse=function(g,E,N){var R,Z;if(this._monthsParseExact)return function(re,vt,St){var zt,It,ue,re=re.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],zt=0;zt<12;++zt)ue=p([2e3,zt]),this._shortMonthsParse[zt]=this.monthsShort(ue,"").toLocaleLowerCase(),this._longMonthsParse[zt]=this.months(ue,"").toLocaleLowerCase();return St?vt==="MMM"?(It=Xt.call(this._shortMonthsParse,re))!==-1?It:null:(It=Xt.call(this._longMonthsParse,re))!==-1?It:null:vt==="MMM"?(It=Xt.call(this._shortMonthsParse,re))!==-1||(It=Xt.call(this._longMonthsParse,re))!==-1?It:null:(It=Xt.call(this._longMonthsParse,re))!==-1||(It=Xt.call(this._shortMonthsParse,re))!==-1?It:null}.call(this,g,E,N);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),R=0;R<12;R++)if(Z=p([2e3,R]),N&&!this._longMonthsParse[R]&&(this._longMonthsParse[R]=new RegExp("^"+this.months(Z,"").replace(".","")+"$","i"),this._shortMonthsParse[R]=new RegExp("^"+this.monthsShort(Z,"").replace(".","")+"$","i")),N||this._monthsParse[R]||(Z="^"+this.months(Z,"")+"|^"+this.monthsShort(Z,""),this._monthsParse[R]=new RegExp(Z.replace(".",""),"i")),N&&E==="MMMM"&&this._longMonthsParse[R].test(g)||N&&E==="MMM"&&this._shortMonthsParse[R].test(g)||!N&&this._monthsParse[R].test(g))return R},le.monthsRegex=function(g){return this._monthsParseExact?(o(this,"_monthsRegex")||ye.call(this),g?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Gt),this._monthsStrictRegex&&g?this._monthsStrictRegex:this._monthsRegex)},le.monthsShortRegex=function(g){return this._monthsParseExact?(o(this,"_monthsRegex")||ye.call(this),g?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=be),this._monthsShortStrictRegex&&g?this._monthsShortStrictRegex:this._monthsShortRegex)},le.week=function(g){return lr(g,this._week.dow,this._week.doy).week},le.firstDayOfYear=function(){return this._week.doy},le.firstDayOfWeek=function(){return this._week.dow},le.weekdays=function(g,E){return E=i(this._weekdays)?this._weekdays:this._weekdays[g&&g!==!0&&this._weekdays.isFormat.test(E)?"format":"standalone"],g===!0?Je(E,this._week.dow):g?E[g.day()]:E},le.weekdaysMin=function(g){return g===!0?Je(this._weekdaysMin,this._week.dow):g?this._weekdaysMin[g.day()]:this._weekdaysMin},le.weekdaysShort=function(g){return g===!0?Je(this._weekdaysShort,this._week.dow):g?this._weekdaysShort[g.day()]:this._weekdaysShort},le.weekdaysParse=function(g,E,N){var R,Z;if(this._weekdaysParseExact)return function(re,vt,St){var zt,It,ue,re=re.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],zt=0;zt<7;++zt)ue=p([2e3,1]).day(zt),this._minWeekdaysParse[zt]=this.weekdaysMin(ue,"").toLocaleLowerCase(),this._shortWeekdaysParse[zt]=this.weekdaysShort(ue,"").toLocaleLowerCase(),this._weekdaysParse[zt]=this.weekdays(ue,"").toLocaleLowerCase();return St?vt==="dddd"?(It=Xt.call(this._weekdaysParse,re))!==-1?It:null:vt==="ddd"?(It=Xt.call(this._shortWeekdaysParse,re))!==-1?It:null:(It=Xt.call(this._minWeekdaysParse,re))!==-1?It:null:vt==="dddd"?(It=Xt.call(this._weekdaysParse,re))!==-1||(It=Xt.call(this._shortWeekdaysParse,re))!==-1||(It=Xt.call(this._minWeekdaysParse,re))!==-1?It:null:vt==="ddd"?(It=Xt.call(this._shortWeekdaysParse,re))!==-1||(It=Xt.call(this._weekdaysParse,re))!==-1||(It=Xt.call(this._minWeekdaysParse,re))!==-1?It:null:(It=Xt.call(this._minWeekdaysParse,re))!==-1||(It=Xt.call(this._weekdaysParse,re))!==-1||(It=Xt.call(this._shortWeekdaysParse,re))!==-1?It:null}.call(this,g,E,N);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),R=0;R<7;R++)if(Z=p([2e3,1]).day(R),N&&!this._fullWeekdaysParse[R]&&(this._fullWeekdaysParse[R]=new RegExp("^"+this.weekdays(Z,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[R]=new RegExp("^"+this.weekdaysShort(Z,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[R]=new RegExp("^"+this.weekdaysMin(Z,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[R]||(Z="^"+this.weekdays(Z,"")+"|^"+this.weekdaysShort(Z,"")+"|^"+this.weekdaysMin(Z,""),this._weekdaysParse[R]=new RegExp(Z.replace(".",""),"i")),N&&E==="dddd"&&this._fullWeekdaysParse[R].test(g)||N&&E==="ddd"&&this._shortWeekdaysParse[R].test(g)||N&&E==="dd"&&this._minWeekdaysParse[R].test(g)||!N&&this._weekdaysParse[R].test(g))return R},le.weekdaysRegex=function(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),g?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=At),this._weekdaysStrictRegex&&g?this._weekdaysStrictRegex:this._weekdaysRegex)},le.weekdaysShortRegex=function(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Kt),this._weekdaysShortStrictRegex&&g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},le.weekdaysMinRegex=function(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ne),this._weekdaysMinStrictRegex&&g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},le.isPM=function(g){return(g+"").toLowerCase().charAt(0)==="p"},le.meridiem=function(g,E,N){return 11<g?N?"pm":"PM":N?"am":"AM"},Yt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(g){var E=g%10;return g+(X(g%100/10)===1?"th":E==1?"st":E==2?"nd":E==3?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",Yt),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",Bt);var xa=Math.abs;function vB(g,E,N,R){return E=mi(E,N),g._milliseconds+=R*E._milliseconds,g._days+=R*E._days,g._months+=R*E._months,g._bubble()}function xB(g){return g<0?Math.floor(g):Math.ceil(g)}function kB(g){return 4800*g/146097}function d5(g){return 146097*g/4800}function ka(g){return function(){return this.as(g)}}wt=ka("ms"),xt=ka("s"),se=ka("m"),Mt=ka("h"),Dt=ka("d"),Ye=ka("w"),kt=ka("M"),Jo=ka("Q"),oo=ka("y");function ts(g){return function(){return this.isValid()?this._data[g]:NaN}}var so=ts("milliseconds"),co=ts("seconds"),Md=ts("minutes"),le=ts("hours"),$ot=ts("days"),Pot=ts("months"),Yot=ts("years"),wa=Math.round,vc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function zot(g,E,N,R){var It=mi(g).abs(),ue=wa(It.as("s")),Z=wa(It.as("m")),ht=wa(It.as("h")),vt=wa(It.as("d")),St=wa(It.as("M")),zt=wa(It.as("w")),It=wa(It.as("y")),ue=(ue<=N.ss?["s",ue]:ue<N.s&&["ss",ue])||Z<=1&&["m"]||Z<N.m&&["mm",Z]||ht<=1&&["h"]||ht<N.h&&["hh",ht]||vt<=1&&["d"]||vt<N.d&&["dd",vt];return(ue=(ue=N.w!=null?ue||zt<=1&&["w"]||zt<N.w&&["ww",zt]:ue)||St<=1&&["M"]||St<N.M&&["MM",St]||It<=1&&["y"]||["yy",It])[2]=E,ue[3]=0<+g,ue[4]=R,function(re,tn,vn,bi,p5){return p5.relativeTime(tn||1,!!vn,re,bi)}.apply(null,ue)}var f5=Math.abs;function xc(g){return(0<g)-(g<0)||+g}function Ld(){if(!this.isValid())return this.localeData().invalidDate();var g,E,N,R,Z,ht,vt,St=f5(this._milliseconds)/1e3,zt=f5(this._days),It=f5(this._months),ue=this.asSeconds();return ue?(g=P(St/60),E=P(g/60),St%=60,g%=60,N=P(It/12),It%=12,R=St?St.toFixed(3).replace(/\.?0+$/,""):"",Z=xc(this._months)!==xc(ue)?"-":"",ht=xc(this._days)!==xc(ue)?"-":"",vt=xc(this._milliseconds)!==xc(ue)?"-":"",(ue<0?"-":"")+"P"+(N?Z+N+"Y":"")+(It?Z+It+"M":"")+(zt?ht+zt+"D":"")+(E||g||St?"T":"")+(E?vt+E+"H":"")+(g?vt+g+"M":"")+(St?vt+R+"S":"")):"P0D"}var Oe=va.prototype;return Oe.isValid=function(){return this._isValid},Oe.abs=function(){var g=this._data;return this._milliseconds=xa(this._milliseconds),this._days=xa(this._days),this._months=xa(this._months),g.milliseconds=xa(g.milliseconds),g.seconds=xa(g.seconds),g.minutes=xa(g.minutes),g.hours=xa(g.hours),g.months=xa(g.months),g.years=xa(g.years),this},Oe.add=function(g,E){return vB(this,g,E,1)},Oe.subtract=function(g,E){return vB(this,g,E,-1)},Oe.as=function(g){if(!this.isValid())return NaN;var E,N,R=this._milliseconds;if((g=q(g))==="month"||g==="quarter"||g==="year")switch(E=this._days+R/864e5,N=this._months+kB(E),g){case"month":return N;case"quarter":return N/3;case"year":return N/12}else switch(E=this._days+Math.round(d5(this._months)),g){case"week":return E/7+R/6048e5;case"day":return E+R/864e5;case"hour":return 24*E+R/36e5;case"minute":return 1440*E+R/6e4;case"second":return 86400*E+R/1e3;case"millisecond":return Math.floor(864e5*E)+R;default:throw new Error("Unknown unit "+g)}},Oe.asMilliseconds=wt,Oe.asSeconds=xt,Oe.asMinutes=se,Oe.asHours=Mt,Oe.asDays=Dt,Oe.asWeeks=Ye,Oe.asMonths=kt,Oe.asQuarters=Jo,Oe.asYears=oo,Oe.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*X(this._months/12):NaN},Oe._bubble=function(){var g=this._milliseconds,E=this._days,N=this._months,R=this._data;return 0<=g&&0<=E&&0<=N||g<=0&&E<=0&&N<=0||(g+=864e5*xB(d5(N)+E),N=E=0),R.milliseconds=g%1e3,g=P(g/1e3),R.seconds=g%60,g=P(g/60),R.minutes=g%60,g=P(g/60),R.hours=g%24,E+=P(g/24),N+=g=P(kB(E)),E-=xB(d5(g)),g=P(N/12),N%=12,R.days=E,R.months=N,R.years=g,this},Oe.clone=function(){return mi(this)},Oe.get=function(g){return g=q(g),this.isValid()?this[g+"s"]():NaN},Oe.milliseconds=so,Oe.seconds=co,Oe.minutes=Md,Oe.hours=le,Oe.days=$ot,Oe.weeks=function(){return P(this.days()/7)},Oe.months=Pot,Oe.years=Yot,Oe.humanize=function(g,E){if(!this.isValid())return this.localeData().invalidDate();var N=!1,R=vc;return typeof g=="object"&&(E=g,g=!1),typeof g=="boolean"&&(N=g),typeof E=="object"&&(R=Object.assign({},vc,E),E.s!=null&&E.ss==null&&(R.ss=E.s-1)),g=this.localeData(),E=zot(this,!N,R,g),N&&(E=g.pastFuture(+this,E)),g.postformat(E)},Oe.toISOString=Ld,Oe.toString=Ld,Oe.toJSON=Ld,Oe.locale=dB,Oe.localeData=fB,Oe.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ld),Oe.lang=Nt,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),st("x",bt),st("X",/[+-]?\d+(\.\d{1,3})?/),qt("X",function(g,E,N){N._d=new Date(1e3*parseFloat(g))}),qt("x",function(g,E,N){N._d=new Date(X(g))}),r.version="2.29.4",n=Me,r.fn=H,r.min=function(){return mc("isBefore",[].slice.call(arguments,0))},r.max=function(){return mc("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=p,r.unix=function(g){return Me(1e3*g)},r.months=function(g,E){return _B(g,E,"months")},r.isDate=h,r.locale=Yt,r.invalid=y,r.duration=mi,r.isMoment=C,r.weekdays=function(g,E,N){return h5(g,E,N,"weekdays")},r.parseZone=function(){return Me.apply(null,arguments).parseZone()},r.localeData=Bt,r.isDuration=xr,r.monthsShort=function(g,E){return _B(g,E,"monthsShort")},r.weekdaysMin=function(g,E,N){return h5(g,E,N,"weekdaysMin")},r.defineLocale=ce,r.updateLocale=function(g,E){var N,R;return E!=null?(R=io,Ae[g]!=null&&Ae[g].parentLocale!=null?Ae[g].set(w(Ae[g]._config,E)):(E=w(R=(N=ur(g))!=null?N._config:R,E),N==null&&(E.abbr=g),(R=new I(E)).parentLocale=Ae[g],Ae[g]=R),Yt(g)):Ae[g]!=null&&(Ae[g].parentLocale!=null?(Ae[g]=Ae[g].parentLocale,g===Yt()&&Yt(g)):Ae[g]!=null&&delete Ae[g]),Ae[g]},r.locales=function(){return B(Ae)},r.weekdaysShort=function(g,E,N){return h5(g,E,N,"weekdaysShort")},r.normalizeUnits=q,r.relativeTimeRounding=function(g){return g===void 0?wa:typeof g=="function"&&(wa=g,!0)},r.relativeTimeThreshold=function(g,E){return vc[g]!==void 0&&(E===void 0?vc[g]:(vc[g]=E,g==="s"&&(vc.ss=E-1),!0))},r.calendarFormat=function(g,E){return(g=g.diff(E,"days",!0))<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"},r.prototype=H,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})})(m5);const Gr=m5.exports,Wi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},W={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},Nd=function(t="fatal"){let e=Wi.fatal;typeof t=="string"?(t=t.toLowerCase(),t in Wi&&(e=Wi[t])):typeof t=="number"&&(e=t),W.trace=()=>{},W.debug=()=>{},W.info=()=>{},W.warn=()=>{},W.error=()=>{},W.fatal=()=>{},e<=Wi.fatal&&(W.fatal=console.error?console.error.bind(console,Mr("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Mr("FATAL"))),e<=Wi.error&&(W.error=console.error?console.error.bind(console,Mr("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Mr("ERROR"))),e<=Wi.warn&&(W.warn=console.warn?console.warn.bind(console,Mr("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Mr("WARN"))),e<=Wi.info&&(W.info=console.info?console.info.bind(console,Mr("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Mr("INFO"))),e<=Wi.debug&&(W.debug=console.debug?console.debug.bind(console,Mr("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Mr("DEBUG"))),e<=Wi.trace&&(W.trace=console.debug?console.debug.bind(console,Mr("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Mr("TRACE")))},Mr=t=>`%c${Gr().format("ss.SSS")} : ${t} : `;var Dd={};Object.defineProperty(Dd,"__esModule",{value:!0});var _i=Dd.sanitizeUrl=void 0,TB=/^([^\w]*)(javascript|data|vbscript)/im,EB=/&#(\w+)(^\w|;)?/g,CB=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,SB=/^([^:]+):/gm,AB=[".","/"];function MB(t){return AB.indexOf(t[0])>-1}function LB(t){return t.replace(EB,function(e,n){return String.fromCharCode(n)})}function BB(t){var e=LB(t||"").replace(CB,"").trim();if(!e)return"about:blank";if(MB(e))return e;var n=e.match(SB);if(!n)return e;var r=n[0];return TB.test(r)?"about:blank":e}_i=Dd.sanitizeUrl=BB;function Ze(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function b5(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Eu(t){let e,n,r;t.length!==2?(e=Ze,n=(s,l)=>Ze(t(s),l),r=(s,l)=>t(s)-l):(e=t===Ze||t===b5?t:NB,n=t,r=t);function i(s,l,u=0,h=s.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(s[f],l)<0?u=f+1:h=f}while(u<h)}return u}function a(s,l,u=0,h=s.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(s[f],l)<=0?u=f+1:h=f}while(u<h)}return u}function o(s,l,u=0,h=s.length){const f=i(s,l,u,h-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function NB(){return 0}function _5(t){return t===null?NaN:+t}function*v5(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const x5=Eu(Ze),k5=x5.right,DB=x5.left,OB=Eu(_5).center,lo=k5;function IB(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=Od(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const w5=T5(Od),RB=T5(FB);function T5(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const s=n&&t(n),l=r&&t(r),u=i.slice();return s&&l?(ns(s,u,i,a,o),ns(s,i,u,a,o),ns(s,u,i,a,o),rs(l,i,u,a,o),rs(l,u,i,a,o),rs(l,i,u,a,o)):s?(ns(s,i,u,a,o),ns(s,u,i,a,o),ns(s,i,u,a,o)):l&&(rs(l,i,u,a,o),rs(l,u,i,a,o),rs(l,i,u,a,o)),e}}function ns(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function rs(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function FB(t){const e=Od(t);return(n,r,i,a,o)=>{i<<=2,a<<=2,o<<=2,e(n,r,i+0,a+0,o),e(n,r,i+1,a+1,o),e(n,r,i+2,a+2,o),e(n,r,i+3,a+3,o)}}function Od(t){const e=Math.floor(t);if(e===t)return $B(t);const n=t-e,r=2*t+1;return(i,a,o,s,l)=>{if(!((s-=l)>=o))return;let u=e*a[o];const h=l*e,f=h+l;for(let d=o,p=o+h;d<p;d+=l)u+=a[Math.min(s,d)];for(let d=o,p=s;d<=p;d+=l)u+=a[Math.min(s,d+h)],i[d]=(u+n*(a[Math.max(o,d-f)]+a[Math.min(s,d+f)]))/r,u-=a[Math.max(o,d-h)]}}function $B(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*r[i];const l=o*t;for(let u=i,h=i+l;u<h;u+=o)s+=r[Math.min(a,u)];for(let u=i,h=a;u<=h;u+=o)s+=r[Math.min(a,u+l)],n[u]=s/e,s-=r[Math.max(i,u-l)]}}function Cu(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function PB(t){return t.length|0}function YB(t){return!(t>0)}function zB(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function jB(t){return e=>t(...e)}function UB(...t){const e=typeof t[t.length-1]=="function"&&jB(t.pop());t=t.map(zB);const n=t.map(PB),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(YB))return a;for(;;){a.push(i.map((s,l)=>t[l][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}}function HB(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function E5(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function C5(t,e){const n=E5(t,e);return n&&Math.sqrt(n)}function wc(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class xn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function WB(t,e){const n=new xn;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function VB(t,e){const n=new xn;let r=-1;return Float64Array.from(t,e===void 0?i=>n.add(+i||0):i=>n.add(+e(i,++r,t)||0))}class Tc extends Map{constructor(e,n=M5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Id(this,e))}has(e){return super.has(Id(this,e))}set(e,n){return super.set(S5(this,e),n)}delete(e){return super.delete(A5(this,e))}}class uo extends Set{constructor(e,n=M5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Id(this,e))}add(e){return super.add(S5(this,e))}delete(e){return super.delete(A5(this,e))}}function Id({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function S5({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function A5({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function M5(t){return t!==null&&typeof t=="object"?t.valueOf():t}function is(t){return t}function L5(t,...e){return as(t,is,is,e)}function B5(t,...e){return as(t,Array.from,is,e)}function N5(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function GB(t,...e){return N5(B5(t,...e),e)}function qB(t,e,...n){return N5(O5(t,e,...n),n)}function D5(t,e,...n){return as(t,is,e,n)}function O5(t,e,...n){return as(t,Array.from,e,n)}function XB(t,...e){return as(t,is,I5,e)}function ZB(t,...e){return as(t,Array.from,I5,e)}function I5(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function as(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new Tc,l=r[o++];let u=-1;for(const h of a){const f=l(h,++u,a),d=s.get(f);d?d.push(h):s.set(f,[h])}for(const[h,f]of s)s.set(h,i(f,o));return e(s)}(t,0)}function R5(t,e){return Array.from(e,n=>t[n])}function Rd(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const s=os(o[i],o[a]);if(s)return s}})):(n=t.map(n),r.sort((i,a)=>os(n[i],n[a]))),R5(t,r)}return t.sort(Fd(n))}function Fd(t=Ze){if(t===Ze)return os;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function os(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function QB(t,e,n){return(e.length!==2?Rd(D5(t,e,n),([r,i],[a,o])=>Ze(i,o)||Ze(r,a)):Rd(L5(t,n),([r,i],[a,o])=>e(i,o)||Ze(r,a))).map(([r])=>r)}var KB=Array.prototype,JB=KB.slice;function Su(t){return()=>t}var $d=Math.sqrt(50),Pd=Math.sqrt(10),Yd=Math.sqrt(2);function ho(t,e,n){var r,i=-1,a,o,s;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),(s=ss(t,e,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(t/s),u=Math.round(e/s);for(l*s<t&&++l,u*s>e&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)*s}else{s=-s;let l=Math.round(t*s),u=Math.round(e*s);for(l/s<t&&++l,u/s>e&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)/s}return r&&o.reverse(),o}function ss(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=$d?10:a>=Pd?5:a>=Yd?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=$d?10:a>=Pd?5:a>=Yd?2:1)}function Ec(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=$d?i*=10:a>=Pd?i*=5:a>=Yd&&(i*=2),e<t?-i:i}function F5(t,e,n){let r;for(;;){const i=ss(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function zd(t){return Math.ceil(Math.log(Cu(t))/Math.LN2)+1}function $5(){var t=is,e=wc,n=zd;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var h=e(u),f=h[0],d=h[1],p=n(u,f,d);if(!Array.isArray(p)){const b=d,k=+p;if(e===wc&&([f,d]=F5(f,d,k)),p=ho(f,d,k),p[0]<=f&&(l=ss(f,d,k)),p[p.length-1]>=d)if(b>=d&&e===wc){const T=ss(f,d,k);isFinite(T)&&(T>0?d=(Math.floor(d/T)+1)*T:T<0&&(d=(Math.ceil(d*-T)+1)/-T))}else p.pop()}for(var m=p.length;p[0]<=f;)p.shift(),--m;for(;p[m-1]>d;)p.pop(),--m;var _=new Array(m+1),y;for(a=0;a<=m;++a)y=_[a]=[],y.x0=a>0?p[a-1]:f,y.x1=a<m?p[a]:d;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=d&&_[Math.min(m,Math.floor((s-f)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&f<=s&&s<=d){const b=Math.floor((f-s)*l);_[Math.min(m,b+(p[b]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=d&&_[lo(p,s,0,m)].push(i[a]);return _}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Su(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Su([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?Su(JB.call(i)):Su(i),r):n},r}function cs(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function jd(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Cc(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Ud(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Au(t,e,n=0,r=t.length-1,i){for(i=i===void 0?os:Fd(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,h=Math.log(l),f=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(e-u*f/l+d)),m=Math.min(r,Math.floor(e+(l-u)*f/l+d));Au(t,e,p,m,i)}const a=t[e];let o=n,s=r;for(Sc(t,n,e),i(t[r],a)>0&&Sc(t,n,r);o<s;){for(Sc(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?Sc(t,n,s):(++s,Sc(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Sc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function P5(t,e=Ze){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?Ze(o,i)>0:Ze(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Ac(t,e,n){if(t=Float64Array.from(v5(t,n)),!!(r=t.length)){if((e=+e)<=0||r<2)return Cc(t);if(e>=1)return cs(t);var r,i=(r-1)*e,a=Math.floor(i),o=cs(Au(t,a).subarray(0,a+1)),s=Cc(t.subarray(a+1));return o+(s-o)*(i-a)}}function Y5(t,e,n=_5){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function z5(t,e,n){if(t=Float64Array.from(v5(t,n)),!!(r=t.length)){if((e=+e)<=0||r<2)return Ud(t);if(e>=1)return jd(t);var r,i=Math.floor((r-1)*e),a=(s,l)=>os(t[s],t[l]),o=Au(Uint32Array.from(t,(s,l)=>l),i,0,r-1,a);return P5(o.subarray(0,i+1),s=>t[s])}}function tN(t,e,n){return Math.ceil((n-e)/(2*(Ac(t,.75)-Ac(t,.25))*Math.pow(Cu(t),-1/3)))}function eN(t,e,n){return Math.ceil((n-e)*Math.cbrt(Cu(t))/(3.49*C5(t)))}function nN(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function rN(t,e){return Ac(t,.5,e)}function iN(t,e){return z5(t,.5,e)}function*aN(t){for(const e of t)yield*e}function Hd(t){return Array.from(aN(t))}function oN(t,e){const n=new Tc;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function sN(t,e=cN){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function cN(t,e){return[t,e]}function Ea(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function lN(t,e=Ze){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=Ze);const i=(s,l)=>e(n[s],n[l]);let a,o;return Uint32Array.from(n,(s,l)=>l).sort(e===Ze?(s,l)=>os(n[s],n[l]):Fd(i)).forEach((s,l)=>{const u=i(s,a===void 0?s:a);u>=0?((a===void 0||u>0)&&(a=s,o=l),r[s]=o):r[s]=NaN}),r}function uN(t,e=Ze){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?Ze(o,i)<0:Ze(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)<0:e(i,i)===0)&&(n=i,r=!0);return n}function j5(t,e=Ze){if(e.length===1)return Ud(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)<0)&&(n=a,r=i);return r}function hN(t,e=Ze){if(e.length===1)return jd(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)>0)&&(n=a,r=i);return r}function dN(t,e){const n=j5(t,e);return n<0?void 0:n}const fN=U5(Math.random);function U5(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const a=t()*i--|0,o=e[i+n];e[i+n]=e[a+n],e[a+n]=o}return e}}function pN(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function H5(t){if(!(a=t.length))return[];for(var e=-1,n=Cc(t,gN),r=new Array(n);++e<n;)for(var i=-1,a,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r}function gN(t){return t.length}function yN(){return H5(arguments)}function mN(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function bN(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function _N(t,e){if(typeof e!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function vN(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function xN(t,e,n){if(typeof e!="function")throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++o}for(;{done:i,value:a}=r.next(),!i;)n=e(n,a,++o,t);return n}function kN(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function wN(t,...e){t=new uo(t);for(const n of e)for(const r of n)t.delete(r);return t}function TN(t,e){const n=e[Symbol.iterator](),r=new uo;for(const i of t){if(r.has(i))return!1;let a,o;for(;({value:a,done:o}=n.next())&&!o;){if(Object.is(i,a))return!1;r.add(a)}}return!0}function EN(t,...e){t=new uo(t),e=e.map(CN);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function CN(t){return t instanceof uo?t:new uo(t)}function W5(t,e){const n=t[Symbol.iterator](),r=new Set;for(const i of e){const a=V5(i);if(r.has(a))continue;let o,s;for(;{value:o,done:s}=n.next();){if(s)return!1;const l=V5(o);if(r.add(l),Object.is(a,l))break}}return!0}function V5(t){return t!==null&&typeof t=="object"?t.valueOf():t}function SN(t,e){return W5(e,t)}function AN(...t){const e=new uo;for(const n of t)for(const r of n)e.add(r);return e}function MN(t){return t}var Mu=1,Lu=2,Wd=3,Mc=4,G5=1e-6;function LN(t){return"translate("+t+",0)"}function BN(t){return"translate(0,"+t+")"}function NN(t){return e=>+t(e)}function DN(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ON(){return!this.__axis}function Bu(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Mu||t===Mc?-1:1,h=t===Mc||t===Lu?"x":"y",f=t===Mu||t===Wd?LN:BN;function d(p){var m=r==null?e.ticks?e.ticks.apply(e,n):e.domain():r,_=i==null?e.tickFormat?e.tickFormat.apply(e,n):MN:i,y=Math.max(a,0)+s,b=e.range(),k=+b[0]+l,T=+b[b.length-1]+l,x=(e.bandwidth?DN:NN)(e.copy(),l),A=p.selection?p.selection():p,C=A.selectAll(".domain").data([null]),L=A.selectAll(".tick").data(m,e).order(),S=L.exit(),D=L.enter().append("g").attr("class","tick"),v=L.select("line"),M=L.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(D),v=v.merge(D.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),M=M.merge(D.append("text").attr("fill","currentColor").attr(h,u*y).attr("dy",t===Mu?"0em":t===Wd?"0.71em":"0.32em")),p!==A&&(C=C.transition(p),L=L.transition(p),v=v.transition(p),M=M.transition(p),S=S.transition(p).attr("opacity",G5).attr("transform",function(w){return isFinite(w=x(w))?f(w+l):this.getAttribute("transform")}),D.attr("opacity",G5).attr("transform",function(w){var I=this.parentNode.__axis;return f((I&&isFinite(I=I(w))?I:x(w))+l)})),S.remove(),C.attr("d",t===Mc||t===Lu?o?"M"+u*o+","+k+"H"+l+"V"+T+"H"+u*o:"M"+l+","+k+"V"+T:o?"M"+k+","+u*o+"V"+l+"H"+T+"V"+u*o:"M"+k+","+l+"H"+T),L.attr("opacity",1).attr("transform",function(w){return f(x(w)+l)}),v.attr(h+"2",u*a),M.attr(h,u*y).text(_),A.filter(ON).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Lu?"start":t===Mc?"end":"middle"),A.each(function(){this.__axis=x})}return d.scale=function(p){return arguments.length?(e=p,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),d):n.slice()},d.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),d):r&&r.slice()},d.tickFormat=function(p){return arguments.length?(i=p,d):i},d.tickSize=function(p){return arguments.length?(a=o=+p,d):a},d.tickSizeInner=function(p){return arguments.length?(a=+p,d):a},d.tickSizeOuter=function(p){return arguments.length?(o=+p,d):o},d.tickPadding=function(p){return arguments.length?(s=+p,d):s},d.offset=function(p){return arguments.length?(l=+p,d):l},d}function q5(t){return Bu(Mu,t)}function IN(t){return Bu(Lu,t)}function X5(t){return Bu(Wd,t)}function RN(t){return Bu(Mc,t)}var FN={value:()=>{}};function fo(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nu(n)}function Nu(t){this._=t}function $N(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Nu.prototype=fo.prototype={constructor:Nu,on:function(t,e){var n=this._,r=$N(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=PN(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Z5(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Z5(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nu(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function PN(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Z5(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=FN,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Vd="http://www.w3.org/1999/xhtml";const Gd={svg:"http://www.w3.org/2000/svg",xhtml:Vd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lc(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Gd.hasOwnProperty(e)?{space:Gd[e],local:t}:t}function YN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Vd&&e.documentElement.namespaceURI===Vd?e.createElement(t):e.createElementNS(n,t)}}function zN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Du(t){var e=Lc(t);return(e.local?zN:YN)(e)}function jN(){}function Ou(t){return t==null?jN:function(){return this.querySelector(t)}}function UN(t){typeof t!="function"&&(t=Ou(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,h=0;h<o;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),s[h]=u);return new Gn(r,this._parents)}function Q5(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function HN(){return[]}function qd(t){return t==null?HN:function(){return this.querySelectorAll(t)}}function WN(t){return function(){return Q5(t.apply(this,arguments))}}function VN(t){typeof t=="function"?t=WN(t):t=qd(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new Gn(r,i)}function Xd(t){return function(){return this.matches(t)}}function K5(t){return function(e){return e.matches(t)}}var GN=Array.prototype.find;function qN(t){return function(){return GN.call(this.children,t)}}function XN(){return this.firstElementChild}function ZN(t){return this.select(t==null?XN:qN(typeof t=="function"?t:K5(t)))}var QN=Array.prototype.filter;function KN(){return Array.from(this.children)}function JN(t){return function(){return QN.call(this.children,t)}}function tD(t){return this.selectAll(t==null?KN:JN(typeof t=="function"?t:K5(t)))}function eD(t){typeof t!="function"&&(t=Xd(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new Gn(r,this._parents)}function J5(t){return new Array(t.length)}function nD(){return new Gn(this._enter||this._groups.map(J5),this._parents)}function Iu(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Iu.prototype={constructor:Iu,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function rD(t){return function(){return t}}function iD(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Iu(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function aD(t,e,n,r,i,a,o){var s,l,u=new Map,h=e.length,f=a.length,d=new Array(h),p;for(s=0;s<h;++s)(l=e[s])&&(d[s]=p=o.call(l,l.__data__,s,e)+"",u.has(p)?i[s]=l:u.set(p,l));for(s=0;s<f;++s)p=o.call(t,a[s],s,a)+"",(l=u.get(p))?(r[s]=l,l.__data__=a[s],u.delete(p)):n[s]=new Iu(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&u.get(d[s])===l&&(i[s]=l)}function oD(t){return t.__data__}function sD(t,e){if(!arguments.length)return Array.from(this,oD);var n=e?aD:iD,r=this._parents,i=this._groups;typeof t!="function"&&(t=rD(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var h=r[u],f=i[u],d=f.length,p=cD(t.call(h,h&&h.__data__,u,r)),m=p.length,_=s[u]=new Array(m),y=o[u]=new Array(m),b=l[u]=new Array(d);n(h,f,_,y,b,p,e);for(var k=0,T=0,x,A;k<m;++k)if(x=_[k]){for(k>=T&&(T=k+1);!(A=y[T])&&++T<m;);x._next=A||null}}return o=new Gn(o,r),o._enter=s,o._exit=l,o}function cD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lD(){return new Gn(this._exit||this._groups.map(J5),this._parents)}function uD(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function hD(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],h=r[l],f=u.length,d=s[l]=new Array(f),p,m=0;m<f;++m)(p=u[m]||h[m])&&(d[m]=p);for(;l<i;++l)s[l]=n[l];return new Gn(s,this._parents)}function dD(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function fD(t){t||(t=pD);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,h=0;h<s;++h)(u=o[h])&&(l[h]=u);l.sort(e)}return new Gn(i,this._parents).order()}function pD(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gD(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function yD(){return Array.from(this)}function mD(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function bD(){let t=0;for(const e of this)++t;return t}function _D(){return!this.node()}function vD(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function xD(t){return function(){this.removeAttribute(t)}}function kD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wD(t,e){return function(){this.setAttribute(t,e)}}function TD(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ED(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function CD(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function SD(t,e){var n=Lc(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?kD:xD:typeof e=="function"?n.local?CD:ED:n.local?TD:wD)(n,e))}function Zd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function AD(t){return function(){this.style.removeProperty(t)}}function MD(t,e,n){return function(){this.style.setProperty(t,e,n)}}function LD(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function BD(t,e,n){return arguments.length>1?this.each((e==null?AD:typeof e=="function"?LD:MD)(t,e,n==null?"":n)):po(this.node(),t)}function po(t,e){return t.style.getPropertyValue(e)||Zd(t).getComputedStyle(t,null).getPropertyValue(e)}function ND(t){return function(){delete this[t]}}function DD(t,e){return function(){this[t]=e}}function OD(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ID(t,e){return arguments.length>1?this.each((e==null?ND:typeof e=="function"?OD:DD)(t,e)):this.node()[t]}function t_(t){return t.trim().split(/^|\s+/)}function Qd(t){return t.classList||new e_(t)}function e_(t){this._node=t,this._names=t_(t.getAttribute("class")||"")}e_.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function n_(t,e){for(var n=Qd(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function r_(t,e){for(var n=Qd(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function RD(t){return function(){n_(this,t)}}function FD(t){return function(){r_(this,t)}}function $D(t,e){return function(){(e.apply(this,arguments)?n_:r_)(this,t)}}function PD(t,e){var n=t_(t+"");if(arguments.length<2){for(var r=Qd(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?$D:e?RD:FD)(n,e))}function YD(){this.textContent=""}function zD(t){return function(){this.textContent=t}}function jD(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function UD(t){return arguments.length?this.each(t==null?YD:(typeof t=="function"?jD:zD)(t)):this.node().textContent}function HD(){this.innerHTML=""}function WD(t){return function(){this.innerHTML=t}}function VD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function GD(t){return arguments.length?this.each(t==null?HD:(typeof t=="function"?VD:WD)(t)):this.node().innerHTML}function qD(){this.nextSibling&&this.parentNode.appendChild(this)}function XD(){return this.each(qD)}function ZD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function QD(){return this.each(ZD)}function KD(t){var e=typeof t=="function"?t:Du(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function JD(){return null}function tO(t,e){var n=typeof t=="function"?t:Du(t),r=e==null?JD:typeof e=="function"?e:Ou(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function eO(){var t=this.parentNode;t&&t.removeChild(this)}function nO(){return this.each(eO)}function rO(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function iO(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function aO(t){return this.select(t?iO:rO)}function oO(t){return arguments.length?this.property("__data__",t):this.node().__data__}function sO(t){return function(e){t.call(this,e,this.__data__)}}function cO(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function lO(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function uO(t,e,n){return function(){var r=this.__on,i,a=sO(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function hO(t,e,n){var r=cO(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,h;l<u;++l)for(i=0,h=s[l];i<a;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(s=e?uO:lO,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function i_(t,e,n){var r=Zd(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dO(t,e){return function(){return i_(this,t,e)}}function fO(t,e){return function(){return i_(this,t,e.apply(this,arguments))}}function pO(t,e){return this.each((typeof e=="function"?fO:dO)(t,e))}function*gO(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Kd=[null];function Gn(t,e){this._groups=t,this._parents=e}function go(){return new Gn([[document.documentElement]],Kd)}function yO(){return this}Gn.prototype=go.prototype={constructor:Gn,select:UN,selectAll:VN,selectChild:ZN,selectChildren:tD,filter:eD,data:sD,enter:nD,exit:lD,join:uD,merge:hD,selection:yO,order:dD,sort:fD,call:gD,nodes:yD,node:mD,size:bD,empty:_D,each:vD,attr:SD,style:BD,property:ID,classed:PD,text:UD,html:GD,raise:XD,lower:QD,append:KD,insert:tO,remove:nO,clone:aO,datum:oO,on:hO,dispatch:pO,[Symbol.iterator]:gO};function Lt(t){return typeof t=="string"?new Gn([[document.querySelector(t)]],[document.documentElement]):new Gn([[t]],Kd)}function mO(t){return Lt(Du(t).call(document.documentElement))}var bO=0;function a_(){return new Jd}function Jd(){this._="@"+(++bO).toString(36)}Jd.prototype=a_.prototype={constructor:Jd,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function o_(t){let e;for(;e=t.sourceEvent;)t=e;return t}function kr(t,e){if(t=o_(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function _O(t,e){return t.target&&(t=o_(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>kr(n,e))}function Ru(t){return typeof t=="string"?new Gn([document.querySelectorAll(t)],[document.documentElement]):new Gn([Q5(t)],Kd)}const vO={passive:!1},Bc={capture:!0,passive:!1};function tf(t){t.stopImmediatePropagation()}function ls(t){t.preventDefault(),t.stopImmediatePropagation()}function Fu(t){var e=t.document.documentElement,n=Lt(t).on("dragstart.drag",ls,Bc);"onselectstart"in e?n.on("selectstart.drag",ls,Bc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function $u(t,e){var n=t.document.documentElement,r=Lt(t).on("dragstart.drag",null);e&&(r.on("click.drag",ls,Bc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Pu=t=>()=>t;function ef(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}ef.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function xO(t){return!t.ctrlKey&&!t.button}function kO(){return this.parentNode}function wO(t,e){return e==null?{x:t.x,y:t.y}:e}function TO(){return navigator.maxTouchPoints||"ontouchstart"in this}function EO(){var t=xO,e=kO,n=wO,r=TO,i={},a=fo("start","drag","end"),o=0,s,l,u,h,f=0;function d(x){x.on("mousedown.drag",p).filter(r).on("touchstart.drag",y).on("touchmove.drag",b,vO).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(x,A){if(!(h||!t.call(this,x,A))){var C=T(this,e.call(this,x,A),x,A,"mouse");!C||(Lt(x.view).on("mousemove.drag",m,Bc).on("mouseup.drag",_,Bc),Fu(x.view),tf(x),u=!1,s=x.clientX,l=x.clientY,C("start",x))}}function m(x){if(ls(x),!u){var A=x.clientX-s,C=x.clientY-l;u=A*A+C*C>f}i.mouse("drag",x)}function _(x){Lt(x.view).on("mousemove.drag mouseup.drag",null),$u(x.view,u),ls(x),i.mouse("end",x)}function y(x,A){if(t.call(this,x,A)){var C=x.changedTouches,L=e.call(this,x,A),S=C.length,D,v;for(D=0;D<S;++D)(v=T(this,L,x,A,C[D].identifier,C[D]))&&(tf(x),v("start",x,C[D]))}}function b(x){var A=x.changedTouches,C=A.length,L,S;for(L=0;L<C;++L)(S=i[A[L].identifier])&&(ls(x),S("drag",x,A[L]))}function k(x){var A=x.changedTouches,C=A.length,L,S;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),L=0;L<C;++L)(S=i[A[L].identifier])&&(tf(x),S("end",x,A[L]))}function T(x,A,C,L,S,D){var v=a.copy(),M=kr(D||C,A),w,I,B;if((B=n.call(x,new ef("beforestart",{sourceEvent:C,target:d,identifier:S,active:o,x:M[0],y:M[1],dx:0,dy:0,dispatch:v}),L))!=null)return w=B.x-M[0]||0,I=B.y-M[1]||0,function $(F,K,nt){var z=M,Y;switch(F){case"start":i[S]=$,Y=o++;break;case"end":delete i[S],--o;case"drag":M=kr(nt||K,A),Y=o;break}v.call(F,x,new ef(F,{sourceEvent:K,subject:B,target:d,identifier:S,active:Y,x:M[0]+w,y:M[1]+I,dx:M[0]-z[0],dy:M[1]-z[1],dispatch:v}),L)}}return d.filter=function(x){return arguments.length?(t=typeof x=="function"?x:Pu(!!x),d):t},d.container=function(x){return arguments.length?(e=typeof x=="function"?x:Pu(x),d):e},d.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Pu(x),d):n},d.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Pu(!!x),d):r},d.on=function(){var x=a.on.apply(a,arguments);return x===a?d:x},d.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,d):Math.sqrt(f)},d}function us(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Nc(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ca(){}var yo=.7,hs=1/yo,ds="\\s*([+-]?\\d+)\\s*",Dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CO=/^#([0-9a-f]{3,8})$/,SO=new RegExp(`^rgb\\(${ds},${ds},${ds}\\)$`),AO=new RegExp(`^rgb\\(${vi},${vi},${vi}\\)$`),MO=new RegExp(`^rgba\\(${ds},${ds},${ds},${Dc}\\)$`),LO=new RegExp(`^rgba\\(${vi},${vi},${vi},${Dc}\\)$`),BO=new RegExp(`^hsl\\(${Dc},${vi},${vi}\\)$`),NO=new RegExp(`^hsla\\(${Dc},${vi},${vi},${Dc}\\)$`),s_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};us(Ca,Sa,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:c_,formatHex:c_,formatHex8:DO,formatHsl:OO,formatRgb:l_,toString:l_});function c_(){return this.rgb().formatHex()}function DO(){return this.rgb().formatHex8()}function OO(){return p_(this).formatHsl()}function l_(){return this.rgb().formatRgb()}function Sa(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=CO.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?u_(e):n===3?new En(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=SO.exec(t))?new En(e[1],e[2],e[3],1):(e=AO.exec(t))?new En(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=MO.exec(t))?Yu(e[1],e[2],e[3],e[4]):(e=LO.exec(t))?Yu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=BO.exec(t))?f_(e[1],e[2]/100,e[3]/100,1):(e=NO.exec(t))?f_(e[1],e[2]/100,e[3]/100,e[4]):s_.hasOwnProperty(t)?u_(s_[t]):t==="transparent"?new En(NaN,NaN,NaN,0):null}function u_(t){return new En(t>>16&255,t>>8&255,t&255,1)}function Yu(t,e,n,r){return r<=0&&(t=e=n=NaN),new En(t,e,n,r)}function nf(t){return t instanceof Ca||(t=Sa(t)),t?(t=t.rgb(),new En(t.r,t.g,t.b,t.opacity)):new En}function fs(t,e,n,r){return arguments.length===1?nf(t):new En(t,e,n,r==null?1:r)}function En(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}us(En,fs,Nc(Ca,{brighter(t){return t=t==null?hs:Math.pow(hs,t),new En(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yo:Math.pow(yo,t),new En(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new En(mo(this.r),mo(this.g),mo(this.b),zu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h_,formatHex:h_,formatHex8:IO,formatRgb:d_,toString:d_}));function h_(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}`}function IO(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}${bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function d_(){const t=zu(this.opacity);return`${t===1?"rgb(":"rgba("}${mo(this.r)}, ${mo(this.g)}, ${mo(this.b)}${t===1?")":`, ${t})`}`}function zu(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bo(t){return t=mo(t),(t<16?"0":"")+t.toString(16)}function f_(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qr(t,e,n,r)}function p_(t){if(t instanceof qr)return new qr(t.h,t.s,t.l,t.opacity);if(t instanceof Ca||(t=Sa(t)),!t)return new qr;if(t instanceof qr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new qr(o,s,l,t.opacity)}function ju(t,e,n,r){return arguments.length===1?p_(t):new qr(t,e,n,r==null?1:r)}function qr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}us(qr,ju,Nc(Ca,{brighter(t){return t=t==null?hs:Math.pow(hs,t),new qr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yo:Math.pow(yo,t),new qr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new En(rf(t>=240?t-240:t+120,i,r),rf(t,i,r),rf(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new qr(g_(this.h),Uu(this.s),Uu(this.l),zu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zu(this.opacity);return`${t===1?"hsl(":"hsla("}${g_(this.h)}, ${Uu(this.s)*100}%, ${Uu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function g_(t){return t=(t||0)%360,t<0?t+360:t}function Uu(t){return Math.max(0,Math.min(1,t||0))}function rf(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const y_=Math.PI/180,m_=180/Math.PI,Hu=18,b_=.96422,__=1,v_=.82521,x_=4/29,ps=6/29,k_=3*ps*ps,RO=ps*ps*ps;function w_(t){if(t instanceof Xr)return new Xr(t.l,t.a,t.b,t.opacity);if(t instanceof xi)return E_(t);t instanceof En||(t=nf(t));var e=cf(t.r),n=cf(t.g),r=cf(t.b),i=af((.2225045*e+.7168786*n+.0606169*r)/__),a,o;return e===n&&n===r?a=o=i:(a=af((.4360747*e+.3850649*n+.1430804*r)/b_),o=af((.0139322*e+.0971045*n+.7141733*r)/v_)),new Xr(116*i-16,500*(a-i),200*(i-o),t.opacity)}function FO(t,e){return new Xr(t,0,0,e==null?1:e)}function Wu(t,e,n,r){return arguments.length===1?w_(t):new Xr(t,e,n,r==null?1:r)}function Xr(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}us(Xr,Wu,Nc(Ca,{brighter(t){return new Xr(this.l+Hu*(t==null?1:t),this.a,this.b,this.opacity)},darker(t){return new Xr(this.l-Hu*(t==null?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=b_*of(e),t=__*of(t),n=v_*of(n),new En(sf(3.1338561*e-1.6168667*t-.4906146*n),sf(-.9787684*e+1.9161415*t+.033454*n),sf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function af(t){return t>RO?Math.pow(t,1/3):t/k_+x_}function of(t){return t>ps?t*t*t:k_*(t-x_)}function sf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function cf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function T_(t){if(t instanceof xi)return new xi(t.h,t.c,t.l,t.opacity);if(t instanceof Xr||(t=w_(t)),t.a===0&&t.b===0)return new xi(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*m_;return new xi(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function $O(t,e,n,r){return arguments.length===1?T_(t):new xi(n,e,t,r==null?1:r)}function Vu(t,e,n,r){return arguments.length===1?T_(t):new xi(t,e,n,r==null?1:r)}function xi(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function E_(t){if(isNaN(t.h))return new Xr(t.l,0,0,t.opacity);var e=t.h*y_;return new Xr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}us(xi,Vu,Nc(Ca,{brighter(t){return new xi(this.h,this.c,this.l+Hu*(t==null?1:t),this.opacity)},darker(t){return new xi(this.h,this.c,this.l-Hu*(t==null?1:t),this.opacity)},rgb(){return E_(this).rgb()}}));var C_=-.14861,lf=1.78277,uf=-.29227,Gu=-.90649,Oc=1.97294,S_=Oc*Gu,A_=Oc*lf,M_=lf*uf-Gu*C_;function PO(t){if(t instanceof _o)return new _o(t.h,t.s,t.l,t.opacity);t instanceof En||(t=nf(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(M_*r+S_*e-A_*n)/(M_+S_-A_),a=r-i,o=(Oc*(n-i)-uf*a)/Gu,s=Math.sqrt(o*o+a*a)/(Oc*i*(1-i)),l=s?Math.atan2(o,a)*m_-120:NaN;return new _o(l<0?l+360:l,s,i,t.opacity)}function Zr(t,e,n,r){return arguments.length===1?PO(t):new _o(t,e,n,r==null?1:r)}function _o(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}us(_o,Zr,Nc(Ca,{brighter(t){return t=t==null?hs:Math.pow(hs,t),new _o(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yo:Math.pow(yo,t),new _o(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*y_,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new En(255*(e+n*(C_*r+lf*i)),255*(e+n*(uf*r+Gu*i)),255*(e+n*(Oc*r)),this.opacity)}}));function L_(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function B_(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return L_((n-r/e)*e,o,i,a,s)}}function N_(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return L_((n-r/e)*e,i,a,o,s)}}const qu=t=>()=>t;function D_(t,e){return function(n){return t+n*e}}function YO(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Xu(t,e){var n=e-t;return n?D_(t,n>180||n<-180?n-360*Math.round(n/360):n):qu(isNaN(t)?e:t)}function zO(t){return(t=+t)==1?Cn:function(e,n){return n-e?YO(e,n,t):qu(isNaN(e)?n:e)}}function Cn(t,e){var n=e-t;return n?D_(t,n):qu(isNaN(t)?e:t)}const Ic=function t(e){var n=zO(e);function r(i,a){var o=n((i=fs(i)).r,(a=fs(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Cn(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=s(h),i.b=l(h),i.opacity=u(h),i+""}}return r.gamma=t,r}(1);function O_(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=fs(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var I_=O_(B_),jO=O_(N_);function hf(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function R_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function UO(t,e){return(R_(e)?hf:F_)(t,e)}function F_(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Aa(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function $_(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Lr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function P_(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Aa(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var df=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ff=new RegExp(df.source,"g");function HO(t){return function(){return t}}function WO(t){return function(e){return t(e)+""}}function pf(t,e){var n=df.lastIndex=ff.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=df.exec(t))&&(i=ff.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Lr(r,i)})),n=ff.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?WO(l[0].x):HO(e):(e=l.length,function(u){for(var h=0,f;h<e;++h)s[(f=l[h]).i]=f.x(u);return s.join("")})}function Aa(t,e){var n=typeof e,r;return e==null||n==="boolean"?qu(e):(n==="number"?Lr:n==="string"?(r=Sa(e))?(e=r,Ic):pf:e instanceof Sa?Ic:e instanceof Date?$_:R_(e)?hf:Array.isArray(e)?F_:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?P_:Lr)(t,e)}function VO(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function GO(t,e){var n=Xu(+t,+e);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Zu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Y_=180/Math.PI,z_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function j_(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Y_,skewX:Math.atan(l)*Y_,scaleX:o,scaleY:s}}var Qu;function qO(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?z_:j_(e.a,e.b,e.c,e.d,e.e,e.f)}function XO(t){return t==null||(Qu||(Qu=document.createElementNS("http://www.w3.org/2000/svg","g")),Qu.setAttribute("transform",t),!(t=Qu.transform.baseVal.consolidate()))?z_:(t=t.matrix,j_(t.a,t.b,t.c,t.d,t.e,t.f))}function U_(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,f,d,p,m){if(u!==f||h!==d){var _=p.push("translate(",null,e,null,n);m.push({i:_-4,x:Lr(u,f)},{i:_-2,x:Lr(h,d)})}else(f||d)&&p.push("translate("+f+e+d+n)}function o(u,h,f,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Lr(u,h)})):h&&f.push(i(f)+"rotate("+h+r)}function s(u,h,f,d){u!==h?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Lr(u,h)}):h&&f.push(i(f)+"skewX("+h+r)}function l(u,h,f,d,p,m){if(u!==f||h!==d){var _=p.push(i(p)+"scale(",null,",",null,")");m.push({i:_-4,x:Lr(u,f)},{i:_-2,x:Lr(h,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(u,h){var f=[],d=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,f,d),o(u.rotate,h.rotate,f,d),s(u.skewX,h.skewX,f,d),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,f,d),u=h=null,function(p){for(var m=-1,_=d.length,y;++m<_;)f[(y=d[m]).i]=y.x(p);return f.join("")}}}var H_=U_(qO,"px, ","px)","deg)"),W_=U_(XO,", ",")",")"),ZO=1e-12;function V_(t){return((t=Math.exp(t))+1/t)/2}function QO(t){return((t=Math.exp(t))-1/t)/2}function KO(t){return((t=Math.exp(2*t))-1)/(t+1)}const G_=function t(e,n,r){function i(a,o){var s=a[0],l=a[1],u=a[2],h=o[0],f=o[1],d=o[2],p=h-s,m=f-l,_=p*p+m*m,y,b;if(_<ZO)b=Math.log(d/u)/e,y=function(L){return[s+L*p,l+L*m,u*Math.exp(e*L*b)]};else{var k=Math.sqrt(_),T=(d*d-u*u+r*_)/(2*u*n*k),x=(d*d-u*u-r*_)/(2*d*n*k),A=Math.log(Math.sqrt(T*T+1)-T),C=Math.log(Math.sqrt(x*x+1)-x);b=(C-A)/e,y=function(L){var S=L*b,D=V_(A),v=u/(n*k)*(D*KO(e*S+A)-QO(A));return[s+v*p,l+v*m,u*D/V_(e*S+A)]}}return y.duration=b*1e3*e/Math.SQRT2,y}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return t(o,s,l)},i}(Math.SQRT2,2,4);function q_(t){return function(e,n){var r=t((e=ju(e)).h,(n=ju(n)).h),i=Cn(e.s,n.s),a=Cn(e.l,n.l),o=Cn(e.opacity,n.opacity);return function(s){return e.h=r(s),e.s=i(s),e.l=a(s),e.opacity=o(s),e+""}}}const JO=q_(Xu);var tI=q_(Cn);function eI(t,e){var n=Cn((t=Wu(t)).l,(e=Wu(e)).l),r=Cn(t.a,e.a),i=Cn(t.b,e.b),a=Cn(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=r(o),t.b=i(o),t.opacity=a(o),t+""}}function X_(t){return function(e,n){var r=t((e=Vu(e)).h,(n=Vu(n)).h),i=Cn(e.c,n.c),a=Cn(e.l,n.l),o=Cn(e.opacity,n.opacity);return function(s){return e.h=r(s),e.c=i(s),e.l=a(s),e.opacity=o(s),e+""}}}const Z_=X_(Xu);var nI=X_(Cn);function Q_(t){return function e(n){n=+n;function r(i,a){var o=t((i=Zr(i)).h,(a=Zr(a)).h),s=Cn(i.s,a.s),l=Cn(i.l,a.l),u=Cn(i.opacity,a.opacity);return function(h){return i.h=o(h),i.s=s(h),i.l=l(Math.pow(h,n)),i.opacity=u(h),i+""}}return r.gamma=e,r}(1)}const rI=Q_(Xu);var Ku=Q_(Cn);function K_(t,e){e===void 0&&(e=t,t=Aa);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function iI(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var gs=0,Rc=0,Fc=0,J_=1e3,Ju,$c,th=0,vo=0,eh=0,Pc=typeof performance=="object"&&performance.now?performance:Date,t6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yc(){return vo||(t6(aI),vo=Pc.now()+eh)}function aI(){vo=0}function zc(){this._call=this._time=this._next=null}zc.prototype=nh.prototype={constructor:zc,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Yc():+n)+(e==null?0:+e),!this._next&&$c!==this&&($c?$c._next=this:Ju=this,$c=this),this._call=t,this._time=n,gf()},stop:function(){this._call&&(this._call=null,this._time=1/0,gf())}};function nh(t,e,n){var r=new zc;return r.restart(t,e,n),r}function e6(){Yc(),++gs;for(var t=Ju,e;t;)(e=vo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gs}function n6(){vo=(th=Pc.now())+eh,gs=Rc=0;try{e6()}finally{gs=0,sI(),vo=0}}function oI(){var t=Pc.now(),e=t-th;e>J_&&(eh-=e,th=t)}function sI(){for(var t,e=Ju,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ju=n);$c=t,gf(r)}function gf(t){if(!gs){Rc&&(Rc=clearTimeout(Rc));var e=t-vo;e>24?(t<1/0&&(Rc=setTimeout(n6,t-Pc.now()-eh)),Fc&&(Fc=clearInterval(Fc))):(Fc||(th=Pc.now(),Fc=setInterval(oI,J_)),gs=1,t6(n6))}}function yf(t,e,n){var r=new zc;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}function cI(t,e,n){var r=new zc,i=e;return e==null?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(a,o,s){o=+o,s=s==null?Yc():+s,r._restart(function l(u){u+=i,r._restart(l,i+=o,s),a(u)},o,s)},r.restart(t,e,n),r)}var lI=fo("start","end","cancel","interrupt"),uI=[],r6=0,mf=1,bf=2,rh=3,i6=4,_f=5,ih=6;function ah(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;hI(t,n,{name:e,index:r,group:i,on:lI,tween:uI,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:r6})}function vf(t,e){var n=Qr(t,e);if(n.state>r6)throw new Error("too late; already scheduled");return n}function ki(t,e){var n=Qr(t,e);if(n.state>rh)throw new Error("too late; already running");return n}function Qr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function hI(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=nh(a,0,n.time);function a(u){n.state=mf,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var h,f,d,p;if(n.state!==mf)return l();for(h in r)if(p=r[h],p.name===n.name){if(p.state===rh)return yf(o);p.state===i6?(p.state=ih,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[h]):+h<e&&(p.state=ih,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[h])}if(yf(function(){n.state===rh&&(n.state=i6,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=bf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bf){for(n.state=rh,i=new Array(d=n.tween.length),h=0,f=-1;h<d;++h)(p=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=_f,1),f=-1,d=i.length;++f<d;)i[f].call(t,h);n.state===_f&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ih,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function xo(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>bf&&r.state<_f,r.state=ih,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function dI(t){return this.each(function(){xo(this,t)})}function fI(t,e){var n,r;return function(){var i=ki(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function pI(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ki(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function gI(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Qr(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?fI:pI)(n,t,e))}function xf(t,e,n){var r=t._id;return t.each(function(){var i=ki(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Qr(i,r).value[e]}}function a6(t,e){var n;return(typeof e=="number"?Lr:e instanceof Sa?Ic:(n=Sa(e))?(e=n,Ic):pf)(t,e)}function yI(t){return function(){this.removeAttribute(t)}}function mI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bI(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function _I(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function vI(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function xI(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function kI(t,e){var n=Lc(t),r=n==="transform"?W_:a6;return this.attrTween(t,typeof e=="function"?(n.local?xI:vI)(n,r,xf(this,"attr."+t,e)):e==null?(n.local?mI:yI)(n):(n.local?_I:bI)(n,r,e))}function wI(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function TI(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function EI(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&TI(t,a)),n}return i._value=e,i}function CI(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&wI(t,a)),n}return i._value=e,i}function SI(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Lc(t);return this.tween(n,(r.local?EI:CI)(r,e))}function AI(t,e){return function(){vf(this,t).delay=+e.apply(this,arguments)}}function MI(t,e){return e=+e,function(){vf(this,t).delay=e}}function LI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?AI:MI)(e,t)):Qr(this.node(),e).delay}function BI(t,e){return function(){ki(this,t).duration=+e.apply(this,arguments)}}function NI(t,e){return e=+e,function(){ki(this,t).duration=e}}function DI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?BI:NI)(e,t)):Qr(this.node(),e).duration}function OI(t,e){if(typeof e!="function")throw new Error;return function(){ki(this,t).ease=e}}function II(t){var e=this._id;return arguments.length?this.each(OI(e,t)):Qr(this.node(),e).ease}function RI(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ki(this,t).ease=n}}function FI(t){if(typeof t!="function")throw new Error;return this.each(RI(this._id,t))}function $I(t){typeof t!="function"&&(t=Xd(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new wi(r,this._parents,this._name,this._id)}function PI(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],h=l.length,f=o[s]=new Array(h),d,p=0;p<h;++p)(d=l[p]||u[p])&&(f[p]=d);for(;s<r;++s)o[s]=e[s];return new wi(o,this._parents,this._name,this._id)}function YI(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function zI(t,e,n){var r,i,a=YI(e)?vf:ki;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function jI(t,e){var n=this._id;return arguments.length<2?Qr(this.node(),n).on.on(t):this.each(zI(n,t,e))}function UI(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function HI(){return this.on("end.remove",UI(this._id))}function WI(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ou(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),h,f,d=0;d<l;++d)(h=s[d])&&(f=t.call(h,h.__data__,d,s))&&("__data__"in h&&(f.__data__=h.__data__),u[d]=f,ah(u[d],e,n,d,u,Qr(h,n)));return new wi(a,this._parents,e,n)}function VI(t){var e=this._name,n=this._id;typeof t!="function"&&(t=qd(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,h,f=0;f<u;++f)if(h=l[f]){for(var d=t.call(h,h.__data__,f,l),p,m=Qr(h,n),_=0,y=d.length;_<y;++_)(p=d[_])&&ah(p,e,n,_,d,m);a.push(d),o.push(h)}return new wi(a,o,e,n)}var GI=go.prototype.constructor;function qI(){return new GI(this._groups,this._parents)}function XI(t,e){var n,r,i;return function(){var a=po(this,t),o=(this.style.removeProperty(t),po(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function o6(t){return function(){this.style.removeProperty(t)}}function ZI(t,e,n){var r,i=n+"",a;return function(){var o=po(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function QI(t,e,n){var r,i,a;return function(){var o=po(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),po(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function KI(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=ki(this,t),u=l.on,h=l.value[a]==null?s||(s=o6(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(o,i=h),l.on=r}}function JI(t,e,n){var r=(t+="")=="transform"?H_:a6;return e==null?this.styleTween(t,XI(t,r)).on("end.style."+t,o6(t)):typeof e=="function"?this.styleTween(t,QI(t,r,xf(this,"style."+t,e))).each(KI(this._id,t)):this.styleTween(t,ZI(t,r,e),n).on("end.style."+t,null)}function tR(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function eR(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&tR(t,o,n)),r}return a._value=e,a}function nR(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,eR(t,e,n==null?"":n))}function rR(t){return function(){this.textContent=t}}function iR(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function aR(t){return this.tween("text",typeof t=="function"?iR(xf(this,"text",t)):rR(t==null?"":t+""))}function oR(t){return function(e){this.textContent=t.call(this,e)}}function sR(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&oR(i)),e}return r._value=t,r}function cR(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,sR(t))}function lR(){for(var t=this._name,e=this._id,n=c6(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var h=Qr(l,e);ah(l,t,n,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new wi(r,this._parents,t,n)}function uR(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=ki(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&a()})}var hR=0;function wi(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function s6(t){return go().transition(t)}function c6(){return++hR}var Vi=go.prototype;wi.prototype=s6.prototype={constructor:wi,select:WI,selectAll:VI,selectChild:Vi.selectChild,selectChildren:Vi.selectChildren,filter:$I,merge:PI,selection:qI,transition:lR,call:Vi.call,nodes:Vi.nodes,node:Vi.node,size:Vi.size,empty:Vi.empty,each:Vi.each,on:jI,attr:kI,attrTween:SI,style:JI,styleTween:nR,text:aR,textTween:cR,remove:HI,tween:gI,delay:LI,duration:DI,ease:II,easeVarying:FI,end:uR,[Symbol.iterator]:Vi[Symbol.iterator]};const dR=t=>+t;function fR(t){return t*t}function pR(t){return t*(2-t)}function l6(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function gR(t){return t*t*t}function yR(t){return--t*t*t+1}function kf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var wf=3,mR=function t(e){e=+e;function n(r){return Math.pow(r,e)}return n.exponent=t,n}(wf),bR=function t(e){e=+e;function n(r){return 1-Math.pow(1-r,e)}return n.exponent=t,n}(wf),u6=function t(e){e=+e;function n(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return n.exponent=t,n}(wf),h6=Math.PI,d6=h6/2;function _R(t){return+t==1?1:1-Math.cos(t*d6)}function vR(t){return Math.sin(t*d6)}function f6(t){return(1-Math.cos(h6*t))/2}function Ma(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function xR(t){return Ma(1-+t)}function kR(t){return 1-Ma(t)}function p6(t){return((t*=2)<=1?Ma(1-t):2-Ma(t-1))/2}function wR(t){return 1-Math.sqrt(1-t*t)}function TR(t){return Math.sqrt(1- --t*t)}function g6(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Tf=4/11,ER=6/11,CR=8/11,SR=3/4,AR=9/11,MR=10/11,LR=15/16,BR=21/22,NR=63/64,oh=1/Tf/Tf;function DR(t){return 1-jc(1-t)}function jc(t){return(t=+t)<Tf?oh*t*t:t<CR?oh*(t-=ER)*t+SR:t<MR?oh*(t-=AR)*t+LR:oh*(t-=BR)*t+NR}function OR(t){return((t*=2)<=1?1-jc(1-t):jc(t-1)+1)/2}var Ef=1.70158,IR=function t(e){e=+e;function n(r){return(r=+r)*r*(e*(r-1)+r)}return n.overshoot=t,n}(Ef),RR=function t(e){e=+e;function n(r){return--r*r*((r+1)*e+r)+1}return n.overshoot=t,n}(Ef),y6=function t(e){e=+e;function n(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return n.overshoot=t,n}(Ef),ys=2*Math.PI,Cf=1,Sf=.3,FR=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ys);function i(a){return e*Ma(- --a)*Math.sin((r-a)/n)}return i.amplitude=function(a){return t(a,n*ys)},i.period=function(a){return t(e,a)},i}(Cf,Sf),m6=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ys);function i(a){return 1-e*Ma(a=+a)*Math.sin((a+r)/n)}return i.amplitude=function(a){return t(a,n*ys)},i.period=function(a){return t(e,a)},i}(Cf,Sf),$R=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ys);function i(a){return((a=a*2-1)<0?e*Ma(-a)*Math.sin((r-a)/n):2-e*Ma(a)*Math.sin((r+a)/n))/2}return i.amplitude=function(a){return t(a,n*ys)},i.period=function(a){return t(e,a)},i}(Cf,Sf),PR={time:null,delay:0,duration:250,ease:kf};function YR(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function zR(t){var e,n;t instanceof wi?(e=t._id,t=t._name):(e=c6(),(n=PR).time=Yc(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&ah(l,t,e,u,o,n||YR(l,e));return new wi(r,this._parents,t,e)}go.prototype.interrupt=dI,go.prototype.transition=zR;var jR=[null];function UR(t,e){var n=t.__transition,r,i;if(n){e=e==null?null:e+"";for(i in n)if((r=n[i]).state>mf&&r.name===e)return new wi([[t]],jR,e,+i)}return null}const Af=t=>()=>t;function HR(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function WR(t){t.stopImmediatePropagation()}function Mf(t){t.preventDefault(),t.stopImmediatePropagation()}var b6={name:"drag"},Lf={name:"space"},ms={name:"handle"},bs={name:"center"};const{abs:_6,max:Fn,min:$n}=Math;function v6(t){return[+t[0],+t[1]]}function Bf(t){return[v6(t[0]),v6(t[1])]}var sh={name:"x",handles:["w","e"].map(Uc),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ch={name:"y",handles:["n","s"].map(Uc),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},VR={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Uc),input:function(t){return t==null?null:Bf(t)},output:function(t){return t}},Gi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},x6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},k6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},GR={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},qR={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Uc(t){return{type:t}}function XR(t){return!t.ctrlKey&&!t.button}function ZR(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function QR(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nf(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function KR(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function JR(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function tF(){return Df(sh)}function eF(){return Df(ch)}function nF(){return Df(VR)}function Df(t){var e=ZR,n=XR,r=QR,i=!0,a=fo("start","brush","end"),o=6,s;function l(y){var b=y.property("__brush",_).selectAll(".overlay").data([Uc("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Gi.overlay).merge(b).each(function(){var T=Nf(this).extent;Lt(this).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1])}),y.selectAll(".selection").data([Uc("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Gi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var k=y.selectAll(".handle").data(t.handles,function(T){return T.type});k.exit().remove(),k.enter().append("rect").attr("class",function(T){return"handle handle--"+T.type}).attr("cursor",function(T){return Gi[T.type]}),y.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(y,b,k){y.tween?y.on("start.brush",function(T){h(this,arguments).beforestart().start(T)}).on("interrupt.brush end.brush",function(T){h(this,arguments).end(T)}).tween("brush",function(){var T=this,x=T.__brush,A=h(T,arguments),C=x.selection,L=t.input(typeof b=="function"?b.apply(this,arguments):b,x.extent),S=Aa(C,L);function D(v){x.selection=v===1&&L===null?null:S(v),u.call(T),A.brush()}return C!==null&&L!==null?D:D(1)}):y.each(function(){var T=this,x=arguments,A=T.__brush,C=t.input(typeof b=="function"?b.apply(T,x):b,A.extent),L=h(T,x).beforestart();xo(T),A.selection=C===null?null:C,u.call(T),L.start(k).brush(k).end(k)})},l.clear=function(y,b){l.move(y,null,b)};function u(){var y=Lt(this),b=Nf(this).selection;b?(y.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(k){return k.type[k.type.length-1]==="e"?b[1][0]-o/2:b[0][0]-o/2}).attr("y",function(k){return k.type[0]==="s"?b[1][1]-o/2:b[0][1]-o/2}).attr("width",function(k){return k.type==="n"||k.type==="s"?b[1][0]-b[0][0]+o:o}).attr("height",function(k){return k.type==="e"||k.type==="w"?b[1][1]-b[0][1]+o:o})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(y,b,k){var T=y.__brush.emitter;return T&&(!k||!T.clean)?T:new f(y,b,k)}function f(y,b,k){this.that=y,this.args=b,this.state=y.__brush,this.active=0,this.clean=k}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,b){return this.starting?(this.starting=!1,this.emit("start",y,b)):this.emit("brush",y),this},brush:function(y,b){return this.emit("brush",y,b),this},end:function(y,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,b)),this},emit:function(y,b,k){var T=Lt(this.that).datum();a.call(y,this.that,new HR(y,{sourceEvent:b,target:l,selection:t.output(this.state.selection),mode:k,dispatch:a}),T)}};function d(y){if(s&&!y.touches||!n.apply(this,arguments))return;var b=this,k=y.target.__data__.type,T=(i&&y.metaKey?k="overlay":k)==="selection"?b6:i&&y.altKey?bs:ms,x=t===ch?null:GR[k],A=t===sh?null:qR[k],C=Nf(b),L=C.extent,S=C.selection,D=L[0][0],v,M,w=L[0][1],I,B,$=L[1][0],F,K,nt=L[1][1],z,Y,rt=0,lt=0,J,Q=x&&A&&i&&y.shiftKey,q,it,ut=Array.from(y.touches||[y],ot=>{const Dt=ot.identifier;return ot=kr(ot,b),ot.point0=ot.slice(),ot.identifier=Dt,ot});xo(b);var V=h(b,arguments,!0).beforestart();if(k==="overlay"){S&&(J=!0);const ot=[ut[0],ut[1]||ut[0]];C.selection=S=[[v=t===ch?D:$n(ot[0][0],ot[1][0]),I=t===sh?w:$n(ot[0][1],ot[1][1])],[F=t===ch?$:Fn(ot[0][0],ot[1][0]),z=t===sh?nt:Fn(ot[0][1],ot[1][1])]],ut.length>1&&G(y)}else v=S[0][0],I=S[0][1],F=S[1][0],z=S[1][1];M=v,B=I,K=F,Y=z;var j=Lt(b).attr("pointer-events","none"),P=j.selectAll(".overlay").attr("cursor",Gi[k]);if(y.touches)V.moved=O,V.ended=U;else{var X=Lt(y.view).on("mousemove.brush",O,!0).on("mouseup.brush",U,!0);i&&X.on("keydown.brush",H,!0).on("keyup.brush",xt,!0),Fu(y.view)}u.call(b),V.start(y,T.name);function O(ot){for(const Dt of ot.changedTouches||[ot])for(const Mt of ut)Mt.identifier===Dt.identifier&&(Mt.cur=kr(Dt,b));if(Q&&!q&&!it&&ut.length===1){const Dt=ut[0];_6(Dt.cur[0]-Dt[0])>_6(Dt.cur[1]-Dt[1])?it=!0:q=!0}for(const Dt of ut)Dt.cur&&(Dt[0]=Dt.cur[0],Dt[1]=Dt.cur[1]);J=!0,Mf(ot),G(ot)}function G(ot){const Dt=ut[0],Mt=Dt.point0;var wt;switch(rt=Dt[0]-Mt[0],lt=Dt[1]-Mt[1],T){case Lf:case b6:{x&&(rt=Fn(D-v,$n($-F,rt)),M=v+rt,K=F+rt),A&&(lt=Fn(w-I,$n(nt-z,lt)),B=I+lt,Y=z+lt);break}case ms:{ut[1]?(x&&(M=Fn(D,$n($,ut[0][0])),K=Fn(D,$n($,ut[1][0])),x=1),A&&(B=Fn(w,$n(nt,ut[0][1])),Y=Fn(w,$n(nt,ut[1][1])),A=1)):(x<0?(rt=Fn(D-v,$n($-v,rt)),M=v+rt,K=F):x>0&&(rt=Fn(D-F,$n($-F,rt)),M=v,K=F+rt),A<0?(lt=Fn(w-I,$n(nt-I,lt)),B=I+lt,Y=z):A>0&&(lt=Fn(w-z,$n(nt-z,lt)),B=I,Y=z+lt));break}case bs:{x&&(M=Fn(D,$n($,v-rt*x)),K=Fn(D,$n($,F+rt*x))),A&&(B=Fn(w,$n(nt,I-lt*A)),Y=Fn(w,$n(nt,z+lt*A)));break}}K<M&&(x*=-1,wt=v,v=F,F=wt,wt=M,M=K,K=wt,k in x6&&P.attr("cursor",Gi[k=x6[k]])),Y<B&&(A*=-1,wt=I,I=z,z=wt,wt=B,B=Y,Y=wt,k in k6&&P.attr("cursor",Gi[k=k6[k]])),C.selection&&(S=C.selection),q&&(M=S[0][0],K=S[1][0]),it&&(B=S[0][1],Y=S[1][1]),(S[0][0]!==M||S[0][1]!==B||S[1][0]!==K||S[1][1]!==Y)&&(C.selection=[[M,B],[K,Y]],u.call(b),V.brush(ot,T.name))}function U(ot){if(WR(ot),ot.touches){if(ot.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else $u(ot.view,J),X.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),P.attr("cursor",Gi.overlay),C.selection&&(S=C.selection),KR(S)&&(C.selection=null,u.call(b)),V.end(ot,T.name)}function H(ot){switch(ot.keyCode){case 16:{Q=x&&A;break}case 18:{T===ms&&(x&&(F=K-rt*x,v=M+rt*x),A&&(z=Y-lt*A,I=B+lt*A),T=bs,G(ot));break}case 32:{(T===ms||T===bs)&&(x<0?F=K-rt:x>0&&(v=M-rt),A<0?z=Y-lt:A>0&&(I=B-lt),T=Lf,P.attr("cursor",Gi.selection),G(ot));break}default:return}Mf(ot)}function xt(ot){switch(ot.keyCode){case 16:{Q&&(q=it=Q=!1,G(ot));break}case 18:{T===bs&&(x<0?F=K:x>0&&(v=M),A<0?z=Y:A>0&&(I=B),T=ms,G(ot));break}case 32:{T===Lf&&(ot.altKey?(x&&(F=K-rt*x,v=M+rt*x),A&&(z=Y-lt*A,I=B+lt*A),T=bs):(x<0?F=K:x>0&&(v=M),A<0?z=Y:A>0&&(I=B),T=ms),P.attr("cursor",Gi[k]),G(ot));break}default:return}Mf(ot)}}function p(y){h(this,arguments).moved(y)}function m(y){h(this,arguments).ended(y)}function _(){var y=this.__brush||{selection:null};return y.extent=Bf(e.apply(this,arguments)),y.dim=t,y}return l.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Af(Bf(y)),l):e},l.filter=function(y){return arguments.length?(n=typeof y=="function"?y:Af(!!y),l):n},l.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Af(!!y),l):r},l.handleSize=function(y){return arguments.length?(o=+y,l):o},l.keyModifiers=function(y){return arguments.length?(i=!!y,l):i},l.on=function(){var y=a.on.apply(a,arguments);return y===a?l:y},l}var w6=Math.abs,_s=Math.cos,vs=Math.sin,T6=Math.PI,lh=T6/2,E6=T6*2,C6=Math.max,Of=1e-12;function If(t,e){return Array.from({length:e-t},(n,r)=>t+r)}function rF(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function iF(){return Rf(!1,!1)}function aF(){return Rf(!1,!0)}function oF(){return Rf(!0,!1)}function Rf(t,e){var n=0,r=null,i=null,a=null;function o(s){var l=s.length,u=new Array(l),h=If(0,l),f=new Array(l*l),d=new Array(l),p=0,m;s=Float64Array.from({length:l*l},e?(_,y)=>s[y%l][y/l|0]:(_,y)=>s[y/l|0][y%l]);for(let _=0;_<l;++_){let y=0;for(let b=0;b<l;++b)y+=s[_*l+b]+t*s[b*l+_];p+=u[_]=y}p=C6(0,E6-n*l)/p,m=p?n:E6/l;{let _=0;r&&h.sort((y,b)=>r(u[y],u[b]));for(const y of h){const b=_;if(t){const k=If(~l+1,l).filter(T=>T<0?s[~T*l+y]:s[y*l+T]);i&&k.sort((T,x)=>i(T<0?-s[~T*l+y]:s[y*l+T],x<0?-s[~x*l+y]:s[y*l+x]));for(const T of k)if(T<0){const x=f[~T*l+y]||(f[~T*l+y]={source:null,target:null});x.target={index:y,startAngle:_,endAngle:_+=s[~T*l+y]*p,value:s[~T*l+y]}}else{const x=f[y*l+T]||(f[y*l+T]={source:null,target:null});x.source={index:y,startAngle:_,endAngle:_+=s[y*l+T]*p,value:s[y*l+T]}}d[y]={index:y,startAngle:b,endAngle:_,value:u[y]}}else{const k=If(0,l).filter(T=>s[y*l+T]||s[T*l+y]);i&&k.sort((T,x)=>i(s[y*l+T],s[y*l+x]));for(const T of k){let x;if(y<T?(x=f[y*l+T]||(f[y*l+T]={source:null,target:null}),x.source={index:y,startAngle:_,endAngle:_+=s[y*l+T]*p,value:s[y*l+T]}):(x=f[T*l+y]||(f[T*l+y]={source:null,target:null}),x.target={index:y,startAngle:_,endAngle:_+=s[y*l+T]*p,value:s[y*l+T]},y===T&&(x.source=x.target)),x.source&&x.target&&x.source.value<x.target.value){const A=x.source;x.source=x.target,x.target=A}}d[y]={index:y,startAngle:b,endAngle:_,value:u[y]}}_+=m}}return f=Object.values(f),f.groups=d,a?f.sort(a):f}return o.padAngle=function(s){return arguments.length?(n=C6(0,s),o):n},o.sortGroups=function(s){return arguments.length?(r=s,o):r},o.sortSubgroups=function(s){return arguments.length?(i=s,o):i},o.sortChords=function(s){return arguments.length?(s==null?a=null:(a=rF(s))._=s,o):a&&a._},o}const Ff=Math.PI,$f=2*Ff,ko=1e-6,sF=$f-ko;function Pf(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function La(){return new Pf}Pf.prototype=La.prototype={constructor:Pf,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,u=a-t,h=o-e,f=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>ko)if(!(Math.abs(h*s-l*u)>ko)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-a,p=r-o,m=s*s+l*l,_=d*d+p*p,y=Math.sqrt(m),b=Math.sqrt(f),k=i*Math.tan((Ff-Math.acos((m+f-_)/(2*y*b)))/2),T=k/b,x=k/y;Math.abs(T-1)>ko&&(this._+="L"+(t+T*u)+","+(e+T*h)),this._+="A"+i+","+i+",0,0,"+ +(h*d>u*p)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,u=e+s,h=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>ko||Math.abs(this._y1-u)>ko)&&(this._+="L"+l+","+u),n&&(f<0&&(f=f%$f+$f),f>sF?this._+="A"+n+","+n+",0,1,"+h+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u):f>ko&&(this._+="A"+n+","+n+",0,"+ +(f>=Ff)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var cF=Array.prototype.slice;function wo(t){return function(){return t}}function lF(t){return t.source}function uF(t){return t.target}function S6(t){return t.radius}function hF(t){return t.startAngle}function dF(t){return t.endAngle}function fF(){return 0}function pF(){return 10}function A6(t){var e=lF,n=uF,r=S6,i=S6,a=hF,o=dF,s=fF,l=null;function u(){var h,f=e.apply(this,arguments),d=n.apply(this,arguments),p=s.apply(this,arguments)/2,m=cF.call(arguments),_=+r.apply(this,(m[0]=f,m)),y=a.apply(this,m)-lh,b=o.apply(this,m)-lh,k=+i.apply(this,(m[0]=d,m)),T=a.apply(this,m)-lh,x=o.apply(this,m)-lh;if(l||(l=h=La()),p>Of&&(w6(b-y)>p*2+Of?b>y?(y+=p,b-=p):(y-=p,b+=p):y=b=(y+b)/2,w6(x-T)>p*2+Of?x>T?(T+=p,x-=p):(T-=p,x+=p):T=x=(T+x)/2),l.moveTo(_*_s(y),_*vs(y)),l.arc(0,0,_,y,b),y!==T||b!==x)if(t){var A=+t.apply(this,arguments),C=k-A,L=(T+x)/2;l.quadraticCurveTo(0,0,C*_s(T),C*vs(T)),l.lineTo(k*_s(L),k*vs(L)),l.lineTo(C*_s(x),C*vs(x))}else l.quadraticCurveTo(0,0,k*_s(T),k*vs(T)),l.arc(0,0,k,T,x);if(l.quadraticCurveTo(0,0,_*_s(y),_*vs(y)),l.closePath(),h)return l=null,h+""||null}return t&&(u.headRadius=function(h){return arguments.length?(t=typeof h=="function"?h:wo(+h),u):t}),u.radius=function(h){return arguments.length?(r=i=typeof h=="function"?h:wo(+h),u):r},u.sourceRadius=function(h){return arguments.length?(r=typeof h=="function"?h:wo(+h),u):r},u.targetRadius=function(h){return arguments.length?(i=typeof h=="function"?h:wo(+h),u):i},u.startAngle=function(h){return arguments.length?(a=typeof h=="function"?h:wo(+h),u):a},u.endAngle=function(h){return arguments.length?(o=typeof h=="function"?h:wo(+h),u):o},u.padAngle=function(h){return arguments.length?(s=typeof h=="function"?h:wo(+h),u):s},u.source=function(h){return arguments.length?(e=h,u):e},u.target=function(h){return arguments.length?(n=h,u):n},u.context=function(h){return arguments.length?(l=h==null?null:h,u):l},u}function gF(){return A6()}function yF(){return A6(pF)}var mF=Array.prototype,M6=mF.slice;function bF(t,e){return t-e}function _F(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Ba=t=>()=>t;function vF(t,e){for(var n=-1,r=e.length,i;++n<r;)if(i=xF(t,e[n]))return i;return 0}function xF(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],u=l[0],h=l[1],f=t[s],d=f[0],p=f[1];if(kF(l,f,e))return 0;h>r!=p>r&&n<(d-u)*(r-h)/(p-h)+u&&(i=-i)}return i}function kF(t,e,n){var r;return wF(t,e,n)&&TF(t[r=+(t[0]===e[0])],n[r],e[r])}function wF(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function TF(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function EF(){}var qi=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Yf(){var t=1,e=1,n=zd,r=l;function i(u){var h=n(u);if(Array.isArray(h))h=h.slice().sort(bF);else{const f=wc(u),d=Ec(f[0],f[1],h);h=ho(Math.floor(f[0]/d)*d,Math.floor(f[1]/d-1)*d,h)}return h.map(f=>a(u,f))}function a(u,h){var f=[],d=[];return o(u,h,function(p){r(p,u,h),_F(p)>0?f.push([p]):d.push(p)}),d.forEach(function(p){for(var m=0,_=f.length,y;m<_;++m)if(vF((y=f[m])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:h,coordinates:f}}function o(u,h,f){var d=new Array,p=new Array,m,_,y,b,k,T;for(m=_=-1,b=u[0]>=h,qi[b<<1].forEach(x);++m<t-1;)y=b,b=u[m+1]>=h,qi[y|b<<1].forEach(x);for(qi[b<<0].forEach(x);++_<e-1;){for(m=-1,b=u[_*t+t]>=h,k=u[_*t]>=h,qi[b<<1|k<<2].forEach(x);++m<t-1;)y=b,b=u[_*t+t+m+1]>=h,T=k,k=u[_*t+m+1]>=h,qi[y|b<<1|k<<2|T<<3].forEach(x);qi[b|k<<3].forEach(x)}for(m=-1,k=u[_*t]>=h,qi[k<<2].forEach(x);++m<t-1;)T=k,k=u[_*t+m+1]>=h,qi[k<<2|T<<3].forEach(x);qi[k<<3].forEach(x);function x(A){var C=[A[0][0]+m,A[0][1]+_],L=[A[1][0]+m,A[1][1]+_],S=s(C),D=s(L),v,M;(v=p[S])?(M=d[D])?(delete p[v.end],delete d[M.start],v===M?(v.ring.push(L),f(v.ring)):d[v.start]=p[M.end]={start:v.start,end:M.end,ring:v.ring.concat(M.ring)}):(delete p[v.end],v.ring.push(L),p[v.end=D]=v):(v=d[D])?(M=p[S])?(delete d[v.start],delete p[M.end],v===M?(v.ring.push(L),f(v.ring)):d[M.start]=p[v.end]={start:M.start,end:v.end,ring:M.ring.concat(v.ring)}):(delete d[v.start],v.ring.unshift(C),d[v.start=S]=v):d[S]=p[D]={start:S,end:D,ring:[C,L]}}}function s(u){return u[0]*2+u[1]*(t+1)*4}function l(u,h,f){u.forEach(function(d){var p=d[0],m=d[1],_=p|0,y=m|0,b,k=h[y*t+_];p>0&&p<t&&_===p&&(b=h[y*t+_-1],d[0]=p+(f-b)/(k-b)-.5),m>0&&m<e&&y===m&&(b=h[(y-1)*t+_],d[1]=m+(f-b)/(k-b)-.5)})}return i.contour=a,i.size=function(u){if(!arguments.length)return[t,e];var h=Math.floor(u[0]),f=Math.floor(u[1]);if(!(h>=0&&f>=0))throw new Error("invalid size");return t=h,e=f,i},i.thresholds=function(u){return arguments.length?(n=typeof u=="function"?u:Array.isArray(u)?Ba(M6.call(u)):Ba(u),i):n},i.smooth=function(u){return arguments.length?(r=u?l:EF,i):r===l},i}function CF(t){return t[0]}function SF(t){return t[1]}function AF(){return 1}function MF(){var t=CF,e=SF,n=AF,r=960,i=500,a=20,o=2,s=a*3,l=r+s*2>>o,u=i+s*2>>o,h=Ba(20);function f(k){var T=new Float32Array(l*u),x=Math.pow(2,-o),A=-1;for(const I of k){var C=(t(I,++A,k)+s)*x,L=(e(I,A,k)+s)*x,S=+n(I,A,k);if(C>=0&&C<l&&L>=0&&L<u){var D=Math.floor(C),v=Math.floor(L),M=C-D-.5,w=L-v-.5;T[D+v*l]+=(1-M)*(1-w)*S,T[D+1+v*l]+=M*(1-w)*S,T[D+1+(v+1)*l]+=M*w*S,T[D+(v+1)*l]+=(1-M)*w*S}}return w5({data:T,width:l,height:u},a*x),T}function d(k){var T=f(k),x=h(T),A=Math.pow(2,2*o);return Array.isArray(x)||(x=ho(Number.MIN_VALUE,cs(T)/A,x)),Yf().size([l,u]).thresholds(x.map(C=>C*A))(T).map((C,L)=>(C.value=+x[L],p(C)))}d.contours=function(k){var T=f(k),x=Yf().size([l,u]),A=Math.pow(2,2*o),C=L=>{L=+L;var S=p(x.contour(T,L*A));return S.value=L,S};return Object.defineProperty(C,"max",{get:()=>cs(T)/A}),C};function p(k){return k.coordinates.forEach(m),k}function m(k){k.forEach(_)}function _(k){k.forEach(y)}function y(k){k[0]=k[0]*Math.pow(2,o)-s,k[1]=k[1]*Math.pow(2,o)-s}function b(){return s=a*3,l=r+s*2>>o,u=i+s*2>>o,d}return d.x=function(k){return arguments.length?(t=typeof k=="function"?k:Ba(+k),d):t},d.y=function(k){return arguments.length?(e=typeof k=="function"?k:Ba(+k),d):e},d.weight=function(k){return arguments.length?(n=typeof k=="function"?k:Ba(+k),d):n},d.size=function(k){if(!arguments.length)return[r,i];var T=+k[0],x=+k[1];if(!(T>=0&&x>=0))throw new Error("invalid size");return r=T,i=x,b()},d.cellSize=function(k){if(!arguments.length)return 1<<o;if(!((k=+k)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(k)/Math.LN2),b()},d.thresholds=function(k){return arguments.length?(h=typeof k=="function"?k:Array.isArray(k)?Ba(M6.call(k)):Ba(k),d):h},d.bandwidth=function(k){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((k=+k)>=0))throw new Error("invalid bandwidth");return a=(Math.sqrt(4*k*k+1)-1)/2,b()},d}const Xi=11102230246251565e-32,Pn=134217729,LF=(3+8*Xi)*Xi;function zf(t,e,n,r,i){let a,o,s,l,u=e[0],h=r[0],f=0,d=0;h>u==h>-u?(a=u,u=e[++f]):(a=h,h=r[++d]);let p=0;if(f<t&&d<n)for(h>u==h>-u?(o=u+a,s=a-(o-u),u=e[++f]):(o=h+a,s=a-(o-h),h=r[++d]),a=o,s!==0&&(i[p++]=s);f<t&&d<n;)h>u==h>-u?(o=a+u,l=o-a,s=a-(o-l)+(u-l),u=e[++f]):(o=a+h,l=o-a,s=a-(o-l)+(h-l),h=r[++d]),a=o,s!==0&&(i[p++]=s);for(;f<t;)o=a+u,l=o-a,s=a-(o-l)+(u-l),u=e[++f],a=o,s!==0&&(i[p++]=s);for(;d<n;)o=a+h,l=o-a,s=a-(o-l)+(h-l),h=r[++d],a=o,s!==0&&(i[p++]=s);return(a!==0||p===0)&&(i[p++]=a),p}function BF(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function Hc(t){return new Float64Array(t)}const NF=(3+16*Xi)*Xi,DF=(2+12*Xi)*Xi,OF=(9+64*Xi)*Xi*Xi,xs=Hc(4),L6=Hc(8),B6=Hc(12),N6=Hc(16),qn=Hc(4);function IF(t,e,n,r,i,a,o){let s,l,u,h,f,d,p,m,_,y,b,k,T,x,A,C,L,S;const D=t-i,v=n-i,M=e-a,w=r-a;x=D*w,d=Pn*D,p=d-(d-D),m=D-p,d=Pn*w,_=d-(d-w),y=w-_,A=m*y-(x-p*_-m*_-p*y),C=M*v,d=Pn*M,p=d-(d-M),m=M-p,d=Pn*v,_=d-(d-v),y=v-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,xs[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,xs[1]=T-(b+f)+(f-C),S=k+b,f=S-k,xs[2]=k-(S-f)+(b-f),xs[3]=S;let I=BF(4,xs),B=DF*o;if(I>=B||-I>=B||(f=t-D,s=t-(D+f)+(f-i),f=n-v,u=n-(v+f)+(f-i),f=e-M,l=e-(M+f)+(f-a),f=r-w,h=r-(w+f)+(f-a),s===0&&l===0&&u===0&&h===0)||(B=OF*o+LF*Math.abs(I),I+=D*h+w*s-(M*u+v*l),I>=B||-I>=B))return I;x=s*w,d=Pn*s,p=d-(d-s),m=s-p,d=Pn*w,_=d-(d-w),y=w-_,A=m*y-(x-p*_-m*_-p*y),C=l*v,d=Pn*l,p=d-(d-l),m=l-p,d=Pn*v,_=d-(d-v),y=v-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,qn[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,qn[1]=T-(b+f)+(f-C),S=k+b,f=S-k,qn[2]=k-(S-f)+(b-f),qn[3]=S;const $=zf(4,xs,4,qn,L6);x=D*h,d=Pn*D,p=d-(d-D),m=D-p,d=Pn*h,_=d-(d-h),y=h-_,A=m*y-(x-p*_-m*_-p*y),C=M*u,d=Pn*M,p=d-(d-M),m=M-p,d=Pn*u,_=d-(d-u),y=u-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,qn[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,qn[1]=T-(b+f)+(f-C),S=k+b,f=S-k,qn[2]=k-(S-f)+(b-f),qn[3]=S;const F=zf($,L6,4,qn,B6);x=s*h,d=Pn*s,p=d-(d-s),m=s-p,d=Pn*h,_=d-(d-h),y=h-_,A=m*y-(x-p*_-m*_-p*y),C=l*u,d=Pn*l,p=d-(d-l),m=l-p,d=Pn*u,_=d-(d-u),y=u-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,qn[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,qn[1]=T-(b+f)+(f-C),S=k+b,f=S-k,qn[2]=k-(S-f)+(b-f),qn[3]=S;const K=zf(F,B6,4,qn,N6);return N6[K-1]}function uh(t,e,n,r,i,a){const o=(e-a)*(n-i),s=(t-i)*(r-a),l=o-s;if(o===0||s===0||o>0!=s>0)return l;const u=Math.abs(o+s);return Math.abs(l)>=NF*u?l:-IF(t,e,n,r,i,a,u)}const D6=Math.pow(2,-52),hh=new Uint32Array(512);class dh{static from(e,n=YF,r=zF){const i=e.length,a=new Float64Array(i*2);for(let o=0;o<i;o++){const s=e[o];a[2*o]=n(s),a[2*o+1]=r(s)}return new dh(a)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:a}=this,o=e.length>>1;let s=1/0,l=1/0,u=-1/0,h=-1/0;for(let v=0;v<o;v++){const M=e[2*v],w=e[2*v+1];M<s&&(s=M),w<l&&(l=w),M>u&&(u=M),w>h&&(h=w),this._ids[v]=v}const f=(s+u)/2,d=(l+h)/2;let p=1/0,m,_,y;for(let v=0;v<o;v++){const M=jf(f,d,e[2*v],e[2*v+1]);M<p&&(m=v,p=M)}const b=e[2*m],k=e[2*m+1];p=1/0;for(let v=0;v<o;v++){if(v===m)continue;const M=jf(b,k,e[2*v],e[2*v+1]);M<p&&M>0&&(_=v,p=M)}let T=e[2*_],x=e[2*_+1],A=1/0;for(let v=0;v<o;v++){if(v===m||v===_)continue;const M=$F(b,k,T,x,e[2*v],e[2*v+1]);M<A&&(y=v,A=M)}let C=e[2*y],L=e[2*y+1];if(A===1/0){for(let w=0;w<o;w++)this._dists[w]=e[2*w]-e[0]||e[2*w+1]-e[1];ks(this._ids,this._dists,0,o-1);const v=new Uint32Array(o);let M=0;for(let w=0,I=-1/0;w<o;w++){const B=this._ids[w];this._dists[B]>I&&(v[M++]=B,I=this._dists[B])}this.hull=v.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(uh(b,k,T,x,C,L)<0){const v=_,M=T,w=x;_=y,T=C,x=L,y=v,C=M,L=w}const S=PF(b,k,T,x,C,L);this._cx=S.x,this._cy=S.y;for(let v=0;v<o;v++)this._dists[v]=jf(e[2*v],e[2*v+1],S.x,S.y);ks(this._ids,this._dists,0,o-1),this._hullStart=m;let D=3;r[m]=n[y]=_,r[_]=n[m]=y,r[y]=n[_]=m,i[m]=0,i[_]=1,i[y]=2,a.fill(-1),a[this._hashKey(b,k)]=m,a[this._hashKey(T,x)]=_,a[this._hashKey(C,L)]=y,this.trianglesLen=0,this._addTriangle(m,_,y,-1,-1,-1);for(let v=0,M,w;v<this._ids.length;v++){const I=this._ids[v],B=e[2*I],$=e[2*I+1];if(v>0&&Math.abs(B-M)<=D6&&Math.abs($-w)<=D6||(M=B,w=$,I===m||I===_||I===y))continue;let F=0;for(let rt=0,lt=this._hashKey(B,$);rt<this._hashSize&&(F=a[(lt+rt)%this._hashSize],!(F!==-1&&F!==r[F]));rt++);F=n[F];let K=F,nt;for(;nt=r[K],uh(B,$,e[2*K],e[2*K+1],e[2*nt],e[2*nt+1])>=0;)if(K=nt,K===F){K=-1;break}if(K===-1)continue;let z=this._addTriangle(K,I,r[K],-1,-1,i[K]);i[I]=this._legalize(z+2),i[K]=z,D++;let Y=r[K];for(;nt=r[Y],uh(B,$,e[2*Y],e[2*Y+1],e[2*nt],e[2*nt+1])<0;)z=this._addTriangle(Y,I,nt,i[I],-1,i[Y]),i[I]=this._legalize(z+2),r[Y]=Y,D--,Y=nt;if(K===F)for(;nt=n[K],uh(B,$,e[2*nt],e[2*nt+1],e[2*K],e[2*K+1])<0;)z=this._addTriangle(nt,I,K,-1,i[K],i[nt]),this._legalize(z+2),i[nt]=z,r[K]=K,D--,K=nt;this._hullStart=n[I]=K,r[K]=n[Y]=I,r[I]=Y,a[this._hashKey(B,$)]=I,a[this._hashKey(e[2*K],e[2*K+1])]=K}this.hull=new Uint32Array(D);for(let v=0,M=this._hullStart;v<D;v++)this.hull[v]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(RF(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let a=0,o=0;for(;;){const s=r[e],l=e-e%3;if(o=l+(e+2)%3,s===-1){if(a===0)break;e=hh[--a];continue}const u=s-s%3,h=l+(e+1)%3,f=u+(s+2)%3,d=n[o],p=n[e],m=n[h],_=n[f];if(FF(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1],i[2*_],i[2*_+1])){n[e]=_,n[s]=d;const y=r[f];if(y===-1){let k=this._hullStart;do{if(this._hullTri[k]===f){this._hullTri[k]=e;break}k=this._hullPrev[k]}while(k!==this._hullStart)}this._link(e,y),this._link(s,r[o]),this._link(o,f);const b=u+(s+1)%3;a<hh.length&&(hh[a++]=b)}else{if(a===0)break;e=hh[--a]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,a,o){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,a),this._link(s+2,o),this.trianglesLen+=3,s}}function RF(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function jf(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function FF(t,e,n,r,i,a,o,s){const l=t-o,u=e-s,h=n-o,f=r-s,d=i-o,p=a-s,m=l*l+u*u,_=h*h+f*f,y=d*d+p*p;return l*(f*y-_*p)-u*(h*y-_*d)+m*(h*p-f*d)<0}function $F(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,u=a-e,h=o*o+s*s,f=l*l+u*u,d=.5/(o*u-s*l),p=(u*h-s*f)*d,m=(o*f-l*h)*d;return p*p+m*m}function PF(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,u=a-e,h=o*o+s*s,f=l*l+u*u,d=.5/(o*u-s*l),p=t+(u*h-s*f)*d,m=e+(o*f-l*h)*d;return{x:p,y:m}}function ks(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const a=t[i],o=e[a];let s=i-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=a}else{const i=n+r>>1;let a=n+1,o=r;Wc(t,i,a),e[t[n]]>e[t[r]]&&Wc(t,n,r),e[t[a]]>e[t[r]]&&Wc(t,a,r),e[t[n]]>e[t[a]]&&Wc(t,n,a);const s=t[a],l=e[s];for(;;){do a++;while(e[t[a]]<l);do o--;while(e[t[o]]>l);if(o<a)break;Wc(t,a,o)}t[n+1]=t[o],t[o]=s,r-a+1>=o-n?(ks(t,e,a,r),ks(t,e,n,o-1)):(ks(t,e,n,o-1),ks(t,e,a,r))}}function Wc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function YF(t){return t[0]}function zF(t){return t[1]}const O6=1e-6;class To{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,a=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>O6||Math.abs(this._y1-a)>O6)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Uf{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class I6{constructor(e,[n,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this,a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let p=0,m=0,_=r.length,y,b;p<_;p+=3,m+=2){const k=r[p]*2,T=r[p+1]*2,x=r[p+2]*2,A=e[k],C=e[k+1],L=e[T],S=e[T+1],D=e[x],v=e[x+1],M=L-A,w=S-C,I=D-A,B=v-C,$=(M*B-w*I)*2;if(Math.abs($)<1e-9){let F=1e9;const K=r[0]*2;F*=Math.sign((e[K]-A)*B-(e[K+1]-C)*I),y=(A+D)/2-F*B,b=(C+v)/2+F*I}else{const F=1/$,K=M*M+w*w,nt=I*I+B*B;y=A+(B*K-w*nt)*F,b=C+(M*nt-I*K)*F}a[m]=y,a[m+1]=b}let o=n[n.length-1],s,l=o*4,u,h=e[2*o],f,d=e[2*o+1];i.fill(0);for(let p=0;p<n.length;++p)o=n[p],s=l,u=h,f=d,l=o*4,h=e[2*o],d=e[2*o+1],i[s+2]=i[l]=f-d,i[s+3]=i[l+1]=h-u}render(e){const n=e==null?e=new To:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:o,vectors:s}=this;if(a.length<=1)return null;for(let h=0,f=r.length;h<f;++h){const d=r[h];if(d<h)continue;const p=Math.floor(h/3)*2,m=Math.floor(d/3)*2,_=o[p],y=o[p+1],b=o[m],k=o[m+1];this._renderSegment(_,y,b,k,e)}let l,u=a[a.length-1];for(let h=0;h<a.length;++h){l=u,u=a[h];const f=Math.floor(i[u]/3)*2,d=o[f],p=o[f+1],m=l*4,_=this._project(d,p,s[m+2],s[m+3]);_&&this._renderSegment(d,p,_[0],_[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new To:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new To:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let o=2;o<a;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new Uf;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,a){let o;const s=this._regioncode(e,n),l=this._regioncode(r,i);s===0&&l===0?(a.moveTo(e,n),a.lineTo(r,i)):(o=this._clipSegment(e,n,r,i,s,l))&&(a.moveTo(o[0],o[1]),a.lineTo(o[2],o[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){t:for(let a=0,o=n.length;a<o;a+=2)for(let s=0,l=i.length;s<l;s+=2)if(n[a]==i[s]&&n[a+1]==i[s+1]&&n[(a+2)%o]==i[(s+l-2)%l]&&n[(a+3)%o]==i[(s+l-1)%l]){yield r;break t}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,o=r[e];if(o===-1)return null;const s=[];let l=o;do{const u=Math.floor(l/3);if(s.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,a[l]!==e)break;l=i[l]}while(l!==o&&l!==-1);return s}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n)}_clipFinite(e,n){const r=n.length;let i=null,a,o,s=n[r-2],l=n[r-1],u,h=this._regioncode(s,l),f,d=0;for(let p=0;p<r;p+=2)if(a=s,o=l,s=n[p],l=n[p+1],u=h,h=this._regioncode(s,l),u===0&&h===0)f=d,d=0,i?i.push(s,l):i=[s,l];else{let m,_,y,b,k;if(u===0){if((m=this._clipSegment(a,o,s,l,u,h))===null)continue;[_,y,b,k]=m}else{if((m=this._clipSegment(s,l,a,o,h,u))===null)continue;[b,k,_,y]=m,f=d,d=this._edgecode(_,y),f&&d&&this._edge(e,f,d,i,i.length),i?i.push(_,y):i=[_,y]}f=d,d=this._edgecode(b,k),f&&d&&this._edge(e,f,d,i,i.length),i?i.push(b,k):i=[b,k]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(e,f,d,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,a,o){for(;;){if(a===0&&o===0)return[e,n,r,i];if(a&o)return null;let s,l,u=a||o;u&8?(s=e+(r-e)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(s=e+(r-e)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-e)/(r-e),s=this.xmax):(l=n+(i-n)*(this.xmin-e)/(r-e),s=this.xmin),a?(e=s,n=l,a=this._regioncode(e,n)):(r=s,i=l,o=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,a,o){let s=Array.from(n),l;if((l=this._project(s[0],s[1],r,i))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],a,o))&&s.push(l[0],l[1]),s=this._clipFinite(e,s))for(let u=0,h=s.length,f,d=this._edgecode(s[h-2],s[h-1]);u<h;u+=2)f=d,d=this._edgecode(s[u],s[u+1]),f&&d&&(u=this._edge(e,f,d,s,u),h=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,n,r,i,a){for(;n!==r;){let o,s;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,s=this.ymin;break}(i[a]!==o||i[a+1]!==s)&&this.contains(e,o,s)&&(i.splice(a,0,o,s),a+=2)}if(i.length>4)for(let o=0;o<i.length;o+=2){const s=(o+2)%i.length,l=(o+4)%i.length;(i[o]===i[s]&&i[s]===i[l]||i[o+1]===i[s+1]&&i[s+1]===i[l+1])&&(i.splice(s,2),o-=2)}return a}_project(e,n,r,i){let a=1/0,o,s,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<a&&(l=this.ymin,s=e+(a=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<a&&(l=this.ymax,s=e+(a=o)*r)}if(r>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/r)<a&&(s=this.xmax,l=n+(a=o)*i)}else if(r<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/r)<a&&(s=this.xmin,l=n+(a=o)*i)}return[s,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const jF=2*Math.PI,ws=Math.pow;function UF(t){return t[0]}function HF(t){return t[1]}function WF(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],o=2*e[r+2];if((n[o]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function VF(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Hf{static from(e,n=UF,r=HF,i){return new Hf("length"in e?GF(e,n,r,i):Float64Array.from(qF(e,n,r,i)))}constructor(e){this._delaunator=new dh(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&WF(e)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],h=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(h[3]-h[1],h[2]-h[0]);for(let d=0,p=n.length/2;d<p;++d){const m=VF(n[2*d],n[2*d+1],f);n[2*d]=m[0],n[2*d+1]=m[1]}this._delaunator=new dh(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const h=a[l%3===2?l-2:l+1];(r[l]===-1||o[h]===-1)&&(o[h]=l)}for(let l=0,u=i.length;l<u;++l)s[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new I6(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:a,triangles:o,collinear:s}=this;if(s){const f=s.indexOf(e);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}const l=n[e];if(l===-1)return;let u=l,h=-1;do{if(yield h=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=a[u],u===-1){const f=r[(i[e]+1)%r.length];f!==h&&(yield f);return}}while(u!==l)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let a;for(;(a=this._step(r,e,n))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,n,r){const{inedges:i,hull:a,_hullIndex:o,halfedges:s,triangles:l,points:u}=this;if(i[e]===-1||!u.length)return(e+1)%(u.length>>1);let h=e,f=ws(n-u[e*2],2)+ws(r-u[e*2+1],2);const d=i[e];let p=d;do{let m=l[p];const _=ws(n-u[m*2],2)+ws(r-u[m*2+1],2);if(_<f&&(f=_,h=m),p=p%3===2?p-2:p+1,l[p]!==e)break;if(p=s[p],p===-1){if(p=a[(o[e]+1)%a.length],p!==m&&ws(n-u[p*2],2)+ws(r-u[p*2+1],2)<f)return p;break}}while(p!==d);return h}render(e){const n=e==null?e=new To:void 0,{points:r,halfedges:i,triangles:a}=this;for(let o=0,s=i.length;o<s;++o){const l=i[o];if(l<o)continue;const u=a[o]*2,h=a[l]*2;e.moveTo(r[u],r[u+1]),e.lineTo(r[h],r[h+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const r=e==null?e=new To:void 0,{points:i}=this;for(let a=0,o=i.length;a<o;a+=2){const s=i[a],l=i[a+1];e.moveTo(s+n,l),e.arc(s,l,n,0,jF)}return r&&r.value()}renderHull(e){const n=e==null?e=new To:void 0,{hull:r,points:i}=this,a=r[0]*2,o=r.length;e.moveTo(i[a],i[a+1]);for(let s=1;s<o;++s){const l=2*r[s];e.lineTo(i[l],i[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new Uf;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new To:void 0,{points:i,triangles:a}=this,o=a[e*=3]*2,s=a[e+1]*2,l=a[e+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new Uf;return this.renderTriangle(e,n),n.value()}}function GF(t,e,n,r){const i=t.length,a=new Float64Array(i*2);for(let o=0;o<i;++o){const s=t[o];a[o*2]=e.call(r,s,o,t),a[o*2+1]=n.call(r,s,o,t)}return a}function*qF(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}var R6={},Wf={},Vf=34,Vc=10,Gf=13;function F6(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function XF(t,e){var n=F6(t);return function(r,i){return e(n(r),i,t)}}function $6(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function hr(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ZF(t){return t<0?"-"+hr(-t,6):t>9999?"+"+hr(t,6):hr(t,4)}function QF(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ZF(t.getUTCFullYear())+"-"+hr(t.getUTCMonth()+1,2)+"-"+hr(t.getUTCDate(),2)+(i?"T"+hr(e,2)+":"+hr(n,2)+":"+hr(r,2)+"."+hr(i,3)+"Z":r?"T"+hr(e,2)+":"+hr(n,2)+":"+hr(r,2)+"Z":n||e?"T"+hr(e,2)+":"+hr(n,2)+"Z":"")}function fh(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var p,m,_=i(f,function(y,b){if(p)return p(y,b-1);m=y,p=d?XF(y,d):F6(y)});return _.columns=m||[],_}function i(f,d){var p=[],m=f.length,_=0,y=0,b,k=m<=0,T=!1;f.charCodeAt(m-1)===Vc&&--m,f.charCodeAt(m-1)===Gf&&--m;function x(){if(k)return Wf;if(T)return T=!1,R6;var C,L=_,S;if(f.charCodeAt(L)===Vf){for(;_++<m&&f.charCodeAt(_)!==Vf||f.charCodeAt(++_)===Vf;);return(C=_)>=m?k=!0:(S=f.charCodeAt(_++))===Vc?T=!0:S===Gf&&(T=!0,f.charCodeAt(_)===Vc&&++_),f.slice(L+1,C-1).replace(/""/g,'"')}for(;_<m;){if((S=f.charCodeAt(C=_++))===Vc)T=!0;else if(S===Gf)T=!0,f.charCodeAt(_)===Vc&&++_;else if(S!==n)continue;return f.slice(L,C)}return k=!0,f.slice(L,m)}for(;(b=x())!==Wf;){for(var A=[];b!==R6&&b!==Wf;)A.push(b),b=x();d&&(A=d(A,y++))==null||p.push(A)}return p}function a(f,d){return f.map(function(p){return d.map(function(m){return h(p[m])}).join(t)})}function o(f,d){return d==null&&(d=$6(f)),[d.map(h).join(t)].concat(a(f,d)).join(`
`)}function s(f,d){return d==null&&(d=$6(f)),a(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(h).join(t)}function h(f){return f==null?"":f instanceof Date?QF(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:h}}var Eo=fh(","),P6=Eo.parse,KF=Eo.parseRows,JF=Eo.format,t$=Eo.formatBody,e$=Eo.formatRows,n$=Eo.formatRow,r$=Eo.formatValue,Co=fh("	"),Y6=Co.parse,i$=Co.parseRows,a$=Co.format,o$=Co.formatBody,s$=Co.formatRows,c$=Co.formatRow,l$=Co.formatValue;function u$(t){for(var e in t){var n=t[e].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))h$&&!!i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const h$=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function d$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function f$(t,e){return fetch(t,e).then(d$)}function p$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function g$(t,e){return fetch(t,e).then(p$)}function y$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ph(t,e){return fetch(t,e).then(y$)}function z6(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),ph(e,n).then(function(i){return t(i,r)})}}function m$(t,e,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=fh(t);return ph(e,n).then(function(a){return i.parse(a,r)})}var b$=z6(P6),_$=z6(Y6);function v$(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function x$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function k$(t,e){return fetch(t,e).then(x$)}function qf(t){return(e,n)=>ph(e,n).then(r=>new DOMParser().parseFromString(r,t))}const w$=qf("application/xml");var T$=qf("text/html"),E$=qf("image/svg+xml");function C$(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,o=n.length,s,l=0,u=0;for(a=0;a<o;++a)s=n[a],l+=s.x,u+=s.y;for(l=(l/o-t)*r,u=(u/o-e)*r,a=0;a<o;++a)s=n[a],s.x-=l,s.y-=u}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function S$(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return j6(this.cover(e,n),e,n,t)}function j6(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,o={data:r},s=t._x0,l=t._y0,u=t._x1,h=t._y1,f,d,p,m,_,y,b,k;if(!a)return t._root=o,t;for(;a.length;)if((_=e>=(f=(s+u)/2))?s=f:u=f,(y=n>=(d=(l+h)/2))?l=d:h=d,i=a,!(a=a[b=y<<1|_]))return i[b]=o,t;if(p=+t._x.call(null,a.data),m=+t._y.call(null,a.data),e===p&&n===m)return o.next=a,i?i[b]=o:t._root=o,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(_=e>=(f=(s+u)/2))?s=f:u=f,(y=n>=(d=(l+h)/2))?l=d:h=d;while((b=y<<1|_)===(k=(m>=d)<<1|p>=f));return i[k]=a,i[b]=o,t}function A$(t){var e,n,r=t.length,i,a,o=new Array(r),s=new Array(r),l=1/0,u=1/0,h=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=i,s[n]=a,i<l&&(l=i),i>h&&(h=i),a<u&&(u=a),a>f&&(f=a));if(l>h||u>f)return this;for(this.cover(l,u).cover(h,f),n=0;n<r;++n)j6(this,o[n],s[n],t[n]);return this}function M$(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o=i-n||1,s=this._root,l,u;n>t||t>=i||r>e||e>=a;)switch(u=(e<r)<<1|t<n,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=n+o,a=r+o;break;case 1:n=i-o,a=r+o;break;case 2:i=n+o,r=a-o;break;case 3:n=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function L$(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function B$(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Xn(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function N$(t,e,n){var r,i=this._x0,a=this._y0,o,s,l,u,h=this._x1,f=this._y1,d=[],p=this._root,m,_;for(p&&d.push(new Xn(p,i,a,h,f)),n==null?n=1/0:(i=t-n,a=e-n,h=t+n,f=e+n,n*=n);m=d.pop();)if(!(!(p=m.node)||(o=m.x0)>h||(s=m.y0)>f||(l=m.x1)<i||(u=m.y1)<a))if(p.length){var y=(o+l)/2,b=(s+u)/2;d.push(new Xn(p[3],y,b,l,u),new Xn(p[2],o,b,y,u),new Xn(p[1],y,s,l,b),new Xn(p[0],o,s,y,b)),(_=(e>=b)<<1|t>=y)&&(m=d[d.length-1],d[d.length-1]=d[d.length-1-_],d[d.length-1-_]=m)}else{var k=t-+this._x.call(null,p.data),T=e-+this._y.call(null,p.data),x=k*k+T*T;if(x<n){var A=Math.sqrt(n=x);i=t-A,a=e-A,h=t+A,f=e+A,r=p.data}}return r}function D$(t){if(isNaN(h=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,h,f,d,p,m,_,y,b;if(!n)return this;if(n.length)for(;;){if((m=h>=(d=(o+l)/2))?o=d:l=d,(_=f>=(p=(s+u)/2))?s=p:u=p,e=n,!(n=n[y=_<<1|m]))return this;if(!n.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(r=e,b=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[y]=a:delete e[y],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=a,this)}function O$(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function I$(){return this._root}function R$(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function F$(t){var e=[],n,r=this._root,i,a,o,s,l;for(r&&e.push(new Xn(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,o=n.y0,s=n.x1,l=n.y1)&&r.length){var u=(a+s)/2,h=(o+l)/2;(i=r[3])&&e.push(new Xn(i,u,h,s,l)),(i=r[2])&&e.push(new Xn(i,a,h,u,l)),(i=r[1])&&e.push(new Xn(i,u,o,s,h)),(i=r[0])&&e.push(new Xn(i,a,o,u,h))}return this}function $$(t){var e=[],n=[],r;for(this._root&&e.push(new Xn(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.x1,u=r.y1,h=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new Xn(a,o,s,h,f)),(a=i[1])&&e.push(new Xn(a,h,s,l,f)),(a=i[2])&&e.push(new Xn(a,o,f,h,u)),(a=i[3])&&e.push(new Xn(a,h,f,l,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function P$(t){return t[0]}function Y$(t){return arguments.length?(this._x=t,this):this._x}function z$(t){return t[1]}function j$(t){return arguments.length?(this._y=t,this):this._y}function gh(t,e,n){var r=new Xf(e==null?P$:e,n==null?z$:n,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Xf(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function U6(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Zn=gh.prototype=Xf.prototype;Zn.copy=function(){var t=new Xf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=U6(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=U6(r));return t},Zn.add=S$,Zn.addAll=A$,Zn.cover=M$,Zn.data=L$,Zn.extent=B$,Zn.find=N$,Zn.remove=D$,Zn.removeAll=O$,Zn.root=I$,Zn.size=R$,Zn.visit=F$,Zn.visitAfter=$$,Zn.x=Y$,Zn.y=j$;function kn(t){return function(){return t}}function Na(t){return(t()-.5)*1e-6}function U$(t){return t.x+t.vx}function H$(t){return t.y+t.vy}function W$(t){var e,n,r,i=1,a=1;typeof t!="function"&&(t=kn(t==null?1:+t));function o(){for(var u,h=e.length,f,d,p,m,_,y,b=0;b<a;++b)for(f=gh(e,U$,H$).visitAfter(s),u=0;u<h;++u)d=e[u],_=n[d.index],y=_*_,p=d.x+d.vx,m=d.y+d.vy,f.visit(k);function k(T,x,A,C,L){var S=T.data,D=T.r,v=_+D;if(S){if(S.index>d.index){var M=p-S.x-S.vx,w=m-S.y-S.vy,I=M*M+w*w;I<v*v&&(M===0&&(M=Na(r),I+=M*M),w===0&&(w=Na(r),I+=w*w),I=(v-(I=Math.sqrt(I)))/I*i,d.vx+=(M*=I)*(v=(D*=D)/(y+D)),d.vy+=(w*=I)*v,S.vx-=M*(v=1-v),S.vy-=w*v)}return}return x>p+v||C<p-v||A>m+v||L<m-v}}function s(u){if(u.data)return u.r=n[u.data.index];for(var h=u.r=0;h<4;++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function l(){if(e){var u,h=e.length,f;for(n=new Array(h),u=0;u<h;++u)f=e[u],n[f.index]=+t(f,u,e)}}return o.initialize=function(u,h){e=u,r=h,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:kn(+u),l(),o):t},o}function V$(t){return t.index}function H6(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function G$(t){var e=V$,n=f,r,i=kn(30),a,o,s,l,u,h=1;t==null&&(t=[]);function f(y){return 1/Math.min(s[y.source.index],s[y.target.index])}function d(y){for(var b=0,k=t.length;b<h;++b)for(var T=0,x,A,C,L,S,D,v;T<k;++T)x=t[T],A=x.source,C=x.target,L=C.x+C.vx-A.x-A.vx||Na(u),S=C.y+C.vy-A.y-A.vy||Na(u),D=Math.sqrt(L*L+S*S),D=(D-a[T])/D*y*r[T],L*=D,S*=D,C.vx-=L*(v=l[T]),C.vy-=S*v,A.vx+=L*(v=1-v),A.vy+=S*v}function p(){if(o){var y,b=o.length,k=t.length,T=new Map(o.map((A,C)=>[e(A,C,o),A])),x;for(y=0,s=new Array(b);y<k;++y)x=t[y],x.index=y,typeof x.source!="object"&&(x.source=H6(T,x.source)),typeof x.target!="object"&&(x.target=H6(T,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(y=0,l=new Array(k);y<k;++y)x=t[y],l[y]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);r=new Array(k),m(),a=new Array(k),_()}}function m(){if(o)for(var y=0,b=t.length;y<b;++y)r[y]=+n(t[y],y,t)}function _(){if(o)for(var y=0,b=t.length;y<b;++y)a[y]=+i(t[y],y,t)}return d.initialize=function(y,b){o=y,u=b,p()},d.links=function(y){return arguments.length?(t=y,p(),d):t},d.id=function(y){return arguments.length?(e=y,d):e},d.iterations=function(y){return arguments.length?(h=+y,d):h},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:kn(+y),m(),d):n},d.distance=function(y){return arguments.length?(i=typeof y=="function"?y:kn(+y),_(),d):i},d}const q$=1664525,X$=1013904223,W6=4294967296;function Z$(){let t=1;return()=>(t=(q$*t+X$)%W6)/W6}function Q$(t){return t.x}function K$(t){return t.y}var J$=10,tP=Math.PI*(3-Math.sqrt(5));function eP(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=nh(f),u=fo("tick","end"),h=Z$();t==null&&(t=[]);function f(){d(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function d(_){var y,b=t.length,k;_===void 0&&(_=1);for(var T=0;T<_;++T)for(n+=(a-n)*i,s.forEach(function(x){x(n)}),y=0;y<b;++y)k=t[y],k.fx==null?k.x+=k.vx*=o:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=o:(k.y=k.fy,k.vy=0);return e}function p(){for(var _=0,y=t.length,b;_<y;++_){if(b=t[_],b.index=_,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var k=J$*Math.sqrt(.5+_),T=_*tP;b.x=k*Math.cos(T),b.y=k*Math.sin(T)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function m(_){return _.initialize&&_.initialize(t,h),_}return p(),e={tick:d,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(_){return arguments.length?(t=_,p(),s.forEach(m),e):t},alpha:function(_){return arguments.length?(n=+_,e):n},alphaMin:function(_){return arguments.length?(r=+_,e):r},alphaDecay:function(_){return arguments.length?(i=+_,e):+i},alphaTarget:function(_){return arguments.length?(a=+_,e):a},velocityDecay:function(_){return arguments.length?(o=1-_,e):1-o},randomSource:function(_){return arguments.length?(h=_,s.forEach(m),e):h},force:function(_,y){return arguments.length>1?(y==null?s.delete(_):s.set(_,m(y)),e):s.get(_)},find:function(_,y,b){var k=0,T=t.length,x,A,C,L,S;for(b==null?b=1/0:b*=b,k=0;k<T;++k)L=t[k],x=_-L.x,A=y-L.y,C=x*x+A*A,C<b&&(S=L,b=C);return S},on:function(_,y){return arguments.length>1?(u.on(_,y),e):u.on(_)}}}function nP(){var t,e,n,r,i=kn(-30),a,o=1,s=1/0,l=.81;function u(p){var m,_=t.length,y=gh(t,Q$,K$).visitAfter(f);for(r=p,m=0;m<_;++m)e=t[m],y.visit(d)}function h(){if(t){var p,m=t.length,_;for(a=new Array(m),p=0;p<m;++p)_=t[p],a[_.index]=+i(_,p,t)}}function f(p){var m=0,_,y,b=0,k,T,x;if(p.length){for(k=T=x=0;x<4;++x)(_=p[x])&&(y=Math.abs(_.value))&&(m+=_.value,b+=y,k+=y*_.x,T+=y*_.y);p.x=k/b,p.y=T/b}else{_=p,_.x=_.data.x,_.y=_.data.y;do m+=a[_.data.index];while(_=_.next)}p.value=m}function d(p,m,_,y){if(!p.value)return!0;var b=p.x-e.x,k=p.y-e.y,T=y-m,x=b*b+k*k;if(T*T/l<x)return x<s&&(b===0&&(b=Na(n),x+=b*b),k===0&&(k=Na(n),x+=k*k),x<o&&(x=Math.sqrt(o*x)),e.vx+=b*p.value*r/x,e.vy+=k*p.value*r/x),!0;if(!(p.length||x>=s)){(p.data!==e||p.next)&&(b===0&&(b=Na(n),x+=b*b),k===0&&(k=Na(n),x+=k*k),x<o&&(x=Math.sqrt(o*x)));do p.data!==e&&(T=a[p.data.index]*r/x,e.vx+=b*T,e.vy+=k*T);while(p=p.next)}}return u.initialize=function(p,m){t=p,n=m,h()},u.strength=function(p){return arguments.length?(i=typeof p=="function"?p:kn(+p),h(),u):i},u.distanceMin=function(p){return arguments.length?(o=p*p,u):Math.sqrt(o)},u.distanceMax=function(p){return arguments.length?(s=p*p,u):Math.sqrt(s)},u.theta=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u}function rP(t,e,n){var r,i=kn(.1),a,o;typeof t!="function"&&(t=kn(+t)),e==null&&(e=0),n==null&&(n=0);function s(u){for(var h=0,f=r.length;h<f;++h){var d=r[h],p=d.x-e||1e-6,m=d.y-n||1e-6,_=Math.sqrt(p*p+m*m),y=(o[h]-_)*a[h]*u/_;d.vx+=p*y,d.vy+=m*y}}function l(){if(r){var u,h=r.length;for(a=new Array(h),o=new Array(h),u=0;u<h;++u)o[u]=+t(r[u],u,r),a[u]=isNaN(o[u])?0:+i(r[u],u,r)}}return s.initialize=function(u){r=u,l()},s.strength=function(u){return arguments.length?(i=typeof u=="function"?u:kn(+u),l(),s):i},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:kn(+u),l(),s):t},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(n=+u,s):n},s}function iP(t){var e=kn(.1),n,r,i;typeof t!="function"&&(t=kn(t==null?0:+t));function a(s){for(var l=0,u=n.length,h;l<u;++l)h=n[l],h.vx+=(i[l]-h.x)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:kn(+s),o(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:kn(+s),o(),a):t},a}function aP(t){var e=kn(.1),n,r,i;typeof t!="function"&&(t=kn(t==null?0:+t));function a(s){for(var l=0,u=n.length,h;l<u;++l)h=n[l],h.vy+=(i[l]-h.y)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:kn(+s),o(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:kn(+s),o(),a):t},a}function oP(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function yh(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ts(t){return t=yh(Math.abs(t)),t?t[1]:NaN}function sP(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function cP(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var lP=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Es(t){if(!(e=lP.exec(t)))throw new Error("invalid format: "+t);var e;return new mh({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Es.prototype=mh.prototype;function mh(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uP(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var V6;function hP(t,e){var n=yh(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(V6=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+yh(t,Math.max(0,e+a-1))[0]}function G6(t,e){var n=yh(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const q6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:oP,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>G6(t*100,e),r:G6,s:hP,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function X6(t){return t}var Z6=Array.prototype.map,Q6=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function K6(t){var e=t.grouping===void 0||t.thousands===void 0?X6:sP(Z6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?X6:cP(Z6.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Es(f);var d=f.fill,p=f.align,m=f.sign,_=f.symbol,y=f.zero,b=f.width,k=f.comma,T=f.precision,x=f.trim,A=f.type;A==="n"?(k=!0,A="g"):q6[A]||(T===void 0&&(T=12),x=!0,A="g"),(y||d==="0"&&p==="=")&&(y=!0,d="0",p="=");var C=_==="$"?n:_==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",L=_==="$"?r:/[%p]/.test(A)?o:"",S=q6[A],D=/[defgprs%]/.test(A);T=T===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function v(M){var w=C,I=L,B,$,F;if(A==="c")I=S(M)+I,M="";else{M=+M;var K=M<0||1/M<0;if(M=isNaN(M)?l:S(Math.abs(M),T),x&&(M=uP(M)),K&&+M==0&&m!=="+"&&(K=!1),w=(K?m==="("?m:s:m==="-"||m==="("?"":m)+w,I=(A==="s"?Q6[8+V6/3]:"")+I+(K&&m==="("?")":""),D){for(B=-1,$=M.length;++B<$;)if(F=M.charCodeAt(B),48>F||F>57){I=(F===46?i+M.slice(B+1):M.slice(B))+I,M=M.slice(0,B);break}}}k&&!y&&(M=e(M,1/0));var nt=w.length+M.length+I.length,z=nt<b?new Array(b-nt+1).join(d):"";switch(k&&y&&(M=e(z+M,z.length?b-I.length:1/0),z=""),p){case"<":M=w+M+I+z;break;case"=":M=w+z+M+I;break;case"^":M=z.slice(0,nt=z.length>>1)+w+M+I+z.slice(nt);break;default:M=z+w+M+I;break}return a(M)}return v.toString=function(){return f+""},v}function h(f,d){var p=u((f=Es(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Ts(d)/3)))*3,_=Math.pow(10,-m),y=Q6[8+m/3];return function(b){return p(_*b)+y}}return{format:u,formatPrefix:h}}var bh,_h,Zf;J6({thousands:",",grouping:[3],currency:["$",""]});function J6(t){return bh=K6(t),_h=bh.format,Zf=bh.formatPrefix,bh}function tv(t){return Math.max(0,-Ts(Math.abs(t)))}function ev(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ts(e)/3)))*3-Ts(Math.abs(t)))}function nv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ts(e)-Ts(t))+1}var Jt=1e-6,Gc=1e-12,Te=Math.PI,en=Te/2,vh=Te/4,Qn=Te*2,Ue=180/Te,ne=Te/180,Be=Math.abs,Cs=Math.atan,Kn=Math.atan2,Wt=Math.cos,xh=Math.ceil,rv=Math.exp,Qf=Math.hypot,kh=Math.log,Kf=Math.pow,Ut=Math.sin,Br=Math.sign||function(t){return t>0?1:t<0?-1:0},Sn=Math.sqrt,Jf=Math.tan;function iv(t){return t>1?0:t<-1?Te:Math.acos(t)}function Jn(t){return t>1?en:t<-1?-en:Math.asin(t)}function av(t){return(t=Ut(t/2))*t}function Qe(){}function wh(t,e){t&&sv.hasOwnProperty(t.type)&&sv[t.type](t,e)}var ov={Feature:function(t,e){wh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)wh(n[r].geometry,e)}},sv={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){t2(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t2(n[r],e,0)},Polygon:function(t,e){cv(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)cv(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)wh(n[r],e)}};function t2(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function cv(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)t2(t[n],e,1);e.polygonEnd()}function Kr(t,e){t&&ov.hasOwnProperty(t.type)?ov[t.type](t,e):wh(t,e)}var Th=new xn,Eh=new xn,lv,uv,e2,n2,r2,Ti={point:Qe,lineStart:Qe,lineEnd:Qe,polygonStart:function(){Th=new xn,Ti.lineStart=dP,Ti.lineEnd=fP},polygonEnd:function(){var t=+Th;Eh.add(t<0?Qn+t:t),this.lineStart=this.lineEnd=this.point=Qe},sphere:function(){Eh.add(Qn)}};function dP(){Ti.point=pP}function fP(){hv(lv,uv)}function pP(t,e){Ti.point=hv,lv=t,uv=e,t*=ne,e*=ne,e2=t,n2=Wt(e=e/2+vh),r2=Ut(e)}function hv(t,e){t*=ne,e*=ne,e=e/2+vh;var n=t-e2,r=n>=0?1:-1,i=r*n,a=Wt(e),o=Ut(e),s=r2*o,l=n2*a+s*Wt(i),u=s*r*Ut(i);Th.add(Kn(u,l)),e2=t,n2=a,r2=o}function gP(t){return Eh=new xn,Kr(t,Ti),Eh*2}function Ch(t){return[Kn(t[1],t[0]),Jn(t[2])]}function So(t){var e=t[0],n=t[1],r=Wt(n);return[r*Wt(e),r*Ut(e),Ut(n)]}function Sh(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ss(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function i2(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ah(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Mh(t){var e=Sn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ke,dr,nn,wr,Ao,dv,fv,As,qc,Da,Zi,Qi={point:a2,lineStart:gv,lineEnd:yv,polygonStart:function(){Qi.point=mv,Qi.lineStart=yP,Qi.lineEnd=mP,qc=new xn,Ti.polygonStart()},polygonEnd:function(){Ti.polygonEnd(),Qi.point=a2,Qi.lineStart=gv,Qi.lineEnd=yv,Th<0?(Ke=-(nn=180),dr=-(wr=90)):qc>Jt?wr=90:qc<-Jt&&(dr=-90),Zi[0]=Ke,Zi[1]=nn},sphere:function(){Ke=-(nn=180),dr=-(wr=90)}};function a2(t,e){Da.push(Zi=[Ke=t,nn=t]),e<dr&&(dr=e),e>wr&&(wr=e)}function pv(t,e){var n=So([t*ne,e*ne]);if(As){var r=Ss(As,n),i=[r[1],-r[0],0],a=Ss(i,r);Mh(a),a=Ch(a);var o=t-Ao,s=o>0?1:-1,l=a[0]*Ue*s,u,h=Be(o)>180;h^(s*Ao<l&&l<s*t)?(u=a[1]*Ue,u>wr&&(wr=u)):(l=(l+360)%360-180,h^(s*Ao<l&&l<s*t)?(u=-a[1]*Ue,u<dr&&(dr=u)):(e<dr&&(dr=e),e>wr&&(wr=e))),h?t<Ao?Tr(Ke,t)>Tr(Ke,nn)&&(nn=t):Tr(t,nn)>Tr(Ke,nn)&&(Ke=t):nn>=Ke?(t<Ke&&(Ke=t),t>nn&&(nn=t)):t>Ao?Tr(Ke,t)>Tr(Ke,nn)&&(nn=t):Tr(t,nn)>Tr(Ke,nn)&&(Ke=t)}else Da.push(Zi=[Ke=t,nn=t]);e<dr&&(dr=e),e>wr&&(wr=e),As=n,Ao=t}function gv(){Qi.point=pv}function yv(){Zi[0]=Ke,Zi[1]=nn,Qi.point=a2,As=null}function mv(t,e){if(As){var n=t-Ao;qc.add(Be(n)>180?n+(n>0?360:-360):n)}else dv=t,fv=e;Ti.point(t,e),pv(t,e)}function yP(){Ti.lineStart()}function mP(){mv(dv,fv),Ti.lineEnd(),Be(qc)>Jt&&(Ke=-(nn=180)),Zi[0]=Ke,Zi[1]=nn,As=null}function Tr(t,e){return(e-=t)<0?e+360:e}function bP(t,e){return t[0]-e[0]}function bv(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function _P(t){var e,n,r,i,a,o,s;if(wr=nn=-(Ke=dr=1/0),Da=[],Kr(t,Qi),n=Da.length){for(Da.sort(bP),e=1,r=Da[0],a=[r];e<n;++e)i=Da[e],bv(r,i[0])||bv(r,i[1])?(Tr(r[0],i[1])>Tr(r[0],r[1])&&(r[1]=i[1]),Tr(i[0],r[1])>Tr(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,n=a.length-1,e=0,r=a[n];e<=n;r=i,++e)i=a[e],(s=Tr(r[1],i[0]))>o&&(o=s,Ke=i[0],nn=r[1])}return Da=Zi=null,Ke===1/0||dr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ke,dr],[nn,wr]]}var Xc,Lh,Bh,Nh,Dh,Oh,Ih,Rh,o2,s2,c2,_v,vv,tr,er,nr,Jr={sphere:Qe,point:l2,lineStart:xv,lineEnd:kv,polygonStart:function(){Jr.lineStart=kP,Jr.lineEnd=wP},polygonEnd:function(){Jr.lineStart=xv,Jr.lineEnd=kv}};function l2(t,e){t*=ne,e*=ne;var n=Wt(e);Zc(n*Wt(t),n*Ut(t),Ut(e))}function Zc(t,e,n){++Xc,Bh+=(t-Bh)/Xc,Nh+=(e-Nh)/Xc,Dh+=(n-Dh)/Xc}function xv(){Jr.point=vP}function vP(t,e){t*=ne,e*=ne;var n=Wt(e);tr=n*Wt(t),er=n*Ut(t),nr=Ut(e),Jr.point=xP,Zc(tr,er,nr)}function xP(t,e){t*=ne,e*=ne;var n=Wt(e),r=n*Wt(t),i=n*Ut(t),a=Ut(e),o=Kn(Sn((o=er*a-nr*i)*o+(o=nr*r-tr*a)*o+(o=tr*i-er*r)*o),tr*r+er*i+nr*a);Lh+=o,Oh+=o*(tr+(tr=r)),Ih+=o*(er+(er=i)),Rh+=o*(nr+(nr=a)),Zc(tr,er,nr)}function kv(){Jr.point=l2}function kP(){Jr.point=TP}function wP(){wv(_v,vv),Jr.point=l2}function TP(t,e){_v=t,vv=e,t*=ne,e*=ne,Jr.point=wv;var n=Wt(e);tr=n*Wt(t),er=n*Ut(t),nr=Ut(e),Zc(tr,er,nr)}function wv(t,e){t*=ne,e*=ne;var n=Wt(e),r=n*Wt(t),i=n*Ut(t),a=Ut(e),o=er*a-nr*i,s=nr*r-tr*a,l=tr*i-er*r,u=Qf(o,s,l),h=Jn(u),f=u&&-h/u;o2.add(f*o),s2.add(f*s),c2.add(f*l),Lh+=h,Oh+=h*(tr+(tr=r)),Ih+=h*(er+(er=i)),Rh+=h*(nr+(nr=a)),Zc(tr,er,nr)}function EP(t){Xc=Lh=Bh=Nh=Dh=Oh=Ih=Rh=0,o2=new xn,s2=new xn,c2=new xn,Kr(t,Jr);var e=+o2,n=+s2,r=+c2,i=Qf(e,n,r);return i<Gc&&(e=Oh,n=Ih,r=Rh,Lh<Jt&&(e=Bh,n=Nh,r=Dh),i=Qf(e,n,r),i<Gc)?[NaN,NaN]:[Kn(n,e)*Ue,Jn(r/i)*Ue]}function Ms(t){return function(){return t}}function u2(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function h2(t,e){return[Be(t)>Te?t+Math.round(-t/Qn)*Qn:t,e]}h2.invert=h2;function d2(t,e,n){return(t%=Qn)?e||n?u2(Ev(t),Cv(e,n)):Ev(t):e||n?Cv(e,n):h2}function Tv(t){return function(e,n){return e+=t,[e>Te?e-Qn:e<-Te?e+Qn:e,n]}}function Ev(t){var e=Tv(t);return e.invert=Tv(-t),e}function Cv(t,e){var n=Wt(t),r=Ut(t),i=Wt(e),a=Ut(e);function o(s,l){var u=Wt(l),h=Wt(s)*u,f=Ut(s)*u,d=Ut(l),p=d*n+h*r;return[Kn(f*i-p*a,h*n-d*r),Jn(p*i+f*a)]}return o.invert=function(s,l){var u=Wt(l),h=Wt(s)*u,f=Ut(s)*u,d=Ut(l),p=d*i-f*a;return[Kn(f*i+d*a,h*n+p*r),Jn(p*n-h*r)]},o}function Sv(t){t=d2(t[0]*ne,t[1]*ne,t.length>2?t[2]*ne:0);function e(n){return n=t(n[0]*ne,n[1]*ne),n[0]*=Ue,n[1]*=Ue,n}return e.invert=function(n){return n=t.invert(n[0]*ne,n[1]*ne),n[0]*=Ue,n[1]*=Ue,n},e}function Av(t,e,n,r,i,a){if(n){var o=Wt(e),s=Ut(e),l=r*n;i==null?(i=e+r*Qn,a=e-l/2):(i=Mv(o,i),a=Mv(o,a),(r>0?i<a:i>a)&&(i+=r*Qn));for(var u,h=i;r>0?h>a:h<a;h-=l)u=Ch([o,-s*Wt(h),-s*Ut(h)]),t.point(u[0],u[1])}}function Mv(t,e){e=So(e),e[0]-=t,Mh(e);var n=iv(-e[1]);return((-e[2]<0?-n:n)+Qn-Jt)%Qn}function CP(){var t=Ms([0,0]),e=Ms(90),n=Ms(6),r,i,a={point:o};function o(l,u){r.push(l=i(l,u)),l[0]*=Ue,l[1]*=Ue}function s(){var l=t.apply(this,arguments),u=e.apply(this,arguments)*ne,h=n.apply(this,arguments)*ne;return r=[],i=d2(-l[0]*ne,-l[1]*ne,0).invert,Av(a,u,h,1),l={type:"Polygon",coordinates:[r]},r=i=null,l}return s.center=function(l){return arguments.length?(t=typeof l=="function"?l:Ms([+l[0],+l[1]]),s):t},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ms(+l),s):e},s.precision=function(l){return arguments.length?(n=typeof l=="function"?l:Ms(+l),s):n},s}function Lv(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Qe,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Fh(t,e){return Be(t[0]-e[0])<Jt&&Be(t[1]-e[1])<Jt}function $h(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bv(t,e,n,r,i){var a=[],o=[],s,l;if(t.forEach(function(m){if(!((_=m.length-1)<=0)){var _,y=m[0],b=m[_],k;if(Fh(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),s=0;s<_;++s)i.point((y=m[s])[0],y[1]);i.lineEnd();return}b[0]+=2*Jt}a.push(k=new $h(y,m,null,!0)),o.push(k.o=new $h(y,null,k,!1)),a.push(k=new $h(b,m,null,!1)),o.push(k.o=new $h(b,null,k,!0))}}),!!a.length){for(o.sort(e),Nv(a),Nv(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var u=a[0],h,f;;){for(var d=u,p=!0;d.v;)if((d=d.n)===u)return;h=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,l=h.length;s<l;++s)i.point((f=h[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(h=d.p.z,s=h.length-1;s>=0;--s)i.point((f=h[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,h=d.z,p=!p}while(!d.v);i.lineEnd()}}}function Nv(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function f2(t){return Be(t[0])<=Te?t[0]:Br(t[0])*((Be(t[0])+Te)%Qn-Te)}function Dv(t,e){var n=f2(e),r=e[1],i=Ut(r),a=[Ut(n),-Wt(n),0],o=0,s=0,l=new xn;i===1?r=en+Jt:i===-1&&(r=-en-Jt);for(var u=0,h=t.length;u<h;++u)if(d=(f=t[u]).length)for(var f,d,p=f[d-1],m=f2(p),_=p[1]/2+vh,y=Ut(_),b=Wt(_),k=0;k<d;++k,m=x,y=C,b=L,p=T){var T=f[k],x=f2(T),A=T[1]/2+vh,C=Ut(A),L=Wt(A),S=x-m,D=S>=0?1:-1,v=D*S,M=v>Te,w=y*C;if(l.add(Kn(w*D*Ut(v),b*L+w*Wt(v))),o+=M?S+D*Qn:S,M^m>=n^x>=n){var I=Ss(So(p),So(T));Mh(I);var B=Ss(a,I);Mh(B);var $=(M^S>=0?-1:1)*Jn(B[2]);(r>$||r===$&&(I[0]||I[1]))&&(s+=M^S>=0?1:-1)}}return(o<-Jt||o<Jt&&l<-Gc)^s&1}function Ov(t,e,n,r){return function(i){var a=e(i),o=Lv(),s=e(o),l=!1,u,h,f,d={point:p,lineStart:_,lineEnd:y,polygonStart:function(){d.point=b,d.lineStart=k,d.lineEnd=T,h=[],u=[]},polygonEnd:function(){d.point=p,d.lineStart=_,d.lineEnd=y,h=Hd(h);var x=Dv(u,r);h.length?(l||(i.polygonStart(),l=!0),Bv(h,AP,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),h=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(x,A){t(x,A)&&i.point(x,A)}function m(x,A){a.point(x,A)}function _(){d.point=m,a.lineStart()}function y(){d.point=p,a.lineEnd()}function b(x,A){f.push([x,A]),s.point(x,A)}function k(){s.lineStart(),f=[]}function T(){b(f[0][0],f[0][1]),s.lineEnd();var x=s.clean(),A=o.result(),C,L=A.length,S,D,v;if(f.pop(),u.push(f),f=null,!!L){if(x&1){if(D=A[0],(S=D.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),C=0;C<S;++C)i.point((v=D[C])[0],v[1]);i.lineEnd()}return}L>1&&x&2&&A.push(A.pop().concat(A.shift())),h.push(A.filter(SP))}}return d}}function SP(t){return t.length>1}function AP(t,e){return((t=t.x)[0]<0?t[1]-en-Jt:en-t[1])-((e=e.x)[0]<0?e[1]-en-Jt:en-e[1])}const p2=Ov(function(){return!0},MP,BP,[-Te,-en]);function MP(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,o){var s=a>0?Te:-Te,l=Be(a-e);Be(l-Te)<Jt?(t.point(e,n=(n+o)/2>0?en:-en),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(a,n),i=0):r!==s&&l>=Te&&(Be(e-r)<Jt&&(e-=r*Jt),Be(a-s)<Jt&&(a-=s*Jt),n=LP(e,n,a,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=a,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function LP(t,e,n,r){var i,a,o=Ut(t-n);return Be(o)>Jt?Cs((Ut(e)*(a=Wt(r))*Ut(n)-Ut(r)*(i=Wt(e))*Ut(t))/(i*a*o)):(e+r)/2}function BP(t,e,n,r){var i;if(t==null)i=n*en,r.point(-Te,i),r.point(0,i),r.point(Te,i),r.point(Te,0),r.point(Te,-i),r.point(0,-i),r.point(-Te,-i),r.point(-Te,0),r.point(-Te,i);else if(Be(t[0]-e[0])>Jt){var a=t[0]<e[0]?Te:-Te;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Iv(t){var e=Wt(t),n=6*ne,r=e>0,i=Be(e)>Jt;function a(h,f,d,p){Av(p,t,n,d,h,f)}function o(h,f){return Wt(h)*Wt(f)>e}function s(h){var f,d,p,m,_;return{lineStart:function(){m=p=!1,_=1},point:function(y,b){var k=[y,b],T,x=o(y,b),A=r?x?0:u(y,b):x?u(y+(y<0?Te:-Te),b):0;if(!f&&(m=p=x)&&h.lineStart(),x!==p&&(T=l(f,k),(!T||Fh(f,T)||Fh(k,T))&&(k[2]=1)),x!==p)_=0,x?(h.lineStart(),T=l(k,f),h.point(T[0],T[1])):(T=l(f,k),h.point(T[0],T[1],2),h.lineEnd()),f=T;else if(i&&f&&r^x){var C;!(A&d)&&(C=l(k,f,!0))&&(_=0,r?(h.lineStart(),h.point(C[0][0],C[0][1]),h.point(C[1][0],C[1][1]),h.lineEnd()):(h.point(C[1][0],C[1][1]),h.lineEnd(),h.lineStart(),h.point(C[0][0],C[0][1],3)))}x&&(!f||!Fh(f,k))&&h.point(k[0],k[1]),f=k,p=x,d=A},lineEnd:function(){p&&h.lineEnd(),f=null},clean:function(){return _|(m&&p)<<1}}}function l(h,f,d){var p=So(h),m=So(f),_=[1,0,0],y=Ss(p,m),b=Sh(y,y),k=y[0],T=b-k*k;if(!T)return!d&&h;var x=e*b/T,A=-e*k/T,C=Ss(_,y),L=Ah(_,x),S=Ah(y,A);i2(L,S);var D=C,v=Sh(L,D),M=Sh(D,D),w=v*v-M*(Sh(L,L)-1);if(!(w<0)){var I=Sn(w),B=Ah(D,(-v-I)/M);if(i2(B,L),B=Ch(B),!d)return B;var $=h[0],F=f[0],K=h[1],nt=f[1],z;F<$&&(z=$,$=F,F=z);var Y=F-$,rt=Be(Y-Te)<Jt,lt=rt||Y<Jt;if(!rt&&nt<K&&(z=K,K=nt,nt=z),lt?rt?K+nt>0^B[1]<(Be(B[0]-$)<Jt?K:nt):K<=B[1]&&B[1]<=nt:Y>Te^($<=B[0]&&B[0]<=F)){var J=Ah(D,(-v+I)/M);return i2(J,L),[B,Ch(J)]}}}function u(h,f){var d=r?t:Te-t,p=0;return h<-d?p|=1:h>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return Ov(o,s,a,r?[0,-t]:[-Te,t-Te])}function NP(t,e,n,r,i,a){var o=t[0],s=t[1],l=e[0],u=e[1],h=0,f=1,d=l-o,p=u-s,m;if(m=n-o,!(!d&&m>0)){if(m/=d,d<0){if(m<h)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>h&&(h=m)}if(m=i-o,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>h&&(h=m)}else if(d>0){if(m<h)return;m<f&&(f=m)}if(m=r-s,!(!p&&m>0)){if(m/=p,p<0){if(m<h)return;m<f&&(f=m)}else if(p>0){if(m>f)return;m>h&&(h=m)}if(m=a-s,!(!p&&m<0)){if(m/=p,p<0){if(m>f)return;m>h&&(h=m)}else if(p>0){if(m<h)return;m<f&&(f=m)}return h>0&&(t[0]=o+h*d,t[1]=s+h*p),f<1&&(e[0]=o+f*d,e[1]=s+f*p),!0}}}}}var Qc=1e9,Ph=-Qc;function Yh(t,e,n,r){function i(u,h){return t<=u&&u<=n&&e<=h&&h<=r}function a(u,h,f,d){var p=0,m=0;if(u==null||(p=o(u,f))!==(m=o(h,f))||l(u,h)<0^f>0)do d.point(p===0||p===3?t:n,p>1?r:e);while((p=(p+f+4)%4)!==m);else d.point(h[0],h[1])}function o(u,h){return Be(u[0]-t)<Jt?h>0?0:3:Be(u[0]-n)<Jt?h>0?2:1:Be(u[1]-e)<Jt?h>0?1:0:h>0?3:2}function s(u,h){return l(u.x,h.x)}function l(u,h){var f=o(u,1),d=o(h,1);return f!==d?f-d:f===0?h[1]-u[1]:f===1?u[0]-h[0]:f===2?u[1]-h[1]:h[0]-u[0]}return function(u){var h=u,f=Lv(),d,p,m,_,y,b,k,T,x,A,C,L={point:S,lineStart:w,lineEnd:I,polygonStart:v,polygonEnd:M};function S($,F){i($,F)&&h.point($,F)}function D(){for(var $=0,F=0,K=p.length;F<K;++F)for(var nt=p[F],z=1,Y=nt.length,rt=nt[0],lt,J,Q=rt[0],q=rt[1];z<Y;++z)lt=Q,J=q,rt=nt[z],Q=rt[0],q=rt[1],J<=r?q>r&&(Q-lt)*(r-J)>(q-J)*(t-lt)&&++$:q<=r&&(Q-lt)*(r-J)<(q-J)*(t-lt)&&--$;return $}function v(){h=f,d=[],p=[],C=!0}function M(){var $=D(),F=C&&$,K=(d=Hd(d)).length;(F||K)&&(u.polygonStart(),F&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),K&&Bv(d,s,$,a,u),u.polygonEnd()),h=u,d=p=m=null}function w(){L.point=B,p&&p.push(m=[]),A=!0,x=!1,k=T=NaN}function I(){d&&(B(_,y),b&&x&&f.rejoin(),d.push(f.result())),L.point=S,x&&h.lineEnd()}function B($,F){var K=i($,F);if(p&&m.push([$,F]),A)_=$,y=F,b=K,A=!1,K&&(h.lineStart(),h.point($,F));else if(K&&x)h.point($,F);else{var nt=[k=Math.max(Ph,Math.min(Qc,k)),T=Math.max(Ph,Math.min(Qc,T))],z=[$=Math.max(Ph,Math.min(Qc,$)),F=Math.max(Ph,Math.min(Qc,F))];NP(nt,z,t,e,n,r)?(x||(h.lineStart(),h.point(nt[0],nt[1])),h.point(z[0],z[1]),K||h.lineEnd(),C=!1):K&&(h.lineStart(),h.point($,F),C=!1)}k=$,T=F,x=K}return L}}function DP(){var t=0,e=0,n=960,r=500,i,a,o;return o={stream:function(s){return i&&a===s?i:i=Yh(t,e,n,r)(a=s)},extent:function(s){return arguments.length?(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1],i=a=null,o):[[t,e],[n,r]]}}}var g2,y2,zh,jh,Ls={sphere:Qe,point:Qe,lineStart:OP,lineEnd:Qe,polygonStart:Qe,polygonEnd:Qe};function OP(){Ls.point=RP,Ls.lineEnd=IP}function IP(){Ls.point=Ls.lineEnd=Qe}function RP(t,e){t*=ne,e*=ne,y2=t,zh=Ut(e),jh=Wt(e),Ls.point=FP}function FP(t,e){t*=ne,e*=ne;var n=Ut(e),r=Wt(e),i=Be(t-y2),a=Wt(i),o=Ut(i),s=r*o,l=jh*n-zh*r*a,u=zh*n+jh*r*a;g2.add(Kn(Sn(s*s+l*l),u)),y2=t,zh=n,jh=r}function Rv(t){return g2=new xn,Kr(t,Ls),+g2}var m2=[null,null],$P={type:"LineString",coordinates:m2};function Uh(t,e){return m2[0]=t,m2[1]=e,Rv($P)}var Fv={Feature:function(t,e){return Hh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Hh(n[r].geometry,e))return!0;return!1}},$v={Sphere:function(){return!0},Point:function(t,e){return Pv(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Pv(n[r],e))return!0;return!1},LineString:function(t,e){return Yv(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Yv(n[r],e))return!0;return!1},Polygon:function(t,e){return zv(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(zv(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Hh(n[r],e))return!0;return!1}};function Hh(t,e){return t&&$v.hasOwnProperty(t.type)?$v[t.type](t,e):!1}function Pv(t,e){return Uh(t,e)===0}function Yv(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(r=Uh(t[a],e),r===0||a>0&&(i=Uh(t[a],t[a-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Gc*i))return!0;n=r}return!1}function zv(t,e){return!!Dv(t.map(PP),jv(e))}function PP(t){return t=t.map(jv),t.pop(),t}function jv(t){return[t[0]*ne,t[1]*ne]}function YP(t,e){return(t&&Fv.hasOwnProperty(t.type)?Fv[t.type]:Hh)(t,e)}function Uv(t,e,n){var r=Ea(t,e-Jt,n).concat(e);return function(i){return r.map(function(a){return[i,a]})}}function Hv(t,e,n){var r=Ea(t,e-Jt,n).concat(e);return function(i){return r.map(function(a){return[a,i]})}}function Wv(){var t,e,n,r,i,a,o,s,l=10,u=l,h=90,f=360,d,p,m,_,y=2.5;function b(){return{type:"MultiLineString",coordinates:k()}}function k(){return Ea(xh(r/h)*h,n,h).map(m).concat(Ea(xh(s/f)*f,o,f).map(_)).concat(Ea(xh(e/l)*l,t,l).filter(function(T){return Be(T%h)>Jt}).map(d)).concat(Ea(xh(a/u)*u,i,u).filter(function(T){return Be(T%f)>Jt}).map(p))}return b.lines=function(){return k().map(function(T){return{type:"LineString",coordinates:T}})},b.outline=function(){return{type:"Polygon",coordinates:[m(r).concat(_(o).slice(1),m(n).reverse().slice(1),_(s).reverse().slice(1))]}},b.extent=function(T){return arguments.length?b.extentMajor(T).extentMinor(T):b.extentMinor()},b.extentMajor=function(T){return arguments.length?(r=+T[0][0],n=+T[1][0],s=+T[0][1],o=+T[1][1],r>n&&(T=r,r=n,n=T),s>o&&(T=s,s=o,o=T),b.precision(y)):[[r,s],[n,o]]},b.extentMinor=function(T){return arguments.length?(e=+T[0][0],t=+T[1][0],a=+T[0][1],i=+T[1][1],e>t&&(T=e,e=t,t=T),a>i&&(T=a,a=i,i=T),b.precision(y)):[[e,a],[t,i]]},b.step=function(T){return arguments.length?b.stepMajor(T).stepMinor(T):b.stepMinor()},b.stepMajor=function(T){return arguments.length?(h=+T[0],f=+T[1],b):[h,f]},b.stepMinor=function(T){return arguments.length?(l=+T[0],u=+T[1],b):[l,u]},b.precision=function(T){return arguments.length?(y=+T,d=Uv(a,i,90),p=Hv(e,t,y),m=Uv(s,o,90),_=Hv(r,n,y),b):y},b.extentMajor([[-180,-90+Jt],[180,90-Jt]]).extentMinor([[-180,-80-Jt],[180,80+Jt]])}function zP(){return Wv()()}function jP(t,e){var n=t[0]*ne,r=t[1]*ne,i=e[0]*ne,a=e[1]*ne,o=Wt(r),s=Ut(r),l=Wt(a),u=Ut(a),h=o*Wt(n),f=o*Ut(n),d=l*Wt(i),p=l*Ut(i),m=2*Jn(Sn(av(a-r)+o*l*av(i-n))),_=Ut(m),y=m?function(b){var k=Ut(b*=m)/_,T=Ut(m-b)/_,x=T*h+k*d,A=T*f+k*p,C=T*s+k*u;return[Kn(A,x)*Ue,Kn(C,Sn(x*x+A*A))*Ue]}:function(){return[n*Ue,r*Ue]};return y.distance=m,y}const Kc=t=>t;var b2=new xn,_2=new xn,Vv,Gv,v2,x2,Oa={point:Qe,lineStart:Qe,lineEnd:Qe,polygonStart:function(){Oa.lineStart=UP,Oa.lineEnd=WP},polygonEnd:function(){Oa.lineStart=Oa.lineEnd=Oa.point=Qe,b2.add(Be(_2)),_2=new xn},result:function(){var t=b2/2;return b2=new xn,t}};function UP(){Oa.point=HP}function HP(t,e){Oa.point=qv,Vv=v2=t,Gv=x2=e}function qv(t,e){_2.add(x2*t-v2*e),v2=t,x2=e}function WP(){qv(Vv,Gv)}const Xv=Oa;var Bs=1/0,Wh=Bs,Jc=-Bs,Vh=Jc,VP={point:GP,lineStart:Qe,lineEnd:Qe,polygonStart:Qe,polygonEnd:Qe,result:function(){var t=[[Bs,Wh],[Jc,Vh]];return Jc=Vh=-(Wh=Bs=1/0),t}};function GP(t,e){t<Bs&&(Bs=t),t>Jc&&(Jc=t),e<Wh&&(Wh=e),e>Vh&&(Vh=e)}const Gh=VP;var k2=0,w2=0,tl=0,qh=0,Xh=0,Ns=0,T2=0,E2=0,el=0,Zv,Qv,Ei,Ci,ti={point:Mo,lineStart:Kv,lineEnd:Jv,polygonStart:function(){ti.lineStart=ZP,ti.lineEnd=QP},polygonEnd:function(){ti.point=Mo,ti.lineStart=Kv,ti.lineEnd=Jv},result:function(){var t=el?[T2/el,E2/el]:Ns?[qh/Ns,Xh/Ns]:tl?[k2/tl,w2/tl]:[NaN,NaN];return k2=w2=tl=qh=Xh=Ns=T2=E2=el=0,t}};function Mo(t,e){k2+=t,w2+=e,++tl}function Kv(){ti.point=qP}function qP(t,e){ti.point=XP,Mo(Ei=t,Ci=e)}function XP(t,e){var n=t-Ei,r=e-Ci,i=Sn(n*n+r*r);qh+=i*(Ei+t)/2,Xh+=i*(Ci+e)/2,Ns+=i,Mo(Ei=t,Ci=e)}function Jv(){ti.point=Mo}function ZP(){ti.point=KP}function QP(){tx(Zv,Qv)}function KP(t,e){ti.point=tx,Mo(Zv=Ei=t,Qv=Ci=e)}function tx(t,e){var n=t-Ei,r=e-Ci,i=Sn(n*n+r*r);qh+=i*(Ei+t)/2,Xh+=i*(Ci+e)/2,Ns+=i,i=Ci*t-Ei*e,T2+=i*(Ei+t),E2+=i*(Ci+e),el+=i*3,Mo(Ei=t,Ci=e)}const ex=ti;function nx(t){this._context=t}nx.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Qn);break}}},result:Qe};var C2=new xn,S2,rx,ix,nl,rl,Zh={point:Qe,lineStart:function(){Zh.point=JP},lineEnd:function(){S2&&ax(rx,ix),Zh.point=Qe},polygonStart:function(){S2=!0},polygonEnd:function(){S2=null},result:function(){var t=+C2;return C2=new xn,t}};function JP(t,e){Zh.point=ax,rx=nl=t,ix=rl=e}function ax(t,e){nl-=t,rl-=e,C2.add(Sn(nl*nl+rl*rl)),nl=t,rl=e}const ox=Zh;function sx(){this._string=[]}sx.prototype={_radius:4.5,_circle:cx(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=cx(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function cx(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function tY(t,e){var n=4.5,r,i;function a(o){return o&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),Kr(o,r(i))),i.result()}return a.area=function(o){return Kr(o,r(Xv)),Xv.result()},a.measure=function(o){return Kr(o,r(ox)),ox.result()},a.bounds=function(o){return Kr(o,r(Gh)),Gh.result()},a.centroid=function(o){return Kr(o,r(ex)),ex.result()},a.projection=function(o){return arguments.length?(r=o==null?(t=null,Kc):(t=o).stream,a):t},a.context=function(o){return arguments.length?(i=o==null?(e=null,new sx):new nx(e=o),typeof n!="function"&&i.pointRadius(n),a):e},a.pointRadius=function(o){return arguments.length?(n=typeof o=="function"?o:(i.pointRadius(+o),+o),a):n},a.projection(t).context(e)}function eY(t){return{stream:il(t)}}function il(t){return function(e){var n=new A2;for(var r in t)n[r]=t[r];return n.stream=e,n}}function A2(){}A2.prototype={constructor:A2,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function M2(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Kr(n,t.stream(Gh)),e(Gh.result()),r!=null&&t.clipExtent(r),t}function Qh(t,e,n){return M2(t,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(a-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,l])},n)}function L2(t,e,n){return Qh(t,[[0,0],e],n)}function B2(t,e,n){return M2(t,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];t.scale(150*a).translate([o,s])},n)}function N2(t,e,n){return M2(t,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,s])},n)}var lx=16,nY=Wt(30*ne);function ux(t,e){return+e?iY(t,e):rY(t)}function rY(t){return il({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function iY(t,e){function n(r,i,a,o,s,l,u,h,f,d,p,m,_,y){var b=u-r,k=h-i,T=b*b+k*k;if(T>4*e&&_--){var x=o+d,A=s+p,C=l+m,L=Sn(x*x+A*A+C*C),S=Jn(C/=L),D=Be(Be(C)-1)<Jt||Be(a-f)<Jt?(a+f)/2:Kn(A,x),v=t(D,S),M=v[0],w=v[1],I=M-r,B=w-i,$=k*I-b*B;($*$/T>e||Be((b*I+k*B)/T-.5)>.3||o*d+s*p+l*m<nY)&&(n(r,i,a,o,s,l,M,w,D,x/=L,A/=L,C,_,y),y.point(M,w),n(M,w,D,x,A,C,u,h,f,d,p,m,_,y))}}return function(r){var i,a,o,s,l,u,h,f,d,p,m,_,y={point:b,lineStart:k,lineEnd:x,polygonStart:function(){r.polygonStart(),y.lineStart=A},polygonEnd:function(){r.polygonEnd(),y.lineStart=k}};function b(S,D){S=t(S,D),r.point(S[0],S[1])}function k(){f=NaN,y.point=T,r.lineStart()}function T(S,D){var v=So([S,D]),M=t(S,D);n(f,d,h,p,m,_,f=M[0],d=M[1],h=S,p=v[0],m=v[1],_=v[2],lx,r),r.point(f,d)}function x(){y.point=b,r.lineEnd()}function A(){k(),y.point=C,y.lineEnd=L}function C(S,D){T(i=S,D),a=f,o=d,s=p,l=m,u=_,y.point=T}function L(){n(f,d,h,p,m,_,a,o,i,s,l,u,lx,r),y.lineEnd=x,x()}return y}}var aY=il({point:function(t,e){this.stream.point(t*ne,e*ne)}});function oY(t){return il({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function sY(t,e,n,r,i){function a(o,s){return o*=r,s*=i,[e+t*o,n-t*s]}return a.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},a}function hx(t,e,n,r,i,a){if(!a)return sY(t,e,n,r,i);var o=Wt(a),s=Ut(a),l=o*t,u=s*t,h=o/t,f=s/t,d=(s*n-o*e)/t,p=(s*e+o*n)/t;function m(_,y){return _*=r,y*=i,[l*_-u*y+e,n-u*_-l*y]}return m.invert=function(_,y){return[r*(h*_-f*y+d),i*(p-f*_-h*y)]},m}function Si(t){return D2(function(){return t})()}function D2(t){var e,n=150,r=480,i=250,a=0,o=0,s=0,l=0,u=0,h,f=0,d=1,p=1,m=null,_=p2,y=null,b,k,T,x=Kc,A=.5,C,L,S,D,v;function M($){return S($[0]*ne,$[1]*ne)}function w($){return $=S.invert($[0],$[1]),$&&[$[0]*Ue,$[1]*Ue]}M.stream=function($){return D&&v===$?D:D=aY(oY(h)(_(C(x(v=$)))))},M.preclip=function($){return arguments.length?(_=$,m=void 0,B()):_},M.postclip=function($){return arguments.length?(x=$,y=b=k=T=null,B()):x},M.clipAngle=function($){return arguments.length?(_=+$?Iv(m=$*ne):(m=null,p2),B()):m*Ue},M.clipExtent=function($){return arguments.length?(x=$==null?(y=b=k=T=null,Kc):Yh(y=+$[0][0],b=+$[0][1],k=+$[1][0],T=+$[1][1]),B()):y==null?null:[[y,b],[k,T]]},M.scale=function($){return arguments.length?(n=+$,I()):n},M.translate=function($){return arguments.length?(r=+$[0],i=+$[1],I()):[r,i]},M.center=function($){return arguments.length?(a=$[0]%360*ne,o=$[1]%360*ne,I()):[a*Ue,o*Ue]},M.rotate=function($){return arguments.length?(s=$[0]%360*ne,l=$[1]%360*ne,u=$.length>2?$[2]%360*ne:0,I()):[s*Ue,l*Ue,u*Ue]},M.angle=function($){return arguments.length?(f=$%360*ne,I()):f*Ue},M.reflectX=function($){return arguments.length?(d=$?-1:1,I()):d<0},M.reflectY=function($){return arguments.length?(p=$?-1:1,I()):p<0},M.precision=function($){return arguments.length?(C=ux(L,A=$*$),B()):Sn(A)},M.fitExtent=function($,F){return Qh(M,$,F)},M.fitSize=function($,F){return L2(M,$,F)},M.fitWidth=function($,F){return B2(M,$,F)},M.fitHeight=function($,F){return N2(M,$,F)};function I(){var $=hx(n,0,0,d,p,f).apply(null,e(a,o)),F=hx(n,r-$[0],i-$[1],d,p,f);return h=d2(s,l,u),L=u2(e,F),S=u2(h,L),C=ux(L,A),B()}function B(){return D=v=null,M}return function(){return e=t.apply(this,arguments),M.invert=e.invert&&w,I()}}function O2(t){var e=0,n=Te/3,r=D2(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*ne,n=a[1]*ne):[e*Ue,n*Ue]},i}function cY(t){var e=Wt(t);function n(r,i){return[r*e,Ut(i)/e]}return n.invert=function(r,i){return[r/e,Jn(i*e)]},n}function dx(t,e){var n=Ut(t),r=(n+Ut(e))/2;if(Be(r)<Jt)return cY(t);var i=1+n*(2*r-n),a=Sn(i)/r;function o(s,l){var u=Sn(i-2*r*Ut(l))/r;return[u*Ut(s*=r),a-u*Wt(s)]}return o.invert=function(s,l){var u=a-l,h=Kn(s,Be(u))*Br(u);return u*r<0&&(h-=Te*Br(s)*Br(u)),[h/r,Jn((i-(s*s+u*u)*r*r)/(2*r))]},o}function Kh(){return O2(dx).scale(155.424).center([0,33.6442])}function fx(){return Kh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function lY(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function uY(){var t,e,n=fx(),r,i=Kh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=Kh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(d,p){l=[d,p]}};function h(d){var p=d[0],m=d[1];return l=null,r.point(p,m),l||(a.point(p,m),l)||(s.point(p,m),l)}h.invert=function(d){var p=n.scale(),m=n.translate(),_=(d[0]-m[0])/p,y=(d[1]-m[1])/p;return(y>=.12&&y<.234&&_>=-.425&&_<-.214?i:y>=.166&&y<.234&&_>=-.214&&_<-.115?o:n).invert(d)},h.stream=function(d){return t&&e===d?t:t=lY([n.stream(e=d),i.stream(d),o.stream(d)])},h.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},h.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),h.translate(n.translate())):n.scale()},h.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),m=+d[0],_=+d[1];return r=n.translate(d).clipExtent([[m-.455*p,_-.238*p],[m+.455*p,_+.238*p]]).stream(u),a=i.translate([m-.307*p,_+.201*p]).clipExtent([[m-.425*p+Jt,_+.12*p+Jt],[m-.214*p-Jt,_+.234*p-Jt]]).stream(u),s=o.translate([m-.205*p,_+.212*p]).clipExtent([[m-.214*p+Jt,_+.166*p+Jt],[m-.115*p-Jt,_+.234*p-Jt]]).stream(u),f()},h.fitExtent=function(d,p){return Qh(h,d,p)},h.fitSize=function(d,p){return L2(h,d,p)},h.fitWidth=function(d,p){return B2(h,d,p)},h.fitHeight=function(d,p){return N2(h,d,p)};function f(){return t=e=null,h}return h.scale(1070)}function px(t){return function(e,n){var r=Wt(e),i=Wt(n),a=t(r*i);return a===1/0?[2,0]:[a*i*Ut(e),a*Ut(n)]}}function al(t){return function(e,n){var r=Sn(e*e+n*n),i=t(r),a=Ut(i),o=Wt(i);return[Kn(e*a,r*o),Jn(r&&n*a/r)]}}var I2=px(function(t){return Sn(2/(1+t))});I2.invert=al(function(t){return 2*Jn(t/2)});function hY(){return Si(I2).scale(124.75).clipAngle(180-.001)}var R2=px(function(t){return(t=iv(t))&&t/Ut(t)});R2.invert=al(function(t){return t});function dY(){return Si(R2).scale(79.4188).clipAngle(180-.001)}function ol(t,e){return[t,kh(Jf((en+e)/2))]}ol.invert=function(t,e){return[t,2*Cs(rv(e))-en]};function fY(){return gx(ol).scale(961/Qn)}function gx(t){var e=Si(t),n=e.center,r=e.scale,i=e.translate,a=e.clipExtent,o=null,s,l,u;e.scale=function(f){return arguments.length?(r(f),h()):r()},e.translate=function(f){return arguments.length?(i(f),h()):i()},e.center=function(f){return arguments.length?(n(f),h()):n()},e.clipExtent=function(f){return arguments.length?(f==null?o=s=l=u=null:(o=+f[0][0],s=+f[0][1],l=+f[1][0],u=+f[1][1]),h()):o==null?null:[[o,s],[l,u]]};function h(){var f=Te*r(),d=e(Sv(e.rotate()).invert([0,0]));return a(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:t===ol?[[Math.max(d[0]-f,o),s],[Math.min(d[0]+f,l),u]]:[[o,Math.max(d[1]-f,s)],[l,Math.min(d[1]+f,u)]])}return h()}function Jh(t){return Jf((en+t)/2)}function yx(t,e){var n=Wt(t),r=t===e?Ut(t):kh(n/Wt(e))/kh(Jh(e)/Jh(t)),i=n*Kf(Jh(t),r)/r;if(!r)return ol;function a(o,s){i>0?s<-en+Jt&&(s=-en+Jt):s>en-Jt&&(s=en-Jt);var l=i/Kf(Jh(s),r);return[l*Ut(r*o),i-l*Wt(r*o)]}return a.invert=function(o,s){var l=i-s,u=Br(r)*Sn(o*o+l*l),h=Kn(o,Be(l))*Br(l);return l*r<0&&(h-=Te*Br(o)*Br(l)),[h/r,2*Cs(Kf(i/u,1/r))-en]},a}function pY(){return O2(yx).scale(109.5).parallels([30,30])}function sl(t,e){return[t,e]}sl.invert=sl;function gY(){return Si(sl).scale(152.63)}function mx(t,e){var n=Wt(t),r=t===e?Ut(t):(n-Wt(e))/(e-t),i=n/r+t;if(Be(r)<Jt)return sl;function a(o,s){var l=i-s,u=r*o;return[l*Ut(u),i-l*Wt(u)]}return a.invert=function(o,s){var l=i-s,u=Kn(o,Be(l))*Br(l);return l*r<0&&(u-=Te*Br(o)*Br(l)),[u/r,i-Br(r)*Sn(o*o+l*l)]},a}function yY(){return O2(mx).scale(131.154).center([0,13.9389])}var cl=1.340264,ll=-.081106,ul=893e-6,hl=.003796,t1=Sn(3)/2,mY=12;function F2(t,e){var n=Jn(t1*Ut(e)),r=n*n,i=r*r*r;return[t*Wt(n)/(t1*(cl+3*ll*r+i*(7*ul+9*hl*r))),n*(cl+ll*r+i*(ul+hl*r))]}F2.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,a=0,o,s,l;a<mY&&(s=n*(cl+ll*r+i*(ul+hl*r))-e,l=cl+3*ll*r+i*(7*ul+9*hl*r),n-=o=s/l,r=n*n,i=r*r*r,!(Be(o)<Gc));++a);return[t1*t*(cl+3*ll*r+i*(7*ul+9*hl*r))/Wt(n),Jn(Ut(n)/t1)]};function bY(){return Si(F2).scale(177.158)}function $2(t,e){var n=Wt(e),r=Wt(t)*n;return[n*Ut(t)/r,Ut(e)/r]}$2.invert=al(Cs);function _Y(){return Si($2).scale(144.049).clipAngle(60)}function vY(){var t=1,e=0,n=0,r=1,i=1,a=0,o,s,l=null,u,h,f,d=1,p=1,m=il({point:function(x,A){var C=T([x,A]);this.stream.point(C[0],C[1])}}),_=Kc,y,b;function k(){return d=t*r,p=t*i,y=b=null,T}function T(x){var A=x[0]*d,C=x[1]*p;if(a){var L=C*o-A*s;A=A*o+C*s,C=L}return[A+e,C+n]}return T.invert=function(x){var A=x[0]-e,C=x[1]-n;if(a){var L=C*o+A*s;A=A*o-C*s,C=L}return[A/d,C/p]},T.stream=function(x){return y&&b===x?y:y=m(_(b=x))},T.postclip=function(x){return arguments.length?(_=x,l=u=h=f=null,k()):_},T.clipExtent=function(x){return arguments.length?(_=x==null?(l=u=h=f=null,Kc):Yh(l=+x[0][0],u=+x[0][1],h=+x[1][0],f=+x[1][1]),k()):l==null?null:[[l,u],[h,f]]},T.scale=function(x){return arguments.length?(t=+x,k()):t},T.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],k()):[e,n]},T.angle=function(x){return arguments.length?(a=x%360*ne,s=Ut(a),o=Wt(a),k()):a*Ue},T.reflectX=function(x){return arguments.length?(r=x?-1:1,k()):r<0},T.reflectY=function(x){return arguments.length?(i=x?-1:1,k()):i<0},T.fitExtent=function(x,A){return Qh(T,x,A)},T.fitSize=function(x,A){return L2(T,x,A)},T.fitWidth=function(x,A){return B2(T,x,A)},T.fitHeight=function(x,A){return N2(T,x,A)},T}function P2(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}P2.invert=function(t,e){var n=e,r=25,i;do{var a=n*n,o=a*a;n-=i=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-e)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(Be(i)>Jt&&--r>0);return[t/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function xY(){return Si(P2).scale(175.295)}function Y2(t,e){return[Wt(e)*Ut(t),Ut(e)]}Y2.invert=al(Jn);function kY(){return Si(Y2).scale(249.5).clipAngle(90+Jt)}function z2(t,e){var n=Wt(e),r=1+Wt(t)*n;return[n*Ut(t)/r,Ut(e)/r]}z2.invert=al(function(t){return 2*Cs(t)});function wY(){return Si(z2).scale(250).clipAngle(142)}function j2(t,e){return[kh(Jf((en+e)/2)),-t]}j2.invert=function(t,e){return[-e,2*Cs(rv(t))-en]};function TY(){var t=gx(j2),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function EY(t,e){return t.parent===e.parent?1:2}function CY(t){return t.reduce(SY,0)/t.length}function SY(t,e){return t+e.x}function AY(t){return 1+t.reduce(MY,0)}function MY(t,e){return Math.max(t,e.y)}function LY(t){for(var e;e=t.children;)t=e[0];return t}function BY(t){for(var e;e=t.children;)t=e[e.length-1];return t}function NY(){var t=EY,e=1,n=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(d){var p=d.children;p?(d.x=CY(p),d.y=AY(p)):(d.x=o?s+=t(d,o):0,d.y=0,o=d)});var l=LY(a),u=BY(a),h=l.x-t(l,u)/2,f=u.x+t(u,l)/2;return a.eachAfter(r?function(d){d.x=(d.x-a.x)*e,d.y=(a.y-d.y)*n}:function(d){d.x=(d.x-h)/(f-h)*e,d.y=(1-(a.y?d.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,e=+a[0],n=+a[1],i):r?null:[e,n]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],n=+a[1],i):r?[e,n]:null},i}function DY(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function OY(){return this.eachAfter(DY)}function IY(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function RY(t,e){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function FY(t,e){for(var n=this,r=[n],i=[],a,o,s,l=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function $Y(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function PY(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function YY(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function zY(t){for(var e=this,n=jY(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function jY(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function UY(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function HY(){return Array.from(this)}function WY(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function VY(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*GY(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function U2(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=ZY)):e===void 0&&(e=XY);for(var n=new Lo(t),r,i=[n],a,o,s,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new Lo(o[s])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(bx)}function qY(){return U2(this).eachBefore(QY)}function XY(t){return t.children}function ZY(t){return Array.isArray(t)?t[1]:null}function QY(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function bx(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Lo(t){this.data=t,this.depth=this.height=0,this.parent=null}Lo.prototype=U2.prototype={constructor:Lo,count:OY,each:IY,eachAfter:FY,eachBefore:RY,find:$Y,sum:PY,sort:YY,path:zY,ancestors:UY,descendants:HY,leaves:WY,links:VY,copy:qY,[Symbol.iterator]:GY};function e1(t){return t==null?null:_x(t)}function _x(t){if(typeof t!="function")throw new Error;return t}function Bo(){return 0}function Ds(t){return function(){return t}}const KY=1664525,JY=1013904223,vx=4294967296;function H2(){let t=1;return()=>(t=(KY*t+JY)%vx)/vx}function tz(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ez(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function nz(t){return xx(t,H2())}function xx(t,e){for(var n=0,r=(t=ez(Array.from(t),e)).length,i=[],a,o;n<r;)a=t[n],o&&kx(o,a)?++n:(o=iz(i=rz(i,a)),n=0);return o}function rz(t,e){var n,r;if(W2(e,t))return[e];for(n=0;n<t.length;++n)if(n1(e,t[n])&&W2(dl(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(n1(dl(t[n],t[r]),e)&&n1(dl(t[n],e),t[r])&&n1(dl(t[r],e),t[n])&&W2(wx(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function n1(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function kx(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function W2(t,e){for(var n=0;n<e.length;++n)if(!kx(t,e[n]))return!1;return!0}function iz(t){switch(t.length){case 1:return az(t[0]);case 2:return dl(t[0],t[1]);case 3:return wx(t[0],t[1],t[2])}}function az(t){return{x:t.x,y:t.y,r:t.r}}function dl(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-r,h=s-i,f=Math.sqrt(l*l+u*u);return{x:(n+a+l/f*h)/2,y:(r+o+u/f*h)/2,r:(f+i+s)/2}}function wx(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,h=n.y,f=n.r,d=r-o,p=r-u,m=i-s,_=i-h,y=l-a,b=f-a,k=r*r+i*i-a*a,T=k-o*o-s*s+l*l,x=k-u*u-h*h+f*f,A=p*m-d*_,C=(m*x-_*T)/(A*2)-r,L=(_*y-m*b)/A,S=(p*T-d*x)/(A*2)-i,D=(d*b-p*y)/A,v=L*L+D*D-1,M=2*(a+C*L+S*D),w=C*C+S*S-a*a,I=-(Math.abs(v)>1e-6?(M+Math.sqrt(M*M-4*v*w))/(2*v):w/M);return{x:r+C+L*I,y:i+S+D*I,r:I}}function Tx(t,e,n){var r=t.x-e.x,i,a,o=t.y-e.y,s,l,u=r*r+o*o;u?(a=e.r+n.r,a*=a,l=t.r+n.r,l*=l,a>l?(i=(u+l-a)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),n.x=t.x-i*r-s*o,n.y=t.y-i*o+s*r):(i=(u+a-l)/(2*u),s=Math.sqrt(Math.max(0,a/u-i*i)),n.x=e.x+i*r-s*o,n.y=e.y+i*o+s*r)):(n.x=e.x+n.r,n.y=e.y)}function Ex(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Cx(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function r1(t){this._=t,this.next=null,this.previous=null}function Sx(t,e){if(!(a=(t=tz(t)).length))return 0;var n,r,i,a,o,s,l,u,h,f,d;if(n=t[0],n.x=0,n.y=0,!(a>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;Tx(r,n,i=t[2]),n=new r1(n),r=new r1(r),i=new r1(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<a;++l){Tx(n._,r._,i=t[l]),i=new r1(i),u=r.next,h=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Ex(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue t}f+=u._.r,u=u.next}else{if(Ex(h._,i._)){n=h,n.next=r,r.previous=n,--l;continue t}d+=h._.r,h=h.previous}while(u!==h.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Cx(n);(i=i.next)!==r;)(s=Cx(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=xx(n,e),l=0;l<a;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function oz(t){return Sx(t,H2()),t}function sz(t){return Math.sqrt(t.value)}function cz(){var t=null,e=1,n=1,r=Bo;function i(a){const o=H2();return a.x=e/2,a.y=n/2,t?a.eachBefore(Ax(t)).eachAfter(V2(r,.5,o)).eachBefore(Mx(1)):a.eachBefore(Ax(sz)).eachAfter(V2(Bo,1,o)).eachAfter(V2(r,a.r/Math.min(e,n),o)).eachBefore(Mx(Math.min(e,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=e1(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],n=+a[1],i):[e,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:Ds(+a),i):r},i}function Ax(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function V2(t,e,n){return function(r){if(i=r.children){var i,a,o=i.length,s=t(r)*e||0,l;if(s)for(a=0;a<o;++a)i[a].r+=s;if(l=Sx(i,n),s)for(a=0;a<o;++a)i[a].r-=s;r.r=l+s}}}function Mx(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Lx(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function fl(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(r-e)/t.value;++s<l;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u}function lz(){var t=1,e=1,n=0,r=!1;function i(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(a(e,s)),r&&o.eachBefore(Lx),o}function a(o,s){return function(l){l.children&&fl(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var u=l.x0,h=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<h&&(h=d=(h+d)/2),l.x0=u,l.y0=h,l.x1=f,l.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var uz={depth:-1},Bx={},G2={};function hz(t){return t.id}function dz(t){return t.parentId}function fz(){var t=hz,e=dz,n;function r(i){var a=Array.from(i),o=t,s=e,l,u,h,f,d,p,m,_,y=new Map;if(n!=null){const b=a.map((x,A)=>pz(n(x,A,i))),k=b.map(Nx),T=new Set(b).add("");for(const x of k)T.has(x)||(T.add(x),b.push(x),k.push(Nx(x)),a.push(G2));o=(x,A)=>b[A],s=(x,A)=>k[A]}for(h=0,l=a.length;h<l;++h)u=a[h],p=a[h]=new Lo(u),(m=o(u,h,i))!=null&&(m+="")&&(_=p.id=m,y.set(_,y.has(_)?Bx:p)),(m=s(u,h,i))!=null&&(m+="")&&(p.parent=m);for(h=0;h<l;++h)if(p=a[h],m=p.parent){if(d=y.get(m),!d)throw new Error("missing: "+m);if(d===Bx)throw new Error("ambiguous: "+m);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===G2&&f.children.length===1;)f=f.children[0],--l;for(let b=a.length-1;b>=0&&(p=a[b],p.data===G2);--b)p.data=null}if(f.parent=uz,f.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(bx),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=e1(i),r):t},r.parentId=function(i){return arguments.length?(e=e1(i),r):e},r.path=function(i){return arguments.length?(n=e1(i),r):n},r}function pz(t){t=`${t}`;let e=t.length;return q2(t,e-1)&&!q2(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Nx(t){let e=t.length;if(e<2)return"";for(;--e>1&&!q2(t,e););return t.slice(0,e)}function q2(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function gz(t,e){return t.parent===e.parent?1:2}function X2(t){var e=t.children;return e?e[0]:t.t}function Z2(t){var e=t.children;return e?e[e.length-1]:t.t}function yz(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function mz(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function bz(t,e,n){return t.a.parent===e.parent?t.a:n}function i1(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}i1.prototype=Object.create(Lo.prototype);function _z(t){for(var e=new i1(t,0),n,r=[e],i,a,o,s;n=r.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=n.children[o]=new i1(a[o],o)),i.parent=n;return(e.parent=new i1(null,0)).children=[e],e}function vz(){var t=gz,e=1,n=1,r=null;function i(u){var h=_z(u);if(h.eachAfter(a),h.parent.m=-h.z,h.eachBefore(o),r)u.eachBefore(l);else{var f=u,d=u,p=u;u.eachBefore(function(k){k.x<f.x&&(f=k),k.x>d.x&&(d=k),k.depth>p.depth&&(p=k)});var m=f===d?1:t(f,d)/2,_=m-f.x,y=e/(d.x+m+_),b=n/(p.depth||1);u.eachBefore(function(k){k.x=(k.x+_)*y,k.y=k.depth*b})}return u}function a(u){var h=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(h){mz(u);var p=(h[0].z+h[h.length-1].z)/2;d?(u.z=d.z+t(u._,d._),u.m=u.z-p):u.z=p}else d&&(u.z=d.z+t(u._,d._));u.parent.A=s(u,d,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,h,f){if(h){for(var d=u,p=u,m=h,_=d.parent.children[0],y=d.m,b=p.m,k=m.m,T=_.m,x;m=Z2(m),d=X2(d),m&&d;)_=X2(_),p=Z2(p),p.a=u,x=m.z+k-d.z-y+t(m._,d._),x>0&&(yz(bz(m,u,f),u,x),y+=x,b+=x),k+=m.m,y+=d.m,T+=_.m,b+=p.m;m&&!Z2(p)&&(p.t=m,p.m+=k-b),d&&!X2(_)&&(_.t=d,_.m+=y-T,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}function a1(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(i-n)/t.value;++s<l;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var Dx=(1+Math.sqrt(5))/2;function Ox(t,e,n,r,i,a){for(var o=[],s=e.children,l,u,h=0,f=0,d=s.length,p,m,_=e.value,y,b,k,T,x,A,C;h<d;){p=i-n,m=a-r;do y=s[f++].value;while(!y&&f<d);for(b=k=y,A=Math.max(m/p,p/m)/(_*t),C=y*y*A,x=Math.max(k/C,C/b);f<d;++f){if(y+=u=s[f].value,u<b&&(b=u),u>k&&(k=u),C=y*y*A,T=Math.max(k/C,C/b),T>x){y-=u;break}x=T}o.push(l={value:y,dice:p<m,children:s.slice(h,f)}),l.dice?fl(l,n,r,i,_?r+=m*y/_:a):a1(l,n,r,_?n+=p*y/_:i,a),_-=y,h=f}return o}const Ix=function t(e){function n(r,i,a,o,s){Ox(e,r,i,a,o,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(Dx);function xz(){var t=Ix,e=!1,n=1,r=1,i=[0],a=Bo,o=Bo,s=Bo,l=Bo,u=Bo;function h(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(Lx),d}function f(d){var p=i[d.depth],m=d.x0+p,_=d.y0+p,y=d.x1-p,b=d.y1-p;y<m&&(m=y=(m+y)/2),b<_&&(_=b=(_+b)/2),d.x0=m,d.y0=_,d.x1=y,d.y1=b,d.children&&(p=i[d.depth+1]=a(d)/2,m+=u(d)-p,_+=o(d)-p,y-=s(d)-p,b-=l(d)-p,y<m&&(m=y=(m+y)/2),b<_&&(_=b=(_+b)/2),t(d,m,_,y,b))}return h.round=function(d){return arguments.length?(e=!!d,h):e},h.size=function(d){return arguments.length?(n=+d[0],r=+d[1],h):[n,r]},h.tile=function(d){return arguments.length?(t=_x(d),h):t},h.padding=function(d){return arguments.length?h.paddingInner(d).paddingOuter(d):h.paddingInner()},h.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:Ds(+d),h):a},h.paddingOuter=function(d){return arguments.length?h.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):h.paddingTop()},h.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Ds(+d),h):o},h.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:Ds(+d),h):s},h.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Ds(+d),h):l},h.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Ds(+d),h):u},h}function kz(t,e,n,r,i){var a=t.children,o,s=a.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o)u[o+1]=l+=a[o].value;h(0,s,t.value,e,n,r,i);function h(f,d,p,m,_,y,b){if(f>=d-1){var k=a[f];k.x0=m,k.y0=_,k.x1=y,k.y1=b;return}for(var T=u[f],x=p/2+T,A=f+1,C=d-1;A<C;){var L=A+C>>>1;u[L]<x?A=L+1:C=L}x-u[A-1]<u[A]-x&&f+1<A&&--A;var S=u[A]-T,D=p-S;if(y-m>b-_){var v=p?(m*D+y*S)/p:y;h(f,A,S,m,_,v,b),h(A,d,D,v,_,y,b)}else{var M=p?(_*D+b*S)/p:b;h(f,A,S,m,_,y,M),h(A,d,D,m,M,y,b)}}}function wz(t,e,n,r,i){(t.depth&1?a1:fl)(t,e,n,r,i)}const Tz=function t(e){function n(r,i,a,o,s){if((l=r._squarify)&&l.ratio===e)for(var l,u,h,f,d=-1,p,m=l.length,_=r.value;++d<m;){for(u=l[d],h=u.children,f=u.value=0,p=h.length;f<p;++f)u.value+=h[f].value;u.dice?fl(u,i,a,o,_?a+=(s-a)*u.value/_:s):a1(u,i,a,_?i+=(o-i)*u.value/_:o,s),_-=u.value}else r._squarify=l=Ox(e,r,i,a,o,s),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(Dx);function Ez(t){for(var e=-1,n=t.length,r,i=t[n-1],a=0;++e<n;)r=i,i=t[e],a+=r[1]*i[0]-r[0]*i[1];return a/2}function Cz(t){for(var e=-1,n=t.length,r=0,i=0,a,o=t[n-1],s,l=0;++e<n;)a=o,o=t[e],l+=s=a[0]*o[1]-o[0]*a[1],r+=(a[0]+o[0])*s,i+=(a[1]+o[1])*s;return l*=3,[r/l,i/l]}function Sz(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Az(t,e){return t[0]-e[0]||t[1]-e[1]}function Rx(t){const e=t.length,n=[0,1];let r=2,i;for(i=2;i<e;++i){for(;r>1&&Sz(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Mz(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Az),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=Rx(r),o=Rx(i),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(e=a.length-1;e>=0;--e)u.push(t[r[a[e]][2]]);for(e=+s;e<o.length-l;++e)u.push(t[r[o[e]][2]]);return u}function Lz(t,e){for(var n=t.length,r=t[n-1],i=e[0],a=e[1],o=r[0],s=r[1],l,u,h=!1,f=0;f<n;++f)r=t[f],l=r[0],u=r[1],u>a!=s>a&&i<(o-l)*(a-u)/(s-u)+l&&(h=!h),o=l,s=u;return h}function Bz(t){for(var e=-1,n=t.length,r=t[n-1],i,a,o=r[0],s=r[1],l=0;++e<n;)i=o,a=s,r=t[e],o=r[0],s=r[1],i-=o,a-=s,l+=Math.hypot(i,a);return l}const Nn=Math.random,Nz=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n}(Nn),Dz=function t(e){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(e()*i+r)}}return n.source=t,n}(Nn),Q2=function t(e){function n(r,i){var a,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var s;if(a!=null)s=a,a=null;else do a=e()*2-1,s=e()*2-1,o=a*a+s*s;while(!o||o>1);return r+i*s*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(Nn),Oz=function t(e){var n=Q2.source(e);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=t,r}(Nn),Fx=function t(e){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,a=r;a>1;--a)i+=e();return i+a*e()}}return n.source=t,n}(Nn),Iz=function t(e){var n=Fx.source(e);function r(i){if((i=+i)==0)return e;var a=n(i);return function(){return a()/i}}return r.source=t,r}(Nn),Rz=function t(e){function n(r){return function(){return-Math.log1p(-e())/r}}return n.source=t,n}(Nn),Fz=function t(e){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-e(),r)}}return n.source=t,n}(Nn),$z=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+r)}}return n.source=t,n}(Nn),$x=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-e())/r)})}return n.source=t,n}(Nn),K2=function t(e){var n=Q2.source(e)();function r(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-e())*a;var o=(i<1?i+1:i)-1/3,s=1/(3*Math.sqrt(o)),l=i<1?()=>Math.pow(e(),1/i):()=>1;return function(){do{do var u=n(),h=1+s*u;while(h<=0);h*=h*h;var f=1-e()}while(f>=1-.0331*u*u*u*u&&Math.log(f)>=.5*u*u+o*(1-h+Math.log(h)));return o*h*l()*a}}return r.source=t,r}(Nn),Px=function t(e){var n=K2.source(e);function r(i,a){var o=n(i),s=n(a);return function(){var l=o();return l===0?0:l/(l+s())}}return r.source=t,r}(Nn),Yx=function t(e){var n=$x.source(e),r=Px.source(e);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var s=0,l=a,u=o;l*u>16&&l*(1-u)>16;){var h=Math.floor((l+1)*u),f=r(h,l-h+1)();f<=u?(s+=h,l-=h,u=(u-f)/(1-f)):(l=h-1,u/=f)}for(var d=u<.5,p=d?u:1-u,m=n(p),_=m(),y=0;_<=l;++y)_+=m();return s+(d?y:l-y)}}return i.source=t,i}(Nn),Pz=function t(e){function n(r,i,a){var o;return(r=+r)==0?o=s=>-Math.log(s):(r=1/r,o=s=>Math.pow(s,r)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-e()))}}return n.source=t,n}(Nn),Yz=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*e())}}return n.source=t,n}(Nn),zz=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var a=e();return r+i*Math.log(a/(1-a))}}return n.source=t,n}(Nn),jz=function t(e){var n=K2.source(e),r=Yx.source(e);function i(a){return function(){for(var o=0,s=a;s>16;){var l=Math.floor(.875*s),u=n(l)();if(u>s)return o+r(l-1,s/u)();o+=l,s-=u}for(var h=-Math.log1p(-e()),f=0;h<=s;++f)h-=Math.log1p(-e());return o+f}}return i.source=t,i}(Nn),Uz=1664525,Hz=1013904223,zx=1/4294967296;function Wz(t=Math.random()){let e=(0<=t&&t<1?t/zx:Math.abs(t))|0;return()=>(e=Uz*e+Hz|0,zx*(e>>>0))}function Nr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ki(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const J2=Symbol("implicit");function o1(){var t=new Tc,e=[],n=[],r=J2;function i(a){let o=t.get(a);if(o===void 0){if(r!==J2)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Tc;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return o1(e,n).unknown(r)},Nr.apply(i,arguments),i}function tp(){var t=o1().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,h=.5;delete t.unknown;function f(){var d=e().length,p=i<r,m=p?i:r,_=p?r:i;a=(_-m)/Math.max(1,d-l+u*2),s&&(a=Math.floor(a)),m+=(_-m-a*(d-l))*h,o=a*(1-l),s&&(m=Math.round(m),o=Math.round(o));var y=Ea(d).map(function(b){return m+a*b});return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(d){return arguments.length?(s=!!d,f()):s},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),f()):h},t.copy=function(){return tp(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(h)},Nr.apply(f(),arguments)}function jx(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jx(e())},t}function Vz(){return jx(tp.apply(null,arguments).paddingInner(1))}function Gz(t){return function(){return t}}function s1(t){return+t}var Ux=[0,1];function rr(t){return t}function ep(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Gz(isNaN(e)?NaN:.5)}function qz(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Xz(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=ep(i,r),a=n(o,a)):(r=ep(r,i),a=n(a,o)),function(s){return a(r(s))}}function Zz(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=ep(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=lo(t,s,1,r)-1;return a[l](i[l](s))}}function pl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function c1(){var t=Ux,e=Ux,n=Aa,r,i,a,o=rr,s,l,u;function h(){var d=Math.min(t.length,e.length);return o!==rr&&(o=qz(t[0],t[d-1])),s=d>2?Zz:Xz,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=s(t.map(r),e,n)))(r(o(d)))}return f.invert=function(d){return o(i((u||(u=s(e,t.map(r),Lr)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,s1),h()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=Zu,h()},f.clamp=function(d){return arguments.length?(o=d?!0:rr,h()):o!==rr},f.interpolate=function(d){return arguments.length?(n=d,h()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,p){return r=d,i=p,h()}}function np(){return c1()(rr,rr)}function Hx(t,e,n,r){var i=Ec(t,e,n),a;switch(r=Es(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=ev(i,o))&&(r.precision=a),Zf(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=nv(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=tv(i))&&(r.precision=a-(r.type==="%")*2);break}}return _h(r)}function Ia(t){var e=t.domain;return t.ticks=function(n){var r=e();return ho(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return Hx(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,h=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);h-- >0;){if(u=ss(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function rp(){var t=np();return t.copy=function(){return pl(t,rp())},Nr.apply(t,arguments),Ia(t)}function Wx(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,s1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Wx(t).unknown(e)},t=arguments.length?Array.from(t,s1):[0,1],Ia(n)}function Vx(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function Gx(t){return Math.log(t)}function qx(t){return Math.exp(t)}function Qz(t){return-Math.log(-t)}function Kz(t){return-Math.exp(-t)}function Jz(t){return isFinite(t)?+("1e"+t):t<0?0:t}function tj(t){return t===10?Jz:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ej(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Xx(t){return(e,n)=>-t(-e,n)}function ip(t){const e=t(Gx,qx),n=e.domain;let r=10,i,a;function o(){return i=ej(r),a=tj(r),n()[0]<0?(i=Xx(i),a=Xx(a),t(Qz,Kz)):t(Gx,qx),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let u=l[0],h=l[l.length-1];const f=h<u;f&&([u,h]=[h,u]);let d=i(u),p=i(h),m,_;const y=s==null?10:+s;let b=[];if(!(r%1)&&p-d<y){if(d=Math.floor(d),p=Math.ceil(p),u>0){for(;d<=p;++d)for(m=1;m<r;++m)if(_=d<0?m/a(-d):m*a(d),!(_<u)){if(_>h)break;b.push(_)}}else for(;d<=p;++d)for(m=r-1;m>=1;--m)if(_=d>0?m/a(-d):m*a(d),!(_<u)){if(_>h)break;b.push(_)}b.length*2<y&&(b=ho(u,h,y))}else b=ho(d,p,Math.min(p-d,y)).map(a);return f?b.reverse():b},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Es(l)).precision==null&&(l.trim=!0),l=_h(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return h=>{let f=h/a(Math.round(i(h)));return f*r<r-.5&&(f*=r),f<=u?l(h):""}},e.nice=()=>n(Vx(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function Zx(){const t=ip(c1()).domain([1,10]);return t.copy=()=>pl(t,Zx()).base(t.base()),Nr.apply(t,arguments),t}function Qx(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Kx(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ap(t){var e=1,n=t(Qx(e),Kx(e));return n.constant=function(r){return arguments.length?t(Qx(e=+r),Kx(e)):e},Ia(n)}function Jx(){var t=ap(c1());return t.copy=function(){return pl(t,Jx()).constant(t.constant())},Nr.apply(t,arguments)}function t8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function nj(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function rj(t){return t<0?-t*t:t*t}function op(t){var e=t(rr,rr),n=1;function r(){return n===1?t(rr,rr):n===.5?t(nj,rj):t(t8(n),t8(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ia(e)}function sp(){var t=op(c1());return t.copy=function(){return pl(t,sp()).exponent(t.exponent())},Nr.apply(t,arguments),t}function ij(){return sp.apply(null,arguments).exponent(.5)}function e8(t){return Math.sign(t)*t*t}function aj(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function n8(){var t=np(),e=[0,1],n=!1,r;function i(a){var o=aj(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(e8(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,s1)).map(e8)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return n8(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Nr.apply(i,arguments),Ia(i)}function r8(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=Y5(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[lo(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ze),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return r8().domain(t).range(e).unknown(r)},Nr.apply(a,arguments)}function i8(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[lo(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return i8().domain([t,e]).range(i).unknown(a)},Nr.apply(Ia(o),arguments)}function a8(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[lo(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return a8().domain(t).range(e).unknown(n)},Nr.apply(i,arguments)}var cp=new Date,lp=new Date;function wn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return t(a=new Date(+a)),a},i.ceil=function(a){return t(a=new Date(a-1)),e(a,1),t(a),a},i.round=function(a){var o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=function(a,o){return e(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,s){var l=[],u;if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},i.filter=function(a){return wn(function(o){if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},function(o,s){if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););})},n&&(i.count=function(a,o){return cp.setTime(+a),lp.setTime(+o),t(cp),t(lp),Math.floor(n(cp,lp))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?function(o){return r(o)%a===0}:function(o){return i.count(0,o)%a===0}):i}),i}var l1=wn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});l1.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?wn(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):l1};const up=l1;var o8=l1.range;const Ji=1e3,Dr=Ji*60,ta=Dr*60,No=ta*24,hp=No*7,s8=No*30,dp=No*365;var c8=wn(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Ji)},function(t,e){return(e-t)/Ji},function(t){return t.getUTCSeconds()});const Ra=c8;var l8=c8.range,u8=wn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ji)},function(t,e){t.setTime(+t+e*Dr)},function(t,e){return(e-t)/Dr},function(t){return t.getMinutes()});const fp=u8;var oj=u8.range,h8=wn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ji-t.getMinutes()*Dr)},function(t,e){t.setTime(+t+e*ta)},function(t,e){return(e-t)/ta},function(t){return t.getHours()});const pp=h8;var sj=h8.range,d8=wn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Dr)/No,t=>t.getDate()-1);const gl=d8;var cj=d8.range;function Do(t){return wn(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Dr)/hp})}var Os=Do(0),yl=Do(1),f8=Do(2),p8=Do(3),Oo=Do(4),g8=Do(5),y8=Do(6),m8=Os.range,lj=yl.range,uj=f8.range,hj=p8.range,dj=Oo.range,fj=g8.range,pj=y8.range,b8=wn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const gp=b8;var gj=b8.range,yp=wn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});yp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:wn(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const Fa=yp;var yj=yp.range,_8=wn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Dr)},function(t,e){return(e-t)/Dr},function(t){return t.getUTCMinutes()});const mp=_8;var mj=_8.range,v8=wn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*ta)},function(t,e){return(e-t)/ta},function(t){return t.getUTCHours()});const bp=v8;var bj=v8.range,x8=wn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/No},function(t){return t.getUTCDate()-1});const ml=x8;var _j=x8.range;function Io(t){return wn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/hp})}var Is=Io(0),bl=Io(1),k8=Io(2),w8=Io(3),Ro=Io(4),T8=Io(5),E8=Io(6),C8=Is.range,vj=bl.range,xj=k8.range,kj=w8.range,wj=Ro.range,Tj=T8.range,Ej=E8.range,S8=wn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const _p=S8;var Cj=S8.range,vp=wn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});vp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:wn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const $a=vp;var Sj=vp.range;function A8(t,e,n,r,i,a){const o=[[Ra,1,Ji],[Ra,5,5*Ji],[Ra,15,15*Ji],[Ra,30,30*Ji],[a,1,Dr],[a,5,5*Dr],[a,15,15*Dr],[a,30,30*Dr],[i,1,ta],[i,3,3*ta],[i,6,6*ta],[i,12,12*ta],[r,1,No],[r,2,2*No],[n,1,hp],[e,1,s8],[e,3,3*s8],[t,1,dp]];function s(u,h,f){const d=h<u;d&&([u,h]=[h,u]);const p=f&&typeof f.range=="function"?f:l(u,h,f),m=p?p.range(u,+h+1):[];return d?m.reverse():m}function l(u,h,f){const d=Math.abs(h-u)/f,p=Eu(([,,y])=>y).right(o,d);if(p===o.length)return t.every(Ec(u/dp,h/dp,f));if(p===0)return up.every(Math.max(Ec(u,h,f),1));const[m,_]=o[d/o[p-1][2]<o[p][2]/d?p-1:p];return m.every(_)}return[s,l]}const[M8,L8]=A8($a,_p,Is,ml,bp,mp),[B8,N8]=A8(Fa,gp,Os,gl,pp,fp);function xp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _l(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function D8(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=vl(i),h=xl(i),f=vl(a),d=xl(a),p=vl(o),m=xl(o),_=vl(s),y=xl(s),b=vl(l),k=xl(l),T={a:K,A:nt,b:z,B:Y,c:null,d:P8,e:P8,f:Zj,g:oU,G:cU,H:Gj,I:qj,j:Xj,L:Y8,m:Qj,M:Kj,p:rt,q:lt,Q:V8,s:G8,S:Jj,u:tU,U:eU,V:nU,w:rU,W:iU,x:null,X:null,y:aU,Y:sU,Z:lU,"%":W8},x={a:J,A:Q,b:q,B:it,c:null,d:j8,e:j8,f:fU,g:wU,G:EU,H:uU,I:hU,j:dU,L:U8,m:pU,M:gU,p:ut,q:V,Q:V8,s:G8,S:yU,u:mU,U:bU,V:_U,w:vU,W:xU,x:null,X:null,y:kU,Y:TU,Z:CU,"%":W8},A={a:v,A:M,b:w,B:I,c:B,d:F8,e:F8,f:Uj,g:R8,G:I8,H:$8,I:$8,j:Pj,L:jj,m:$j,M:Yj,p:D,q:Fj,Q:Wj,s:Vj,S:zj,u:Nj,U:Dj,V:Oj,w:Bj,W:Ij,x:$,X:F,y:R8,Y:I8,Z:Rj,"%":Hj};T.x=C(n,T),T.X=C(r,T),T.c=C(e,T),x.x=C(n,x),x.X=C(r,x),x.c=C(e,x);function C(j,P){return function(X){var O=[],G=-1,U=0,H=j.length,xt,ot,Dt;for(X instanceof Date||(X=new Date(+X));++G<H;)j.charCodeAt(G)===37&&(O.push(j.slice(U,G)),(ot=O8[xt=j.charAt(++G)])!=null?xt=j.charAt(++G):ot=xt==="e"?" ":"0",(Dt=P[xt])&&(xt=Dt(X,ot)),O.push(xt),U=G+1);return O.push(j.slice(U,G)),O.join("")}}function L(j,P){return function(X){var O=_l(1900,void 0,1),G=S(O,j,X+="",0),U,H;if(G!=X.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(P&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(U=kp(_l(O.y,0,1)),H=U.getUTCDay(),U=H>4||H===0?bl.ceil(U):bl(U),U=ml.offset(U,(O.V-1)*7),O.y=U.getUTCFullYear(),O.m=U.getUTCMonth(),O.d=U.getUTCDate()+(O.w+6)%7):(U=xp(_l(O.y,0,1)),H=U.getDay(),U=H>4||H===0?yl.ceil(U):yl(U),U=gl.offset(U,(O.V-1)*7),O.y=U.getFullYear(),O.m=U.getMonth(),O.d=U.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),H="Z"in O?kp(_l(O.y,0,1)).getUTCDay():xp(_l(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(H+5)%7:O.w+O.U*7-(H+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,kp(O)):xp(O)}}function S(j,P,X,O){for(var G=0,U=P.length,H=X.length,xt,ot;G<U;){if(O>=H)return-1;if(xt=P.charCodeAt(G++),xt===37){if(xt=P.charAt(G++),ot=A[xt in O8?P.charAt(G++):xt],!ot||(O=ot(j,X,O))<0)return-1}else if(xt!=X.charCodeAt(O++))return-1}return O}function D(j,P,X){var O=u.exec(P.slice(X));return O?(j.p=h.get(O[0].toLowerCase()),X+O[0].length):-1}function v(j,P,X){var O=p.exec(P.slice(X));return O?(j.w=m.get(O[0].toLowerCase()),X+O[0].length):-1}function M(j,P,X){var O=f.exec(P.slice(X));return O?(j.w=d.get(O[0].toLowerCase()),X+O[0].length):-1}function w(j,P,X){var O=b.exec(P.slice(X));return O?(j.m=k.get(O[0].toLowerCase()),X+O[0].length):-1}function I(j,P,X){var O=_.exec(P.slice(X));return O?(j.m=y.get(O[0].toLowerCase()),X+O[0].length):-1}function B(j,P,X){return S(j,e,P,X)}function $(j,P,X){return S(j,n,P,X)}function F(j,P,X){return S(j,r,P,X)}function K(j){return o[j.getDay()]}function nt(j){return a[j.getDay()]}function z(j){return l[j.getMonth()]}function Y(j){return s[j.getMonth()]}function rt(j){return i[+(j.getHours()>=12)]}function lt(j){return 1+~~(j.getMonth()/3)}function J(j){return o[j.getUTCDay()]}function Q(j){return a[j.getUTCDay()]}function q(j){return l[j.getUTCMonth()]}function it(j){return s[j.getUTCMonth()]}function ut(j){return i[+(j.getUTCHours()>=12)]}function V(j){return 1+~~(j.getUTCMonth()/3)}return{format:function(j){var P=C(j+="",T);return P.toString=function(){return j},P},parse:function(j){var P=L(j+="",!1);return P.toString=function(){return j},P},utcFormat:function(j){var P=C(j+="",x);return P.toString=function(){return j},P},utcParse:function(j){var P=L(j+="",!0);return P.toString=function(){return j},P}}}var O8={"-":"",_:" ",0:"0"},An=/^\s*\d+/,Aj=/^%/,Mj=/[\\^$*+?|[\]().{}]/g;function Ie(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Lj(t){return t.replace(Mj,"\\$&")}function vl(t){return new RegExp("^(?:"+t.map(Lj).join("|")+")","i")}function xl(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Bj(t,e,n){var r=An.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Nj(t,e,n){var r=An.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Dj(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Oj(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Ij(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function I8(t,e,n){var r=An.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function R8(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rj(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fj(t,e,n){var r=An.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function $j(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function F8(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Pj(t,e,n){var r=An.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function $8(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Yj(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function zj(t,e,n){var r=An.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function jj(t,e,n){var r=An.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Uj(t,e,n){var r=An.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hj(t,e,n){var r=Aj.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Wj(t,e,n){var r=An.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Vj(t,e,n){var r=An.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function P8(t,e){return Ie(t.getDate(),e,2)}function Gj(t,e){return Ie(t.getHours(),e,2)}function qj(t,e){return Ie(t.getHours()%12||12,e,2)}function Xj(t,e){return Ie(1+gl.count(Fa(t),t),e,3)}function Y8(t,e){return Ie(t.getMilliseconds(),e,3)}function Zj(t,e){return Y8(t,e)+"000"}function Qj(t,e){return Ie(t.getMonth()+1,e,2)}function Kj(t,e){return Ie(t.getMinutes(),e,2)}function Jj(t,e){return Ie(t.getSeconds(),e,2)}function tU(t){var e=t.getDay();return e===0?7:e}function eU(t,e){return Ie(Os.count(Fa(t)-1,t),e,2)}function z8(t){var e=t.getDay();return e>=4||e===0?Oo(t):Oo.ceil(t)}function nU(t,e){return t=z8(t),Ie(Oo.count(Fa(t),t)+(Fa(t).getDay()===4),e,2)}function rU(t){return t.getDay()}function iU(t,e){return Ie(yl.count(Fa(t)-1,t),e,2)}function aU(t,e){return Ie(t.getFullYear()%100,e,2)}function oU(t,e){return t=z8(t),Ie(t.getFullYear()%100,e,2)}function sU(t,e){return Ie(t.getFullYear()%1e4,e,4)}function cU(t,e){var n=t.getDay();return t=n>=4||n===0?Oo(t):Oo.ceil(t),Ie(t.getFullYear()%1e4,e,4)}function lU(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ie(e/60|0,"0",2)+Ie(e%60,"0",2)}function j8(t,e){return Ie(t.getUTCDate(),e,2)}function uU(t,e){return Ie(t.getUTCHours(),e,2)}function hU(t,e){return Ie(t.getUTCHours()%12||12,e,2)}function dU(t,e){return Ie(1+ml.count($a(t),t),e,3)}function U8(t,e){return Ie(t.getUTCMilliseconds(),e,3)}function fU(t,e){return U8(t,e)+"000"}function pU(t,e){return Ie(t.getUTCMonth()+1,e,2)}function gU(t,e){return Ie(t.getUTCMinutes(),e,2)}function yU(t,e){return Ie(t.getUTCSeconds(),e,2)}function mU(t){var e=t.getUTCDay();return e===0?7:e}function bU(t,e){return Ie(Is.count($a(t)-1,t),e,2)}function H8(t){var e=t.getUTCDay();return e>=4||e===0?Ro(t):Ro.ceil(t)}function _U(t,e){return t=H8(t),Ie(Ro.count($a(t),t)+($a(t).getUTCDay()===4),e,2)}function vU(t){return t.getUTCDay()}function xU(t,e){return Ie(bl.count($a(t)-1,t),e,2)}function kU(t,e){return Ie(t.getUTCFullYear()%100,e,2)}function wU(t,e){return t=H8(t),Ie(t.getUTCFullYear()%100,e,2)}function TU(t,e){return Ie(t.getUTCFullYear()%1e4,e,4)}function EU(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ro(t):Ro.ceil(t),Ie(t.getUTCFullYear()%1e4,e,4)}function CU(){return"+0000"}function W8(){return"%"}function V8(t){return+t}function G8(t){return Math.floor(+t/1e3)}var Rs,kl,q8,u1,wp;X8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function X8(t){return Rs=D8(t),kl=Rs.format,q8=Rs.parse,u1=Rs.utcFormat,wp=Rs.utcParse,Rs}var Z8="%Y-%m-%dT%H:%M:%S.%LZ";function SU(t){return t.toISOString()}var AU=Date.prototype.toISOString?SU:u1(Z8);const MU=AU;function LU(t){var e=new Date(t);return isNaN(e)?null:e}var BU=+new Date("2000-01-01T00:00:00.000Z")?LU:wp(Z8);const NU=BU;function DU(t){return new Date(t)}function OU(t){return t instanceof Date?+t:+new Date(+t)}function Tp(t,e,n,r,i,a,o,s,l,u){var h=np(),f=h.invert,d=h.domain,p=u(".%L"),m=u(":%S"),_=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),k=u("%b %d"),T=u("%B"),x=u("%Y");function A(C){return(l(C)<C?p:s(C)<C?m:o(C)<C?_:a(C)<C?y:r(C)<C?i(C)<C?b:k:n(C)<C?T:x)(C)}return h.invert=function(C){return new Date(f(C))},h.domain=function(C){return arguments.length?d(Array.from(C,OU)):d().map(DU)},h.ticks=function(C){var L=d();return t(L[0],L[L.length-1],C==null?10:C)},h.tickFormat=function(C,L){return L==null?A:u(L)},h.nice=function(C){var L=d();return(!C||typeof C.range!="function")&&(C=e(L[0],L[L.length-1],C==null?10:C)),C?d(Vx(L,C)):h},h.copy=function(){return pl(h,Tp(t,e,n,r,i,a,o,s,l,u))},h}function Q8(){return Nr.apply(Tp(B8,N8,Fa,gp,Os,gl,pp,fp,Ra,kl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function IU(){return Nr.apply(Tp(M8,L8,$a,_p,Is,ml,bp,mp,Ra,u1).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function h1(){var t=0,e=1,n,r,i,a,o=rr,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(a(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function h(f){return function(d){var p,m;return arguments.length?([p,m]=d,o=f(p,m),u):[o(0),o(1)]}}return u.range=h(Aa),u.rangeRound=h(Zu),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Pa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function K8(){var t=Ia(h1()(rr));return t.copy=function(){return Pa(t,K8())},Ki.apply(t,arguments)}function J8(){var t=ip(h1()).domain([1,10]);return t.copy=function(){return Pa(t,J8()).base(t.base())},Ki.apply(t,arguments)}function t7(){var t=ap(h1());return t.copy=function(){return Pa(t,t7()).constant(t.constant())},Ki.apply(t,arguments)}function Ep(){var t=op(h1());return t.copy=function(){return Pa(t,Ep()).exponent(t.exponent())},Ki.apply(t,arguments)}function RU(){return Ep.apply(null,arguments).exponent(.5)}function e7(){var t=[],e=rr;function n(r){if(r!=null&&!isNaN(r=+r))return e((lo(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ze),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Ac(t,a/r))},n.copy=function(){return e7(e).domain(t)},Ki.apply(n,arguments)}function d1(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,u=rr,h,f=!1,d;function p(_){return isNaN(_=+_)?d:(_=.5+((_=+h(_))-a)*(r*_<r*a?s:l),u(f?Math.max(0,Math.min(1,_)):_))}p.domain=function(_){return arguments.length?([t,e,n]=_,i=h(t=+t),a=h(e=+e),o=h(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,p):[t,e,n]},p.clamp=function(_){return arguments.length?(f=!!_,p):f},p.interpolator=function(_){return arguments.length?(u=_,p):u};function m(_){return function(y){var b,k,T;return arguments.length?([b,k,T]=y,u=K_(_,[b,k,T]),p):[u(0),u(.5),u(1)]}}return p.range=m(Aa),p.rangeRound=m(Zu),p.unknown=function(_){return arguments.length?(d=_,p):d},function(_){return h=_,i=_(t),a=_(e),o=_(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,p}}function n7(){var t=Ia(d1()(rr));return t.copy=function(){return Pa(t,n7())},Ki.apply(t,arguments)}function r7(){var t=ip(d1()).domain([.1,1,10]);return t.copy=function(){return Pa(t,r7()).base(t.base())},Ki.apply(t,arguments)}function i7(){var t=ap(d1());return t.copy=function(){return Pa(t,i7()).constant(t.constant())},Ki.apply(t,arguments)}function Cp(){var t=op(d1());return t.copy=function(){return Pa(t,Cp()).exponent(t.exponent())},Ki.apply(t,arguments)}function FU(){return Cp.apply(null,arguments).exponent(.5)}function ke(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const $U=ke("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),PU=ke("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),YU=ke("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),zU=ke("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),jU=ke("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),UU=ke("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),HU=ke("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),WU=ke("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),VU=ke("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),GU=ke("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),He=t=>I_(t[t.length-1]);var a7=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ke);const qU=He(a7);var o7=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ke);const XU=He(o7);var s7=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ke);const ZU=He(s7);var c7=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ke);const QU=He(c7);var l7=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ke);const KU=He(l7);var u7=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ke);const JU=He(u7);var h7=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ke);const tH=He(h7);var d7=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ke);const eH=He(d7);var f7=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ke);const nH=He(f7);var p7=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ke);const rH=He(p7);var g7=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ke);const iH=He(g7);var y7=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ke);const aH=He(y7);var m7=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ke);const oH=He(m7);var b7=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ke);const sH=He(b7);var _7=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ke);const cH=He(_7);var v7=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ke);const lH=He(v7);var x7=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ke);const uH=He(x7);var k7=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ke);const hH=He(k7);var w7=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ke);const dH=He(w7);var T7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ke);const fH=He(T7);var E7=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ke);const pH=He(E7);var C7=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ke);const gH=He(C7);var S7=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ke);const yH=He(S7);var A7=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ke);const mH=He(A7);var M7=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ke);const bH=He(M7);var L7=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ke);const _H=He(L7);var B7=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ke);const vH=He(B7);function xH(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const kH=Ku(Zr(300,.5,0),Zr(-240,.5,1));var wH=Ku(Zr(-100,.75,.35),Zr(80,1.5,.8)),TH=Ku(Zr(260,.75,.35),Zr(80,1.5,.8)),f1=Zr();function EH(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return f1.h=360*t-100,f1.s=1.5-1.5*e,f1.l=.8-.9*e,f1+""}var p1=fs(),CH=Math.PI/3,SH=Math.PI*2/3;function AH(t){var e;return t=(.5-t)*Math.PI,p1.r=255*(e=Math.sin(t))*e,p1.g=255*(e=Math.sin(t+CH))*e,p1.b=255*(e=Math.sin(t+SH))*e,p1+""}function MH(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function g1(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const LH=g1(ke("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var BH=g1(ke("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),NH=g1(ke("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),DH=g1(ke("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function xe(t){return function(){return t}}const N7=Math.abs,Yn=Math.atan2,ea=Math.cos,OH=Math.max,Fs=Math.min,fr=Math.sin,Ve=Math.sqrt,zn=1e-12,Ya=Math.PI,y1=Ya/2,za=2*Ya;function IH(t){return t>1?0:t<-1?Ya:Math.acos(t)}function D7(t){return t>=1?y1:t<=-1?-y1:Math.asin(t)}function RH(t){return t.innerRadius}function FH(t){return t.outerRadius}function $H(t){return t.startAngle}function PH(t){return t.endAngle}function YH(t){return t&&t.padAngle}function zH(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,h=o-i,f=s-a,d=f*l-h*u;if(!(d*d<zn))return d=(h*(e-a)-f*(t-i))/d,[t+d*l,e+d*u]}function m1(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/Ve(s*s+l*l),h=u*l,f=-u*s,d=t+h,p=e+f,m=n+h,_=r+f,y=(d+m)/2,b=(p+_)/2,k=m-d,T=_-p,x=k*k+T*T,A=i-a,C=d*_-m*p,L=(T<0?-1:1)*Ve(OH(0,A*A*x-C*C)),S=(C*T-k*L)/x,D=(-C*k-T*L)/x,v=(C*T+k*L)/x,M=(-C*k+T*L)/x,w=S-y,I=D-b,B=v-y,$=M-b;return w*w+I*I>B*B+$*$&&(S=v,D=M),{cx:S,cy:D,x01:-h,y01:-f,x11:S*(i/A-1),y11:D*(i/A-1)}}function b1(){var t=RH,e=FH,n=xe(0),r=null,i=$H,a=PH,o=YH,s=null;function l(){var u,h,f=+t.apply(this,arguments),d=+e.apply(this,arguments),p=i.apply(this,arguments)-y1,m=a.apply(this,arguments)-y1,_=N7(m-p),y=m>p;if(s||(s=u=La()),d<f&&(h=d,d=f,f=h),!(d>zn))s.moveTo(0,0);else if(_>za-zn)s.moveTo(d*ea(p),d*fr(p)),s.arc(0,0,d,p,m,!y),f>zn&&(s.moveTo(f*ea(m),f*fr(m)),s.arc(0,0,f,m,p,y));else{var b=p,k=m,T=p,x=m,A=_,C=_,L=o.apply(this,arguments)/2,S=L>zn&&(r?+r.apply(this,arguments):Ve(f*f+d*d)),D=Fs(N7(d-f)/2,+n.apply(this,arguments)),v=D,M=D,w,I;if(S>zn){var B=D7(S/f*fr(L)),$=D7(S/d*fr(L));(A-=B*2)>zn?(B*=y?1:-1,T+=B,x-=B):(A=0,T=x=(p+m)/2),(C-=$*2)>zn?($*=y?1:-1,b+=$,k-=$):(C=0,b=k=(p+m)/2)}var F=d*ea(b),K=d*fr(b),nt=f*ea(x),z=f*fr(x);if(D>zn){var Y=d*ea(k),rt=d*fr(k),lt=f*ea(T),J=f*fr(T),Q;if(_<Ya&&(Q=zH(F,K,lt,J,Y,rt,nt,z))){var q=F-Q[0],it=K-Q[1],ut=Y-Q[0],V=rt-Q[1],j=1/fr(IH((q*ut+it*V)/(Ve(q*q+it*it)*Ve(ut*ut+V*V)))/2),P=Ve(Q[0]*Q[0]+Q[1]*Q[1]);v=Fs(D,(f-P)/(j-1)),M=Fs(D,(d-P)/(j+1))}}C>zn?M>zn?(w=m1(lt,J,F,K,d,M,y),I=m1(Y,rt,nt,z,d,M,y),s.moveTo(w.cx+w.x01,w.cy+w.y01),M<D?s.arc(w.cx,w.cy,M,Yn(w.y01,w.x01),Yn(I.y01,I.x01),!y):(s.arc(w.cx,w.cy,M,Yn(w.y01,w.x01),Yn(w.y11,w.x11),!y),s.arc(0,0,d,Yn(w.cy+w.y11,w.cx+w.x11),Yn(I.cy+I.y11,I.cx+I.x11),!y),s.arc(I.cx,I.cy,M,Yn(I.y11,I.x11),Yn(I.y01,I.x01),!y))):(s.moveTo(F,K),s.arc(0,0,d,b,k,!y)):s.moveTo(F,K),!(f>zn)||!(A>zn)?s.lineTo(nt,z):v>zn?(w=m1(nt,z,Y,rt,f,-v,y),I=m1(F,K,lt,J,f,-v,y),s.lineTo(w.cx+w.x01,w.cy+w.y01),v<D?s.arc(w.cx,w.cy,v,Yn(w.y01,w.x01),Yn(I.y01,I.x01),!y):(s.arc(w.cx,w.cy,v,Yn(w.y01,w.x01),Yn(w.y11,w.x11),!y),s.arc(0,0,f,Yn(w.cy+w.y11,w.cx+w.x11),Yn(I.cy+I.y11,I.cx+I.x11),y),s.arc(I.cx,I.cy,v,Yn(I.y11,I.x11),Yn(I.y01,I.x01),!y))):s.arc(0,0,f,x,T,y)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ya/2;return[ea(h)*u,fr(h)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:xe(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:xe(+u),l):e},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:xe(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:xe(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:xe(+u),l):i},l.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:xe(+u),l):a},l.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:xe(+u),l):o},l.context=function(u){return arguments.length?(s=u==null?null:u,l):s},l}var jH=Array.prototype.slice;function _1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function O7(t){this._context=t}O7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function pr(t){return new O7(t)}function Sp(t){return t[0]}function Ap(t){return t[1]}function ja(t,e){var n=xe(!0),r=null,i=pr,a=null;t=typeof t=="function"?t:t===void 0?Sp:xe(t),e=typeof e=="function"?e:e===void 0?Ap:xe(e);function o(s){var l,u=(s=_1(s)).length,h,f=!1,d;for(r==null&&(a=i(d=La())),l=0;l<=u;++l)!(l<u&&n(h=s[l],l,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,l,s),+e(h,l,s));if(d)return a=null,d+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:xe(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:xe(+s),o):e},o.defined=function(s){return arguments.length?(n=typeof s=="function"?s:xe(!!s),o):n},o.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),o):i},o.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),o):r},o}function I7(t,e,n){var r=null,i=xe(!0),a=null,o=pr,s=null;t=typeof t=="function"?t:t===void 0?Sp:xe(+t),e=typeof e=="function"?e:xe(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Ap:xe(+n);function l(h){var f,d,p,m=(h=_1(h)).length,_,y=!1,b,k=new Array(m),T=new Array(m);for(a==null&&(s=o(b=La())),f=0;f<=m;++f){if(!(f<m&&i(_=h[f],f,h))===y)if(y=!y)d=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=f-1;p>=d;--p)s.point(k[p],T[p]);s.lineEnd(),s.areaEnd()}y&&(k[f]=+t(_,f,h),T[f]=+e(_,f,h),s.point(r?+r(_,f,h):k[f],n?+n(_,f,h):T[f]))}if(b)return s=null,b+""||null}function u(){return ja().defined(i).curve(o).context(a)}return l.x=function(h){return arguments.length?(t=typeof h=="function"?h:xe(+h),r=null,l):t},l.x0=function(h){return arguments.length?(t=typeof h=="function"?h:xe(+h),l):t},l.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:xe(+h),l):r},l.y=function(h){return arguments.length?(e=typeof h=="function"?h:xe(+h),n=null,l):e},l.y0=function(h){return arguments.length?(e=typeof h=="function"?h:xe(+h),l):e},l.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:xe(+h),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(r).y(e)},l.defined=function(h){return arguments.length?(i=typeof h=="function"?h:xe(!!h),l):i},l.curve=function(h){return arguments.length?(o=h,a!=null&&(s=o(a)),l):o},l.context=function(h){return arguments.length?(h==null?a=s=null:s=o(a=h),l):a},l}function UH(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function HH(t){return t}function R7(){var t=HH,e=UH,n=null,r=xe(0),i=xe(za),a=xe(0);function o(s){var l,u=(s=_1(s)).length,h,f,d=0,p=new Array(u),m=new Array(u),_=+r.apply(this,arguments),y=Math.min(za,Math.max(-za,i.apply(this,arguments)-_)),b,k=Math.min(Math.abs(y)/u,a.apply(this,arguments)),T=k*(y<0?-1:1),x;for(l=0;l<u;++l)(x=m[p[l]=l]=+t(s[l],l,s))>0&&(d+=x);for(e!=null?p.sort(function(A,C){return e(m[A],m[C])}):n!=null&&p.sort(function(A,C){return n(s[A],s[C])}),l=0,f=d?(y-u*T)/d:0;l<u;++l,_=b)h=p[l],x=m[h],b=_+(x>0?x*f:0)+T,m[h]={data:s[h],index:l,value:x,startAngle:_,endAngle:b,padAngle:k};return m}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:xe(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:xe(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:xe(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:xe(+s),o):a},o}var F7=Mp(pr);function $7(t){this._curve=t}$7.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Mp(t){function e(n){return new $7(t(n))}return e._curve=t,e}function wl(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Mp(n)):e()._curve},t}function P7(){return wl(ja().curve(F7))}function Y7(){var t=I7().curve(F7),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return wl(n())},delete t.lineX0,t.lineEndAngle=function(){return wl(r())},delete t.lineX1,t.lineInnerRadius=function(){return wl(i())},delete t.lineY0,t.lineOuterRadius=function(){return wl(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(Mp(o)):e()._curve},t}function Tl(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}class z7{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}class WH{constructor(e){this._context=e}lineStart(){this._point=0}lineEnd(){}point(e,n){if(e=+e,n=+n,this._point++===0)this._x0=e,this._y0=n;else{const r=Tl(this._x0,this._y0),i=Tl(this._x0,this._y0=(this._y0+n)/2),a=Tl(e,this._y0),o=Tl(e,n);this._context.moveTo(...r),this._context.bezierCurveTo(...i,...a,...o)}}}function j7(t){return new z7(t,!0)}function U7(t){return new z7(t,!1)}function VH(t){return new WH(t)}function GH(t){return t.source}function qH(t){return t.target}function v1(t){let e=GH,n=qH,r=Sp,i=Ap,a=null,o=null;function s(){let l;const u=jH.call(arguments),h=e.apply(this,u),f=n.apply(this,u);if(a==null&&(o=t(l=La())),o.lineStart(),u[0]=h,o.point(+r.apply(this,u),+i.apply(this,u)),u[0]=f,o.point(+r.apply(this,u),+i.apply(this,u)),o.lineEnd(),l)return o=null,l+""||null}return s.source=function(l){return arguments.length?(e=l,s):e},s.target=function(l){return arguments.length?(n=l,s):n},s.x=function(l){return arguments.length?(r=typeof l=="function"?l:xe(+l),s):r},s.y=function(l){return arguments.length?(i=typeof l=="function"?l:xe(+l),s):i},s.context=function(l){return arguments.length?(l==null?a=o=null:o=t(a=l),s):a},s}function XH(){return v1(j7)}function ZH(){return v1(U7)}function QH(){const t=v1(VH);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const KH=Ve(3),H7={draw(t,e){const n=Ve(e+Fs(e/28,.75))*.59436,r=n/2,i=r*KH;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},x1={draw(t,e){const n=Ve(e/Ya);t.moveTo(n,0),t.arc(0,0,n,0,za)}},W7={draw(t,e){const n=Ve(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},V7=Ve(1/3),JH=V7*2,G7={draw(t,e){const n=Ve(e/JH),r=n*V7;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},q7={draw(t,e){const n=Ve(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},X7={draw(t,e){const n=Ve(e-Fs(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Z7={draw(t,e){const n=Ve(e),r=-n/2;t.rect(r,r,n,n)}},Q7={draw(t,e){const n=Ve(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},tW=.8908130915292852,K7=fr(Ya/10)/fr(7*Ya/10),eW=fr(za/10)*K7,nW=-ea(za/10)*K7,J7={draw(t,e){const n=Ve(e*tW),r=eW*n,i=nW*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=za*a/5,s=ea(o),l=fr(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},Lp=Ve(3),tk={draw(t,e){const n=-Ve(e/(Lp*3));t.moveTo(0,n*2),t.lineTo(-Lp*n,-n),t.lineTo(Lp*n,-n),t.closePath()}},rW=Ve(3),ek={draw(t,e){const n=Ve(e)*.6824,r=n/2,i=n*rW/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},Or=-.5,Ir=Ve(3)/2,Bp=1/Ve(12),iW=(Bp/2+1)*3,nk={draw(t,e){const n=Ve(e/iW),r=n/2,i=n*Bp,a=r,o=n*Bp+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Or*r-Ir*i,Ir*r+Or*i),t.lineTo(Or*a-Ir*o,Ir*a+Or*o),t.lineTo(Or*s-Ir*l,Ir*s+Or*l),t.lineTo(Or*r+Ir*i,Or*i-Ir*r),t.lineTo(Or*a+Ir*o,Or*o-Ir*a),t.lineTo(Or*s+Ir*l,Or*l-Ir*s),t.closePath()}},rk={draw(t,e){const n=Ve(e-Fs(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},ik=[x1,W7,G7,Z7,J7,tk,nk],aW=[x1,X7,rk,ek,H7,Q7,q7];function oW(t,e){let n=null;t=typeof t=="function"?t:xe(t||x1),e=typeof e=="function"?e:xe(e===void 0?64:+e);function r(){let i;if(n||(n=i=La()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(t=typeof i=="function"?i:xe(i),r):t},r.size=function(i){return arguments.length?(e=typeof i=="function"?i:xe(+i),r):e},r.context=function(i){return arguments.length?(n=i==null?null:i,r):n},r}function Ua(){}function k1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function w1(t){this._context=t}w1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:k1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:k1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Fo(t){return new w1(t)}function ak(t){this._context=t}ak.prototype={areaStart:Ua,areaEnd:Ua,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:k1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ok(t){return new ak(t)}function sk(t){this._context=t}sk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:k1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ck(t){return new sk(t)}function lk(t,e){this._basis=new w1(t),this._beta=e}lk.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+l*a),this._beta*e[s]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const sW=function t(e){function n(r){return e===1?new w1(r):new lk(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function T1(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Np(t,e){this._context=t,this._k=(1-e)/6}Np.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:T1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:T1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const cW=function t(e){function n(r){return new Np(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Dp(t,e){this._context=t,this._k=(1-e)/6}Dp.prototype={areaStart:Ua,areaEnd:Ua,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:T1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const lW=function t(e){function n(r){return new Dp(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Op(t,e){this._context=t,this._k=(1-e)/6}Op.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:T1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const uW=function t(e){function n(r){return new Op(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Ip(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>zn){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>zn){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/h,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function uk(t,e){this._context=t,this._alpha=e}uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ip(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const hW=function t(e){function n(r){return e?new uk(r,e):new Np(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function hk(t,e){this._context=t,this._alpha=e}hk.prototype={areaStart:Ua,areaEnd:Ua,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ip(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const dW=function t(e){function n(r){return e?new hk(r,e):new Dp(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function dk(t,e){this._context=t,this._alpha=e}dk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ip(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const fW=function t(e){function n(r){return e?new dk(r,e):new Op(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function fk(t){this._context=t}fk.prototype={areaStart:Ua,areaEnd:Ua,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function pk(t){return new fk(t)}function gk(t){return t<0?-1:1}function yk(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(gk(a)+gk(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function mk(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Rp(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function E1(t){this._context=t}E1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rp(this,this._t0,mk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Rp(this,mk(this,n=yk(this,t,e)),n);break;default:Rp(this,this._t0,n=yk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function bk(t){this._context=new _k(t)}(bk.prototype=Object.create(E1.prototype)).point=function(t,e){E1.prototype.point.call(this,e,t)};function _k(t){this._context=t}_k.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function vk(t){return new E1(t)}function xk(t){return new bk(t)}function kk(t){this._context=t}kk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=wk(t),i=wk(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function wk(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Tk(t){return new kk(t)}function C1(t,e){this._context=t,this._t=e}C1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Ek(t){return new C1(t,.5)}function Ck(t){return new C1(t,0)}function Sk(t){return new C1(t,1)}function $s(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ps(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function pW(t,e){return t[e]}function gW(t){const e=[];return e.key=t,e}function yW(){var t=xe([]),e=Ps,n=$s,r=pW;function i(a){var o=Array.from(t.apply(this,arguments),gW),s,l=o.length,u=-1,h;for(const f of a)for(s=0,++u;s<l;++s)(o[s][u]=[0,+r(f,o[s].key,u,a)]).data=f;for(s=0,h=_1(e(o));s<l;++s)o[h[s]].index=s;return n(o,h),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:xe(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:xe(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Ps:typeof a=="function"?a:xe(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a==null?$s:a,i):n},i}function mW(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}$s(t,e)}}function bW(t,e){if((l=t.length)>0)for(var n,r=0,i,a,o,s,l,u=t[e[0]].length;r<u;++r)for(o=s=0,n=0;n<l;++n)(a=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=a):a<0?(i[1]=s,i[0]=s+=a):(i[0]=0,i[1]=a)}function _W(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}$s(t,e)}}function vW(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,u=0;s<o;++s){for(var h=t[e[s]],f=h[r][1]||0,d=h[r-1][1]||0,p=(f-d)/2,m=0;m<s;++m){var _=t[e[m]],y=_[r][1]||0,b=_[r-1][1]||0;p+=y-b}l+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,$s(t,e)}}function Ak(t){var e=t.map(xW);return Ps(t).sort(function(n,r){return e[n]-e[r]})}function xW(t){for(var e=-1,n=0,r=t.length,i,a=-1/0;++e<r;)(i=+t[e][1])>a&&(a=i,n=e);return n}function Mk(t){var e=t.map(Lk);return Ps(t).sort(function(n,r){return e[n]-e[r]})}function Lk(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function kW(t){return Mk(t).reverse()}function wW(t){var e=t.length,n,r,i=t.map(Lk),a=Ak(t),o=0,s=0,l=[],u=[];for(n=0;n<e;++n)r=a[n],o<s?(o+=i[r],l.push(r)):(s+=i[r],u.push(r));return u.reverse().concat(l)}function TW(t){return Ps(t).reverse()}const S1=t=>()=>t;function EW(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ai(t,e,n){this.k=t,this.x=e,this.y=n}Ai.prototype={constructor:Ai,scale:function(t){return t===1?this:new Ai(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ai(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var A1=new Ai(1,0,0);Bk.prototype=Ai.prototype;function Bk(t){for(;!t.__zoom;)if(!(t=t.parentNode))return A1;return t.__zoom}function Fp(t){t.stopImmediatePropagation()}function El(t){t.preventDefault(),t.stopImmediatePropagation()}function CW(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function SW(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Nk(){return this.__zoom||A1}function AW(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function MW(){return navigator.maxTouchPoints||"ontouchstart"in this}function LW(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function BW(){var t=CW,e=SW,n=LW,r=AW,i=MW,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=G_,u=fo("start","zoom","end"),h,f,d,p=500,m=150,_=0,y=10;function b(B){B.property("__zoom",Nk).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",v).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",w).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(B,$,F,K){var nt=B.selection?B.selection():B;nt.property("__zoom",Nk),B!==nt?A(B,$,F,K):nt.interrupt().each(function(){C(this,arguments).event(K).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},b.scaleBy=function(B,$,F,K){b.scaleTo(B,function(){var nt=this.__zoom.k,z=typeof $=="function"?$.apply(this,arguments):$;return nt*z},F,K)},b.scaleTo=function(B,$,F,K){b.transform(B,function(){var nt=e.apply(this,arguments),z=this.__zoom,Y=F==null?x(nt):typeof F=="function"?F.apply(this,arguments):F,rt=z.invert(Y),lt=typeof $=="function"?$.apply(this,arguments):$;return n(T(k(z,lt),Y,rt),nt,o)},F,K)},b.translateBy=function(B,$,F,K){b.transform(B,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof F=="function"?F.apply(this,arguments):F),e.apply(this,arguments),o)},null,K)},b.translateTo=function(B,$,F,K,nt){b.transform(B,function(){var z=e.apply(this,arguments),Y=this.__zoom,rt=K==null?x(z):typeof K=="function"?K.apply(this,arguments):K;return n(A1.translate(rt[0],rt[1]).scale(Y.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof F=="function"?-F.apply(this,arguments):-F),z,o)},K,nt)};function k(B,$){return $=Math.max(a[0],Math.min(a[1],$)),$===B.k?B:new Ai($,B.x,B.y)}function T(B,$,F){var K=$[0]-F[0]*B.k,nt=$[1]-F[1]*B.k;return K===B.x&&nt===B.y?B:new Ai(B.k,K,nt)}function x(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function A(B,$,F,K){B.on("start.zoom",function(){C(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(K).end()}).tween("zoom",function(){var nt=this,z=arguments,Y=C(nt,z).event(K),rt=e.apply(nt,z),lt=F==null?x(rt):typeof F=="function"?F.apply(nt,z):F,J=Math.max(rt[1][0]-rt[0][0],rt[1][1]-rt[0][1]),Q=nt.__zoom,q=typeof $=="function"?$.apply(nt,z):$,it=l(Q.invert(lt).concat(J/Q.k),q.invert(lt).concat(J/q.k));return function(ut){if(ut===1)ut=q;else{var V=it(ut),j=J/V[2];ut=new Ai(j,lt[0]-V[0]*j,lt[1]-V[1]*j)}Y.zoom(null,ut)}})}function C(B,$,F){return!F&&B.__zooming||new L(B,$)}function L(B,$){this.that=B,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,$),this.taps=0}L.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,$){return this.mouse&&B!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var $=Lt(this.that).datum();u.call(B,this.that,new EW(B,{sourceEvent:this.sourceEvent,target:b,type:B,transform:this.that.__zoom,dispatch:u}),$)}};function S(B,...$){if(!t.apply(this,arguments))return;var F=C(this,$).event(B),K=this.__zoom,nt=Math.max(a[0],Math.min(a[1],K.k*Math.pow(2,r.apply(this,arguments)))),z=kr(B);if(F.wheel)(F.mouse[0][0]!==z[0]||F.mouse[0][1]!==z[1])&&(F.mouse[1]=K.invert(F.mouse[0]=z)),clearTimeout(F.wheel);else{if(K.k===nt)return;F.mouse=[z,K.invert(z)],xo(this),F.start()}El(B),F.wheel=setTimeout(Y,m),F.zoom("mouse",n(T(k(K,nt),F.mouse[0],F.mouse[1]),F.extent,o));function Y(){F.wheel=null,F.end()}}function D(B,...$){if(d||!t.apply(this,arguments))return;var F=B.currentTarget,K=C(this,$,!0).event(B),nt=Lt(B.view).on("mousemove.zoom",lt,!0).on("mouseup.zoom",J,!0),z=kr(B,F),Y=B.clientX,rt=B.clientY;Fu(B.view),Fp(B),K.mouse=[z,this.__zoom.invert(z)],xo(this),K.start();function lt(Q){if(El(Q),!K.moved){var q=Q.clientX-Y,it=Q.clientY-rt;K.moved=q*q+it*it>_}K.event(Q).zoom("mouse",n(T(K.that.__zoom,K.mouse[0]=kr(Q,F),K.mouse[1]),K.extent,o))}function J(Q){nt.on("mousemove.zoom mouseup.zoom",null),$u(Q.view,K.moved),El(Q),K.event(Q).end()}}function v(B,...$){if(t.apply(this,arguments)){var F=this.__zoom,K=kr(B.changedTouches?B.changedTouches[0]:B,this),nt=F.invert(K),z=F.k*(B.shiftKey?.5:2),Y=n(T(k(F,z),K,nt),e.apply(this,$),o);El(B),s>0?Lt(this).transition().duration(s).call(A,Y,K,B):Lt(this).call(b.transform,Y,K,B)}}function M(B,...$){if(t.apply(this,arguments)){var F=B.touches,K=F.length,nt=C(this,$,B.changedTouches.length===K).event(B),z,Y,rt,lt;for(Fp(B),Y=0;Y<K;++Y)rt=F[Y],lt=kr(rt,this),lt=[lt,this.__zoom.invert(lt),rt.identifier],nt.touch0?!nt.touch1&&nt.touch0[2]!==lt[2]&&(nt.touch1=lt,nt.taps=0):(nt.touch0=lt,z=!0,nt.taps=1+!!h);h&&(h=clearTimeout(h)),z&&(nt.taps<2&&(f=lt[0],h=setTimeout(function(){h=null},p)),xo(this),nt.start())}}function w(B,...$){if(this.__zooming){var F=C(this,$).event(B),K=B.changedTouches,nt=K.length,z,Y,rt,lt;for(El(B),z=0;z<nt;++z)Y=K[z],rt=kr(Y,this),F.touch0&&F.touch0[2]===Y.identifier?F.touch0[0]=rt:F.touch1&&F.touch1[2]===Y.identifier&&(F.touch1[0]=rt);if(Y=F.that.__zoom,F.touch1){var J=F.touch0[0],Q=F.touch0[1],q=F.touch1[0],it=F.touch1[1],ut=(ut=q[0]-J[0])*ut+(ut=q[1]-J[1])*ut,V=(V=it[0]-Q[0])*V+(V=it[1]-Q[1])*V;Y=k(Y,Math.sqrt(ut/V)),rt=[(J[0]+q[0])/2,(J[1]+q[1])/2],lt=[(Q[0]+it[0])/2,(Q[1]+it[1])/2]}else if(F.touch0)rt=F.touch0[0],lt=F.touch0[1];else return;F.zoom("touch",n(T(Y,rt,lt),F.extent,o))}}function I(B,...$){if(this.__zooming){var F=C(this,$).event(B),K=B.changedTouches,nt=K.length,z,Y;for(Fp(B),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),z=0;z<nt;++z)Y=K[z],F.touch0&&F.touch0[2]===Y.identifier?delete F.touch0:F.touch1&&F.touch1[2]===Y.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(Y=kr(Y,this),Math.hypot(f[0]-Y[0],f[1]-Y[1])<y)){var rt=Lt(this).on("dblclick.zoom");rt&&rt.apply(this,arguments)}}}return b.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:S1(+B),b):r},b.filter=function(B){return arguments.length?(t=typeof B=="function"?B:S1(!!B),b):t},b.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:S1(!!B),b):i},b.extent=function(B){return arguments.length?(e=typeof B=="function"?B:S1([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),b):e},b.scaleExtent=function(B){return arguments.length?(a[0]=+B[0],a[1]=+B[1],b):[a[0],a[1]]},b.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(B){return arguments.length?(n=B,b):n},b.duration=function(B){return arguments.length?(s=+B,b):s},b.interpolate=function(B){return arguments.length?(l=B,b):l},b.on=function(){var B=u.on.apply(u,arguments);return B===u?b:B},b.clickDistance=function(B){return arguments.length?(_=(B=+B)*B,b):Math.sqrt(_)},b.tapDistance=function(B){return arguments.length?(y=+B,b):y},b}const NW=Object.freeze(Object.defineProperty({__proto__:null,bisect:lo,bisectRight:k5,bisectLeft:DB,bisectCenter:OB,ascending:Ze,bisector:Eu,blur:IB,blur2:w5,blurImage:RB,count:Cu,cross:UB,cumsum:HB,descending:b5,deviation:C5,extent:wc,Adder:xn,fsum:WB,fcumsum:VB,group:L5,flatGroup:GB,flatRollup:qB,groups:B5,index:XB,indexes:ZB,rollup:D5,rollups:O5,groupSort:QB,bin:$5,histogram:$5,thresholdFreedmanDiaconis:tN,thresholdScott:eN,thresholdSturges:zd,max:cs,maxIndex:jd,mean:nN,median:rN,medianIndex:iN,merge:Hd,min:Cc,minIndex:Ud,mode:oN,nice:F5,pairs:sN,permute:R5,quantile:Ac,quantileIndex:z5,quantileSorted:Y5,quickselect:Au,range:Ea,rank:lN,least:uN,leastIndex:j5,greatest:P5,greatestIndex:hN,scan:dN,shuffle:fN,shuffler:U5,sum:pN,ticks:ho,tickIncrement:ss,tickStep:Ec,transpose:H5,variance:E5,zip:yN,every:mN,some:bN,filter:_N,map:vN,reduce:xN,reverse:kN,sort:Rd,difference:wN,disjoint:TN,intersection:EN,subset:SN,superset:W5,union:AN,InternMap:Tc,InternSet:uo,axisTop:q5,axisRight:IN,axisBottom:X5,axisLeft:RN,brush:nF,brushX:tF,brushY:eF,brushSelection:JR,chord:iF,chordTranspose:aF,chordDirected:oF,ribbon:gF,ribbonArrow:yF,color:Sa,rgb:fs,hsl:ju,lab:Wu,hcl:Vu,lch:$O,gray:FO,cubehelix:Zr,contours:Yf,contourDensity:MF,Delaunay:Hf,Voronoi:I6,dispatch:fo,drag:EO,dragDisable:Fu,dragEnable:$u,dsvFormat:fh,csvParse:P6,csvParseRows:KF,csvFormat:JF,csvFormatBody:t$,csvFormatRows:e$,csvFormatRow:n$,csvFormatValue:r$,tsvParse:Y6,tsvParseRows:i$,tsvFormat:a$,tsvFormatBody:o$,tsvFormatRows:s$,tsvFormatRow:c$,tsvFormatValue:l$,autoType:u$,easeLinear:dR,easeQuad:l6,easeQuadIn:fR,easeQuadOut:pR,easeQuadInOut:l6,easeCubic:kf,easeCubicIn:gR,easeCubicOut:yR,easeCubicInOut:kf,easePoly:u6,easePolyIn:mR,easePolyOut:bR,easePolyInOut:u6,easeSin:f6,easeSinIn:_R,easeSinOut:vR,easeSinInOut:f6,easeExp:p6,easeExpIn:xR,easeExpOut:kR,easeExpInOut:p6,easeCircle:g6,easeCircleIn:wR,easeCircleOut:TR,easeCircleInOut:g6,easeBounce:jc,easeBounceIn:DR,easeBounceOut:jc,easeBounceInOut:OR,easeBack:y6,easeBackIn:IR,easeBackOut:RR,easeBackInOut:y6,easeElastic:m6,easeElasticIn:FR,easeElasticOut:m6,easeElasticInOut:$R,blob:f$,buffer:g$,dsv:m$,csv:b$,tsv:_$,image:v$,json:k$,text:ph,xml:w$,html:T$,svg:E$,forceCenter:C$,forceCollide:W$,forceLink:G$,forceManyBody:nP,forceRadial:rP,forceSimulation:eP,forceX:iP,forceY:aP,formatDefaultLocale:J6,get format(){return _h},get formatPrefix(){return Zf},formatLocale:K6,formatSpecifier:Es,FormatSpecifier:mh,precisionFixed:tv,precisionPrefix:ev,precisionRound:nv,geoArea:gP,geoBounds:_P,geoCentroid:EP,geoCircle:CP,geoClipAntimeridian:p2,geoClipCircle:Iv,geoClipExtent:DP,geoClipRectangle:Yh,geoContains:YP,geoDistance:Uh,geoGraticule:Wv,geoGraticule10:zP,geoInterpolate:jP,geoLength:Rv,geoPath:tY,geoAlbers:fx,geoAlbersUsa:uY,geoAzimuthalEqualArea:hY,geoAzimuthalEqualAreaRaw:I2,geoAzimuthalEquidistant:dY,geoAzimuthalEquidistantRaw:R2,geoConicConformal:pY,geoConicConformalRaw:yx,geoConicEqualArea:Kh,geoConicEqualAreaRaw:dx,geoConicEquidistant:yY,geoConicEquidistantRaw:mx,geoEqualEarth:bY,geoEqualEarthRaw:F2,geoEquirectangular:gY,geoEquirectangularRaw:sl,geoGnomonic:_Y,geoGnomonicRaw:$2,geoIdentity:vY,geoProjection:Si,geoProjectionMutator:D2,geoMercator:fY,geoMercatorRaw:ol,geoNaturalEarth1:xY,geoNaturalEarth1Raw:P2,geoOrthographic:kY,geoOrthographicRaw:Y2,geoStereographic:wY,geoStereographicRaw:z2,geoTransverseMercator:TY,geoTransverseMercatorRaw:j2,geoRotation:Sv,geoStream:Kr,geoTransform:eY,cluster:NY,hierarchy:U2,Node:Lo,pack:cz,packSiblings:oz,packEnclose:nz,partition:lz,stratify:fz,tree:vz,treemap:xz,treemapBinary:kz,treemapDice:fl,treemapSlice:a1,treemapSliceDice:wz,treemapSquarify:Ix,treemapResquarify:Tz,interpolate:Aa,interpolateArray:UO,interpolateBasis:B_,interpolateBasisClosed:N_,interpolateDate:$_,interpolateDiscrete:VO,interpolateHue:GO,interpolateNumber:Lr,interpolateNumberArray:hf,interpolateObject:P_,interpolateRound:Zu,interpolateString:pf,interpolateTransformCss:H_,interpolateTransformSvg:W_,interpolateZoom:G_,interpolateRgb:Ic,interpolateRgbBasis:I_,interpolateRgbBasisClosed:jO,interpolateHsl:JO,interpolateHslLong:tI,interpolateLab:eI,interpolateHcl:Z_,interpolateHclLong:nI,interpolateCubehelix:rI,interpolateCubehelixLong:Ku,piecewise:K_,quantize:iI,path:La,polygonArea:Ez,polygonCentroid:Cz,polygonHull:Mz,polygonContains:Lz,polygonLength:Bz,quadtree:gh,randomUniform:Nz,randomInt:Dz,randomNormal:Q2,randomLogNormal:Oz,randomBates:Iz,randomIrwinHall:Fx,randomExponential:Rz,randomPareto:Fz,randomBernoulli:$z,randomGeometric:$x,randomBinomial:Yx,randomGamma:K2,randomBeta:Px,randomWeibull:Pz,randomCauchy:Yz,randomLogistic:zz,randomPoisson:jz,randomLcg:Wz,scaleBand:tp,scalePoint:Vz,scaleIdentity:Wx,scaleLinear:rp,scaleLog:Zx,scaleSymlog:Jx,scaleOrdinal:o1,scaleImplicit:J2,scalePow:sp,scaleSqrt:ij,scaleRadial:n8,scaleQuantile:r8,scaleQuantize:i8,scaleThreshold:a8,scaleTime:Q8,scaleUtc:IU,scaleSequential:K8,scaleSequentialLog:J8,scaleSequentialPow:Ep,scaleSequentialSqrt:RU,scaleSequentialSymlog:t7,scaleSequentialQuantile:e7,scaleDiverging:n7,scaleDivergingLog:r7,scaleDivergingPow:Cp,scaleDivergingSqrt:FU,scaleDivergingSymlog:i7,tickFormat:Hx,schemeCategory10:$U,schemeAccent:PU,schemeDark2:YU,schemePaired:zU,schemePastel1:jU,schemePastel2:UU,schemeSet1:HU,schemeSet2:WU,schemeSet3:VU,schemeTableau10:GU,interpolateBrBG:qU,schemeBrBG:a7,interpolatePRGn:XU,schemePRGn:o7,interpolatePiYG:ZU,schemePiYG:s7,interpolatePuOr:QU,schemePuOr:c7,interpolateRdBu:KU,schemeRdBu:l7,interpolateRdGy:JU,schemeRdGy:u7,interpolateRdYlBu:tH,schemeRdYlBu:h7,interpolateRdYlGn:eH,schemeRdYlGn:d7,interpolateSpectral:nH,schemeSpectral:f7,interpolateBuGn:rH,schemeBuGn:p7,interpolateBuPu:iH,schemeBuPu:g7,interpolateGnBu:aH,schemeGnBu:y7,interpolateOrRd:oH,schemeOrRd:m7,interpolatePuBuGn:sH,schemePuBuGn:b7,interpolatePuBu:cH,schemePuBu:_7,interpolatePuRd:lH,schemePuRd:v7,interpolateRdPu:uH,schemeRdPu:x7,interpolateYlGnBu:hH,schemeYlGnBu:k7,interpolateYlGn:dH,schemeYlGn:w7,interpolateYlOrBr:fH,schemeYlOrBr:T7,interpolateYlOrRd:pH,schemeYlOrRd:E7,interpolateBlues:gH,schemeBlues:C7,interpolateGreens:yH,schemeGreens:S7,interpolateGreys:mH,schemeGreys:A7,interpolatePurples:bH,schemePurples:M7,interpolateReds:_H,schemeReds:L7,interpolateOranges:vH,schemeOranges:B7,interpolateCividis:xH,interpolateCubehelixDefault:kH,interpolateRainbow:EH,interpolateWarm:wH,interpolateCool:TH,interpolateSinebow:AH,interpolateTurbo:MH,interpolateViridis:LH,interpolateMagma:BH,interpolateInferno:NH,interpolatePlasma:DH,create:mO,creator:Du,local:a_,matcher:Xd,namespace:Lc,namespaces:Gd,pointer:kr,pointers:_O,select:Lt,selectAll:Ru,selection:go,selector:Ou,selectorAll:qd,style:po,window:Zd,arc:b1,area:I7,line:ja,pie:R7,areaRadial:Y7,radialArea:Y7,lineRadial:P7,radialLine:P7,pointRadial:Tl,link:v1,linkHorizontal:XH,linkVertical:ZH,linkRadial:QH,symbol:oW,symbolsStroke:aW,symbolsFill:ik,symbols:ik,symbolAsterisk:H7,symbolCircle:x1,symbolCross:W7,symbolDiamond:G7,symbolDiamond2:q7,symbolPlus:X7,symbolSquare:Z7,symbolSquare2:Q7,symbolStar:J7,symbolTriangle:tk,symbolTriangle2:ek,symbolWye:nk,symbolX:rk,curveBasisClosed:ok,curveBasisOpen:ck,curveBasis:Fo,curveBumpX:j7,curveBumpY:U7,curveBundle:sW,curveCardinalClosed:lW,curveCardinalOpen:uW,curveCardinal:cW,curveCatmullRomClosed:dW,curveCatmullRomOpen:fW,curveCatmullRom:hW,curveLinearClosed:pk,curveLinear:pr,curveMonotoneX:vk,curveMonotoneY:xk,curveNatural:Tk,curveStep:Ek,curveStepAfter:Sk,curveStepBefore:Ck,stack:yW,stackOffsetExpand:mW,stackOffsetDiverging:bW,stackOffsetNone:$s,stackOffsetSilhouette:_W,stackOffsetWiggle:vW,stackOrderAppearance:Ak,stackOrderAscending:Mk,stackOrderDescending:kW,stackOrderInsideOut:wW,stackOrderNone:Ps,stackOrderReverse:TW,timeInterval:wn,timeMillisecond:up,timeMilliseconds:o8,utcMillisecond:up,utcMilliseconds:o8,timeSecond:Ra,timeSeconds:l8,utcSecond:Ra,utcSeconds:l8,timeMinute:fp,timeMinutes:oj,timeHour:pp,timeHours:sj,timeDay:gl,timeDays:cj,timeWeek:Os,timeWeeks:m8,timeSunday:Os,timeSundays:m8,timeMonday:yl,timeMondays:lj,timeTuesday:f8,timeTuesdays:uj,timeWednesday:p8,timeWednesdays:hj,timeThursday:Oo,timeThursdays:dj,timeFriday:g8,timeFridays:fj,timeSaturday:y8,timeSaturdays:pj,timeMonth:gp,timeMonths:gj,timeYear:Fa,timeYears:yj,utcMinute:mp,utcMinutes:mj,utcHour:bp,utcHours:bj,utcDay:ml,utcDays:_j,utcWeek:Is,utcWeeks:C8,utcSunday:Is,utcSundays:C8,utcMonday:bl,utcMondays:vj,utcTuesday:k8,utcTuesdays:xj,utcWednesday:w8,utcWednesdays:kj,utcThursday:Ro,utcThursdays:wj,utcFriday:T8,utcFridays:Tj,utcSaturday:E8,utcSaturdays:Ej,utcMonth:_p,utcMonths:Cj,utcYear:$a,utcYears:Sj,utcTicks:M8,utcTickInterval:L8,timeTicks:B8,timeTickInterval:N8,timeFormatDefaultLocale:X8,get timeFormat(){return kl},get timeParse(){return q8},get utcFormat(){return u1},get utcParse(){return wp},timeFormatLocale:D8,isoFormat:MU,isoParse:NU,now:Yc,timer:nh,timerFlush:e6,timeout:yf,interval:cI,transition:s6,active:UR,interrupt:xo,zoom:BW,zoomTransform:Bk,zoomIdentity:A1,ZoomTransform:Ai},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.4.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.0/LICENSE */function Ha(t){return Ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(t)}function $p(t,e){return $p=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},$p(t,e)}function DW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M1(t,e,n){return DW()?M1=Reflect.construct:M1=function(r,i,a){var o=[null];o.push.apply(o,i);var s=Function.bind.apply(r,o),l=new s;return a&&$p(l,a.prototype),l},M1.apply(null,arguments)}function ei(t){return OW(t)||IW(t)||RW(t)||FW()}function OW(t){if(Array.isArray(t))return Pp(t)}function IW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RW(t,e){if(t){if(typeof t=="string")return Pp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pp(t,e)}}function Pp(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $W=Object.hasOwnProperty,Dk=Object.setPrototypeOf,PW=Object.isFrozen,YW=Object.getPrototypeOf,zW=Object.getOwnPropertyDescriptor,ir=Object.freeze,Mi=Object.seal,jW=Object.create,Ok=typeof Reflect<"u"&&Reflect,L1=Ok.apply,Yp=Ok.construct;L1||(L1=function(t,e,n){return t.apply(e,n)}),ir||(ir=function(t){return t}),Mi||(Mi=function(t){return t}),Yp||(Yp=function(t,e){return M1(t,ei(e))});var UW=ni(Array.prototype.forEach),Ik=ni(Array.prototype.pop),Cl=ni(Array.prototype.push),B1=ni(String.prototype.toLowerCase),HW=ni(String.prototype.match),Wa=ni(String.prototype.replace),WW=ni(String.prototype.indexOf),VW=ni(String.prototype.trim),ar=ni(RegExp.prototype.test),zp=GW(TypeError);function ni(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return L1(t,e,r)}}function GW(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Yp(t,n)}}function Ee(t,e,n){n=n||B1,Dk&&Dk(t,null);for(var r=e.length;r--;){var i=e[r];if(typeof i=="string"){var a=n(i);a!==i&&(PW(e)||(e[r]=a),i=a)}t[i]=!0}return t}function $o(t){var e=jW(null),n;for(n in t)L1($W,t,[n])&&(e[n]=t[n]);return e}function N1(t,e){for(;t!==null;){var n=zW(t,e);if(n){if(n.get)return ni(n.get);if(typeof n.value=="function")return ni(n.value)}t=YW(t)}function r(i){return console.warn("fallback value for",i),null}return r}var Rk=ir(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jp=ir(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Up=ir(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qW=ir(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hp=ir(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),XW=ir(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Fk=ir(["#text"]),$k=ir(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Wp=ir(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pk=ir(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D1=ir(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZW=Mi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),QW=Mi(/<%[\w\W]*|[\w\W]*%>/gm),KW=Mi(/^data-[\-\w.\u00B7-\uFFFF]/),JW=Mi(/^aria-[\-\w]+$/),tV=Mi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eV=Mi(/^(?:\w+script|data):/i),nV=Mi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rV=Mi(/^html$/i),iV=function(){return typeof window>"u"?null:window},aV=function(t,e){if(Ha(t)!=="object"||typeof t.createPolicy!="function")return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:function(a){return a},createScriptURL:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function Yk(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iV(),e=function(tt){return Yk(tt)};if(e.version="2.4.0",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var n=t.document,r=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,o=t.Node,s=t.Element,l=t.NodeFilter,u=t.NamedNodeMap,h=u===void 0?t.NamedNodeMap||t.MozNamedAttrMap:u,f=t.HTMLFormElement,d=t.DOMParser,p=t.trustedTypes,m=s.prototype,_=N1(m,"cloneNode"),y=N1(m,"nextSibling"),b=N1(m,"childNodes"),k=N1(m,"parentNode");if(typeof a=="function"){var T=r.createElement("template");T.content&&T.content.ownerDocument&&(r=T.content.ownerDocument)}var x=aV(p,n),A=x?x.createHTML(""):"",C=r,L=C.implementation,S=C.createNodeIterator,D=C.createDocumentFragment,v=C.getElementsByTagName,M=n.importNode,w={};try{w=$o(r).documentMode?r.documentMode:{}}catch{}var I={};e.isSupported=typeof k=="function"&&L&&typeof L.createHTMLDocument<"u"&&w!==9;var B=ZW,$=QW,F=KW,K=JW,nt=eV,z=nV,Y=tV,rt=null,lt=Ee({},[].concat(ei(Rk),ei(jp),ei(Up),ei(Hp),ei(Fk))),J=null,Q=Ee({},[].concat(ei($k),ei(Wp),ei(Pk),ei(D1))),q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,ut=null,V=!0,j=!0,P=!1,X=!1,O=!1,G=!1,U=!1,H=!1,xt=!1,ot=!1,Dt=!0,Mt=!1,wt="user-content-",Et=!0,bt=!1,mt={},Tt=null,kt=Ee({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),st=null,Qt=Ee({},["audio","video","img","source","image","track"]),$t=null,te=Ee({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ht="http://www.w3.org/1998/Math/MathML",qt="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xhtml",Xt=oe,Rt=!1,Pt,yt=["application/xhtml+xml","text/html"],Ct="text/html",pt,Ft=null,dt=r.createElement("form"),Se=function(tt){return tt instanceof RegExp||tt instanceof Function},gt=function(tt){Ft&&Ft===tt||((!tt||Ha(tt)!=="object")&&(tt={}),tt=$o(tt),Pt=yt.indexOf(tt.PARSER_MEDIA_TYPE)===-1?Pt=Ct:Pt=tt.PARSER_MEDIA_TYPE,pt=Pt==="application/xhtml+xml"?function(Nt){return Nt}:B1,rt="ALLOWED_TAGS"in tt?Ee({},tt.ALLOWED_TAGS,pt):lt,J="ALLOWED_ATTR"in tt?Ee({},tt.ALLOWED_ATTR,pt):Q,$t="ADD_URI_SAFE_ATTR"in tt?Ee($o(te),tt.ADD_URI_SAFE_ATTR,pt):te,st="ADD_DATA_URI_TAGS"in tt?Ee($o(Qt),tt.ADD_DATA_URI_TAGS,pt):Qt,Tt="FORBID_CONTENTS"in tt?Ee({},tt.FORBID_CONTENTS,pt):kt,it="FORBID_TAGS"in tt?Ee({},tt.FORBID_TAGS,pt):{},ut="FORBID_ATTR"in tt?Ee({},tt.FORBID_ATTR,pt):{},mt="USE_PROFILES"in tt?tt.USE_PROFILES:!1,V=tt.ALLOW_ARIA_ATTR!==!1,j=tt.ALLOW_DATA_ATTR!==!1,P=tt.ALLOW_UNKNOWN_PROTOCOLS||!1,X=tt.SAFE_FOR_TEMPLATES||!1,O=tt.WHOLE_DOCUMENT||!1,H=tt.RETURN_DOM||!1,xt=tt.RETURN_DOM_FRAGMENT||!1,ot=tt.RETURN_TRUSTED_TYPE||!1,U=tt.FORCE_BODY||!1,Dt=tt.SANITIZE_DOM!==!1,Mt=tt.SANITIZE_NAMED_PROPS||!1,Et=tt.KEEP_CONTENT!==!1,bt=tt.IN_PLACE||!1,Y=tt.ALLOWED_URI_REGEXP||Y,Xt=tt.NAMESPACE||oe,tt.CUSTOM_ELEMENT_HANDLING&&Se(tt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=tt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),tt.CUSTOM_ELEMENT_HANDLING&&Se(tt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=tt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),tt.CUSTOM_ELEMENT_HANDLING&&typeof tt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=tt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(j=!1),xt&&(H=!0),mt&&(rt=Ee({},ei(Fk)),J=[],mt.html===!0&&(Ee(rt,Rk),Ee(J,$k)),mt.svg===!0&&(Ee(rt,jp),Ee(J,Wp),Ee(J,D1)),mt.svgFilters===!0&&(Ee(rt,Up),Ee(J,Wp),Ee(J,D1)),mt.mathMl===!0&&(Ee(rt,Hp),Ee(J,Pk),Ee(J,D1))),tt.ADD_TAGS&&(rt===lt&&(rt=$o(rt)),Ee(rt,tt.ADD_TAGS,pt)),tt.ADD_ATTR&&(J===Q&&(J=$o(J)),Ee(J,tt.ADD_ATTR,pt)),tt.ADD_URI_SAFE_ATTR&&Ee($t,tt.ADD_URI_SAFE_ATTR,pt),tt.FORBID_CONTENTS&&(Tt===kt&&(Tt=$o(Tt)),Ee(Tt,tt.FORBID_CONTENTS,pt)),Et&&(rt["#text"]=!0),O&&Ee(rt,["html","head","body"]),rt.table&&(Ee(rt,["tbody"]),delete it.tbody),ir&&ir(tt),Ft=tt)},ie=Ee({},["mi","mo","mn","ms","mtext"]),se=Ee({},["foreignobject","desc","title","annotation-xml"]),ve=Ee({},["title","style","font","a","script"]),de=Ee({},jp);Ee(de,Up),Ee(de,qW);var be=Ee({},Hp);Ee(be,XW);var Gt=function(tt){var Nt=k(tt);(!Nt||!Nt.tagName)&&(Nt={namespaceURI:oe,tagName:"template"});var At=B1(tt.tagName),Kt=B1(Nt.tagName);return tt.namespaceURI===qt?Nt.namespaceURI===oe?At==="svg":Nt.namespaceURI===Ht?At==="svg"&&(Kt==="annotation-xml"||ie[Kt]):Boolean(de[At]):tt.namespaceURI===Ht?Nt.namespaceURI===oe?At==="math":Nt.namespaceURI===qt?At==="math"&&se[Kt]:Boolean(be[At]):tt.namespaceURI===oe?Nt.namespaceURI===qt&&!se[Kt]||Nt.namespaceURI===Ht&&!ie[Kt]?!1:!be[At]&&(ve[At]||!de[At]):!1},ee=function(tt){Cl(e.removed,{element:tt});try{tt.parentNode.removeChild(tt)}catch{try{tt.outerHTML=A}catch{tt.remove()}}},fe=function(tt,Nt){try{Cl(e.removed,{attribute:Nt.getAttributeNode(tt),from:Nt})}catch{Cl(e.removed,{attribute:null,from:Nt})}if(Nt.removeAttribute(tt),tt==="is"&&!J[tt])if(H||xt)try{ee(Nt)}catch{}else try{Nt.setAttribute(tt,"")}catch{}},ye=function(tt){var Nt,At;if(U)tt="<remove></remove>"+tt;else{var Kt=HW(tt,/^[\r\n\t ]+/);At=Kt&&Kt[0]}Pt==="application/xhtml+xml"&&(tt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+tt+"</body></html>");var Ne=x?x.createHTML(tt):tt;if(Xt===oe)try{Nt=new d().parseFromString(Ne,Pt)}catch{}if(!Nt||!Nt.documentElement){Nt=L.createDocument(Xt,"template",null);try{Nt.documentElement.innerHTML=Rt?"":Ne}catch{}}var ze=Nt.body||Nt.documentElement;return tt&&At&&ze.insertBefore(r.createTextNode(At),ze.childNodes[0]||null),Xt===oe?v.call(Nt,O?"html":"body")[0]:O?Nt.documentElement:ze},pe=function(tt){return S.call(tt.ownerDocument||tt,tt,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},ma=function(tt){return tt instanceof f&&(typeof tt.nodeName!="string"||typeof tt.textContent!="string"||typeof tt.removeChild!="function"||!(tt.attributes instanceof h)||typeof tt.removeAttribute!="function"||typeof tt.setAttribute!="function"||typeof tt.namespaceURI!="string"||typeof tt.insertBefore!="function")},$e=function(tt){return Ha(o)==="object"?tt instanceof o:tt&&Ha(tt)==="object"&&typeof tt.nodeType=="number"&&typeof tt.nodeName=="string"},Pe=function(tt,Nt,At){!I[tt]||UW(I[tt],function(Kt){Kt.call(e,Nt,At,Ft)})},Zt=function(tt){var Nt;if(Pe("beforeSanitizeElements",tt,null),ma(tt)||ar(/[\u0080-\uFFFF]/,tt.nodeName))return ee(tt),!0;var At=pt(tt.nodeName);if(Pe("uponSanitizeElement",tt,{tagName:At,allowedTags:rt}),tt.hasChildNodes()&&!$e(tt.firstElementChild)&&(!$e(tt.content)||!$e(tt.content.firstElementChild))&&ar(/<[/\w]/g,tt.innerHTML)&&ar(/<[/\w]/g,tt.textContent)||At==="select"&&ar(/<template/i,tt.innerHTML))return ee(tt),!0;if(!rt[At]||it[At]){if(!it[At]&&cn(At)&&(q.tagNameCheck instanceof RegExp&&ar(q.tagNameCheck,At)||q.tagNameCheck instanceof Function&&q.tagNameCheck(At)))return!1;if(Et&&!Tt[At]){var Kt=k(tt)||tt.parentNode,Ne=b(tt)||tt.childNodes;if(Ne&&Kt)for(var ze=Ne.length,De=ze-1;De>=0;--De)Kt.insertBefore(_(Ne[De],!0),y(tt))}return ee(tt),!0}return tt instanceof s&&!Gt(tt)||(At==="noscript"||At==="noembed")&&ar(/<\/no(script|embed)/i,tt.innerHTML)?(ee(tt),!0):(X&&tt.nodeType===3&&(Nt=tt.textContent,Nt=Wa(Nt,B," "),Nt=Wa(Nt,$," "),tt.textContent!==Nt&&(Cl(e.removed,{element:tt.cloneNode()}),tt.textContent=Nt)),Pe("afterSanitizeElements",tt,null),!1)},lr=function(tt,Nt,At){if(Dt&&(Nt==="id"||Nt==="name")&&(At in r||At in dt))return!1;if(!(j&&!ut[Nt]&&ar(F,Nt))&&!(V&&ar(K,Nt))){if(!J[Nt]||ut[Nt]){if(!(cn(tt)&&(q.tagNameCheck instanceof RegExp&&ar(q.tagNameCheck,tt)||q.tagNameCheck instanceof Function&&q.tagNameCheck(tt))&&(q.attributeNameCheck instanceof RegExp&&ar(q.attributeNameCheck,Nt)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(Nt))||Nt==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&ar(q.tagNameCheck,At)||q.tagNameCheck instanceof Function&&q.tagNameCheck(At))))return!1}else if(!$t[Nt]&&!ar(Y,Wa(At,z,""))&&!((Nt==="src"||Nt==="xlink:href"||Nt==="href")&&tt!=="script"&&WW(At,"data:")===0&&st[tt])&&!(P&&!ar(nt,Wa(At,z,"")))&&At)return!1}return!0},cn=function(tt){return tt.indexOf("-")>0},Je=function(tt){var Nt,At,Kt,Ne;Pe("beforeSanitizeAttributes",tt,null);var ze=tt.attributes;if(ze){var De={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:J};for(Ne=ze.length;Ne--;){Nt=ze[Ne];var _n=Nt,Xe=_n.name,We=_n.namespaceURI;if(At=Xe==="value"?Nt.value:VW(Nt.value),Kt=pt(Xe),De.attrName=Kt,De.attrValue=At,De.keepAttr=!0,De.forceKeepAttr=void 0,Pe("uponSanitizeAttribute",tt,De),At=De.attrValue,!De.forceKeepAttr&&(fe(Xe,tt),!!De.keepAttr)){if(ar(/\/>/i,At)){fe(Xe,tt);continue}X&&(At=Wa(At,B," "),At=Wa(At,$," "));var io=pt(tt.nodeName);if(lr(io,Kt,At)){if(Mt&&(Kt==="id"||Kt==="name")&&(fe(Xe,tt),At=wt+At),x&&Ha(p)==="object"&&typeof p.getAttributeType=="function"&&!We)switch(p.getAttributeType(io,Kt)){case"TrustedHTML":At=x.createHTML(At);break;case"TrustedScriptURL":At=x.createScriptURL(At);break}try{We?tt.setAttributeNS(We,Xe,At):tt.setAttribute(Xe,At),Ik(e.removed)}catch{}}}}Pe("afterSanitizeAttributes",tt,null)}},Ye=function tt(Nt){var At,Kt=pe(Nt);for(Pe("beforeSanitizeShadowDOM",Nt,null);At=Kt.nextNode();)Pe("uponSanitizeShadowNode",At,null),!Zt(At)&&(At.content instanceof i&&tt(At.content),Je(At));Pe("afterSanitizeShadowDOM",Nt,null)};return e.sanitize=function(tt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},At,Kt,Ne,ze,De;if(Rt=!tt,Rt&&(tt="<!-->"),typeof tt!="string"&&!$e(tt)){if(typeof tt.toString!="function")throw zp("toString is not a function");if(tt=tt.toString(),typeof tt!="string")throw zp("dirty is not a string, aborting")}if(!e.isSupported){if(Ha(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof tt=="string")return t.toStaticHTML(tt);if($e(tt))return t.toStaticHTML(tt.outerHTML)}return tt}if(G||gt(Nt),e.removed=[],typeof tt=="string"&&(bt=!1),bt){if(tt.nodeName){var _n=pt(tt.nodeName);if(!rt[_n]||it[_n])throw zp("root node is forbidden and cannot be sanitized in-place")}}else if(tt instanceof o)At=ye("<!---->"),Kt=At.ownerDocument.importNode(tt,!0),Kt.nodeType===1&&Kt.nodeName==="BODY"||Kt.nodeName==="HTML"?At=Kt:At.appendChild(Kt);else{if(!H&&!X&&!O&&tt.indexOf("<")===-1)return x&&ot?x.createHTML(tt):tt;if(At=ye(tt),!At)return H?null:ot?A:""}At&&U&&ee(At.firstChild);for(var Xe=pe(bt?tt:At);Ne=Xe.nextNode();)Ne.nodeType===3&&Ne===ze||Zt(Ne)||(Ne.content instanceof i&&Ye(Ne.content),Je(Ne),ze=Ne);if(ze=null,bt)return tt;if(H){if(xt)for(De=D.call(At.ownerDocument);At.firstChild;)De.appendChild(At.firstChild);else De=At;return J.shadowroot&&(De=M.call(n,De,!0)),De}var We=O?At.outerHTML:At.innerHTML;return O&&rt["!doctype"]&&At.ownerDocument&&At.ownerDocument.doctype&&At.ownerDocument.doctype.name&&ar(rV,At.ownerDocument.doctype.name)&&(We="<!DOCTYPE "+At.ownerDocument.doctype.name+`>
`+We),X&&(We=Wa(We,B," "),We=Wa(We,$," ")),x&&ot?x.createHTML(We):We},e.setConfig=function(tt){gt(tt),G=!0},e.clearConfig=function(){Ft=null,G=!1},e.isValidAttribute=function(tt,Nt,At){Ft||gt({});var Kt=pt(tt),Ne=pt(Nt);return lr(Kt,Ne,At)},e.addHook=function(tt,Nt){typeof Nt=="function"&&(I[tt]=I[tt]||[],Cl(I[tt],Nt))},e.removeHook=function(tt){if(I[tt])return Ik(I[tt])},e.removeHooks=function(tt){I[tt]&&(I[tt]=[])},e.removeAllHooks=function(){I={}},e}var Sl=Yk();const oV=t=>t?Uk(t).replace(/\\n/g,"#br#").split("#br#"):[""],zk=t=>Sl.sanitize(t),jk=(t,e)=>{var n;if(((n=e.flowchart)==null?void 0:n.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=zk(t):r!=="loose"&&(t=Uk(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=uV(t))}return t},ri=(t,e)=>t&&(e.dompurifyConfig?t=Sl.sanitize(jk(t,e),e.dompurifyConfig).toString():t=Sl.sanitize(jk(t,e)),t),sV=(t,e)=>typeof t=="string"?ri(t,e):t.flat().map(n=>ri(n,e)),O1=/<br\s*\/?>/gi,cV=t=>O1.test(t),lV=t=>t.split(O1),uV=t=>t.replace(/#br#/g,"<br/>"),Uk=t=>t.replace(O1,"#br#"),hV=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},Mn=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),Va=function(t){let e=t;return t.indexOf("~")!==-1?(e=e.replace(/~([^~].*)/,"<$1"),e=e.replace(/~([^~]*)$/,">$1"),Va(e)):e},he={getRows:oV,sanitizeText:ri,sanitizeTextOrArray:sV,hasBreaks:cV,splitBreaks:lV,lineBreakRegex:O1,removeScript:zk,getUrl:hV,evaluate:Mn},I1={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return n*2.55;t/=360,e/=100,n/=100;const i=n<.5?n*(1+e):n+e-n*e,a=2*n-i;switch(r){case"r":return I1.hue2rgb(a,i,t+1/3)*255;case"g":return I1.hue2rgb(a,i,t)*255;case"b":return I1.hue2rgb(a,i,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),a=Math.min(t,e,n),o=(i+a)/2;if(r==="l")return o*100;if(i===a)return 0;const s=i-a,l=o>.5?s/(2-i-a):s/(i+a);if(r==="s")return l*100;switch(i){case t:return((e-n)/s+(e<n?6:0))*60;case e:return((n-t)/s+2)*60;case n:return((t-e)/s+4)*60;default:return-1}}},_e={channel:I1,lang:{clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},unit:{dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}}},Ga={};for(let t=0;t<=255;t++)Ga[t]=_e.unit.dec2hex(t);const jn={ALL:0,RGB:1,HSL:2};class dV{constructor(){this.type=jn.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=jn.ALL}is(e){return this.type===e}}const fV=dV;class pV{constructor(e,n){this.color=n,this.changed=!1,this.data=e,this.type=new fV}set(e,n){return this.color=n,this.changed=!1,this.data=e,this.type.type=jn.ALL,this}_ensureHSL(){const e=this.data,{h:n,s:r,l:i}=e;n===void 0&&(e.h=_e.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=_e.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=_e.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:n,g:r,b:i}=e;n===void 0&&(e.r=_e.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=_e.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=_e.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,n=e.r;return!this.type.is(jn.HSL)&&n!==void 0?n:(this._ensureHSL(),_e.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,n=e.g;return!this.type.is(jn.HSL)&&n!==void 0?n:(this._ensureHSL(),_e.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,n=e.b;return!this.type.is(jn.HSL)&&n!==void 0?n:(this._ensureHSL(),_e.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,n=e.h;return!this.type.is(jn.RGB)&&n!==void 0?n:(this._ensureRGB(),_e.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,n=e.s;return!this.type.is(jn.RGB)&&n!==void 0?n:(this._ensureRGB(),_e.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,n=e.l;return!this.type.is(jn.RGB)&&n!==void 0?n:(this._ensureRGB(),_e.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(jn.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(jn.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(jn.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(jn.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(jn.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(jn.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const gV=pV,R1=new gV({r:0,g:0,b:0,a:0},"transparent"),Hk={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(Hk.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,a=i%4===0,o=i>4,s=o?1:17,l=o?8:4,u=a?0:-1,h=o?255:15;return R1.set({r:(r>>l*(u+3)&h)*s,g:(r>>l*(u+2)&h)*s,b:(r>>l*(u+1)&h)*s,a:a?(r&h)*s/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${Ga[Math.round(e)]}${Ga[Math.round(n)]}${Ga[Math.round(r)]}${Ga[Math.round(i*255)]}`:`#${Ga[Math.round(e)]}${Ga[Math.round(n)]}${Ga[Math.round(r)]}`}},Al=Hk,F1={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(F1.hueRe);if(e){const[,n,r]=e;switch(r){case"grad":return _e.channel.clamp.h(parseFloat(n)*.9);case"rad":return _e.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return _e.channel.clamp.h(parseFloat(n)*360)}}return _e.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const n=t.match(F1.re);if(!n)return;const[,r,i,a,o,s]=n;return R1.set({h:F1._hue2deg(r),s:_e.channel.clamp.s(parseFloat(i)),l:_e.channel.clamp.l(parseFloat(a)),a:o?_e.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${_e.lang.round(e)}, ${_e.lang.round(n)}%, ${_e.lang.round(r)}%, ${i})`:`hsl(${_e.lang.round(e)}, ${_e.lang.round(n)}%, ${_e.lang.round(r)}%)`}},$1=F1,P1={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=P1.colors[t];if(e)return Al.parse(e)},stringify:t=>{const e=Al.stringify(t);for(const n in P1.colors)if(P1.colors[n]===e)return n}},Wk=P1,Vk={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const n=t.match(Vk.re);if(!n)return;const[,r,i,a,o,s,l,u,h]=n;return R1.set({r:_e.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:_e.channel.clamp.g(o?parseFloat(a)*2.55:parseFloat(a)),b:_e.channel.clamp.b(l?parseFloat(s)*2.55:parseFloat(s)),a:u?_e.channel.clamp.a(h?parseFloat(u)/100:parseFloat(u)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${_e.lang.round(e)}, ${_e.lang.round(n)}, ${_e.lang.round(r)}, ${_e.lang.round(i)})`:`rgb(${_e.lang.round(e)}, ${_e.lang.round(n)}, ${_e.lang.round(r)})`}},Y1=Vk,na={format:{keyword:Wk,hex:Al,rgb:Y1,rgba:Y1,hsl:$1,hsla:$1},parse:t=>{if(typeof t!="string")return t;const e=Al.parse(t)||Y1.parse(t)||$1.parse(t)||Wk.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(jn.HSL)||t.data.r===void 0?$1.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Y1.stringify(t):Al.stringify(t)},Gk=(t,e)=>{const n=na.parse(t);for(const r in e)n[r]=_e.channel.clamp[r](e[r]);return na.stringify(n)},Ml=(t,e,n=0,r=1)=>{if(typeof t!="number")return Gk(t,{a:e});const i=R1.set({r:_e.channel.clamp.r(t),g:_e.channel.clamp.g(e),b:_e.channel.clamp.b(n),a:_e.channel.clamp.a(r)});return na.stringify(i)},qk=(t,e,n)=>{const r=na.parse(t),i=r[e],a=_e.channel.clamp[e](i+n);return i!==a&&(r[e]=a),na.stringify(r)},ae=(t,e)=>qk(t,"l",e),ge=(t,e)=>qk(t,"l",-e),_t=(t,e)=>{const n=na.parse(t),r={};for(const i in e)!e[i]||(r[i]=n[i]+e[i]);return Gk(t,r)},yV=(t,e,n=50)=>{const{r,g:i,b:a,a:o}=na.parse(t),{r:s,g:l,b:u,a:h}=na.parse(e),f=n/100,d=f*2-1,p=o-h,m=((d*p===-1?d:(d+p)/(1+d*p))+1)/2,_=1-m,y=r*m+s*_,b=i*m+l*_,k=a*m+u*_,T=o*f+h*(1-f);return Ml(y,b,k,T)},jt=(t,e=100)=>{const n=na.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,yV(n,t,e)},or=(t,e)=>e?_t(t,{s:-40,l:10}):_t(t,{s:-40,l:-10}),z1="#ffffff",j1="#f2f2f2";class mV{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||_t(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||_t(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||or(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||or(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||or(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||or(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||jt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||jt(this.tertiaryColor),this.lineColor=this.lineColor||jt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ge(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ge(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||jt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||ae(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||_t(this.primaryColor,{h:30}),this.cScale4=this.cScale4||_t(this.primaryColor,{h:60}),this.cScale5=this.cScale5||_t(this.primaryColor,{h:90}),this.cScale6=this.cScale6||_t(this.primaryColor,{h:120}),this.cScale7=this.cScale7||_t(this.primaryColor,{h:150}),this.cScale8=this.cScale8||_t(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||_t(this.primaryColor,{h:270}),this.cScale10=this.cScale10||_t(this.primaryColor,{h:300}),this.cScale11=this.cScale11||_t(this.primaryColor,{h:330}),this.darkMode)for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ge(this["cScale"+e],75);else for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ge(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||jt(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||ae(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||ge(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||_t(this.primaryColor,{h:64}),this.fillType3=this.fillType3||_t(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||_t(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||_t(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||_t(this.primaryColor,{h:128}),this.fillType7=this.fillType7||_t(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||_t(this.primaryColor,{l:-10}),this.pie5=this.pie5||_t(this.secondaryColor,{l:-10}),this.pie6=this.pie6||_t(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||_t(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||_t(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||_t(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||_t(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||_t(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||_t(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ge(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||_t(this.primaryColor,{h:-30}),this.git4=this.git4||_t(this.primaryColor,{h:-60}),this.git5=this.git5||_t(this.primaryColor,{h:-90}),this.git6=this.git6||_t(this.primaryColor,{h:60}),this.git7=this.git7||_t(this.primaryColor,{h:120}),this.darkMode?(this.git0=ae(this.git0,25),this.git1=ae(this.git1,25),this.git2=ae(this.git2,25),this.git3=ae(this.git3,25),this.git4=ae(this.git4,25),this.git5=ae(this.git5,25),this.git6=ae(this.git6,25),this.git7=ae(this.git7,25)):(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||z1,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||j1}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const bV=t=>{const e=new mV;return e.calculate(t),e};class _V{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=ae(this.primaryColor,16),this.tertiaryColor=_t(this.primaryColor,{h:-160}),this.primaryBorderColor=jt(this.background),this.secondaryBorderColor=or(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=or(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.tertiaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=ae(jt("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Ml(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ge("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=Ml(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Ml(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=ae(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=ae(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=ae(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=_t(this.primaryColor,{h:64}),this.fillType3=_t(this.secondaryColor,{h:64}),this.fillType4=_t(this.primaryColor,{h:-64}),this.fillType5=_t(this.secondaryColor,{h:-64}),this.fillType6=_t(this.primaryColor,{h:128}),this.fillType7=_t(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||_t(this.primaryColor,{h:30}),this.cScale4=this.cScale4||_t(this.primaryColor,{h:60}),this.cScale5=this.cScale5||_t(this.primaryColor,{h:90}),this.cScale6=this.cScale6||_t(this.primaryColor,{h:120}),this.cScale7=this.cScale7||_t(this.primaryColor,{h:150}),this.cScale8=this.cScale8||_t(this.primaryColor,{h:210}),this.cScale9=this.cScale9||_t(this.primaryColor,{h:270}),this.cScale10=this.cScale10||_t(this.primaryColor,{h:300}),this.cScale11=this.cScale11||_t(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||jt(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||ae(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ge(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ae(this.secondaryColor,20),this.git1=ae(this.pie2||this.secondaryColor,20),this.git2=ae(this.pie3||this.tertiaryColor,20),this.git3=ae(this.pie4||_t(this.primaryColor,{h:-30}),20),this.git4=ae(this.pie5||_t(this.primaryColor,{h:-60}),20),this.git5=ae(this.pie6||_t(this.primaryColor,{h:-90}),10),this.git6=ae(this.pie7||_t(this.primaryColor,{h:60}),10),this.git7=ae(this.pie8||_t(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ae(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ae(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const vV=t=>{const e=new _V;return e.calculate(t),e};class xV{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=_t(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=_t(this.primaryColor,{h:-160}),this.primaryBorderColor=or(this.primaryColor,this.darkMode),this.secondaryBorderColor=or(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=or(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.tertiaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Ml(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||_t(this.primaryColor,{h:30}),this.cScale4=this.cScale4||_t(this.primaryColor,{h:60}),this.cScale5=this.cScale5||_t(this.primaryColor,{h:90}),this.cScale6=this.cScale6||_t(this.primaryColor,{h:120}),this.cScale7=this.cScale7||_t(this.primaryColor,{h:150}),this.cScale8=this.cScale8||_t(this.primaryColor,{h:210}),this.cScale9=this.cScale9||_t(this.primaryColor,{h:270}),this.cScale10=this.cScale10||_t(this.primaryColor,{h:300}),this.cScale11=this.cScale11||_t(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||ge(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||ge(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ge(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ge(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||_t(this["cScale"+e],{h:180});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||jt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||jt(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=ae(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=_t(this.primaryColor,{h:64}),this.fillType3=_t(this.secondaryColor,{h:64}),this.fillType4=_t(this.primaryColor,{h:-64}),this.fillType5=_t(this.secondaryColor,{h:-64}),this.fillType6=_t(this.primaryColor,{h:128}),this.fillType7=_t(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||_t(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||_t(this.primaryColor,{l:-10}),this.pie5=this.pie5||_t(this.secondaryColor,{l:-30}),this.pie6=this.pie6||_t(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||_t(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||_t(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||_t(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||_t(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||_t(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||_t(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||_t(this.primaryColor,{h:-30}),this.git4=this.git4||_t(this.primaryColor,{h:-60}),this.git5=this.git5||_t(this.primaryColor,{h:-90}),this.git6=this.git6||_t(this.primaryColor,{h:60}),this.git7=this.git7||_t(this.primaryColor,{h:120}),this.darkMode?(this.git0=ae(this.git0,25),this.git1=ae(this.git1,25),this.git2=ae(this.git2,25),this.git3=ae(this.git3,25),this.git4=ae(this.git4,25),this.git5=ae(this.git5,25),this.git6=ae(this.git6,25),this.git7=ae(this.git7,25)):(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)),this.gitInv0=this.gitInv0||ge(jt(this.git0),25),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||jt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||jt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||z1,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||j1}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const kV=t=>{const e=new xV;return e.calculate(t),e};class wV{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=ae("#cde498",10),this.primaryBorderColor=or(this.primaryColor,this.darkMode),this.secondaryBorderColor=or(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=or(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.primaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||_t(this.primaryColor,{h:30}),this.cScale4=this.cScale4||_t(this.primaryColor,{h:60}),this.cScale5=this.cScale5||_t(this.primaryColor,{h:90}),this.cScale6=this.cScale6||_t(this.primaryColor,{h:120}),this.cScale7=this.cScale7||_t(this.primaryColor,{h:150}),this.cScale8=this.cScale8||_t(this.primaryColor,{h:210}),this.cScale9=this.cScale9||_t(this.primaryColor,{h:270}),this.cScale10=this.cScale10||_t(this.primaryColor,{h:300}),this.cScale11=this.cScale11||_t(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||ge(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||ge(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ge(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ge(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||_t(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=ge(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=_t(this.primaryColor,{h:64}),this.fillType3=_t(this.secondaryColor,{h:64}),this.fillType4=_t(this.primaryColor,{h:-64}),this.fillType5=_t(this.secondaryColor,{h:-64}),this.fillType6=_t(this.primaryColor,{h:128}),this.fillType7=_t(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||_t(this.primaryColor,{l:-30}),this.pie5=this.pie5||_t(this.secondaryColor,{l:-30}),this.pie6=this.pie6||_t(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||_t(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||_t(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||_t(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||_t(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||_t(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||_t(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||_t(this.primaryColor,{h:-30}),this.git4=this.git4||_t(this.primaryColor,{h:-60}),this.git5=this.git5||_t(this.primaryColor,{h:-90}),this.git6=this.git6||_t(this.primaryColor,{h:60}),this.git7=this.git7||_t(this.primaryColor,{h:120}),this.darkMode?(this.git0=ae(this.git0,25),this.git1=ae(this.git1,25),this.git2=ae(this.git2,25),this.git3=ae(this.git3,25),this.git4=ae(this.git4,25),this.git5=ae(this.git5,25),this.git6=ae(this.git6,25),this.git7=ae(this.git7,25)):(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||z1,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||j1}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const TV=t=>{const e=new wV;return e.calculate(t),e};class EV{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=ae(this.contrast,55),this.background="#ffffff",this.tertiaryColor=_t(this.primaryColor,{h:-160}),this.primaryBorderColor=or(this.primaryColor,this.darkMode),this.secondaryBorderColor=or(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=or(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.tertiaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=ae(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||jt(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||ae(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||ge(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=ae(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=ae(this.contrast,30),this.sectionBkgColor2=ae(this.contrast,30),this.taskBorderColor=ge(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=ae(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ge(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=_t(this.primaryColor,{h:64}),this.fillType3=_t(this.secondaryColor,{h:64}),this.fillType4=_t(this.primaryColor,{h:-64}),this.fillType5=_t(this.secondaryColor,{h:-64}),this.fillType6=_t(this.primaryColor,{h:128}),this.fillType7=_t(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ge(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||_t(this.primaryColor,{h:-30}),this.git4=this.pie5||_t(this.primaryColor,{h:-60}),this.git5=this.pie6||_t(this.primaryColor,{h:-90}),this.git6=this.pie7||_t(this.primaryColor,{h:60}),this.git7=this.pie8||_t(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||z1,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||j1}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const ra={base:{getThemeVariables:bV},dark:{getThemeVariables:vV},default:{getThemeVariables:kV},forest:{getThemeVariables:TV},neutral:{getThemeVariables:t=>{const e=new EV;return e.calculate(t),e}}},qa={theme:"default",themeVariables:ra.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};qa.class&&(qa.class.arrowMarkerAbsolute=qa.arrowMarkerAbsolute),qa.gitGraph&&(qa.gitGraph.arrowMarkerAbsolute=qa.arrowMarkerAbsolute);const Xk=(t,e="")=>Object.keys(t).reduce((n,r)=>Array.isArray(t[r])?n:typeof t[r]=="object"&&t[r]!==null?[...n,e+r,...Xk(t[r],"")]:[...n,e+r],[]),CV=Xk(qa,""),SV=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,AV=/\s*%%.*\n/gm,U1={},Vp=function(t,e){t=t.replace(SV,"").replace(AV,`
`);for(const[n,{detector:r}]of Object.entries(U1))if(r(t,e))return n;throw new Error(`No diagram type detected for text: ${t}`)},Zk=(t,e,n)=>{if(U1[t])throw new Error(`Detector with key ${t} already exists`);U1[t]={detector:e,loader:n},W.debug(`Detector with key ${t} added${n?" with loader":""}`)},MV=t=>U1[t].loader,pn=function(t,e,n){const{depth:r,clobber:i}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(a=>pn(t,a,n)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(a=>{t.indexOf(a)===-1&&t.push(a)}),t):typeof t>"u"||r<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(typeof e<"u"&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(a=>{typeof e[a]=="object"&&(t[a]===void 0||typeof t[a]=="object")?(t[a]===void 0&&(t[a]=Array.isArray(e[a])?[]:{}),t[a]=pn(t[a],e[a],{depth:r-1,clobber:i})):(i||typeof t[a]!="object"&&typeof e[a]!="object")&&(t[a]=e[a])}),t)};var LV=typeof Hi=="object"&&Hi&&Hi.Object===Object&&Hi,Qk=LV,BV=Qk,NV=typeof self=="object"&&self&&self.Object===Object&&self,DV=BV||NV||Function("return this")(),ii=DV,OV=ii,IV=OV.Symbol,Ys=IV,Kk=Ys,Jk=Object.prototype,RV=Jk.hasOwnProperty,FV=Jk.toString,Ll=Kk?Kk.toStringTag:void 0;function $V(t){var e=RV.call(t,Ll),n=t[Ll];try{t[Ll]=void 0;var r=!0}catch{}var i=FV.call(t);return r&&(e?t[Ll]=n:delete t[Ll]),i}var PV=$V,YV=Object.prototype,zV=YV.toString;function jV(t){return zV.call(t)}var UV=jV,t9=Ys,HV=PV,WV=UV,VV="[object Null]",GV="[object Undefined]",e9=t9?t9.toStringTag:void 0;function qV(t){return t==null?t===void 0?GV:VV:e9&&e9 in Object(t)?HV(t):WV(t)}var Po=qV;function XV(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rr=XV,ZV=Po,QV=Rr,KV="[object AsyncFunction]",JV="[object Function]",tG="[object GeneratorFunction]",eG="[object Proxy]";function nG(t){if(!QV(t))return!1;var e=ZV(t);return e==JV||e==tG||e==KV||e==eG}var zs=nG,rG=ii,iG=rG["__core-js_shared__"],aG=iG,Gp=aG,n9=function(){var t=/[^.]+$/.exec(Gp&&Gp.keys&&Gp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function oG(t){return!!n9&&n9 in t}var sG=oG,cG=Function.prototype,lG=cG.toString;function uG(t){if(t!=null){try{return lG.call(t)}catch{}try{return t+""}catch{}}return""}var r9=uG,hG=zs,dG=sG,fG=Rr,pG=r9,gG=/[\\^$.*+?()[\]{}|]/g,yG=/^\[object .+?Constructor\]$/,mG=Function.prototype,bG=Object.prototype,_G=mG.toString,vG=bG.hasOwnProperty,xG=RegExp("^"+_G.call(vG).replace(gG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kG(t){if(!fG(t)||dG(t))return!1;var e=hG(t)?xG:yG;return e.test(pG(t))}var wG=kG;function TG(t,e){return t==null?void 0:t[e]}var EG=TG,CG=wG,SG=EG;function AG(t,e){var n=SG(t,e);return CG(n)?n:void 0}var Yo=AG,MG=Yo,LG=MG(Object,"create"),H1=LG,i9=H1;function BG(){this.__data__=i9?i9(null):{},this.size=0}var NG=BG;function DG(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var OG=DG,IG=H1,RG="__lodash_hash_undefined__",FG=Object.prototype,$G=FG.hasOwnProperty;function PG(t){var e=this.__data__;if(IG){var n=e[t];return n===RG?void 0:n}return $G.call(e,t)?e[t]:void 0}var YG=PG,zG=H1,jG=Object.prototype,UG=jG.hasOwnProperty;function HG(t){var e=this.__data__;return zG?e[t]!==void 0:UG.call(e,t)}var WG=HG,VG=H1,GG="__lodash_hash_undefined__";function qG(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=VG&&e===void 0?GG:e,this}var XG=qG,ZG=NG,QG=OG,KG=YG,JG=WG,tq=XG;function js(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}js.prototype.clear=ZG,js.prototype.delete=QG,js.prototype.get=KG,js.prototype.has=JG,js.prototype.set=tq;var eq=js;function nq(){this.__data__=[],this.size=0}var rq=nq;function iq(t,e){return t===e||t!==t&&e!==e}var Us=iq,aq=Us;function oq(t,e){for(var n=t.length;n--;)if(aq(t[n][0],e))return n;return-1}var W1=oq,sq=W1,cq=Array.prototype,lq=cq.splice;function uq(t){var e=this.__data__,n=sq(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():lq.call(e,n,1),--this.size,!0}var hq=uq,dq=W1;function fq(t){var e=this.__data__,n=dq(e,t);return n<0?void 0:e[n][1]}var pq=fq,gq=W1;function yq(t){return gq(this.__data__,t)>-1}var mq=yq,bq=W1;function _q(t,e){var n=this.__data__,r=bq(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var vq=_q,xq=rq,kq=hq,wq=pq,Tq=mq,Eq=vq;function Hs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hs.prototype.clear=xq,Hs.prototype.delete=kq,Hs.prototype.get=wq,Hs.prototype.has=Tq,Hs.prototype.set=Eq;var V1=Hs,Cq=Yo,Sq=ii,Aq=Cq(Sq,"Map"),qp=Aq,a9=eq,Mq=V1,Lq=qp;function Bq(){this.size=0,this.__data__={hash:new a9,map:new(Lq||Mq),string:new a9}}var Nq=Bq;function Dq(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Oq=Dq,Iq=Oq;function Rq(t,e){var n=t.__data__;return Iq(e)?n[typeof e=="string"?"string":"hash"]:n.map}var G1=Rq,Fq=G1;function $q(t){var e=Fq(this,t).delete(t);return this.size-=e?1:0,e}var Pq=$q,Yq=G1;function zq(t){return Yq(this,t).get(t)}var jq=zq,Uq=G1;function Hq(t){return Uq(this,t).has(t)}var Wq=Hq,Vq=G1;function Gq(t,e){var n=Vq(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var qq=Gq,Xq=Nq,Zq=Pq,Qq=jq,Kq=Wq,Jq=qq;function Ws(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ws.prototype.clear=Xq,Ws.prototype.delete=Zq,Ws.prototype.get=Qq,Ws.prototype.has=Kq,Ws.prototype.set=Jq;var Xp=Ws,o9=Xp,tX="Expected a function";function Zp(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(tX);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Zp.Cache||o9),n}Zp.Cache=o9;var q1=Zp;const eX={curveBasis:Fo,curveBasisClosed:ok,curveBasisOpen:ck,curveLinear:pr,curveLinearClosed:pk,curveMonotoneX:vk,curveMonotoneY:xk,curveNatural:Tk,curveStep:Ek,curveStepAfter:Sk,curveStepBefore:Ck},Qp=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,nX=/\s*(?:(?:(\w+)(?=:):|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,rX=function(t,e){const n=s9(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const i=n.map(a=>a.args);zo(i),r=pn(r,[...i])}else r=n.args;if(r){let i=Vp(t,e);["config"].forEach(a=>{typeof r[a]<"u"&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[a],delete r[a])})}return r},s9=function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${nX.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(n,"").replace(/'/gm,'"'),W.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const i=[];for(;(r=Qp.exec(t))!==null;)if(r.index===Qp.lastIndex&&Qp.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const a=r[1]?r[1]:r[2],o=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:a,args:o})}return i.length===0&&i.push({type:t,args:null}),i.length===1?i[0]:i}catch(n){return W.error(`ERROR: ${n.message} - Unable to parse directive
      ${e!==null?" type:"+e:""} based on the text:${t}`),{type:null,args:null}}},iX=function(t,e){for(let n=0;n<e.length;n++)if(e[n].match(t))return n;return-1},Li=(t,e)=>{if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return eX[n]||e},aX=(t,e)=>{const n=t.trim();if(n)return e.securityLevel!=="loose"?_i(n):n},oX=(t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let a=window;for(let o=0;o<r;o++)if(a=a[n[o]],!a)return;a[i](...e)},Bl=(t,e)=>t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0,sX=t=>{let e,n=0;t.forEach(a=>{n+=Bl(a,e),e=a});let r=n/2,i;return e=void 0,t.forEach(a=>{if(e&&!i){const o=Bl(a,e);if(o<r)r-=o;else{const s=r/o;s<=0&&(i=e),s>=1&&(i={x:a.x,y:a.y}),s>0&&s<1&&(i={x:(1-s)*e.x+s*a.x,y:(1-s)*e.y+s*a.y})}}e=a}),i},cX=t=>t.length===1?t[0]:sX(t),lX=(t,e,n)=>{let r;W.info("our points",e),e[0]!==n&&(e=e.reverse()),e.forEach(u=>{totalDistance+=Bl(u,r),r=u});let i=25,a;r=void 0,e.forEach(u=>{if(r&&!a){const h=Bl(u,r);if(h<i)i-=h;else{const f=i/h;f<=0&&(a=r),f>=1&&(a={x:u.x,y:u.y}),f>0&&f<1&&(a={x:(1-f)*r.x+f*u.x,y:(1-f)*r.y+f*u.y})}}r=u});const o=t?10:5,s=Math.atan2(e[0].y-a.y,e[0].x-a.x),l={x:0,y:0};return l.x=Math.sin(s)*o+(e[0].x+a.x)/2,l.y=-Math.cos(s)*o+(e[0].y+a.y)/2,l},uX=(t,e,n)=>{let r=JSON.parse(JSON.stringify(n)),i;W.info("our points",r),e!=="start_left"&&e!=="start_right"&&(r=r.reverse()),r.forEach(h=>{i=h});let a=25+t,o;i=void 0,r.forEach(h=>{if(i&&!o){const f=Bl(h,i);if(f<a)a-=f;else{const d=a/f;d<=0&&(o=i),d>=1&&(o={x:h.x,y:h.y}),d>0&&d<1&&(o={x:(1-d)*i.x+d*h.x,y:(1-d)*i.y+d*h.y})}}i=h});const s=10+t*.5,l=Math.atan2(r[0].y-o.y,r[0].x-o.x),u={x:0,y:0};return u.x=Math.sin(l)*s+(r[0].x+o.x)/2,u.y=-Math.cos(l)*s+(r[0].y+o.y)/2,e==="start_left"&&(u.x=Math.sin(l+Math.PI)*s+(r[0].x+o.x)/2,u.y=-Math.cos(l+Math.PI)*s+(r[0].y+o.y)/2),e==="end_right"&&(u.x=Math.sin(l-Math.PI)*s+(r[0].x+o.x)/2-5,u.y=-Math.cos(l-Math.PI)*s+(r[0].y+o.y)/2-5),e==="end_left"&&(u.x=Math.sin(l)*s+(r[0].x+o.x)/2-5,u.y=-Math.cos(l)*s+(r[0].y+o.y)/2-5),u},Xa=t=>{let e="",n="";for(let r=0;r<t.length;r++)typeof t[r]<"u"&&(t[r].startsWith("color:")||t[r].startsWith("text-align:")?n=n+t[r]+";":e=e+t[r]+";");return{style:e,labelStyle:n}};let c9=0;const l9=()=>(c9++,"id-"+Math.random().toString(36).substr(2,12)+"-"+c9);function hX(t){let e="";const n="0123456789abcdef",r=n.length;for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}const u9=t=>hX(t.length),dX=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},fX=function(t,e){const n=e.text.replace(he.lineBreakRegex," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.style("text-anchor",e.anchor),r.style("font-family",e.fontFamily),r.style("font-size",e.fontSize),r.style("font-weight",e.fontWeight),r.attr("fill",e.fill),typeof e.class<"u"&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+e.textMargin*2),i.attr("fill",e.fill),i.text(n),r},h9=q1((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),he.lineBreakRegex.test(t)))return t;const r=t.split(" "),i=[];let a="";return r.forEach((o,s)=>{const l=Bi(`${o} `,n),u=Bi(a,n);if(l>e){const{hyphenatedStrings:h,remainingWord:f}=pX(o,e,"-",n);i.push(a,...h),a=f}else u+l>=e?(i.push(a),a=o):a=[a,o].filter(Boolean).join(" ");s+1===r.length&&i.push(a)}),i.filter(o=>o!=="").join(n.joinWith)},(t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),pX=q1((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=t.split(""),a=[];let o="";return i.forEach((s,l)=>{const u=`${o}${s}`;if(Bi(u,r)>=e){const h=l+1,f=i.length===h,d=`${u}${n}`;a.push(f?u:d),o=""}else o=u}),{hyphenatedStrings:a,remainingWord:o}},(t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`),Kp=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),Jp(t,e).height},Bi=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),Jp(t,e).width},Jp=q1(function(t,e){e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e);const{fontSize:n,fontFamily:r,fontWeight:i}=e;if(!t)return{width:0,height:0};const a=["sans-serif",r],o=t.split(he.lineBreakRegex),s=[],l=Lt("body");if(!l.remove)return{width:0,height:0,lineHeight:0};const u=l.append("svg");for(const f of a){let d=0;const p={width:0,height:0,lineHeight:0};for(const m of o){const _=dX();_.text=m;const y=fX(u,_).style("font-size",n).style("font-weight",i).style("font-family",f),b=(y._groups||y)[0][0].getBBox();p.width=Math.round(Math.max(p.width,b.width)),d=Math.round(b.height),p.height+=d,p.lineHeight=Math.round(Math.max(p.lineHeight,d))}s.push(p)}u.remove();const h=isNaN(s[1].height)||isNaN(s[1].width)||isNaN(s[1].lineHeight)||s[0].height>s[1].height&&s[0].width>s[1].width&&s[0].lineHeight>s[1].lineHeight?0:1;return s[h]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),gX=class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}};let X1;const yX=function(t){return X1=X1||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),X1.innerHTML=t,unescape(X1.textContent)},zo=t=>{if(W.debug("directiveSanitizer called with",t),typeof t=="object"&&(t.length?t.forEach(e=>zo(e)):Object.keys(t).forEach(e=>{W.debug("Checking key",e),e.indexOf("__")===0&&(W.debug("sanitize deleting __ option",e),delete t[e]),e.indexOf("proto")>=0&&(W.debug("sanitize deleting proto option",e),delete t[e]),e.indexOf("constr")>=0&&(W.debug("sanitize deleting constr option",e),delete t[e]),e.indexOf("themeCSS")>=0&&(W.debug("sanitizing themeCss option"),t[e]=Z1(t[e])),e.indexOf("fontFamily")>=0&&(W.debug("sanitizing fontFamily option"),t[e]=Z1(t[e])),e.indexOf("altFontFamily")>=0&&(W.debug("sanitizing altFontFamily option"),t[e]=Z1(t[e])),CV.indexOf(e)<0?(W.debug("sanitize deleting option",e),delete t[e]):typeof t[e]=="object"&&(W.debug("sanitize deleting object",e),zo(t[e]))})),t.themeVariables){const e=Object.keys(t.themeVariables);for(let n=0;n<e.length;n++){const r=e[n],i=t.themeVariables[r];i&&i.match&&!i.match(/^[a-zA-Z0-9#,";()%. ]+$/)&&(t.themeVariables[r]="")}}W.debug("After sanitization",t)},Z1=t=>{let e=0,n=0;for(let r=0;r<t.length;r++){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";t[r]==="{"?e++:t[r]==="}"&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t};function tg(t){return"str"in t}function mX(t){return t instanceof Error?t.message:String(t)}const we={assignWithDepth:pn,wrapLabel:h9,calculateTextHeight:Kp,calculateTextWidth:Bi,calculateTextDimensions:Jp,detectInit:rX,detectDirective:s9,isSubstringInArray:iX,interpolateToCurve:Li,calcLabelPosition:cX,calcCardinalityPosition:lX,calcTerminalLabelPosition:uX,formatUrl:aX,getStylesFromArray:Xa,generateId:l9,random:u9,runFunc:oX,entityDecode:yX,initIdGenerator:gX,directiveSanitizer:zo,sanitizeCss:Z1};var d9="comm",f9="rule",p9="decl",bX="@import",_X="@keyframes",vX=Math.abs,eg=String.fromCharCode;function g9(t){return t.trim()}function ng(t,e,n){return t.replace(e,n)}function xX(t,e){return t.indexOf(e)}function Q1(t,e){return t.charCodeAt(e)|0}function Nl(t,e,n){return t.slice(e,n)}function Za(t){return t.length}function y9(t){return t.length}function K1(t,e){return e.push(t),t}var J1=1,Vs=1,m9=0,Fr=0,gn=0,Gs="";function rg(t,e,n,r,i,a,o){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:J1,column:Vs,length:o,return:""}}function kX(){return gn}function wX(){return gn=Fr>0?Q1(Gs,--Fr):0,Vs--,gn===10&&(Vs=1,J1--),gn}function ai(){return gn=Fr<m9?Q1(Gs,Fr++):0,Vs++,gn===10&&(Vs=1,J1++),gn}function jo(){return Q1(Gs,Fr)}function t0(){return Fr}function e0(t,e){return Nl(Gs,t,e)}function ig(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function TX(t){return J1=Vs=1,m9=Za(Gs=t),Fr=0,[]}function EX(t){return Gs="",t}function ag(t){return g9(e0(Fr-1,og(t===91?t+2:t===40?t+1:t)))}function CX(t){for(;(gn=jo())&&gn<33;)ai();return ig(t)>2||ig(gn)>3?"":" "}function SX(t,e){for(;--e&&ai()&&!(gn<48||gn>102||gn>57&&gn<65||gn>70&&gn<97););return e0(t,t0()+(e<6&&jo()==32&&ai()==32))}function og(t){for(;ai();)switch(gn){case t:return Fr;case 34:case 39:t!==34&&t!==39&&og(gn);break;case 40:t===41&&og(t);break;case 92:ai();break}return Fr}function AX(t,e){for(;ai()&&t+gn!==47+10&&!(t+gn===42+42&&jo()===47););return"/*"+e0(e,Fr-1)+"*"+eg(t===47?t:ai())}function MX(t){for(;!ig(jo());)ai();return e0(t,Fr)}function b9(t){return EX(n0("",null,null,null,[""],t=TX(t),0,[0],t))}function n0(t,e,n,r,i,a,o,s,l){for(var u=0,h=0,f=o,d=0,p=0,m=0,_=1,y=1,b=1,k=0,T="",x=i,A=a,C=r,L=T;y;)switch(m=k,k=ai()){case 40:if(m!=108&&Q1(L,f-1)==58){xX(L+=ng(ag(k),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:L+=ag(k);break;case 9:case 10:case 13:case 32:L+=CX(m);break;case 92:L+=SX(t0()-1,7);continue;case 47:switch(jo()){case 42:case 47:K1(LX(AX(ai(),t0()),e,n),l);break;default:L+="/"}break;case 123*_:s[u++]=Za(L)*b;case 125*_:case 59:case 0:switch(k){case 0:case 125:y=0;case 59+h:p>0&&Za(L)-f&&K1(p>32?v9(L+";",r,n,f-1):v9(ng(L," ","")+";",r,n,f-2),l);break;case 59:L+=";";default:if(K1(C=_9(L,e,n,u,h,i,s,T,x=[],A=[],f),a),k===123)if(h===0)n0(L,e,C,C,x,a,f,s,A);else switch(d){case 100:case 109:case 115:n0(t,C,C,r&&K1(_9(t,C,C,0,0,i,s,T,i,x=[],f),A),i,A,f,s,r?x:A);break;default:n0(L,C,C,C,[""],A,0,s,A)}}u=h=p=0,_=b=1,T=L="",f=o;break;case 58:f=1+Za(L),p=m;default:if(_<1){if(k==123)--_;else if(k==125&&_++==0&&wX()==125)continue}switch(L+=eg(k),k*_){case 38:b=h>0?1:(L+="\f",-1);break;case 44:s[u++]=(Za(L)-1)*b,b=1;break;case 64:jo()===45&&(L+=ag(ai())),d=jo(),h=f=Za(T=L+=MX(t0())),k++;break;case 45:m===45&&Za(L)==2&&(_=0)}}return a}function _9(t,e,n,r,i,a,o,s,l,u,h){for(var f=i-1,d=i===0?a:[""],p=y9(d),m=0,_=0,y=0;m<r;++m)for(var b=0,k=Nl(t,f+1,f=vX(_=o[m])),T=t;b<p;++b)(T=g9(_>0?d[b]+" "+k:ng(k,/&\f/g,d[b])))&&(l[y++]=T);return rg(t,e,n,i===0?f9:s,l,u,h)}function LX(t,e,n){return rg(t,e,n,d9,eg(kX()),Nl(t,2,-2),0)}function v9(t,e,n,r){return rg(t,e,n,p9,Nl(t,0,r),Nl(t,r+1,-1),r)}function r0(t,e){for(var n="",r=y9(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function x9(t,e,n,r){switch(t.type){case bX:case p9:return t.return=t.return||t.value;case d9:return"";case _X:return t.return=t.value+"{"+r0(t.children,r)+"}";case f9:t.value=t.props.join(",")}return Za(n=r0(t.children,r))?t.return=t.value+"{"+n+"}":""}const i0={name:"mermaid",version:"9.2.2",description:"Markdownish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main:"./dist/mermaid.min.js",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",type:"commonjs",exports:{".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts:{clean:"rimraf dist","build:code":"node .esbuild/esbuild.cjs","build:types":"tsc -p ./tsconfig.json --emitDeclarationOnly","build:watch":"yarn build:code --watch","build:esbuild":'concurrently "yarn build:code" "yarn build:types"',build:"yarn clean; yarn build:esbuild",dev:"node .esbuild/serve.cjs","docs:build":"ts-node-esm src/docs.mts","docs:verify":"yarn docs:build --verify","todo-postbuild":"documentation build src/mermaidAPI.ts src/config.ts src/defaultConfig.ts --shallow -f md --markdown-toc false > src/docs/Setup.md && prettier --write src/docs/Setup.md",release:"yarn build",lint:"eslint --cache --ignore-path .gitignore . && yarn lint:jison && prettier --check .","lint:fix":"eslint --fix --ignore-path .gitignore . && prettier --write .","lint:jison":"ts-node-esm src/jison/lint.mts",cypress:"cypress run","cypress:open":"cypress open",e2e:"start-server-and-test dev http://localhost:9000/ cypress","todo-prepare":'concurrently "husky install" "yarn build"',"pre-commit":"lint-staged"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0",dagre:"^0.8.5","dagre-d3":"^0.6.4",dompurify:"2.4.0","fast-clone":"^1.5.13",graphlib:"^2.1.8",khroma:"^2.0.0",lodash:"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies:{"@applitools/eyes-cypress":"^3.25.7","@commitlint/cli":"^17.1.2","@commitlint/config-conventional":"^17.0.0","@types/d3":"^7.4.0","@types/dompurify":"^2.3.4","@types/eslint":"^8.4.6","@types/express":"^4.17.13","@types/jsdom":"^20.0.0","@types/lodash":"^4.14.185","@types/prettier":"^2.7.0","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.37.0","@typescript-eslint/parser":"^5.37.0",concurrently:"^7.4.0",coveralls:"^3.1.1",cypress:"^10.0.0","cypress-image-snapshot":"^4.0.1",documentation:"13.2.0",esbuild:"^0.15.8",eslint:"^8.23.1","eslint-config-prettier":"^8.5.0","eslint-plugin-cypress":"^2.12.1","eslint-plugin-html":"^7.1.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-jsdoc":"^39.3.6","eslint-plugin-json":"^3.1.0","eslint-plugin-markdown":"^3.0.0",express:"^4.18.1",globby:"^13.1.2",husky:"^8.0.0","identity-obj-proxy":"^3.0.0",jison:"^0.4.18","js-base64":"3.7.2",jsdom:"^20.0.0","lint-staged":"^13.0.0",moment:"^2.23.0","path-browserify":"^1.0.1",prettier:"^2.7.1","prettier-plugin-jsdoc":"^0.4.2",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.12.6","ts-node":"^10.9.1",typescript:"^4.8.3","unist-util-flatmap":"^1.0.0"},resolutions:{d3:"^7.0.0"},files:["dist","README.md"],sideEffects:["**/*.css","**/*.scss"]},qs=Object.freeze(qa);let gr=pn({},qs),k9,Xs=[],Dl=pn({},qs);const a0=(t,e)=>{let n=pn({},t),r={};for(let i=0;i<e.length;i++){const a=e[i];E9(a),r=pn(r,a)}if(n=pn(n,r),r.theme&&r.theme in ra){const i=pn({},k9),a=pn(i.themeVariables||{},r.themeVariables);n.theme&&n.theme in ra&&(n.themeVariables=ra[n.theme].getThemeVariables(a))}return Dl=n,A9(Dl),Dl},BX=t=>(gr=pn({},qs),gr=pn(gr,t),t.theme&&ra[t.theme]&&(gr.themeVariables=ra[t.theme].getThemeVariables(t.themeVariables)),a0(gr,Xs),gr),NX=t=>{k9=pn({},t)},DX=t=>(gr=pn(gr,t),a0(gr,Xs),gr),w9=()=>pn({},gr),T9=t=>(A9(t),pn(Dl,t),at()),at=()=>pn({},Dl),E9=t=>{var e;["secure",...(e=gr.secure)!=null?e:[]].forEach(n=>{typeof t[n]<"u"&&(W.debug(`Denied attempt to modify a secure key ${n}`,t[n]),delete t[n])}),Object.keys(t).forEach(n=>{n.indexOf("__")===0&&delete t[n]}),Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n].indexOf("<")>-1||t[n].indexOf(">")>-1||t[n].indexOf("url(data:")>-1)&&delete t[n],typeof t[n]=="object"&&E9(t[n])})},sg=t=>{t.fontFamily&&(t.themeVariables?t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}):t.themeVariables={fontFamily:t.fontFamily}),Xs.push(t),a0(gr,Xs)},Ol=(t=gr)=>{Xs=[],a0(t,Xs)};var C9=(t=>(t.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",t))(C9||{});const S9={},OX=t=>{S9[t]||(W.warn(C9[t]),S9[t]=!0)},A9=t=>{!t||(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&OX("LAZY_LOAD_DEPRECATED")},IX=function(t,e){for(let n of e)t.attr(n[0],n[1])},RX=function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):r.set("width",e),r},oi=function(t,e,n,r){const i=RX(e,n,r);IX(t,i)},o0=function(t,e,n,r){const i=e.node().getBBox(),a=i.width,o=i.height;W.info(`SVG bounds: ${a}x${o}`,i);let s=0,l=0;W.info(`Graph bounds: ${s}x${l}`,t),s=a+n*2,l=o+n*2,W.info(`Calculated bounds: ${s}x${l}`),oi(e,l,s,r);const u=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",u)},Il=t=>`g.classGroup text {
  fill: ${t.nodeBorder};
  fill: ${t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

`,M9=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }
`,L9=()=>"",s0=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }
`,B9=t=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${t.fontFamily};
      fill: ${t.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${t.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${t.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,N9=()=>"",D9=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,O9=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 100%;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,I9=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,c0=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}
`,R9=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,F9=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,l0={flowchart:s0,"flowchart-v2":s0,sequence:I9,gantt:B9,classDiagram:Il,"classDiagram-v2":Il,class:Il,stateDiagram:c0,state:c0,info:N9,pie:D9,er:M9,error:L9,journey:R9,requirement:O9,c4:F9},$9=(t,e,n)=>{let r="";return t in l0&&l0[t]?r=l0[t](n):W.warn(`No theme found for ${t}`),` {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }

  /* Classes common for multiple diagrams */

  .error-icon {
    fill: ${n.errorBkgColor};
  }
  .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  .edge-thickness-normal {
    stroke-width: 2px;
  }
  .edge-thickness-thick {
    stroke-width: 3.5px
  }
  .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  .marker.cross {
    stroke: ${n.lineColor};
  }

  svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }

  ${r}

  ${e}
`},FX=(t,e)=>{l0[t]=e},Rl=W,$X=Nd,Zs=at,PX=t=>ri(t,Zs()),P9=o0,Qs={},Ln=(t,e,n)=>{Rl.debug(`Registering diagram ${t}`),Qs[t]&&Rl.warn(`Diagram ${t} already registered.`),Qs[t]=e,n&&Zk(t,n),FX(t,e.styles),e.injectUtils&&e.injectUtils(Rl,$X,Zs,PX,P9),Rl.debug(`Registered diagram ${t}. ${Object.keys(Qs).join(", ")} diagrams registered.`)},Y9=t=>{if(Rl.debug(`Getting diagram ${t}. ${Object.keys(Qs).join(", ")} diagrams registered.`),t in Qs)return Qs[t];throw new z9(t)};class z9 extends Error{constructor(e){super(`Diagram ${e} not found.`)}}var cg=function(){var t=function(A,C,L,S){for(L=L||{},S=A.length;S--;L[A[S]]=C);return L},e=[1,4],n=[1,7],r=[1,5],i=[1,9],a=[1,6],o=[2,6],s=[1,16],l=[6,8,14,20,22,24,25,27,29,32,37,40,50,54],u=[8,14,20,22,24,25,27,29,32,37,40],h=[8,13,14,20,22,24,25,27,29,32,37,40],f=[1,26],d=[6,8,14,50,54],p=[8,14,54],m=[1,65],_=[1,66],y=[1,67],b=[8,14,33,35,42,54],k={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ID:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,";":54,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",28:"ID",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[4,1],[4,1],[4,1]],performAction:function(A,C,L,S,D,v,M){var w=v.length-1;switch(D){case 3:return v[w];case 4:return v[w-1];case 5:return S.setDirection(v[w-3]),v[w-1];case 7:S.setOptions(v[w-1]),this.$=v[w];break;case 8:v[w-1]+=v[w],this.$=v[w-1];break;case 10:this.$=[];break;case 11:v[w-1].push(v[w]),this.$=v[w-1];break;case 12:this.$=v[w-1];break;case 17:this.$=v[w].trim(),S.setAccTitle(this.$);break;case 18:case 19:this.$=v[w].trim(),S.setAccDescription(this.$);break;case 20:S.addSection(v[w].substr(8)),this.$=v[w].substr(8);break;case 22:S.checkout(v[w]);break;case 23:S.branch(v[w]);break;case 24:S.branch(v[w-2],v[w]);break;case 25:S.cherryPick(v[w],"",void 0);break;case 26:S.cherryPick(v[w-2],"",v[w]);break;case 27:case 29:S.cherryPick(v[w-2],"","");break;case 28:S.cherryPick(v[w],"",v[w-2]);break;case 30:S.merge(v[w],"","","");break;case 31:S.merge(v[w-2],v[w],"","");break;case 32:S.merge(v[w-2],"",v[w],"");break;case 33:S.merge(v[w-2],"","",v[w]);break;case 34:S.merge(v[w-4],v[w],"",v[w-2]);break;case 35:S.merge(v[w-4],"",v[w],v[w-2]);break;case 36:S.merge(v[w-4],"",v[w-2],v[w]);break;case 37:S.merge(v[w-4],v[w-2],v[w],"");break;case 38:S.merge(v[w-4],v[w-2],"",v[w]);break;case 39:S.merge(v[w-4],v[w],v[w-2],"");break;case 40:S.merge(v[w-6],v[w-4],v[w-2],v[w]);break;case 41:S.merge(v[w-6],v[w],v[w-4],v[w-2]);break;case 42:S.merge(v[w-6],v[w-4],v[w],v[w-2]);break;case 43:S.merge(v[w-6],v[w-2],v[w-4],v[w]);break;case 44:S.merge(v[w-6],v[w],v[w-2],v[w-4]);break;case 45:S.merge(v[w-6],v[w-2],v[w],v[w-4]);break;case 46:S.commit(v[w]);break;case 47:S.commit("","",S.commitType.NORMAL,v[w]);break;case 48:S.commit("","",v[w],"");break;case 49:S.commit("","",v[w],v[w-2]);break;case 50:S.commit("","",v[w-2],v[w]);break;case 51:S.commit("",v[w],S.commitType.NORMAL,"");break;case 52:S.commit("",v[w-2],S.commitType.NORMAL,v[w]);break;case 53:S.commit("",v[w],S.commitType.NORMAL,v[w-2]);break;case 54:S.commit("",v[w-2],v[w],"");break;case 55:S.commit("",v[w],v[w-2],"");break;case 56:S.commit("",v[w-4],v[w-2],v[w]);break;case 57:S.commit("",v[w-4],v[w],v[w-2]);break;case 58:S.commit("",v[w-2],v[w-4],v[w]);break;case 59:S.commit("",v[w],v[w-4],v[w-2]);break;case 60:S.commit("",v[w],v[w-2],v[w-4]);break;case 61:S.commit("",v[w-2],v[w],v[w-4]);break;case 62:S.commit(v[w],"",S.commitType.NORMAL,"");break;case 63:S.commit(v[w],"",S.commitType.NORMAL,v[w-2]);break;case 64:S.commit(v[w-2],"",S.commitType.NORMAL,v[w]);break;case 65:S.commit(v[w-2],"",v[w],"");break;case 66:S.commit(v[w],"",v[w-2],"");break;case 67:S.commit(v[w],v[w-2],S.commitType.NORMAL,"");break;case 68:S.commit(v[w-2],v[w],S.commitType.NORMAL,"");break;case 69:S.commit(v[w-4],"",v[w-2],v[w]);break;case 70:S.commit(v[w-4],"",v[w],v[w-2]);break;case 71:S.commit(v[w-2],"",v[w-4],v[w]);break;case 72:S.commit(v[w],"",v[w-4],v[w-2]);break;case 73:S.commit(v[w],"",v[w-2],v[w-4]);break;case 74:S.commit(v[w-2],"",v[w],v[w-4]);break;case 75:S.commit(v[w-4],v[w],v[w-2],"");break;case 76:S.commit(v[w-4],v[w-2],v[w],"");break;case 77:S.commit(v[w-2],v[w],v[w-4],"");break;case 78:S.commit(v[w],v[w-2],v[w-4],"");break;case 79:S.commit(v[w],v[w-4],v[w-2],"");break;case 80:S.commit(v[w-2],v[w-4],v[w],"");break;case 81:S.commit(v[w-4],v[w],S.commitType.NORMAL,v[w-2]);break;case 82:S.commit(v[w-4],v[w-2],S.commitType.NORMAL,v[w]);break;case 83:S.commit(v[w-2],v[w],S.commitType.NORMAL,v[w-4]);break;case 84:S.commit(v[w],v[w-2],S.commitType.NORMAL,v[w-4]);break;case 85:S.commit(v[w],v[w-4],S.commitType.NORMAL,v[w-2]);break;case 86:S.commit(v[w-2],v[w-4],S.commitType.NORMAL,v[w]);break;case 87:S.commit(v[w-6],v[w-4],v[w-2],v[w]);break;case 88:S.commit(v[w-6],v[w-4],v[w],v[w-2]);break;case 89:S.commit(v[w-6],v[w-2],v[w-4],v[w]);break;case 90:S.commit(v[w-6],v[w],v[w-4],v[w-2]);break;case 91:S.commit(v[w-6],v[w-2],v[w],v[w-4]);break;case 92:S.commit(v[w-6],v[w],v[w-2],v[w-4]);break;case 93:S.commit(v[w-4],v[w-6],v[w-2],v[w]);break;case 94:S.commit(v[w-4],v[w-6],v[w],v[w-2]);break;case 95:S.commit(v[w-2],v[w-6],v[w-4],v[w]);break;case 96:S.commit(v[w],v[w-6],v[w-4],v[w-2]);break;case 97:S.commit(v[w-2],v[w-6],v[w],v[w-4]);break;case 98:S.commit(v[w],v[w-6],v[w-2],v[w-4]);break;case 99:S.commit(v[w],v[w-4],v[w-2],v[w-6]);break;case 100:S.commit(v[w-2],v[w-4],v[w],v[w-6]);break;case 101:S.commit(v[w],v[w-2],v[w-4],v[w-6]);break;case 102:S.commit(v[w-2],v[w],v[w-4],v[w-6]);break;case 103:S.commit(v[w-4],v[w-2],v[w],v[w-6]);break;case 104:S.commit(v[w-4],v[w],v[w-2],v[w-6]);break;case 105:S.commit(v[w-2],v[w-4],v[w-6],v[w]);break;case 106:S.commit(v[w],v[w-4],v[w-6],v[w-2]);break;case 107:S.commit(v[w-2],v[w],v[w-6],v[w-4]);break;case 108:S.commit(v[w],v[w-2],v[w-6],v[w-4]);break;case 109:S.commit(v[w-4],v[w-2],v[w-6],v[w]);break;case 110:S.commit(v[w-4],v[w],v[w-6],v[w-2]);break;case 111:this.$="";break;case 112:this.$=v[w];break;case 113:this.$=S.commitType.NORMAL;break;case 114:this.$=S.commitType.REVERSE;break;case 115:this.$=S.commitType.HIGHLIGHT;break;case 118:S.parseDirective("%%{","open_directive");break;case 119:S.parseDirective(v[w],"type_directive");break;case 120:v[w]=v[w].trim().replace(/'/g,'"'),S.parseDirective(v[w],"arg_directive");break;case 121:S.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:a},{1:[3]},{3:10,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:a},{3:11,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:a},{7:12,8:o,9:[1,13],10:[1,14],11:15,14:s},t(l,[2,122]),t(l,[2,123]),t(l,[2,124]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:o,11:15,14:s},{9:[1,21]},t(u,[2,10],{12:22,13:[1,23]}),t(h,[2,9]),{9:[1,25],48:24,53:f},t([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:o,11:15,14:s},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},t(h,[2,8]),t(d,[2,116]),{49:45,52:[1,46]},t(d,[2,121]),{1:[2,4]},{8:[1,47]},t(u,[2,11]),{4:48,8:n,14:r,54:a},t(u,[2,13]),t(p,[2,14]),t(p,[2,15]),t(p,[2,16]),{21:[1,49]},{23:[1,50]},t(p,[2,19]),t(p,[2,20]),t(p,[2,21]),{28:[1,51]},t(p,[2,111],{41:52,33:[1,55],34:[1,57],35:[1,53],38:[1,54],42:[1,56]}),{28:[1,58]},{33:[1,59],35:[1,60]},{28:[1,61]},{48:62,53:f},{53:[2,120]},{1:[2,5]},t(u,[2,12]),t(p,[2,17]),t(p,[2,18]),t(p,[2,22]),t(p,[2,46]),{34:[1,63]},{39:64,43:m,44:_,45:y},{34:[1,68]},{34:[1,69]},t(p,[2,112]),t(p,[2,30],{33:[1,70],35:[1,72],38:[1,71]}),{34:[1,73]},{34:[1,74],36:[1,75]},t(p,[2,23],{30:[1,76]}),t(d,[2,117]),t(p,[2,47],{33:[1,78],38:[1,77],42:[1,79]}),t(p,[2,48],{33:[1,81],35:[1,80],42:[1,82]}),t(b,[2,113]),t(b,[2,114]),t(b,[2,115]),t(p,[2,51],{35:[1,83],38:[1,84],42:[1,85]}),t(p,[2,62],{33:[1,88],35:[1,86],38:[1,87]}),{34:[1,89]},{39:90,43:m,44:_,45:y},{34:[1,91]},t(p,[2,25],{35:[1,92]}),{33:[1,93]},{33:[1,94]},{31:[1,95]},{39:96,43:m,44:_,45:y},{34:[1,97]},{34:[1,98]},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{39:103,43:m,44:_,45:y},{34:[1,104]},{34:[1,105]},{39:106,43:m,44:_,45:y},{34:[1,107]},t(p,[2,31],{35:[1,109],38:[1,108]}),t(p,[2,32],{33:[1,111],35:[1,110]}),t(p,[2,33],{33:[1,112],38:[1,113]}),{34:[1,114],36:[1,115]},{34:[1,116]},{34:[1,117]},t(p,[2,24]),t(p,[2,49],{33:[1,118],42:[1,119]}),t(p,[2,53],{38:[1,120],42:[1,121]}),t(p,[2,63],{33:[1,123],38:[1,122]}),t(p,[2,50],{33:[1,124],42:[1,125]}),t(p,[2,55],{35:[1,126],42:[1,127]}),t(p,[2,66],{33:[1,129],35:[1,128]}),t(p,[2,52],{38:[1,130],42:[1,131]}),t(p,[2,54],{35:[1,132],42:[1,133]}),t(p,[2,67],{35:[1,135],38:[1,134]}),t(p,[2,64],{33:[1,137],38:[1,136]}),t(p,[2,65],{33:[1,139],35:[1,138]}),t(p,[2,68],{35:[1,141],38:[1,140]}),{39:142,43:m,44:_,45:y},{34:[1,143]},{34:[1,144]},{34:[1,145]},{34:[1,146]},{39:147,43:m,44:_,45:y},t(p,[2,26]),t(p,[2,27]),t(p,[2,28]),t(p,[2,29]),{34:[1,148]},{34:[1,149]},{39:150,43:m,44:_,45:y},{34:[1,151]},{39:152,43:m,44:_,45:y},{34:[1,153]},{34:[1,154]},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{39:160,43:m,44:_,45:y},{34:[1,161]},{34:[1,162]},{34:[1,163]},{39:164,43:m,44:_,45:y},{34:[1,165]},{39:166,43:m,44:_,45:y},{34:[1,167]},{34:[1,168]},{34:[1,169]},{39:170,43:m,44:_,45:y},{34:[1,171]},t(p,[2,37],{35:[1,172]}),t(p,[2,38],{38:[1,173]}),t(p,[2,36],{33:[1,174]}),t(p,[2,39],{35:[1,175]}),t(p,[2,34],{38:[1,176]}),t(p,[2,35],{33:[1,177]}),t(p,[2,60],{42:[1,178]}),t(p,[2,73],{33:[1,179]}),t(p,[2,61],{42:[1,180]}),t(p,[2,84],{38:[1,181]}),t(p,[2,74],{33:[1,182]}),t(p,[2,83],{38:[1,183]}),t(p,[2,59],{42:[1,184]}),t(p,[2,72],{33:[1,185]}),t(p,[2,58],{42:[1,186]}),t(p,[2,78],{35:[1,187]}),t(p,[2,71],{33:[1,188]}),t(p,[2,77],{35:[1,189]}),t(p,[2,57],{42:[1,190]}),t(p,[2,85],{38:[1,191]}),t(p,[2,56],{42:[1,192]}),t(p,[2,79],{35:[1,193]}),t(p,[2,80],{35:[1,194]}),t(p,[2,86],{38:[1,195]}),t(p,[2,70],{33:[1,196]}),t(p,[2,81],{38:[1,197]}),t(p,[2,69],{33:[1,198]}),t(p,[2,75],{35:[1,199]}),t(p,[2,76],{35:[1,200]}),t(p,[2,82],{38:[1,201]}),{34:[1,202]},{39:203,43:m,44:_,45:y},{34:[1,204]},{34:[1,205]},{39:206,43:m,44:_,45:y},{34:[1,207]},{34:[1,208]},{34:[1,209]},{34:[1,210]},{39:211,43:m,44:_,45:y},{34:[1,212]},{39:213,43:m,44:_,45:y},{34:[1,214]},{34:[1,215]},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{39:221,43:m,44:_,45:y},{34:[1,222]},{34:[1,223]},{34:[1,224]},{39:225,43:m,44:_,45:y},{34:[1,226]},{39:227,43:m,44:_,45:y},{34:[1,228]},{34:[1,229]},{34:[1,230]},{39:231,43:m,44:_,45:y},t(p,[2,40]),t(p,[2,42]),t(p,[2,41]),t(p,[2,43]),t(p,[2,45]),t(p,[2,44]),t(p,[2,101]),t(p,[2,102]),t(p,[2,99]),t(p,[2,100]),t(p,[2,104]),t(p,[2,103]),t(p,[2,108]),t(p,[2,107]),t(p,[2,106]),t(p,[2,105]),t(p,[2,110]),t(p,[2,109]),t(p,[2,98]),t(p,[2,97]),t(p,[2,96]),t(p,[2,95]),t(p,[2,93]),t(p,[2,94]),t(p,[2,92]),t(p,[2,91]),t(p,[2,90]),t(p,[2,89]),t(p,[2,87]),t(p,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(A,C){if(C.recoverable)this.trace(A);else{var L=new Error(A);throw L.hash=C,L}},parse:function(A){var C=this,L=[0],S=[],D=[null],v=[],M=this.table,w="",I=0,B=0,$=2,F=1,K=v.slice.call(arguments,1),nt=Object.create(this.lexer),z={yy:{}};for(var Y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Y)&&(z.yy[Y]=this.yy[Y]);nt.setInput(A,z.yy),z.yy.lexer=nt,z.yy.parser=this,typeof nt.yylloc>"u"&&(nt.yylloc={});var rt=nt.yylloc;v.push(rt);var lt=nt.options&&nt.options.ranges;typeof z.yy.parseError=="function"?this.parseError=z.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function J(){var U;return U=S.pop()||nt.lex()||F,typeof U!="number"&&(U instanceof Array&&(S=U,U=S.pop()),U=C.symbols_[U]||U),U}for(var Q,q,it,ut,V={},j,P,X,O;;){if(q=L[L.length-1],this.defaultActions[q]?it=this.defaultActions[q]:((Q===null||typeof Q>"u")&&(Q=J()),it=M[q]&&M[q][Q]),typeof it>"u"||!it.length||!it[0]){var G="";O=[];for(j in M[q])this.terminals_[j]&&j>$&&O.push("'"+this.terminals_[j]+"'");nt.showPosition?G="Parse error on line "+(I+1)+`:
`+nt.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[Q]||Q)+"'":G="Parse error on line "+(I+1)+": Unexpected "+(Q==F?"end of input":"'"+(this.terminals_[Q]||Q)+"'"),this.parseError(G,{text:nt.match,token:this.terminals_[Q]||Q,line:nt.yylineno,loc:rt,expected:O})}if(it[0]instanceof Array&&it.length>1)throw new Error("Parse Error: multiple actions possible at state: "+q+", token: "+Q);switch(it[0]){case 1:L.push(Q),D.push(nt.yytext),v.push(nt.yylloc),L.push(it[1]),Q=null,B=nt.yyleng,w=nt.yytext,I=nt.yylineno,rt=nt.yylloc;break;case 2:if(P=this.productions_[it[1]][1],V.$=D[D.length-P],V._$={first_line:v[v.length-(P||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(P||1)].first_column,last_column:v[v.length-1].last_column},lt&&(V._$.range=[v[v.length-(P||1)].range[0],v[v.length-1].range[1]]),ut=this.performAction.apply(V,[w,B,I,z.yy,it[1],D,v].concat(K)),typeof ut<"u")return ut;P&&(L=L.slice(0,-1*P*2),D=D.slice(0,-1*P),v=v.slice(0,-1*P)),L.push(this.productions_[it[1]][0]),D.push(V.$),v.push(V._$),X=M[L[L.length-2]][L[L.length-1]],L.push(X);break;case 3:return!0}}return!0}},T=function(){var A={EOF:1,parseError:function(C,L){if(this.yy.parser)this.yy.parser.parseError(C,L);else throw new Error(C)},setInput:function(C,L){return this.yy=L||this.yy||{},this._input=C,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var C=this._input[0];this.yytext+=C,this.yyleng++,this.offset++,this.match+=C,this.matched+=C;var L=C.match(/(?:\r\n?|\n).*/g);return L?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),C},unput:function(C){var L=C.length,S=C.split(/(?:\r\n?|\n)/g);this._input=C+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-L),this.offset-=L;var D=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===D.length?this.yylloc.first_column:0)+D[D.length-S.length].length-S[0].length:this.yylloc.first_column-L},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-L]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(C){this.unput(this.match.slice(C))},pastInput:function(){var C=this.matched.substr(0,this.matched.length-this.match.length);return(C.length>20?"...":"")+C.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var C=this.match;return C.length<20&&(C+=this._input.substr(0,20-C.length)),(C.substr(0,20)+(C.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var C=this.pastInput(),L=new Array(C.length+1).join("-");return C+this.upcomingInput()+`
`+L+"^"},test_match:function(C,L){var S,D,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),D=C[0].match(/(?:\r\n?|\n).*/g),D&&(this.yylineno+=D.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:D?D[D.length-1].length-D[D.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+C[0].length},this.yytext+=C[0],this.match+=C[0],this.matches=C,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(C[0].length),this.matched+=C[0],S=this.performAction.call(this,this.yy,this,L,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var M in v)this[M]=v[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var C,L,S,D;this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),M=0;M<v.length;M++)if(S=this._input.match(this.rules[v[M]]),S&&(!L||S[0].length>L[0].length)){if(L=S,D=M,this.options.backtrack_lexer){if(C=this.test_match(S,v[M]),C!==!1)return C;if(this._backtrack){L=!1;continue}else return!1}else if(!this.options.flex)break}return L?(C=this.test_match(L,v[D]),C!==!1?C:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var C=this.next();return C||this.lex()},begin:function(C){this.conditionStack.push(C)},popState:function(){var C=this.conditionStack.length-1;return C>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(C){return C=this.conditionStack.length-1-Math.abs(C||0),C>=0?this.conditionStack[C]:"INITIAL"},pushState:function(C){this.begin(C)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(C,L,S,D){switch(S){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 28;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return A}();k.lexer=T;function x(){this.yy={}}return x.prototype=k,k.Parser=x,new x}();cg.parser=cg;const YX=t=>t.match(/^\s*gitGraph/)!==null;let lg="",u0="",ug="";const hg=t=>ri(t,at()),si=function(){lg="",ug="",u0=""},$r=function(t){lg=hg(t).replace(/^\s+/g,"")},ci=function(){return lg||u0},li=function(t){ug=hg(t).replace(/\n\s+/g,`
`)},ui=function(){return ug},h0=function(t){u0=hg(t)},d0=function(){return u0};let f0=at().gitGraph.mainBranchName,zX=at().gitGraph.mainBranchOrder,Tn={},sr=null,Fl={};Fl[f0]={name:f0,order:zX};let yn={};yn[f0]=sr;let Bn=f0,j9="LR",Uo=0;function dg(){return u9({length:7})}const jX=function(t,e,n){qe.parseDirective(this,t,e,n)};function UX(t,e){const n=Object.create(null);return t.reduce((r,i)=>{const a=e(i);return n[a]||(n[a]=!0,r.push(i)),r},[])}const HX=function(t){j9=t};let U9={};const WX=function(t){W.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{U9=JSON.parse(t)}catch(e){W.error("error while parsing gitGraph options",e.message)}},VX=function(){return U9},GX=function(t,e,n,r){W.debug("Entering commit:",t,e,n,r),e=he.sanitizeText(e,at()),t=he.sanitizeText(t,at()),r=he.sanitizeText(r,at());const i={id:e||Uo+"-"+dg(),message:t,seq:Uo++,type:n||$l.NORMAL,tag:r||"",parents:sr==null?[]:[sr.id],branch:Bn};sr=i,Tn[i.id]=i,yn[Bn]=i.id,W.debug("in pushCommit "+i.id)},qX=function(t,e){if(t=he.sanitizeText(t,at()),typeof yn[t]>"u")yn[t]=sr!=null?sr.id:null,Fl[t]={name:t,order:e?parseInt(e,10):null},H9(t),W.debug("in createBranch");else{let n=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw n.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},n}},XX=function(t,e,n,r){t=he.sanitizeText(t,at()),e=he.sanitizeText(e,at());const i=Tn[yn[Bn]],a=Tn[yn[t]];if(Bn===t){let s=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},s}else if(typeof i>"u"||!i){let s=new Error('Incorrect usage of "merge". Current branch ('+Bn+")has no commits");throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},s}else if(typeof yn[t]>"u"){let s=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},s}else if(typeof a>"u"||!a){let s=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},s}else if(i===a){let s=new Error('Incorrect usage of "merge". Both branches have same head');throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},s}else if(e&&typeof Tn[e]<"u"){let s=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw s.hash={text:"merge "+t+e+n+r,token:"merge "+t+e+n+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+n+" "+r]},s}const o={id:e||Uo+"-"+dg(),message:"merged branch "+t+" into "+Bn,seq:Uo++,parents:[sr==null?null:sr.id,yn[t]],branch:Bn,type:$l.MERGE,customType:n,customId:!!e,tag:r||""};sr=o,Tn[o.id]=o,yn[Bn]=o.id,W.debug(yn),W.debug("in mergeBranch")},ZX=function(t,e,n){if(W.debug("Entering cherryPick:",t,e,n),t=he.sanitizeText(t,at()),e=he.sanitizeText(e,at()),n=he.sanitizeText(n,at()),!t||typeof Tn[t]>"u"){let a=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}let r=Tn[t],i=r.branch;if(r.type===$l.MERGE){let a=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}if(!e||typeof Tn[e]>"u"){if(i===Bn){let s=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw s.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s}const a=Tn[yn[Bn]];if(typeof a>"u"||!a){let s=new Error('Incorrect usage of "cherry-pick". Current branch ('+Bn+")has no commits");throw s.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s}const o={id:Uo+"-"+dg(),message:"cherry-picked "+r+" into "+Bn,seq:Uo++,parents:[sr==null?null:sr.id,r.id],branch:Bn,type:$l.CHERRY_PICK,tag:n!=null?n:"cherry-pick:"+r.id};sr=o,Tn[o.id]=o,yn[Bn]=o.id,W.debug(yn),W.debug("in cherryPick")}},H9=function(t){if(t=he.sanitizeText(t,at()),typeof yn[t]>"u"){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}else{Bn=t;const e=yn[Bn];sr=Tn[e]}};function W9(t,e,n){const r=t.indexOf(e);r===-1?t.push(n):t.splice(r,1,n)}function V9(t){const e=t.reduce((i,a)=>i.seq>a.seq?i:a,t[0]);let n="";t.forEach(function(i){i===e?n+="	*":n+="	|"});const r=[n,e.id,e.seq];for(let i in yn)yn[i]===e.id&&r.push(i);if(W.debug(r.join(" ")),e.parents&&e.parents.length==2){const i=Tn[e.parents[0]];W9(t,e,i),t.push(Tn[e.parents[1]])}else{if(e.parents.length==0)return;{const i=Tn[e.parents];W9(t,e,i)}}t=UX(t,i=>i.id),V9(t)}const QX=function(){W.debug(Tn);const t=G9()[0];V9([t])},KX=function(){Tn={},sr=null;let t=at().gitGraph.mainBranchName,e=at().gitGraph.mainBranchOrder;yn={},yn[t]=null,Fl={},Fl[t]={name:t,order:e},Bn=t,Uo=0,si()},JX=function(){return Object.values(Fl).map((t,e)=>t.order!==null?t:{...t,order:parseFloat(`0.${e}`,10)}).sort((t,e)=>t.order-e.order).map(({name:t})=>({name:t}))},tZ=function(){return yn},eZ=function(){return Tn},G9=function(){const t=Object.keys(Tn).map(function(e){return Tn[e]});return t.forEach(function(e){W.debug(e.id)}),t.sort((e,n)=>e.seq-n.seq),t},nZ=function(){return Bn},rZ=function(){return j9},iZ=function(){return sr},$l={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},aZ={parseDirective:jX,getConfig:()=>at().gitGraph,setDirection:HX,setOptions:WX,getOptions:VX,commit:GX,branch:qX,merge:XX,cherryPick:ZX,checkout:H9,prettyPrint:QX,clear:KX,getBranchesAsObjArray:JX,getBranches:tZ,getCommits:eZ,getCommitsArray:G9,getCurrentBranch:nZ,getDirection:rZ,getHead:iZ,setAccTitle:$r,getAccTitle:ci,getAccDescription:ui,setAccDescription:li,commitType:$l};function yr(t,e,n){if(typeof e.insert>"u")return;let r=t.getAccTitle(),i=t.getAccDescription();e.attr("role","img").attr("aria-labelledby","chart-title-"+n+" chart-desc-"+n),e.insert("desc",":first-child").attr("id","chart-desc-"+n).text(i),e.insert("title",":first-child").attr("id","chart-title-"+n).text(r)}let Pl={};const Er={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Ho=8;let mr={},p0={},Yl=[],g0=0;const oZ=()=>{mr={},p0={},Pl={},g0=0,Yl=[]},sZ=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let n=[];typeof t=="string"?n=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?n=t:n=[];for(let r=0;r<n.length;r++){const i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=n[r].trim(),e.appendChild(i)}return e},q9=(t,e,n)=>{const r=Zs().gitGraph,i=t.append("g").attr("class","commit-bullets"),a=t.append("g").attr("class","commit-labels");let o=0;Object.keys(e).sort((s,l)=>e[s].seq-e[l].seq).forEach(s=>{const l=e[s],u=mr[l.branch].pos,h=o+10;if(n){let f,d=typeof l.customType<"u"&&l.customType!==""?l.customType:l.type;switch(d){case Er.NORMAL:f="commit-normal";break;case Er.REVERSE:f="commit-reverse";break;case Er.HIGHLIGHT:f="commit-highlight";break;case Er.MERGE:f="commit-merge";break;case Er.CHERRY_PICK:f="commit-cherry-pick";break;default:f="commit-normal"}if(d===Er.HIGHLIGHT){const p=i.append("rect");p.attr("x",h-10),p.attr("y",u-10),p.attr("height",20),p.attr("width",20),p.attr("class",`commit ${l.id} commit-highlight${mr[l.branch].index%Ho} ${f}-outer`),i.append("rect").attr("x",h-6).attr("y",u-6).attr("height",12).attr("width",12).attr("class",`commit ${l.id} commit${mr[l.branch].index%Ho} ${f}-inner`)}else if(d===Er.CHERRY_PICK)i.append("circle").attr("cx",h).attr("cy",u).attr("r",10).attr("class",`commit ${l.id} ${f}`),i.append("circle").attr("cx",h-3).attr("cy",u+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${l.id} ${f}`),i.append("circle").attr("cx",h+3).attr("cy",u+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${l.id} ${f}`),i.append("line").attr("x1",h+3).attr("y1",u+1).attr("x2",h).attr("y2",u-5).attr("stroke","#fff").attr("class",`commit ${l.id} ${f}`),i.append("line").attr("x1",h-3).attr("y1",u+1).attr("x2",h).attr("y2",u-5).attr("stroke","#fff").attr("class",`commit ${l.id} ${f}`);else{const p=i.append("circle");if(p.attr("cx",h),p.attr("cy",u),p.attr("r",l.type===Er.MERGE?9:10),p.attr("class",`commit ${l.id} commit${mr[l.branch].index%Ho}`),d===Er.MERGE){const m=i.append("circle");m.attr("cx",h),m.attr("cy",u),m.attr("r",6),m.attr("class",`commit ${f} ${l.id} commit${mr[l.branch].index%Ho}`)}d===Er.REVERSE&&i.append("path").attr("d",`M ${h-5},${u-5}L${h+5},${u+5}M${h-5},${u+5}L${h+5},${u-5}`).attr("class",`commit ${f} ${l.id} commit${mr[l.branch].index%Ho}`)}}if(p0[l.id]={x:o+10,y:u},n){if(l.type!==Er.CHERRY_PICK&&(l.customId&&l.type===Er.MERGE||l.type!==Er.MERGE)&&r.showCommitLabel){const f=a.append("g"),d=f.insert("rect").attr("class","commit-label-bkg"),p=f.append("text").attr("x",o).attr("y",u+25).attr("class","commit-label").text(l.id);let m=p.node().getBBox();if(d.attr("x",o+10-m.width/2-2).attr("y",u+13.5).attr("width",m.width+2*2).attr("height",m.height+2*2),p.attr("x",o+10-m.width/2),r.rotateCommitLabel){let _=-7.5-(m.width+10)/25*9.5,y=10+m.width/25*8.5;f.attr("transform","translate("+_+", "+y+") rotate("+-45+", "+o+", "+u+")")}}if(l.tag){const f=a.insert("polygon"),d=a.append("circle"),p=a.append("text").attr("y",u-16).attr("class","tag-label").text(l.tag);let m=p.node().getBBox();p.attr("x",o+10-m.width/2);const _=m.height/2,y=u-19.2;f.attr("class","tag-label-bkg").attr("points",`
          ${o-m.width/2-4/2},${y+2}
          ${o-m.width/2-4/2},${y-2}
          ${o+10-m.width/2-4},${y-_-2}
          ${o+10+m.width/2+4},${y-_-2}
          ${o+10+m.width/2+4},${y+_+2}
          ${o+10-m.width/2-4},${y+_+2}`),d.attr("cx",o-m.width/2+4/2).attr("cy",y).attr("r",1.5).attr("class","tag-hole")}}o+=50,o>g0&&(g0=o)})},cZ=(t,e,n)=>Object.keys(n).filter(r=>n[r].branch===e.branch&&n[r].seq>t.seq&&n[r].seq<e.seq).length>0,fg=(t,e,n)=>{const r=n||0,i=t+Math.abs(t-e)/2;if(r>5)return i;let a=!0;for(let s=0;s<Yl.length;s++)Math.abs(Yl[s]-i)<10&&(a=!1);if(a)return Yl.push(i),i;const o=Math.abs(t-e);return fg(t,e-o/5,r+1)},lZ=(t,e,n,r)=>{const i=p0[e.id],a=p0[n.id],o=cZ(e,n,r);let s="",l="",u=0,h=0,f=mr[n.branch].index,d;if(o){s="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",u=10,h=10,f=mr[n.branch].index;const p=i.y<a.y?fg(i.y,a.y):fg(a.y,i.y);i.y<a.y?d=`M ${i.x} ${i.y} L ${i.x} ${p-u} ${s} ${i.x+h} ${p} L ${a.x-u} ${p} ${l} ${a.x} ${p+h} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${i.x} ${p+u} ${l} ${i.x+h} ${p} L ${a.x-u} ${p} ${s} ${a.x} ${p-h} L ${a.x} ${a.y}`}else i.y<a.y&&(s="A 20 20, 0, 0, 0,",u=20,h=20,f=mr[n.branch].index,d=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${s} ${i.x+h} ${a.y} L ${a.x} ${a.y}`),i.y>a.y&&(s="A 20 20, 0, 0, 0,",u=20,h=20,f=mr[e.branch].index,d=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${s} ${a.x} ${i.y-h} L ${a.x} ${a.y}`),i.y===a.y&&(f=mr[e.branch].index,d=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${s} ${i.x+h} ${a.y} L ${a.x} ${a.y}`);t.append("path").attr("d",d).attr("class","arrow arrow"+f%Ho)},uZ=(t,e)=>{const n=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(r=>{const i=e[r];i.parents&&i.parents.length>0&&i.parents.forEach(a=>{lZ(n,e[a],i,e)})})},hZ=(t,e)=>{const n=Zs().gitGraph,r=t.append("g");e.forEach((i,a)=>{const o=a%Ho,s=mr[i.name].pos,l=r.append("line");l.attr("x1",0),l.attr("y1",s),l.attr("x2",g0),l.attr("y2",s),l.attr("class","branch branch"+o),Yl.push(s);let u=i.name;const h=sZ(u),f=r.insert("rect"),d=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+o);d.node().appendChild(h);let p=h.getBBox();f.attr("class","branchLabelBkg label"+o).attr("rx",4).attr("ry",4).attr("x",-p.width-4-(n.rotateCommitLabel===!0?30:0)).attr("y",-p.height/2+8).attr("width",p.width+18).attr("height",p.height+4),d.attr("transform","translate("+(-p.width-14-(n.rotateCommitLabel===!0?30:0))+", "+(s-p.height/2-1)+")"),f.attr("transform","translate("+-19+", "+(s-p.height/2)+")")})},dZ={draw:function(t,e,n,r){oZ();const i=Zs(),a=Zs().gitGraph;W.debug("in gitgraph renderer",t+`
`,"id:",e,n),Pl=r.db.getCommits();const o=r.db.getBranchesAsObjArray();let s=0;o.forEach((u,h)=>{mr[u.name]={pos:s,index:h},s+=50+(a.rotateCommitLabel?40:0)});const l=Lt(`[id="${e}"]`);yr(r.db,l,e),q9(l,Pl,!1),a.showBranches&&hZ(l,o),uZ(l,Pl),q9(l,Pl,!0),P9(void 0,l,a.diagramPadding,i.useMaxWidth)}},fZ=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  }
`;var zl=function(){var t=function(Pt,yt,Ct,pt){for(Ct=Ct||{},pt=Pt.length;pt--;Ct[Pt[pt]]=yt);return Ct},e=[1,6],n=[1,7],r=[1,8],i=[1,9],a=[1,16],o=[1,11],s=[1,12],l=[1,13],u=[1,14],h=[1,15],f=[1,27],d=[1,33],p=[1,34],m=[1,35],_=[1,36],y=[1,37],b=[1,72],k=[1,73],T=[1,74],x=[1,75],A=[1,76],C=[1,77],L=[1,78],S=[1,38],D=[1,39],v=[1,40],M=[1,41],w=[1,42],I=[1,43],B=[1,44],$=[1,45],F=[1,46],K=[1,47],nt=[1,48],z=[1,49],Y=[1,50],rt=[1,51],lt=[1,52],J=[1,53],Q=[1,54],q=[1,55],it=[1,56],ut=[1,57],V=[1,59],j=[1,60],P=[1,61],X=[1,62],O=[1,63],G=[1,64],U=[1,65],H=[1,66],xt=[1,67],ot=[1,68],Dt=[1,69],Mt=[24,52],wt=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Et=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],bt=[1,94],mt=[1,95],Tt=[1,96],kt=[1,97],st=[15,24,52],Qt=[7,8,9,10,18,22,25,26,27,28],$t=[15,24,43,52],te=[15,24,43,52,86,87,89,90],Ht=[15,43],qt=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],oe={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(Pt,yt,Ct,pt,Ft,dt,Se){var gt=dt.length-1;switch(Ft){case 4:pt.setDirection("TB");break;case 5:pt.setDirection("BT");break;case 6:pt.setDirection("RL");break;case 7:pt.setDirection("LR");break;case 11:pt.parseDirective("%%{","open_directive");break;case 12:break;case 13:dt[gt]=dt[gt].trim().replace(/'/g,'"'),pt.parseDirective(dt[gt],"arg_directive");break;case 14:pt.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:pt.setC4Type(dt[gt-3]);break;case 26:pt.setTitle(dt[gt].substring(6)),this.$=dt[gt].substring(6);break;case 27:pt.setAccDescription(dt[gt].substring(15)),this.$=dt[gt].substring(15);break;case 28:this.$=dt[gt].trim(),pt.setTitle(this.$);break;case 29:case 30:this.$=dt[gt].trim(),pt.setAccDescription(this.$);break;case 35:case 36:dt[gt].splice(2,0,"ENTERPRISE"),pt.addPersonOrSystemBoundary(...dt[gt]),this.$=dt[gt];break;case 37:pt.addPersonOrSystemBoundary(...dt[gt]),this.$=dt[gt];break;case 38:dt[gt].splice(2,0,"CONTAINER"),pt.addContainerBoundary(...dt[gt]),this.$=dt[gt];break;case 39:pt.addDeploymentNode("node",...dt[gt]),this.$=dt[gt];break;case 40:pt.addDeploymentNode("nodeL",...dt[gt]),this.$=dt[gt];break;case 41:pt.addDeploymentNode("nodeR",...dt[gt]),this.$=dt[gt];break;case 42:pt.popBoundaryParseStack();break;case 46:pt.addPersonOrSystem("person",...dt[gt]),this.$=dt[gt];break;case 47:pt.addPersonOrSystem("external_person",...dt[gt]),this.$=dt[gt];break;case 48:pt.addPersonOrSystem("system",...dt[gt]),this.$=dt[gt];break;case 49:pt.addPersonOrSystem("system_db",...dt[gt]),this.$=dt[gt];break;case 50:pt.addPersonOrSystem("system_queue",...dt[gt]),this.$=dt[gt];break;case 51:pt.addPersonOrSystem("external_system",...dt[gt]),this.$=dt[gt];break;case 52:pt.addPersonOrSystem("external_system_db",...dt[gt]),this.$=dt[gt];break;case 53:pt.addPersonOrSystem("external_system_queue",...dt[gt]),this.$=dt[gt];break;case 54:pt.addContainer("container",...dt[gt]),this.$=dt[gt];break;case 55:pt.addContainer("container_db",...dt[gt]),this.$=dt[gt];break;case 56:pt.addContainer("container_queue",...dt[gt]),this.$=dt[gt];break;case 57:pt.addContainer("external_container",...dt[gt]),this.$=dt[gt];break;case 58:pt.addContainer("external_container_db",...dt[gt]),this.$=dt[gt];break;case 59:pt.addContainer("external_container_queue",...dt[gt]),this.$=dt[gt];break;case 60:pt.addComponent("component",...dt[gt]),this.$=dt[gt];break;case 61:pt.addComponent("component_db",...dt[gt]),this.$=dt[gt];break;case 62:pt.addComponent("component_queue",...dt[gt]),this.$=dt[gt];break;case 63:pt.addComponent("external_component",...dt[gt]),this.$=dt[gt];break;case 64:pt.addComponent("external_component_db",...dt[gt]),this.$=dt[gt];break;case 65:pt.addComponent("external_component_queue",...dt[gt]),this.$=dt[gt];break;case 67:pt.addRel("rel",...dt[gt]),this.$=dt[gt];break;case 68:pt.addRel("birel",...dt[gt]),this.$=dt[gt];break;case 69:pt.addRel("rel_u",...dt[gt]),this.$=dt[gt];break;case 70:pt.addRel("rel_d",...dt[gt]),this.$=dt[gt];break;case 71:pt.addRel("rel_l",...dt[gt]),this.$=dt[gt];break;case 72:pt.addRel("rel_r",...dt[gt]),this.$=dt[gt];break;case 73:pt.addRel("rel_b",...dt[gt]),this.$=dt[gt];break;case 74:dt[gt].splice(0,1),pt.addRel("rel",...dt[gt]),this.$=dt[gt];break;case 75:pt.updateElStyle("update_el_style",...dt[gt]),this.$=dt[gt];break;case 76:pt.updateRelStyle("update_rel_style",...dt[gt]),this.$=dt[gt];break;case 77:pt.updateLayoutConfig("update_layout_config",...dt[gt]),this.$=dt[gt];break;case 78:this.$=[dt[gt]];break;case 79:dt[gt].unshift(dt[gt-1]),this.$=dt[gt];break;case 80:case 82:this.$=dt[gt].trim();break;case 81:let ie={};ie[dt[gt-1].trim()]=dt[gt].trim(),this.$=ie;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:a,22:o,25:s,26:l,27:u,28:h},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:a,22:o,25:s,26:l,27:u,28:h},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:f},t([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt},{23:79,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt},{23:80,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt},{23:81,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt},{23:82,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},t(Mt,[2,20],{53:32,39:58,40:70,42:71,30:87,44:b,46:k,47:T,48:x,49:A,50:C,51:L,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt}),t(Mt,[2,21]),t(wt,[2,23],{15:[1,88]}),t(Mt,[2,43],{15:[1,89]}),t(Et,[2,26]),t(Et,[2,27]),{35:[1,90]},{37:[1,91]},t(Et,[2,30]),{45:92,85:93,86:bt,87:mt,89:Tt,90:kt},{45:98,85:93,86:bt,87:mt,89:Tt,90:kt},{45:99,85:93,86:bt,87:mt,89:Tt,90:kt},{45:100,85:93,86:bt,87:mt,89:Tt,90:kt},{45:101,85:93,86:bt,87:mt,89:Tt,90:kt},{45:102,85:93,86:bt,87:mt,89:Tt,90:kt},{45:103,85:93,86:bt,87:mt,89:Tt,90:kt},{45:104,85:93,86:bt,87:mt,89:Tt,90:kt},{45:105,85:93,86:bt,87:mt,89:Tt,90:kt},{45:106,85:93,86:bt,87:mt,89:Tt,90:kt},{45:107,85:93,86:bt,87:mt,89:Tt,90:kt},{45:108,85:93,86:bt,87:mt,89:Tt,90:kt},{45:109,85:93,86:bt,87:mt,89:Tt,90:kt},{45:110,85:93,86:bt,87:mt,89:Tt,90:kt},{45:111,85:93,86:bt,87:mt,89:Tt,90:kt},{45:112,85:93,86:bt,87:mt,89:Tt,90:kt},{45:113,85:93,86:bt,87:mt,89:Tt,90:kt},{45:114,85:93,86:bt,87:mt,89:Tt,90:kt},{45:115,85:93,86:bt,87:mt,89:Tt,90:kt},{45:116,85:93,86:bt,87:mt,89:Tt,90:kt},t(st,[2,66]),{45:117,85:93,86:bt,87:mt,89:Tt,90:kt},{45:118,85:93,86:bt,87:mt,89:Tt,90:kt},{45:119,85:93,86:bt,87:mt,89:Tt,90:kt},{45:120,85:93,86:bt,87:mt,89:Tt,90:kt},{45:121,85:93,86:bt,87:mt,89:Tt,90:kt},{45:122,85:93,86:bt,87:mt,89:Tt,90:kt},{45:123,85:93,86:bt,87:mt,89:Tt,90:kt},{45:124,85:93,86:bt,87:mt,89:Tt,90:kt},{45:125,85:93,86:bt,87:mt,89:Tt,90:kt},{45:126,85:93,86:bt,87:mt,89:Tt,90:kt},{45:127,85:93,86:bt,87:mt,89:Tt,90:kt},{30:128,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt},{15:[1,130],43:[1,129]},{45:131,85:93,86:bt,87:mt,89:Tt,90:kt},{45:132,85:93,86:bt,87:mt,89:Tt,90:kt},{45:133,85:93,86:bt,87:mt,89:Tt,90:kt},{45:134,85:93,86:bt,87:mt,89:Tt,90:kt},{45:135,85:93,86:bt,87:mt,89:Tt,90:kt},{45:136,85:93,86:bt,87:mt,89:Tt,90:kt},{45:137,85:93,86:bt,87:mt,89:Tt,90:kt},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},t(Qt,[2,9]),{14:142,21:f},{21:[2,13]},{1:[2,15]},t(Mt,[2,22]),t(wt,[2,24],{31:31,29:143,32:d,33:p,34:m,36:_,38:y}),t(Mt,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:d,33:p,34:m,36:_,38:y,44:b,46:k,47:T,48:x,49:A,50:C,51:L,54:S,55:D,56:v,57:M,58:w,59:I,60:B,61:$,62:F,63:K,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Q,71:q,72:it,73:ut,74:V,75:j,76:P,77:X,78:O,79:G,80:U,81:H,82:xt,83:ot,84:Dt}),t(Et,[2,28]),t(Et,[2,29]),t(st,[2,46]),t($t,[2,78],{85:93,45:145,86:bt,87:mt,89:Tt,90:kt}),t(te,[2,80]),{88:[1,146]},t(te,[2,82]),t(te,[2,83]),t(st,[2,47]),t(st,[2,48]),t(st,[2,49]),t(st,[2,50]),t(st,[2,51]),t(st,[2,52]),t(st,[2,53]),t(st,[2,54]),t(st,[2,55]),t(st,[2,56]),t(st,[2,57]),t(st,[2,58]),t(st,[2,59]),t(st,[2,60]),t(st,[2,61]),t(st,[2,62]),t(st,[2,63]),t(st,[2,64]),t(st,[2,65]),t(st,[2,67]),t(st,[2,68]),t(st,[2,69]),t(st,[2,70]),t(st,[2,71]),t(st,[2,72]),t(st,[2,73]),t(st,[2,74]),t(st,[2,75]),t(st,[2,76]),t(st,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},t(Ht,[2,35]),t(Ht,[2,36]),t(Ht,[2,37]),t(Ht,[2,38]),t(Ht,[2,39]),t(Ht,[2,40]),t(Ht,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},t(wt,[2,25]),t(Mt,[2,45]),t($t,[2,79]),t(te,[2,81]),t(st,[2,31]),t(st,[2,42]),t(qt,[2,32]),t(qt,[2,33],{15:[1,152]}),t(Qt,[2,10]),t(qt,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(Pt,yt){if(yt.recoverable)this.trace(Pt);else{var Ct=new Error(Pt);throw Ct.hash=yt,Ct}},parse:function(Pt){var yt=this,Ct=[0],pt=[],Ft=[null],dt=[],Se=this.table,gt="",ie=0,se=0,ve=2,de=1,be=dt.slice.call(arguments,1),Gt=Object.create(this.lexer),ee={yy:{}};for(var fe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,fe)&&(ee.yy[fe]=this.yy[fe]);Gt.setInput(Pt,ee.yy),ee.yy.lexer=Gt,ee.yy.parser=this,typeof Gt.yylloc>"u"&&(Gt.yylloc={});var ye=Gt.yylloc;dt.push(ye);var pe=Gt.options&&Gt.options.ranges;typeof ee.yy.parseError=="function"?this.parseError=ee.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ma(){var Kt;return Kt=pt.pop()||Gt.lex()||de,typeof Kt!="number"&&(Kt instanceof Array&&(pt=Kt,Kt=pt.pop()),Kt=yt.symbols_[Kt]||Kt),Kt}for(var $e,Pe,Zt,lr,cn={},Je,Ye,tt,Nt;;){if(Pe=Ct[Ct.length-1],this.defaultActions[Pe]?Zt=this.defaultActions[Pe]:(($e===null||typeof $e>"u")&&($e=ma()),Zt=Se[Pe]&&Se[Pe][$e]),typeof Zt>"u"||!Zt.length||!Zt[0]){var At="";Nt=[];for(Je in Se[Pe])this.terminals_[Je]&&Je>ve&&Nt.push("'"+this.terminals_[Je]+"'");Gt.showPosition?At="Parse error on line "+(ie+1)+`:
`+Gt.showPosition()+`
Expecting `+Nt.join(", ")+", got '"+(this.terminals_[$e]||$e)+"'":At="Parse error on line "+(ie+1)+": Unexpected "+($e==de?"end of input":"'"+(this.terminals_[$e]||$e)+"'"),this.parseError(At,{text:Gt.match,token:this.terminals_[$e]||$e,line:Gt.yylineno,loc:ye,expected:Nt})}if(Zt[0]instanceof Array&&Zt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Pe+", token: "+$e);switch(Zt[0]){case 1:Ct.push($e),Ft.push(Gt.yytext),dt.push(Gt.yylloc),Ct.push(Zt[1]),$e=null,se=Gt.yyleng,gt=Gt.yytext,ie=Gt.yylineno,ye=Gt.yylloc;break;case 2:if(Ye=this.productions_[Zt[1]][1],cn.$=Ft[Ft.length-Ye],cn._$={first_line:dt[dt.length-(Ye||1)].first_line,last_line:dt[dt.length-1].last_line,first_column:dt[dt.length-(Ye||1)].first_column,last_column:dt[dt.length-1].last_column},pe&&(cn._$.range=[dt[dt.length-(Ye||1)].range[0],dt[dt.length-1].range[1]]),lr=this.performAction.apply(cn,[gt,se,ie,ee.yy,Zt[1],Ft,dt].concat(be)),typeof lr<"u")return lr;Ye&&(Ct=Ct.slice(0,-1*Ye*2),Ft=Ft.slice(0,-1*Ye),dt=dt.slice(0,-1*Ye)),Ct.push(this.productions_[Zt[1]][0]),Ft.push(cn.$),dt.push(cn._$),tt=Se[Ct[Ct.length-2]][Ct[Ct.length-1]],Ct.push(tt);break;case 3:return!0}}return!0}},Xt=function(){var Pt={EOF:1,parseError:function(yt,Ct){if(this.yy.parser)this.yy.parser.parseError(yt,Ct);else throw new Error(yt)},setInput:function(yt,Ct){return this.yy=Ct||this.yy||{},this._input=yt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var yt=this._input[0];this.yytext+=yt,this.yyleng++,this.offset++,this.match+=yt,this.matched+=yt;var Ct=yt.match(/(?:\r\n?|\n).*/g);return Ct?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),yt},unput:function(yt){var Ct=yt.length,pt=yt.split(/(?:\r\n?|\n)/g);this._input=yt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ct),this.offset-=Ct;var Ft=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pt.length-1&&(this.yylineno-=pt.length-1);var dt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pt?(pt.length===Ft.length?this.yylloc.first_column:0)+Ft[Ft.length-pt.length].length-pt[0].length:this.yylloc.first_column-Ct},this.options.ranges&&(this.yylloc.range=[dt[0],dt[0]+this.yyleng-Ct]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(yt){this.unput(this.match.slice(yt))},pastInput:function(){var yt=this.matched.substr(0,this.matched.length-this.match.length);return(yt.length>20?"...":"")+yt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var yt=this.match;return yt.length<20&&(yt+=this._input.substr(0,20-yt.length)),(yt.substr(0,20)+(yt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var yt=this.pastInput(),Ct=new Array(yt.length+1).join("-");return yt+this.upcomingInput()+`
`+Ct+"^"},test_match:function(yt,Ct){var pt,Ft,dt;if(this.options.backtrack_lexer&&(dt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(dt.yylloc.range=this.yylloc.range.slice(0))),Ft=yt[0].match(/(?:\r\n?|\n).*/g),Ft&&(this.yylineno+=Ft.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ft?Ft[Ft.length-1].length-Ft[Ft.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+yt[0].length},this.yytext+=yt[0],this.match+=yt[0],this.matches=yt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(yt[0].length),this.matched+=yt[0],pt=this.performAction.call(this,this.yy,this,Ct,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pt)return pt;if(this._backtrack){for(var Se in dt)this[Se]=dt[Se];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var yt,Ct,pt,Ft;this._more||(this.yytext="",this.match="");for(var dt=this._currentRules(),Se=0;Se<dt.length;Se++)if(pt=this._input.match(this.rules[dt[Se]]),pt&&(!Ct||pt[0].length>Ct[0].length)){if(Ct=pt,Ft=Se,this.options.backtrack_lexer){if(yt=this.test_match(pt,dt[Se]),yt!==!1)return yt;if(this._backtrack){Ct=!1;continue}else return!1}else if(!this.options.flex)break}return Ct?(yt=this.test_match(Ct,dt[Ft]),yt!==!1?yt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var yt=this.next();return yt||this.lex()},begin:function(yt){this.conditionStack.push(yt)},popState:function(){var yt=this.conditionStack.length-1;return yt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(yt){return yt=this.conditionStack.length-1-Math.abs(yt||0),yt>=0?this.conditionStack[yt]:"INITIAL"},pushState:function(yt){this.begin(yt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(yt,Ct,pt,Ft){switch(pt){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return Pt}();oe.lexer=Xt;function Rt(){this.yy={}}return Rt.prototype=oe,oe.Parser=Rt,new Rt}();zl.parser=zl;const pZ=t=>t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let hi=[],Qa=[""],cr="global",di="",Ni=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],jl=[],pg="",gg=!1,y0=4,m0=2;var X9;const gZ=function(){return X9},yZ=function(t){X9=ri(t,at())},mZ=function(t,e,n){qe.parseDirective(this,t,e,n)},bZ=function(t,e,n,r,i,a,o,s,l){if(t==null||e===void 0||e===null||n===void 0||n===null||r===void 0||r===null)return;let u={};const h=jl.find(f=>f.from===e&&f.to===n);if(h?u=h:jl.push(u),u.type=t,u.from=e,u.to=n,u.label={text:r},i==null)u.techn={text:""};else if(typeof i=="object"){let[f,d]=Object.entries(i)[0];u[f]={text:d}}else u.techn={text:i};if(a==null)u.descr={text:""};else if(typeof a=="object"){let[f,d]=Object.entries(a)[0];u[f]={text:d}}else u.descr={text:a};if(typeof o=="object"){let[f,d]=Object.entries(o)[0];u[f]=d}else u.sprite=o;if(typeof s=="object"){let[f,d]=Object.entries(s)[0];u[f]=d}else u.tags=s;if(typeof l=="object"){let[f,d]=Object.entries(l)[0];u[f]=d}else u.link=l;u.wrap=Ka()},_Z=function(t,e,n,r,i,a,o){if(e===null||n===null)return;let s={};const l=hi.find(u=>u.alias===e);if(l&&e===l.alias?s=l:(s.alias=e,hi.push(s)),n==null?s.label={text:""}:s.label={text:n},r==null)s.descr={text:""};else if(typeof r=="object"){let[u,h]=Object.entries(r)[0];s[u]={text:h}}else s.descr={text:r};if(typeof i=="object"){let[u,h]=Object.entries(i)[0];s[u]=h}else s.sprite=i;if(typeof a=="object"){let[u,h]=Object.entries(a)[0];s[u]=h}else s.tags=a;if(typeof o=="object"){let[u,h]=Object.entries(o)[0];s[u]=h}else s.link=o;s.typeC4Shape={text:t},s.parentBoundary=cr,s.wrap=Ka()},vZ=function(t,e,n,r,i,a,o,s){if(e===null||n===null)return;let l={};const u=hi.find(h=>h.alias===e);if(u&&e===u.alias?l=u:(l.alias=e,hi.push(l)),n==null?l.label={text:""}:l.label={text:n},r==null)l.techn={text:""};else if(typeof r=="object"){let[h,f]=Object.entries(r)[0];l[h]={text:f}}else l.techn={text:r};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof a=="object"){let[h,f]=Object.entries(a)[0];l[h]=f}else l.sprite=a;if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.tags=o;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.link=s;l.wrap=Ka(),l.typeC4Shape={text:t},l.parentBoundary=cr},xZ=function(t,e,n,r,i,a,o,s){if(e===null||n===null)return;let l={};const u=hi.find(h=>h.alias===e);if(u&&e===u.alias?l=u:(l.alias=e,hi.push(l)),n==null?l.label={text:""}:l.label={text:n},r==null)l.techn={text:""};else if(typeof r=="object"){let[h,f]=Object.entries(r)[0];l[h]={text:f}}else l.techn={text:r};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof a=="object"){let[h,f]=Object.entries(a)[0];l[h]=f}else l.sprite=a;if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.tags=o;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.link=s;l.wrap=Ka(),l.typeC4Shape={text:t},l.parentBoundary=cr},kZ=function(t,e,n,r,i){if(t===null||e===null)return;let a={};const o=Ni.find(s=>s.alias===t);if(o&&t===o.alias?a=o:(a.alias=t,Ni.push(a)),e==null?a.label={text:""}:a.label={text:e},n==null)a.type={text:"system"};else if(typeof n=="object"){let[s,l]=Object.entries(n)[0];a[s]={text:l}}else a.type={text:n};if(typeof r=="object"){let[s,l]=Object.entries(r)[0];a[s]=l}else a.tags=r;if(typeof i=="object"){let[s,l]=Object.entries(i)[0];a[s]=l}else a.link=i;a.parentBoundary=cr,a.wrap=Ka(),di=cr,cr=t,Qa.push(di)},wZ=function(t,e,n,r,i){if(t===null||e===null)return;let a={};const o=Ni.find(s=>s.alias===t);if(o&&t===o.alias?a=o:(a.alias=t,Ni.push(a)),e==null?a.label={text:""}:a.label={text:e},n==null)a.type={text:"container"};else if(typeof n=="object"){let[s,l]=Object.entries(n)[0];a[s]={text:l}}else a.type={text:n};if(typeof r=="object"){let[s,l]=Object.entries(r)[0];a[s]=l}else a.tags=r;if(typeof i=="object"){let[s,l]=Object.entries(i)[0];a[s]=l}else a.link=i;a.parentBoundary=cr,a.wrap=Ka(),di=cr,cr=t,Qa.push(di)},TZ=function(t,e,n,r,i,a,o,s){if(e===null||n===null)return;let l={};const u=Ni.find(h=>h.alias===e);if(u&&e===u.alias?l=u:(l.alias=e,Ni.push(l)),n==null?l.label={text:""}:l.label={text:n},r==null)l.type={text:"node"};else if(typeof r=="object"){let[h,f]=Object.entries(r)[0];l[h]={text:f}}else l.type={text:r};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.tags=o;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.link=s;l.nodeType=t,l.parentBoundary=cr,l.wrap=Ka(),di=cr,cr=e,Qa.push(di)},EZ=function(){cr=di,Qa.pop(),di=Qa.pop(),Qa.push(di)},CZ=function(t,e,n,r,i,a,o,s,l,u,h){let f=hi.find(d=>d.alias===e);if(!(f===void 0&&(f=Ni.find(d=>d.alias===e),f===void 0))){if(n!=null)if(typeof n=="object"){let[d,p]=Object.entries(n)[0];f[d]=p}else f.bgColor=n;if(r!=null)if(typeof r=="object"){let[d,p]=Object.entries(r)[0];f[d]=p}else f.fontColor=r;if(i!=null)if(typeof i=="object"){let[d,p]=Object.entries(i)[0];f[d]=p}else f.borderColor=i;if(a!=null)if(typeof a=="object"){let[d,p]=Object.entries(a)[0];f[d]=p}else f.shadowing=a;if(o!=null)if(typeof o=="object"){let[d,p]=Object.entries(o)[0];f[d]=p}else f.shape=o;if(s!=null)if(typeof s=="object"){let[d,p]=Object.entries(s)[0];f[d]=p}else f.sprite=s;if(l!=null)if(typeof l=="object"){let[d,p]=Object.entries(l)[0];f[d]=p}else f.techn=l;if(u!=null)if(typeof u=="object"){let[d,p]=Object.entries(u)[0];f[d]=p}else f.legendText=u;if(h!=null)if(typeof h=="object"){let[d,p]=Object.entries(h)[0];f[d]=p}else f.legendSprite=h}},SZ=function(t,e,n,r,i,a,o){const s=jl.find(l=>l.from===e&&l.to===n);if(s!==void 0){if(r!=null)if(typeof r=="object"){let[l,u]=Object.entries(r)[0];s[l]=u}else s.textColor=r;if(i!=null)if(typeof i=="object"){let[l,u]=Object.entries(i)[0];s[l]=u}else s.lineColor=i;if(a!=null)if(typeof a=="object"){let[l,u]=Object.entries(a)[0];s[l]=parseInt(u)}else s.offsetX=parseInt(a);if(o!=null)if(typeof o=="object"){let[l,u]=Object.entries(o)[0];s[l]=parseInt(u)}else s.offsetY=parseInt(o)}},AZ=function(t,e,n){let r=y0,i=m0;if(typeof e=="object"){const a=Object.values(e)[0];r=parseInt(a)}else r=parseInt(e);if(typeof n=="object"){const a=Object.values(n)[0];i=parseInt(a)}else i=parseInt(n);r>=1&&(y0=r),i>=1&&(m0=i)},MZ=function(){return y0},LZ=function(){return m0},BZ=function(){return cr},NZ=function(){return di},Z9=function(t){return t==null?hi:hi.filter(e=>e.parentBoundary===t)},DZ=function(t){return hi.find(e=>e.alias===t)},OZ=function(t){return Object.keys(Z9(t))},IZ=function(t){return t==null?Ni:Ni.filter(e=>e.parentBoundary===t)},RZ=function(){return jl},FZ=function(){return pg},$Z=function(t){gg=t},Ka=function(){return gg},Q9={addPersonOrSystem:_Z,addPersonOrSystemBoundary:kZ,addContainer:vZ,addContainerBoundary:wZ,addComponent:xZ,addDeploymentNode:TZ,popBoundaryParseStack:EZ,addRel:bZ,updateElStyle:CZ,updateRelStyle:SZ,updateLayoutConfig:AZ,autoWrap:Ka,setWrap:$Z,getC4ShapeArray:Z9,getC4Shape:DZ,getC4ShapeKeys:OZ,getBoundarys:IZ,getCurrentBoundaryParse:BZ,getParentBoundaryParse:NZ,getRels:RZ,getTitle:FZ,getC4Type:gZ,getC4ShapeInRow:MZ,getC4BoundaryInRow:LZ,setAccTitle:$r,getAccTitle:ci,getAccDescription:ui,setAccDescription:li,parseDirective:mZ,getConfig:()=>at().c4,clear:function(){hi=[],Ni=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],di="",cr="global",Qa=[""],jl=[],Qa=[""],pg="",gg=!1,y0=4,m0=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(t){pg=ri(t,at())},setC4Type:yZ},yg=function(t,e){const n=t.append("rect");if(n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),e.attrs!=="undefined"&&e.attrs!==null)for(let r in e.attrs)n.attr(r,e.attrs[r]);return e.class!=="undefined"&&n.attr("class",e.class),n},K9=function(t,e,n,r,i,a){const o=t.append("image");o.attr("width",e),o.attr("height",n),o.attr("x",r),o.attr("y",i);let s=a.startsWith("data:image/png;base64")?a:_i(a);o.attr("xlink:href",s)},PZ=function(t,e,n,r){const i=t.append("use");i.attr("x",e),i.attr("y",n);var a=_i(r);i.attr("xlink:href","#"+a)},J9=function(t,e){let n=0,r=0;const i=e.text.split(he.lineBreakRegex);let a=[],o=0,s=()=>e.y;if(typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0)switch(e.valign){case"top":case"start":s=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":s=()=>Math.round(e.y+(n+r+e.textMargin)/2);break;case"bottom":case"end":s=()=>Math.round(e.y+(n+r+2*e.textMargin)-e.textMargin);break}if(typeof e.anchor<"u"&&typeof e.textMargin<"u"&&typeof e.width<"u")switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="text-after-edge",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="text-before-edge",e.alignmentBaseline="middle";break}for(let l=0;l<i.length;l++){let u=i[l];typeof e.textMargin<"u"&&e.textMargin===0&&typeof e.fontSize<"u"&&(o=l*e.fontSize);const h=t.append("text");if(h.attr("x",e.x),h.attr("y",s()),typeof e.anchor<"u"&&h.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),typeof e.fontFamily<"u"&&h.style("font-family",e.fontFamily),typeof e.fontSize<"u"&&h.style("font-size",e.fontSize),typeof e.fontWeight<"u"&&h.style("font-weight",e.fontWeight),typeof e.fill<"u"&&h.attr("fill",e.fill),typeof e.class<"u"&&h.attr("class",e.class),typeof e.dy<"u"?h.attr("dy",e.dy):o!==0&&h.attr("dy",o),e.tspan){const f=h.append("tspan");f.attr("x",e.x),typeof e.fill<"u"&&f.attr("fill",e.fill),f.text(u)}else h.text(u);typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0&&(r+=(h._groups||h)[0][0].getBBox().height,n=r),a.push(h)}return a},YZ=function(t,e){function n(i,a,o,s,l){return i+","+a+" "+(i+o)+","+a+" "+(i+o)+","+(a+s-l)+" "+(i+o-l*1.2)+","+(a+s)+" "+i+","+(a+s)}const r=t.append("polygon");return r.attr("points",n(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,J9(t,e),r},zZ=(t,e,n)=>{const r=t.append("g");let i=0;for(let a of e){let o=a.textColor?a.textColor:"#444444",s=a.lineColor?a.lineColor:"#444444",l=a.offsetX?parseInt(a.offsetX):0,u=a.offsetY?parseInt(a.offsetY):0,h="";if(i===0){let d=r.append("line");d.attr("x1",a.startPoint.x),d.attr("y1",a.startPoint.y),d.attr("x2",a.endPoint.x),d.attr("y2",a.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",s),d.style("fill","none"),a.type!=="rel_b"&&d.attr("marker-end","url("+h+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&d.attr("marker-start","url("+h+"#arrowend)"),i=-1}else{let d=r.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",s).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",a.startPoint.x).replaceAll("starty",a.startPoint.y).replaceAll("controlx",a.startPoint.x+(a.endPoint.x-a.startPoint.x)/2-(a.endPoint.x-a.startPoint.x)/4).replaceAll("controly",a.startPoint.y+(a.endPoint.y-a.startPoint.y)/2).replaceAll("stopx",a.endPoint.x).replaceAll("stopy",a.endPoint.y)),a.type!=="rel_b"&&d.attr("marker-end","url("+h+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&d.attr("marker-start","url("+h+"#arrowend)")}let f=n.messageFont();ia(n)(a.label.text,r,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+l,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+u,a.label.width,a.label.height,{fill:o},f),a.techn&&a.techn.text!==""&&(f=n.messageFont(),ia(n)("["+a.techn.text+"]",r,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+l,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+n.messageFontSize+5+u,Math.max(a.label.width,a.techn.width),a.techn.height,{fill:o,"font-style":"italic"},f))}},jZ=function(t,e,n){const r=t.append("g");let i=e.bgColor?e.bgColor:"none",a=e.borderColor?e.borderColor:"#444444",o=e.fontColor?e.fontColor:"black",s={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(s={"stroke-width":1});let l={x:e.x,y:e.y,fill:i,stroke:a,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:s};yg(r,l);let u=n.boundaryFont();u.fontWeight="bold",u.fontSize=u.fontSize+2,u.fontColor=o,ia(n)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},u),e.type&&e.type.text!==""&&(u=n.boundaryFont(),u.fontColor=o,ia(n)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},u)),e.descr&&e.descr.text!==""&&(u=n.boundaryFont(),u.fontSize=u.fontSize-2,u.fontColor=o,ia(n)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},u))},UZ=function(t,e,n){let r=e.bgColor?e.bgColor:n[e.typeC4Shape.text+"_bg_color"],i=e.borderColor?e.borderColor:n[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const s=t.append("g");s.attr("class","person-man");const l=tw();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=e.x,l.y=e.y,l.fill=r,l.width=e.width,l.height=e.height,l.style="stroke:"+i+";stroke-width:0.5;",l.rx=2.5,l.ry=2.5,yg(s,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":s.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":s.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=JZ(n,e.typeC4Shape.text);switch(s.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":K9(s,48,48,e.x+e.width/2-24,e.y+e.image.Y,o);break}let h=n[e.typeC4Shape.text+"Font"]();return h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,ia(n)(e.label.text,s,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},h),h=n[e.typeC4Shape.text+"Font"](),h.fontColor=a,e.thchn&&e.thchn.text!==""?ia(n)(e.thchn.text,s,e.x,e.y+e.thchn.Y,e.width,e.height,{fill:a,"font-style":"italic"},h):e.type&&e.type.text!==""&&ia(n)(e.type.text,s,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},h),e.descr&&e.descr.text!==""&&(h=n.personFont(),h.fontColor=a,ia(n)(e.descr.text,s,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},h)),e.height},HZ=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},WZ=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},VZ=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},GZ=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},qZ=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},XZ=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},ZZ=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},QZ=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},KZ=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},tw=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},JZ=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),ia=function(){function t(i,a,o,s,l,u,h){const f=a.append("text").attr("x",o+l/2).attr("y",s+u/2+5).style("text-anchor","middle").text(i);r(f,h)}function e(i,a,o,s,l,u,h,f){const{fontSize:d,fontFamily:p,fontWeight:m}=f,_=i.split(he.lineBreakRegex);for(let y=0;y<_.length;y++){const b=y*d-d*(_.length-1)/2,k=a.append("text").attr("x",o+l/2).attr("y",s).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",m).style("font-family",p);k.append("tspan").attr("dy",b).text(_[y]).attr("alignment-baseline","mathematical"),r(k,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)a.hasOwnProperty(o)&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),Di={drawRect:yg,drawText:J9,drawLabel:YZ,drawBoundary:jZ,drawC4Shape:UZ,drawRels:zZ,drawImage:K9,drawEmbeddedImage:PZ,insertArrowHead:GZ,insertArrowEnd:qZ,insertArrowFilledHead:XZ,insertDynamicNumber:ZZ,insertArrowCrossHead:QZ,insertDatabaseIcon:HZ,insertComputerIcon:WZ,insertClockIcon:VZ,getTextObj:KZ,getNoteRect:tw,sanitizeUrl:_i};let b0=0,_0=0,ew=4,mg=2;zl.yy=Q9;let Vt={};class nw{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,bg(e.db.getConfig())}setData(e,n,r,i){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=n,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=i}updateVal(e,n,r,i){typeof e[n]>"u"?e[n]=r:e[n]=i(r,e[n])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let n=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=n+e.width,i=this.nextData.starty+e.margin*2,a=i+e.height;(n>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>ew)&&(n=this.nextData.startx+e.margin+Vt.nextLinePaddingX,i=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=n+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=a=i+e.height,this.nextData.cnt=1),e.x=n,e.y=i,this.updateVal(this.data,"startx",n,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",a,Math.max),this.updateVal(this.nextData,"startx",n,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",a,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},bg(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const bg=function(t){pn(Vt,t),t.fontFamily&&(Vt.personFontFamily=Vt.systemFontFamily=Vt.messageFontFamily=t.fontFamily),t.fontSize&&(Vt.personFontSize=Vt.systemFontSize=Vt.messageFontSize=t.fontSize),t.fontWeight&&(Vt.personFontWeight=Vt.systemFontWeight=Vt.messageFontWeight=t.fontWeight)},Ul=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),v0=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),tQ=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function fi(t,e,n,r,i){if(!e[t].width)if(n)e[t].text=h9(e[t].text,i,r),e[t].textLines=e[t].text.split(he.lineBreakRegex).length,e[t].width=i,e[t].height=Kp(e[t].text,r);else{let a=e[t].text.split(he.lineBreakRegex);e[t].textLines=a.length;let o=0;e[t].height=0,e[t].width=0;for(let s=0;s<a.length;s++)e[t].width=Math.max(Bi(a[s],r),e[t].width),o=Kp(a[s],r),e[t].height=e[t].height+o}}const rw=function(t,e,n){e.x=n.data.startx,e.y=n.data.starty,e.width=n.data.stopx-n.data.startx,e.height=n.data.stopy-n.data.starty,e.label.y=Vt.c4ShapeMargin-35;let r=e.wrap&&Vt.wrap,i=v0(Vt);i.fontSize=i.fontSize+2,i.fontWeight="bold";let a=Bi(e.label.text,i);fi("label",e,r,i,a),Di.drawBoundary(t,e,Vt)},iw=function(t,e,n,r){let i=0;for(let a=0;a<r.length;a++){i=0;const o=n[r[a]];let s=Ul(Vt,o.typeC4Shape.text);switch(s.fontSize=s.fontSize-2,o.typeC4Shape.width=Bi("<<"+o.typeC4Shape.text+">>",s),o.typeC4Shape.height=s.fontSize+2,o.typeC4Shape.Y=Vt.c4ShapePadding,i=o.typeC4Shape.Y+o.typeC4Shape.height-4,o.image={width:0,height:0,Y:0},o.typeC4Shape.text){case"person":case"external_person":o.image.width=48,o.image.height=48,o.image.Y=i,i=o.image.Y+o.image.height;break}o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=i,i=o.image.Y+o.image.height);let l=o.wrap&&Vt.wrap,u=Vt.width-Vt.c4ShapePadding*2,h=Ul(Vt,o.typeC4Shape.text);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",fi("label",o,l,h,u),o.label.Y=i+8,i=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let p=Ul(Vt,o.typeC4Shape.text);fi("type",o,l,p,u),o.type.Y=i+5,i=o.type.Y+o.type.height}else if(o.techn&&o.techn.text!==""){o.techn.text="["+o.techn.text+"]";let p=Ul(Vt,o.techn.text);fi("techn",o,l,p,u),o.techn.Y=i+5,i=o.techn.Y+o.techn.height}let f=i,d=o.label.width;if(o.descr&&o.descr.text!==""){let p=Ul(Vt,o.typeC4Shape.text);fi("descr",o,l,p,u),o.descr.Y=i+20,i=o.descr.Y+o.descr.height,d=Math.max(o.label.width,o.descr.width),f=i-o.descr.textLines*5}d=d+Vt.c4ShapePadding,o.width=Math.max(o.width||Vt.width,d,Vt.width),o.height=Math.max(o.height||Vt.height,f,Vt.height),o.margin=o.margin||Vt.c4ShapeMargin,t.insert(o),Di.drawC4Shape(e,o,Vt)}t.bumpLastMargin(Vt.c4ShapeMargin)};class Pr{constructor(e,n){this.x=e,this.y=n}}let aw=function(t,e){let n=t.x,r=t.y,i=e.x,a=e.y,o=n+t.width/2,s=r+t.height/2,l=Math.abs(n-i),u=Math.abs(r-a),h=u/l,f=t.height/t.width,d=null;return r==a&&n<i?d=new Pr(n+t.width,s):r==a&&n>i?d=new Pr(n,s):n==i&&r<a?d=new Pr(o,r+t.height):n==i&&r>a&&(d=new Pr(o,r)),n>i&&r<a?f>=h?d=new Pr(n,s+h*t.width/2):d=new Pr(o-l/u*t.height/2,r+t.height):n<i&&r<a?f>=h?d=new Pr(n+t.width,s+h*t.width/2):d=new Pr(o+l/u*t.height/2,r+t.height):n<i&&r>a?f>=h?d=new Pr(n+t.width,s-h*t.width/2):d=new Pr(o+t.height/2*l/u,r):n>i&&r>a&&(f>=h?d=new Pr(n,s-t.width/2*h):d=new Pr(o-t.height/2*l/u,r)),d},eQ=function(t,e){let n={x:0,y:0};n.x=e.x+e.width/2,n.y=e.y+e.height/2;let r=aw(t,n);n.x=t.x+t.width/2,n.y=t.y+t.height/2;let i=aw(e,n);return{startPoint:r,endPoint:i}};const nQ=function(t,e,n,r){let i=0;for(let a of e){i=i+1;let o=a.wrap&&Vt.wrap,s=tQ(Vt);r.db.getC4Type()==="C4Dynamic"&&(a.label.text=i+": "+a.label.text);let l=Bi(a.label.text,s);fi("label",a,o,s,l),a.techn&&a.techn.text!==""&&(l=Bi(a.techn.text,s),fi("techn",a,o,s,l)),a.descr&&a.descr.text!==""&&(l=Bi(a.descr.text,s),fi("descr",a,o,s,l));let u=n(a.from),h=n(a.to),f=eQ(u,h);a.startPoint=f.startPoint,a.endPoint=f.endPoint}Di.drawRels(t,e,Vt)};function ow(t,e,n,r,i){let a=new nw(i);a.data.widthLimit=n.data.widthLimit/Math.min(mg,r.length);for(let o=0;o<r.length;o++){let s=r[o],l=0;s.image={width:0,height:0,Y:0},s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=l,l=s.image.Y+s.image.height);let u=s.wrap&&Vt.wrap,h=v0(Vt);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",fi("label",s,u,h,a.data.widthLimit),s.label.Y=l+8,l=s.label.Y+s.label.height,s.type&&s.type.text!==""){s.type.text="["+s.type.text+"]";let m=v0(Vt);fi("type",s,u,m,a.data.widthLimit),s.type.Y=l+5,l=s.type.Y+s.type.height}if(s.descr&&s.descr.text!==""){let m=v0(Vt);m.fontSize=m.fontSize-2,fi("descr",s,u,m,a.data.widthLimit),s.descr.Y=l+20,l=s.descr.Y+s.descr.height}if(o==0||o%mg===0){let m=n.data.startx+Vt.diagramMarginX,_=n.data.stopy+Vt.diagramMarginY+l;a.setData(m,m,_,_)}else{let m=a.data.stopx!==a.data.startx?a.data.stopx+Vt.diagramMarginX:a.data.startx,_=a.data.starty;a.setData(m,m,_,_)}a.name=s.alias;let f=i.db.getC4ShapeArray(s.alias),d=i.db.getC4ShapeKeys(s.alias);d.length>0&&iw(a,t,f,d),e=s.alias;let p=i.db.getBoundarys(e);p.length>0&&ow(t,e,a,p,i),s.alias!=="global"&&rw(t,s,a),n.data.stopy=Math.max(a.data.stopy+Vt.c4ShapeMargin,n.data.stopy),n.data.stopx=Math.max(a.data.stopx+Vt.c4ShapeMargin,n.data.stopx),b0=Math.max(b0,n.data.stopx),_0=Math.max(_0,n.data.stopy)}}const sw={drawPersonOrSystemArray:iw,drawBoundary:rw,setConf:bg,draw:function(t,e,n,r){Vt=at().c4;const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body");let s=r.db;r.db.setWrap(Vt.wrap),ew=s.getC4ShapeInRow(),mg=s.getC4BoundaryInRow(),W.debug(`C:${JSON.stringify(Vt,null,2)}`);const l=i==="sandbox"?o.select(`[id="${e}"]`):Lt(`[id="${e}"]`);Di.insertComputerIcon(l),Di.insertDatabaseIcon(l),Di.insertClockIcon(l);let u=new nw(r);u.setData(Vt.diagramMarginX,Vt.diagramMarginX,Vt.diagramMarginY,Vt.diagramMarginY),u.data.widthLimit=screen.availWidth,b0=Vt.diagramMarginX,_0=Vt.diagramMarginY;const h=r.db.getTitle();let f=r.db.getBoundarys("");ow(l,"",u,f,r),Di.insertArrowHead(l),Di.insertArrowEnd(l),Di.insertArrowCrossHead(l),Di.insertArrowFilledHead(l),nQ(l,r.db.getRels(),r.db.getC4Shape,r),u.data.stopx=b0,u.data.stopy=_0;const d=u.data;let p=d.stopy-d.starty+2*Vt.diagramMarginY;const m=d.stopx-d.startx+2*Vt.diagramMarginX;h&&l.append("text").text(h).attr("x",(d.stopx-d.startx)/2-4*Vt.diagramMarginX).attr("y",d.starty+Vt.diagramMarginY),oi(l,p,m,Vt.useMaxWidth);const _=h?60:0;l.attr("viewBox",d.startx-Vt.diagramMarginX+" -"+(Vt.diagramMarginY+_)+" "+m+" "+(p+_)),yr(zl.yy,l,e),W.debug("models:",d)}};var x0=function(){var t=function(V,j,P,X){for(P=P||{},X=V.length;X--;P[V[X]]=j);return P},e=[1,3],n=[1,7],r=[1,8],i=[1,9],a=[1,10],o=[1,13],s=[1,12],l=[1,16,25],u=[1,20],h=[1,31],f=[1,32],d=[1,33],p=[1,35],m=[1,38],_=[1,36],y=[1,37],b=[1,39],k=[1,40],T=[1,41],x=[1,42],A=[1,45],C=[1,46],L=[1,47],S=[1,48],D=[16,25],v=[1,62],M=[1,63],w=[1,64],I=[1,65],B=[1,66],$=[1,67],F=[1,68],K=[16,25,32,44,45,53,56,57,58,59,60,61,62,67,69],nt=[16,25,30,32,44,45,49,53,56,57,58,59,60,61,62,67,69,84,85,86,87],z=[5,8,9,10,11,16,19,23,25],Y=[53,84,85,86,87],rt=[53,61,62,84,85,86,87],lt=[53,56,57,58,59,60,84,85,86,87],J=[16,25,32],Q=[1,100],q={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,acc_title:38,acc_title_value:39,acc_descr:40,acc_descr_value:41,acc_descr_multiline_value:42,CLASS:43,STYLE_SEPARATOR:44,STRUCT_START:45,members:46,STRUCT_STOP:47,ANNOTATION_START:48,ANNOTATION_END:49,MEMBER:50,SEPARATOR:51,relation:52,STR:53,relationType:54,lineType:55,AGGREGATION:56,EXTENSION:57,COMPOSITION:58,DEPENDENCY:59,LOLLIPOP:60,LINE:61,DOTTED_LINE:62,CALLBACK:63,LINK:64,LINK_TARGET:65,CLICK:66,CALLBACK_NAME:67,CALLBACK_ARGS:68,HREF:69,CSSCLASS:70,commentToken:71,textToken:72,graphCodeTokens:73,textNoTagsToken:74,TAGSTART:75,TAGEND:76,"==":77,"--":78,PCT:79,DEFAULT:80,SPACE:81,MINUS:82,keywords:83,UNICODE_TEXT:84,NUM:85,ALPHA:86,BQUOTE_STR:87,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",38:"acc_title",39:"acc_title_value",40:"acc_descr",41:"acc_descr_value",42:"acc_descr_multiline_value",43:"CLASS",44:"STYLE_SEPARATOR",45:"STRUCT_START",47:"STRUCT_STOP",48:"ANNOTATION_START",49:"ANNOTATION_END",50:"MEMBER",51:"SEPARATOR",53:"STR",56:"AGGREGATION",57:"EXTENSION",58:"COMPOSITION",59:"DEPENDENCY",60:"LOLLIPOP",61:"LINE",62:"DOTTED_LINE",63:"CALLBACK",64:"LINK",65:"LINK_TARGET",66:"CLICK",67:"CALLBACK_NAME",68:"CALLBACK_ARGS",69:"HREF",70:"CSSCLASS",73:"graphCodeTokens",75:"TAGSTART",76:"TAGEND",77:"==",78:"--",79:"PCT",80:"DEFAULT",81:"SPACE",82:"MINUS",83:"keywords",84:"UNICODE_TEXT",85:"NUM",86:"ALPHA",87:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[46,1],[46,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[52,3],[52,2],[52,2],[52,1],[54,1],[54,1],[54,1],[54,1],[54,1],[55,1],[55,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[71,1],[71,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[74,1],[74,1],[74,1],[74,1],[28,1],[28,1],[28,1],[29,1]],performAction:function(V,j,P,X,O,G,U){var H=G.length-1;switch(O){case 5:X.setDirection("TB");break;case 6:X.setDirection("BT");break;case 7:X.setDirection("RL");break;case 8:X.setDirection("LR");break;case 12:X.parseDirective("%%{","open_directive");break;case 13:X.parseDirective(G[H],"type_directive");break;case 14:G[H]=G[H].trim().replace(/'/g,'"'),X.parseDirective(G[H],"arg_directive");break;case 15:X.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=G[H];break;case 22:this.$=G[H-1]+G[H];break;case 23:case 24:this.$=G[H-1]+"~"+G[H];break;case 25:X.addRelation(G[H]);break;case 26:G[H-1].title=X.cleanupLabel(G[H]),X.addRelation(G[H-1]);break;case 34:this.$=G[H].trim(),X.setAccTitle(this.$);break;case 35:case 36:this.$=G[H].trim(),X.setAccDescription(this.$);break;case 37:X.addClass(G[H]);break;case 38:X.addClass(G[H-2]),X.setCssClass(G[H-2],G[H]);break;case 39:X.addClass(G[H-3]),X.addMembers(G[H-3],G[H-1]);break;case 40:X.addClass(G[H-5]),X.setCssClass(G[H-5],G[H-3]),X.addMembers(G[H-5],G[H-1]);break;case 41:X.addAnnotation(G[H],G[H-2]);break;case 42:this.$=[G[H]];break;case 43:G[H].push(G[H-1]),this.$=G[H];break;case 44:break;case 45:X.addMember(G[H-1],X.cleanupLabel(G[H]));break;case 46:break;case 47:break;case 48:this.$={id1:G[H-2],id2:G[H],relation:G[H-1],relationTitle1:"none",relationTitle2:"none"};break;case 49:this.$={id1:G[H-3],id2:G[H],relation:G[H-1],relationTitle1:G[H-2],relationTitle2:"none"};break;case 50:this.$={id1:G[H-3],id2:G[H],relation:G[H-2],relationTitle1:"none",relationTitle2:G[H-1]};break;case 51:this.$={id1:G[H-4],id2:G[H],relation:G[H-2],relationTitle1:G[H-3],relationTitle2:G[H-1]};break;case 52:this.$={type1:G[H-2],type2:G[H],lineType:G[H-1]};break;case 53:this.$={type1:"none",type2:G[H],lineType:G[H-1]};break;case 54:this.$={type1:G[H-1],type2:"none",lineType:G[H]};break;case 55:this.$={type1:"none",type2:"none",lineType:G[H]};break;case 56:this.$=X.relationType.AGGREGATION;break;case 57:this.$=X.relationType.EXTENSION;break;case 58:this.$=X.relationType.COMPOSITION;break;case 59:this.$=X.relationType.DEPENDENCY;break;case 60:this.$=X.relationType.LOLLIPOP;break;case 61:this.$=X.lineType.LINE;break;case 62:this.$=X.lineType.DOTTED_LINE;break;case 63:case 69:this.$=G[H-2],X.setClickEvent(G[H-1],G[H]);break;case 64:case 70:this.$=G[H-3],X.setClickEvent(G[H-2],G[H-1]),X.setTooltip(G[H-2],G[H]);break;case 65:case 73:this.$=G[H-2],X.setLink(G[H-1],G[H]);break;case 66:this.$=G[H-3],X.setLink(G[H-2],G[H-1],G[H]);break;case 67:case 75:this.$=G[H-3],X.setLink(G[H-2],G[H-1]),X.setTooltip(G[H-2],G[H]);break;case 68:case 76:this.$=G[H-4],X.setLink(G[H-3],G[H-2],G[H]),X.setTooltip(G[H-3],G[H-1]);break;case 71:this.$=G[H-3],X.setClickEvent(G[H-2],G[H-1],G[H]);break;case 72:this.$=G[H-4],X.setClickEvent(G[H-3],G[H-2],G[H-1]),X.setTooltip(G[H-3],G[H]);break;case 74:this.$=G[H-3],X.setLink(G[H-2],G[H-1],G[H]);break;case 77:X.setCssClass(G[H-1],G[H]);break}},table:[{3:1,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:a,12:6,13:11,19:o,23:s},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:a,12:6,13:11,19:o,23:s},{1:[2,9]},t(l,[2,5]),t(l,[2,6]),t(l,[2,7]),t(l,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:u},t([17,22],[2,13]),{6:30,7:29,8:n,9:r,10:i,11:a,13:11,19:o,24:21,26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:h,40:f,42:d,43:p,48:m,50:_,51:y,63:b,64:k,66:T,70:x,84:A,85:C,86:L,87:S},{16:[1,49]},{18:50,21:[1,51]},{16:[2,15]},{25:[1,52]},{16:[1,53],25:[2,17]},t(D,[2,25],{32:[1,54]}),t(D,[2,27]),t(D,[2,28]),t(D,[2,29]),t(D,[2,30]),t(D,[2,31]),t(D,[2,32]),t(D,[2,33]),{39:[1,55]},{41:[1,56]},t(D,[2,36]),t(D,[2,44],{52:57,54:60,55:61,32:[1,59],53:[1,58],56:v,57:M,58:w,59:I,60:B,61:$,62:F}),{27:69,28:43,29:44,84:A,85:C,86:L,87:S},t(D,[2,46]),t(D,[2,47]),{28:70,84:A,85:C,86:L},{27:71,28:43,29:44,84:A,85:C,86:L,87:S},{27:72,28:43,29:44,84:A,85:C,86:L,87:S},{27:73,28:43,29:44,84:A,85:C,86:L,87:S},{53:[1,74]},t(K,[2,20],{28:43,29:44,27:75,30:[1,76],84:A,85:C,86:L,87:S}),t(K,[2,21],{30:[1,77]}),t(nt,[2,91]),t(nt,[2,92]),t(nt,[2,93]),t([16,25,30,32,44,45,53,56,57,58,59,60,61,62,67,69],[2,94]),t(z,[2,10]),{15:78,22:u},{22:[2,14]},{1:[2,16]},{6:30,7:29,8:n,9:r,10:i,11:a,13:11,19:o,24:79,25:[2,18],26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:h,40:f,42:d,43:p,48:m,50:_,51:y,63:b,64:k,66:T,70:x,84:A,85:C,86:L,87:S},t(D,[2,26]),t(D,[2,34]),t(D,[2,35]),{27:80,28:43,29:44,53:[1,81],84:A,85:C,86:L,87:S},{52:82,54:60,55:61,56:v,57:M,58:w,59:I,60:B,61:$,62:F},t(D,[2,45]),{55:83,61:$,62:F},t(Y,[2,55],{54:84,56:v,57:M,58:w,59:I,60:B}),t(rt,[2,56]),t(rt,[2,57]),t(rt,[2,58]),t(rt,[2,59]),t(rt,[2,60]),t(lt,[2,61]),t(lt,[2,62]),t(D,[2,37],{44:[1,85],45:[1,86]}),{49:[1,87]},{53:[1,88]},{53:[1,89]},{67:[1,90],69:[1,91]},{28:92,84:A,85:C,86:L},t(K,[2,22]),t(K,[2,23]),t(K,[2,24]),{16:[1,93]},{25:[2,19]},t(J,[2,48]),{27:94,28:43,29:44,84:A,85:C,86:L,87:S},{27:95,28:43,29:44,53:[1,96],84:A,85:C,86:L,87:S},t(Y,[2,54],{54:97,56:v,57:M,58:w,59:I,60:B}),t(Y,[2,53]),{28:98,84:A,85:C,86:L},{46:99,50:Q},{27:101,28:43,29:44,84:A,85:C,86:L,87:S},t(D,[2,63],{53:[1,102]}),t(D,[2,65],{53:[1,104],65:[1,103]}),t(D,[2,69],{53:[1,105],68:[1,106]}),t(D,[2,73],{53:[1,108],65:[1,107]}),t(D,[2,77]),t(z,[2,11]),t(J,[2,50]),t(J,[2,49]),{27:109,28:43,29:44,84:A,85:C,86:L,87:S},t(Y,[2,52]),t(D,[2,38],{45:[1,110]}),{47:[1,111]},{46:112,47:[2,42],50:Q},t(D,[2,41]),t(D,[2,64]),t(D,[2,66]),t(D,[2,67],{65:[1,113]}),t(D,[2,70]),t(D,[2,71],{53:[1,114]}),t(D,[2,74]),t(D,[2,75],{65:[1,115]}),t(J,[2,51]),{46:116,50:Q},t(D,[2,39]),{47:[2,43]},t(D,[2,68]),t(D,[2,72]),t(D,[2,76]),{47:[1,117]},t(D,[2,40])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],51:[2,14],52:[2,16],79:[2,19],112:[2,43]},parseError:function(V,j){if(j.recoverable)this.trace(V);else{var P=new Error(V);throw P.hash=j,P}},parse:function(V){var j=this,P=[0],X=[],O=[null],G=[],U=this.table,H="",xt=0,ot=0,Dt=2,Mt=1,wt=G.slice.call(arguments,1),Et=Object.create(this.lexer),bt={yy:{}};for(var mt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mt)&&(bt.yy[mt]=this.yy[mt]);Et.setInput(V,bt.yy),bt.yy.lexer=Et,bt.yy.parser=this,typeof Et.yylloc>"u"&&(Et.yylloc={});var Tt=Et.yylloc;G.push(Tt);var kt=Et.options&&Et.options.ranges;typeof bt.yy.parseError=="function"?this.parseError=bt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var Ct;return Ct=X.pop()||Et.lex()||Mt,typeof Ct!="number"&&(Ct instanceof Array&&(X=Ct,Ct=X.pop()),Ct=j.symbols_[Ct]||Ct),Ct}for(var Qt,$t,te,Ht,qt={},oe,Xt,Rt,Pt;;){if($t=P[P.length-1],this.defaultActions[$t]?te=this.defaultActions[$t]:((Qt===null||typeof Qt>"u")&&(Qt=st()),te=U[$t]&&U[$t][Qt]),typeof te>"u"||!te.length||!te[0]){var yt="";Pt=[];for(oe in U[$t])this.terminals_[oe]&&oe>Dt&&Pt.push("'"+this.terminals_[oe]+"'");Et.showPosition?yt="Parse error on line "+(xt+1)+`:
`+Et.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[Qt]||Qt)+"'":yt="Parse error on line "+(xt+1)+": Unexpected "+(Qt==Mt?"end of input":"'"+(this.terminals_[Qt]||Qt)+"'"),this.parseError(yt,{text:Et.match,token:this.terminals_[Qt]||Qt,line:Et.yylineno,loc:Tt,expected:Pt})}if(te[0]instanceof Array&&te.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$t+", token: "+Qt);switch(te[0]){case 1:P.push(Qt),O.push(Et.yytext),G.push(Et.yylloc),P.push(te[1]),Qt=null,ot=Et.yyleng,H=Et.yytext,xt=Et.yylineno,Tt=Et.yylloc;break;case 2:if(Xt=this.productions_[te[1]][1],qt.$=O[O.length-Xt],qt._$={first_line:G[G.length-(Xt||1)].first_line,last_line:G[G.length-1].last_line,first_column:G[G.length-(Xt||1)].first_column,last_column:G[G.length-1].last_column},kt&&(qt._$.range=[G[G.length-(Xt||1)].range[0],G[G.length-1].range[1]]),Ht=this.performAction.apply(qt,[H,ot,xt,bt.yy,te[1],O,G].concat(wt)),typeof Ht<"u")return Ht;Xt&&(P=P.slice(0,-1*Xt*2),O=O.slice(0,-1*Xt),G=G.slice(0,-1*Xt)),P.push(this.productions_[te[1]][0]),O.push(qt.$),G.push(qt._$),Rt=U[P[P.length-2]][P[P.length-1]],P.push(Rt);break;case 3:return!0}}return!0}},it=function(){var V={EOF:1,parseError:function(j,P){if(this.yy.parser)this.yy.parser.parseError(j,P);else throw new Error(j)},setInput:function(j,P){return this.yy=P||this.yy||{},this._input=j,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var j=this._input[0];this.yytext+=j,this.yyleng++,this.offset++,this.match+=j,this.matched+=j;var P=j.match(/(?:\r\n?|\n).*/g);return P?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),j},unput:function(j){var P=j.length,X=j.split(/(?:\r\n?|\n)/g);this._input=j+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-P),this.offset-=P;var O=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),X.length-1&&(this.yylineno-=X.length-1);var G=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:X?(X.length===O.length?this.yylloc.first_column:0)+O[O.length-X.length].length-X[0].length:this.yylloc.first_column-P},this.options.ranges&&(this.yylloc.range=[G[0],G[0]+this.yyleng-P]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(j){this.unput(this.match.slice(j))},pastInput:function(){var j=this.matched.substr(0,this.matched.length-this.match.length);return(j.length>20?"...":"")+j.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var j=this.match;return j.length<20&&(j+=this._input.substr(0,20-j.length)),(j.substr(0,20)+(j.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var j=this.pastInput(),P=new Array(j.length+1).join("-");return j+this.upcomingInput()+`
`+P+"^"},test_match:function(j,P){var X,O,G;if(this.options.backtrack_lexer&&(G={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(G.yylloc.range=this.yylloc.range.slice(0))),O=j[0].match(/(?:\r\n?|\n).*/g),O&&(this.yylineno+=O.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:O?O[O.length-1].length-O[O.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+j[0].length},this.yytext+=j[0],this.match+=j[0],this.matches=j,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(j[0].length),this.matched+=j[0],X=this.performAction.call(this,this.yy,this,P,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),X)return X;if(this._backtrack){for(var U in G)this[U]=G[U];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var j,P,X,O;this._more||(this.yytext="",this.match="");for(var G=this._currentRules(),U=0;U<G.length;U++)if(X=this._input.match(this.rules[G[U]]),X&&(!P||X[0].length>P[0].length)){if(P=X,O=U,this.options.backtrack_lexer){if(j=this.test_match(X,G[U]),j!==!1)return j;if(this._backtrack){P=!1;continue}else return!1}else if(!this.options.flex)break}return P?(j=this.test_match(P,G[O]),j!==!1?j:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var j=this.next();return j||this.lex()},begin:function(j){this.conditionStack.push(j)},popState:function(){var j=this.conditionStack.length-1;return j>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(j){return j=this.conditionStack.length-1-Math.abs(j||0),j>=0?this.conditionStack[j]:"INITIAL"},pushState:function(j){this.begin(j)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(j,P,X,O){switch(X){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),38;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),40;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),45;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),47;case 27:break;case 28:return"MEMBER";case 29:return 43;case 30:return 70;case 31:return 63;case 32:return 64;case 33:return 66;case 34:return 48;case 35:return 49;case 36:this.begin("generic");break;case 37:this.popState();break;case 38:return"GENERICTYPE";case 39:this.begin("string");break;case 40:this.popState();break;case 41:return"STR";case 42:this.begin("bqstring");break;case 43:this.popState();break;case 44:return"BQUOTE_STR";case 45:this.begin("href");break;case 46:this.popState();break;case 47:return 69;case 48:this.begin("callback_name");break;case 49:this.popState();break;case 50:this.popState(),this.begin("callback_args");break;case 51:return 67;case 52:this.popState();break;case 53:return 68;case 54:return 65;case 55:return 65;case 56:return 65;case 57:return 65;case 58:return 57;case 59:return 57;case 60:return 59;case 61:return 59;case 62:return 58;case 63:return 56;case 64:return 60;case 65:return 61;case 66:return 62;case 67:return 32;case 68:return 44;case 69:return 82;case 70:return"DOT";case 71:return"PLUS";case 72:return 79;case 73:return"EQUALS";case 74:return"EQUALS";case 75:return 86;case 76:return"PUNCTUATION";case 77:return 85;case 78:return 84;case 79:return 81;case 80:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[52,53],inclusive:!1},callback_name:{rules:[49,50,51],inclusive:!1},href:{rules:[46,47],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[37,38],inclusive:!1},bqstring:{rules:[43,44],inclusive:!1},string:{rules:[40,41],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,39,42,45,48,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],inclusive:!0}}};return V}();q.lexer=it;function ut(){this.yy={}}return ut.prototype=q,q.Parser=ut,new ut}();x0.parser=x0;const rQ=(t,e)=>{var n;return((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*classDiagram/)!==null},iQ=(t,e)=>{var n;return t.match(/^\s*classDiagram/)!==null&&((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:t.match(/^\s*classDiagram-v2/)!==null},_g="classid-";let vg=[],ln={},cw=0,Hl=[];const Wl=t=>he.sanitizeText(t,at()),aQ=function(t,e,n){qe.parseDirective(this,t,e,n)},Vl=function(t){let e="",n=t;if(t.indexOf("~")>0){let r=t.split("~");n=r[0],e=he.sanitizeText(r[1],at())}return{className:n,type:e}},xg=function(t){let e=Vl(t);typeof ln[e.className]<"u"||(ln[e.className]={id:e.className,type:e.type,cssClasses:[],methods:[],members:[],annotations:[],domId:_g+e.className+"-"+cw},cw++)},lw=function(t){const e=Object.keys(ln);for(let n=0;n<e.length;n++)if(ln[e[n]].id===t)return ln[e[n]].domId},oQ=function(){vg=[],ln={},Hl=[],Hl.push(hw),si()},sQ=function(t){return ln[t]},cQ=function(){return ln},lQ=function(){return vg},uQ=function(t){W.debug("Adding relation: "+JSON.stringify(t)),xg(t.id1),xg(t.id2),t.id1=Vl(t.id1).className,t.id2=Vl(t.id2).className,t.relationTitle1=he.sanitizeText(t.relationTitle1.trim(),at()),t.relationTitle2=he.sanitizeText(t.relationTitle2.trim(),at()),vg.push(t)},hQ=function(t,e){const n=Vl(t).className;ln[n].annotations.push(e)},uw=function(t,e){const n=Vl(t).className,r=ln[n];if(typeof e=="string"){const i=e.trim();i.startsWith("<<")&&i.endsWith(">>")?r.annotations.push(Wl(i.substring(2,i.length-2))):i.indexOf(")")>0?r.methods.push(Wl(i)):i&&r.members.push(Wl(i))}},dQ=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(n=>uw(t,n)))},fQ=function(t){return t.substring(0,1)===":"?he.sanitizeText(t.substr(1).trim(),at()):Wl(t.trim())},kg=function(t,e){t.split(",").forEach(function(n){let r=n;n[0].match(/\d/)&&(r=_g+r),typeof ln[r]<"u"&&ln[r].cssClasses.push(e)})},pQ=function(t,e){const n=at();t.split(",").forEach(function(r){typeof e<"u"&&(ln[r].tooltip=he.sanitizeText(e,n))})},gQ=function(t){return ln[t].tooltip},yQ=function(t,e,n){const r=at();t.split(",").forEach(function(i){let a=i;i[0].match(/\d/)&&(a=_g+a),typeof ln[a]<"u"&&(ln[a].link=we.formatUrl(e,r),r.securityLevel==="sandbox"?ln[a].linkTarget="_top":typeof n=="string"?ln[a].linkTarget=Wl(n):ln[a].linkTarget="_blank")}),kg(t,"clickable")},mQ=function(t,e,n){t.split(",").forEach(function(r){bQ(r,e,n),ln[r].haveCallback=!0}),kg(t,"clickable")},bQ=function(t,e,n){const r=at();let i=t,a=lw(i);if(r.securityLevel==="loose"&&!(typeof e>"u")&&typeof ln[i]<"u"){let o=[];if(typeof n=="string"){o=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let s=0;s<o.length;s++){let l=o[s].trim();l.charAt(0)==='"'&&l.charAt(l.length-1)==='"'&&(l=l.substr(1,l.length-2)),o[s]=l}}o.length===0&&o.push(a),Hl.push(function(){const s=document.querySelector(`[id="${a}"]`);s!==null&&s.addEventListener("click",function(){we.runFunc(e,...o)},!1)})}},_Q=function(t){Hl.forEach(function(e){e(t)})},vQ={LINE:0,DOTTED_LINE:1},xQ={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},hw=function(t){let e=Lt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=Lt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Lt(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=Lt(this);if(n.attr("title")===null)return;const r=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+r.left+(r.right-r.left)/2+"px").style("top",window.scrollY+r.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),Lt(this).classed("hover",!1)})};Hl.push(hw);let dw="TB";const Ks={parseDirective:aQ,setAccTitle:$r,getAccTitle:ci,getAccDescription:ui,setAccDescription:li,getConfig:()=>at().class,addClass:xg,bindFunctions:_Q,clear:oQ,getClass:sQ,getClasses:cQ,addAnnotation:hQ,getRelations:lQ,addRelation:uQ,getDirection:()=>dw,setDirection:t=>{dw=t},addMember:uw,addMembers:dQ,cleanupLabel:fQ,lineType:vQ,relationType:xQ,setClickEvent:mQ,setCssClass:kg,setLink:yQ,getTooltip:gQ,setTooltip:pQ,lookUpDomId:lw};var wg,fw;function kQ(){if(fw)return wg;fw=1;var t=V1;function e(){this.__data__=new t,this.size=0}return wg=e,wg}var Tg,pw;function wQ(){if(pw)return Tg;pw=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Tg=t,Tg}var Eg,gw;function TQ(){if(gw)return Eg;gw=1;function t(e){return this.__data__.get(e)}return Eg=t,Eg}var Cg,yw;function EQ(){if(yw)return Cg;yw=1;function t(e){return this.__data__.has(e)}return Cg=t,Cg}var Sg,mw;function CQ(){if(mw)return Sg;mw=1;var t=V1,e=qp,n=Xp,r=200;function i(a,o){var s=this.__data__;if(s instanceof t){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new n(l)}return s.set(a,o),this.size=s.size,this}return Sg=i,Sg}var Ag,bw;function k0(){if(bw)return Ag;bw=1;var t=V1,e=kQ(),n=wQ(),r=TQ(),i=EQ(),a=CQ();function o(s){var l=this.__data__=new t(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,Ag=o,Ag}var Mg,_w;function Lg(){if(_w)return Mg;_w=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Mg=t,Mg}var Bg,vw;function xw(){if(vw)return Bg;vw=1;var t=Yo,e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Bg=e,Bg}var Ng,kw;function w0(){if(kw)return Ng;kw=1;var t=xw();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Ng=e,Ng}var Dg,ww;function T0(){if(ww)return Dg;ww=1;var t=w0(),e=Us,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s){var l=a[o];(!(r.call(a,o)&&e(l,s))||s===void 0&&!(o in a))&&t(a,o,s)}return Dg=i,Dg}var Og,Tw;function Gl(){if(Tw)return Og;Tw=1;var t=T0(),e=w0();function n(r,i,a,o){var s=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var h=i[l],f=o?o(a[h],r[h],h,a,r):void 0;f===void 0&&(f=r[h]),s?e(a,h,f):t(a,h,f)}return a}return Og=n,Og}var Ig,Ew;function SQ(){if(Ew)return Ig;Ew=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return Ig=t,Ig}var Rg,Cw;function Oi(){if(Cw)return Rg;Cw=1;function t(e){return e!=null&&typeof e=="object"}return Rg=t,Rg}var Fg,Sw;function AQ(){if(Sw)return Fg;Sw=1;var t=Po,e=Oi(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return Fg=r,Fg}var $g,Aw;function ql(){if(Aw)return $g;Aw=1;var t=AQ(),e=Oi(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return $g=a,$g}var Pg,Mw;function mn(){if(Mw)return Pg;Mw=1;var t=Array.isArray;return Pg=t,Pg}var Yg={exports:{}},zg,Lw;function MQ(){if(Lw)return zg;Lw=1;function t(){return!1}return zg=t,zg}var Bw;function Js(){return Bw||(Bw=1,function(t,e){var n=ii,r=MQ(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u}(Yg,Yg.exports)),Yg.exports}var jg,Nw;function E0(){if(Nw)return jg;Nw=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i==null?t:i,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return jg=n,jg}var Ug,Dw;function Hg(){if(Dw)return Ug;Dw=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Ug=e,Ug}var Wg,Ow;function LQ(){if(Ow)return Wg;Ow=1;var t=Po,e=Hg(),n=Oi(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",u="[object Map]",h="[object Number]",f="[object Object]",d="[object RegExp]",p="[object Set]",m="[object String]",_="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",k="[object Float32Array]",T="[object Float64Array]",x="[object Int8Array]",A="[object Int16Array]",C="[object Int32Array]",L="[object Uint8Array]",S="[object Uint8ClampedArray]",D="[object Uint16Array]",v="[object Uint32Array]",M={};M[k]=M[T]=M[x]=M[A]=M[C]=M[L]=M[S]=M[D]=M[v]=!0,M[r]=M[i]=M[y]=M[a]=M[b]=M[o]=M[s]=M[l]=M[u]=M[h]=M[f]=M[d]=M[p]=M[m]=M[_]=!1;function w(I){return n(I)&&e(I.length)&&!!M[t(I)]}return Wg=w,Wg}var Vg,Iw;function C0(){if(Iw)return Vg;Iw=1;function t(e){return function(n){return e(n)}}return Vg=t,Vg}var Gg={exports:{}},Rw;function qg(){return Rw||(Rw=1,function(t,e){var n=Qk,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s}(Gg,Gg.exports)),Gg.exports}var Xg,Fw;function Xl(){if(Fw)return Xg;Fw=1;var t=LQ(),e=C0(),n=qg(),r=n&&n.isTypedArray,i=r?e(r):t;return Xg=i,Xg}var Zg,$w;function Pw(){if($w)return Zg;$w=1;var t=SQ(),e=ql(),n=mn(),r=Js(),i=E0(),a=Xl(),o=Object.prototype,s=o.hasOwnProperty;function l(u,h){var f=n(u),d=!f&&e(u),p=!f&&!d&&r(u),m=!f&&!d&&!p&&a(u),_=f||d||p||m,y=_?t(u.length,String):[],b=y.length;for(var k in u)(h||s.call(u,k))&&!(_&&(k=="length"||p&&(k=="offset"||k=="parent")||m&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,b)))&&y.push(k);return y}return Zg=l,Zg}var Qg,Yw;function S0(){if(Yw)return Qg;Yw=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return Qg=e,Qg}var Kg,zw;function jw(){if(zw)return Kg;zw=1;function t(e,n){return function(r){return e(n(r))}}return Kg=t,Kg}var Jg,Uw;function BQ(){if(Uw)return Jg;Uw=1;var t=jw(),e=t(Object.keys,Object);return Jg=e,Jg}var ty,Hw;function ey(){if(Hw)return ty;Hw=1;var t=S0(),e=BQ(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return ty=i,ty}var ny,Ww;function aa(){if(Ww)return ny;Ww=1;var t=zs,e=Hg();function n(r){return r!=null&&e(r.length)&&!t(r)}return ny=n,ny}var ry,Vw;function Ja(){if(Vw)return ry;Vw=1;var t=Pw(),e=ey(),n=aa();function r(i){return n(i)?t(i):e(i)}return ry=r,ry}var iy,Gw;function NQ(){if(Gw)return iy;Gw=1;var t=Gl(),e=Ja();function n(r,i){return r&&t(i,e(i),r)}return iy=n,iy}var ay,qw;function DQ(){if(qw)return ay;qw=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return ay=t,ay}var oy,Xw;function OQ(){if(Xw)return oy;Xw=1;var t=Rr,e=S0(),n=DQ(),r=Object.prototype,i=r.hasOwnProperty;function a(o){if(!t(o))return n(o);var s=e(o),l=[];for(var u in o)u=="constructor"&&(s||!i.call(o,u))||l.push(u);return l}return oy=a,oy}var sy,Zw;function Wo(){if(Zw)return sy;Zw=1;var t=Pw(),e=OQ(),n=aa();function r(i){return n(i)?t(i,!0):e(i)}return sy=r,sy}var cy,Qw;function IQ(){if(Qw)return cy;Qw=1;var t=Gl(),e=Wo();function n(r,i){return r&&t(i,e(i),r)}return cy=n,cy}var ly={exports:{}},Kw;function Jw(){return Kw||(Kw=1,function(t,e){var n=ii,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(u,h){if(h)return u.slice();var f=u.length,d=s?s(f):new u.constructor(f);return u.copy(d),d}t.exports=l}(ly,ly.exports)),ly.exports}var uy,tT;function eT(){if(tT)return uy;tT=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return uy=t,uy}var hy,nT;function rT(){if(nT)return hy;nT=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];n(s,r,e)&&(o[a++]=s)}return o}return hy=t,hy}var dy,iT;function aT(){if(iT)return dy;iT=1;function t(){return[]}return dy=t,dy}var fy,oT;function py(){if(oT)return fy;oT=1;var t=rT(),e=aT(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(s){return r.call(o,s)}))}:e;return fy=a,fy}var gy,sT;function RQ(){if(sT)return gy;sT=1;var t=Gl(),e=py();function n(r,i){return t(r,e(r),i)}return gy=n,gy}var yy,cT;function my(){if(cT)return yy;cT=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return yy=t,yy}var by,lT;function A0(){if(lT)return by;lT=1;var t=jw(),e=t(Object.getPrototypeOf,Object);return by=e,by}var _y,uT;function hT(){if(uT)return _y;uT=1;var t=my(),e=A0(),n=py(),r=aT(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var s=[];o;)t(s,n(o)),o=e(o);return s}:r;return _y=a,_y}var vy,dT;function FQ(){if(dT)return vy;dT=1;var t=Gl(),e=hT();function n(r,i){return t(r,e(r),i)}return vy=n,vy}var xy,fT;function pT(){if(fT)return xy;fT=1;var t=my(),e=mn();function n(r,i,a){var o=i(r);return e(r)?o:t(o,a(r))}return xy=n,xy}var ky,gT;function yT(){if(gT)return ky;gT=1;var t=pT(),e=py(),n=Ja();function r(i){return t(i,n,e)}return ky=r,ky}var wy,mT;function $Q(){if(mT)return wy;mT=1;var t=pT(),e=hT(),n=Wo();function r(i){return t(i,n,e)}return wy=r,wy}var Ty,bT;function PQ(){if(bT)return Ty;bT=1;var t=Yo,e=ii,n=t(e,"DataView");return Ty=n,Ty}var Ey,_T;function YQ(){if(_T)return Ey;_T=1;var t=Yo,e=ii,n=t(e,"Promise");return Ey=n,Ey}var Cy,vT;function xT(){if(vT)return Cy;vT=1;var t=Yo,e=ii,n=t(e,"Set");return Cy=n,Cy}var Sy,kT;function zQ(){if(kT)return Sy;kT=1;var t=Yo,e=ii,n=t(e,"WeakMap");return Sy=n,Sy}var Ay,wT;function tc(){if(wT)return Ay;wT=1;var t=PQ(),e=qp,n=YQ(),r=xT(),i=zQ(),a=Po,o=r9,s="[object Map]",l="[object Object]",u="[object Promise]",h="[object Set]",f="[object WeakMap]",d="[object DataView]",p=o(t),m=o(e),_=o(n),y=o(r),b=o(i),k=a;return(t&&k(new t(new ArrayBuffer(1)))!=d||e&&k(new e)!=s||n&&k(n.resolve())!=u||r&&k(new r)!=h||i&&k(new i)!=f)&&(k=function(T){var x=a(T),A=x==l?T.constructor:void 0,C=A?o(A):"";if(C)switch(C){case p:return d;case m:return s;case _:return u;case y:return h;case b:return f}return x}),Ay=k,Ay}var My,TT;function jQ(){if(TT)return My;TT=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return My=n,My}var Ly,ET;function CT(){if(ET)return Ly;ET=1;var t=ii,e=t.Uint8Array;return Ly=e,Ly}var By,ST;function Ny(){if(ST)return By;ST=1;var t=CT();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return By=e,By}var Dy,AT;function UQ(){if(AT)return Dy;AT=1;var t=Ny();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Dy=e,Dy}var Oy,MT;function HQ(){if(MT)return Oy;MT=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return Oy=e,Oy}var Iy,LT;function WQ(){if(LT)return Iy;LT=1;var t=Ys,e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Iy=r,Iy}var Ry,BT;function NT(){if(BT)return Ry;BT=1;var t=Ny();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Ry=e,Ry}var Fy,DT;function VQ(){if(DT)return Fy;DT=1;var t=Ny(),e=UQ(),n=HQ(),r=WQ(),i=NT(),a="[object Boolean]",o="[object Date]",s="[object Map]",l="[object Number]",u="[object RegExp]",h="[object Set]",f="[object String]",d="[object Symbol]",p="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",y="[object Float64Array]",b="[object Int8Array]",k="[object Int16Array]",T="[object Int32Array]",x="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",L="[object Uint32Array]";function S(D,v,M){var w=D.constructor;switch(v){case p:return t(D);case a:case o:return new w(+D);case m:return e(D,M);case _:case y:case b:case k:case T:case x:case A:case C:case L:return i(D,M);case s:return new w;case l:case f:return new w(D);case u:return n(D);case h:return new w;case d:return r(D)}}return Fy=S,Fy}var $y,OT;function IT(){if(OT)return $y;OT=1;var t=Rr,e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return $y=n,$y}var Py,RT;function FT(){if(RT)return Py;RT=1;var t=IT(),e=A0(),n=S0();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return Py=r,Py}var Yy,$T;function GQ(){if($T)return Yy;$T=1;var t=tc(),e=Oi(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return Yy=r,Yy}var zy,PT;function qQ(){if(PT)return zy;PT=1;var t=GQ(),e=C0(),n=qg(),r=n&&n.isMap,i=r?e(r):t;return zy=i,zy}var jy,YT;function XQ(){if(YT)return jy;YT=1;var t=tc(),e=Oi(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return jy=r,jy}var Uy,zT;function ZQ(){if(zT)return Uy;zT=1;var t=XQ(),e=C0(),n=qg(),r=n&&n.isSet,i=r?e(r):t;return Uy=i,Uy}var Hy,jT;function UT(){if(jT)return Hy;jT=1;var t=k0(),e=Lg(),n=T0(),r=NQ(),i=IQ(),a=Jw(),o=eT(),s=RQ(),l=FQ(),u=yT(),h=$Q(),f=tc(),d=jQ(),p=VQ(),m=FT(),_=mn(),y=Js(),b=qQ(),k=Rr,T=ZQ(),x=Ja(),A=Wo(),C=1,L=2,S=4,D="[object Arguments]",v="[object Array]",M="[object Boolean]",w="[object Date]",I="[object Error]",B="[object Function]",$="[object GeneratorFunction]",F="[object Map]",K="[object Number]",nt="[object Object]",z="[object RegExp]",Y="[object Set]",rt="[object String]",lt="[object Symbol]",J="[object WeakMap]",Q="[object ArrayBuffer]",q="[object DataView]",it="[object Float32Array]",ut="[object Float64Array]",V="[object Int8Array]",j="[object Int16Array]",P="[object Int32Array]",X="[object Uint8Array]",O="[object Uint8ClampedArray]",G="[object Uint16Array]",U="[object Uint32Array]",H={};H[D]=H[v]=H[Q]=H[q]=H[M]=H[w]=H[it]=H[ut]=H[V]=H[j]=H[P]=H[F]=H[K]=H[nt]=H[z]=H[Y]=H[rt]=H[lt]=H[X]=H[O]=H[G]=H[U]=!0,H[I]=H[B]=H[J]=!1;function xt(ot,Dt,Mt,wt,Et,bt){var mt,Tt=Dt&C,kt=Dt&L,st=Dt&S;if(Mt&&(mt=Et?Mt(ot,wt,Et,bt):Mt(ot)),mt!==void 0)return mt;if(!k(ot))return ot;var Qt=_(ot);if(Qt){if(mt=d(ot),!Tt)return o(ot,mt)}else{var $t=f(ot),te=$t==B||$t==$;if(y(ot))return a(ot,Tt);if($t==nt||$t==D||te&&!Et){if(mt=kt||te?{}:m(ot),!Tt)return kt?l(ot,i(mt,ot)):s(ot,r(mt,ot))}else{if(!H[$t])return Et?ot:{};mt=p(ot,$t,Tt)}}bt||(bt=new t);var Ht=bt.get(ot);if(Ht)return Ht;bt.set(ot,mt),T(ot)?ot.forEach(function(Xt){mt.add(xt(Xt,Dt,Mt,Xt,ot,bt))}):b(ot)&&ot.forEach(function(Xt,Rt){mt.set(Rt,xt(Xt,Dt,Mt,Rt,ot,bt))});var qt=st?kt?h:u:kt?A:x,oe=Qt?void 0:qt(ot);return e(oe||ot,function(Xt,Rt){oe&&(Rt=Xt,Xt=ot[Rt]),n(mt,Rt,xt(Xt,Dt,Mt,Rt,ot,bt))}),mt}return Hy=xt,Hy}var Wy,HT;function QQ(){if(HT)return Wy;HT=1;var t=UT(),e=4;function n(r){return t(r,e)}return Wy=n,Wy}var Vy,WT;function Gy(){if(WT)return Vy;WT=1;function t(e){return function(){return e}}return Vy=t,Vy}var VT={exports:{}},qy,GT;function KQ(){if(GT)return qy;GT=1;function t(e){return function(n,r,i){for(var a=-1,o=Object(n),s=i(n),l=s.length;l--;){var u=s[e?l:++a];if(r(o[u],u,o)===!1)break}return n}}return qy=t,qy}var Xy,qT;function Zy(){if(qT)return Xy;qT=1;var t=KQ(),e=t();return Xy=e,Xy}var Qy,XT;function Ky(){if(XT)return Qy;XT=1;var t=Zy(),e=Ja();function n(r,i){return r&&t(r,i,e)}return Qy=n,Qy}var Jy,ZT;function JQ(){if(ZT)return Jy;ZT=1;var t=aa();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return Jy=e,Jy}var tm,QT;function M0(){if(QT)return tm;QT=1;var t=Ky(),e=JQ(),n=e(t);return tm=n,tm}var em,KT;function Vo(){if(KT)return em;KT=1;function t(e){return e}return em=t,em}var nm,JT;function tE(){if(JT)return nm;JT=1;var t=Vo();function e(n){return typeof n=="function"?n:t}return nm=e,nm}var rm,eE;function nE(){if(eE)return rm;eE=1;var t=Lg(),e=M0(),n=tE(),r=mn();function i(a,o){var s=r(a)?t:e;return s(a,n(o))}return rm=i,rm}var rE;function im(){return rE||(rE=1,function(t){t.exports=nE()}(VT)),VT.exports}var am,iE;function tK(){if(iE)return am;iE=1;var t=M0();function e(n,r){var i=[];return t(n,function(a,o,s){r(a,o,s)&&i.push(a)}),i}return am=e,am}var om,aE;function eK(){if(aE)return om;aE=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return om=e,om}var sm,oE;function nK(){if(oE)return sm;oE=1;function t(e){return this.__data__.has(e)}return sm=t,sm}var cm,sE;function cE(){if(sE)return cm;sE=1;var t=Xp,e=eK(),n=nK();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,cm=r,cm}var lm,lE;function rK(){if(lE)return lm;lE=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return lm=t,lm}var um,uE;function hE(){if(uE)return um;uE=1;function t(e,n){return e.has(n)}return um=t,um}var hm,dE;function fE(){if(dE)return hm;dE=1;var t=cE(),e=rK(),n=hE(),r=1,i=2;function a(o,s,l,u,h,f){var d=l&r,p=o.length,m=s.length;if(p!=m&&!(d&&m>p))return!1;var _=f.get(o),y=f.get(s);if(_&&y)return _==s&&y==o;var b=-1,k=!0,T=l&i?new t:void 0;for(f.set(o,s),f.set(s,o);++b<p;){var x=o[b],A=s[b];if(u)var C=d?u(A,x,b,s,o,f):u(x,A,b,o,s,f);if(C!==void 0){if(C)continue;k=!1;break}if(T){if(!e(s,function(L,S){if(!n(T,S)&&(x===L||h(x,L,l,u,f)))return T.push(S)})){k=!1;break}}else if(!(x===A||h(x,A,l,u,f))){k=!1;break}}return f.delete(o),f.delete(s),k}return hm=a,hm}var dm,pE;function iK(){if(pE)return dm;pE=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return dm=t,dm}var fm,gE;function pm(){if(gE)return fm;gE=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return fm=t,fm}var gm,yE;function aK(){if(yE)return gm;yE=1;var t=Ys,e=CT(),n=Us,r=fE(),i=iK(),a=pm(),o=1,s=2,l="[object Boolean]",u="[object Date]",h="[object Error]",f="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",_="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",k="[object DataView]",T=t?t.prototype:void 0,x=T?T.valueOf:void 0;function A(C,L,S,D,v,M,w){switch(S){case k:if(C.byteLength!=L.byteLength||C.byteOffset!=L.byteOffset)return!1;C=C.buffer,L=L.buffer;case b:return!(C.byteLength!=L.byteLength||!M(new e(C),new e(L)));case l:case u:case d:return n(+C,+L);case h:return C.name==L.name&&C.message==L.message;case p:case _:return C==L+"";case f:var I=i;case m:var B=D&o;if(I||(I=a),C.size!=L.size&&!B)return!1;var $=w.get(C);if($)return $==L;D|=s,w.set(C,L);var F=r(I(C),I(L),D,v,M,w);return w.delete(C),F;case y:if(x)return x.call(C)==x.call(L)}return!1}return gm=A,gm}var ym,mE;function oK(){if(mE)return ym;mE=1;var t=yT(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s,l,u,h){var f=s&e,d=t(a),p=d.length,m=t(o),_=m.length;if(p!=_&&!f)return!1;for(var y=p;y--;){var b=d[y];if(!(f?b in o:r.call(o,b)))return!1}var k=h.get(a),T=h.get(o);if(k&&T)return k==o&&T==a;var x=!0;h.set(a,o),h.set(o,a);for(var A=f;++y<p;){b=d[y];var C=a[b],L=o[b];if(l)var S=f?l(L,C,b,o,a,h):l(C,L,b,a,o,h);if(!(S===void 0?C===L||u(C,L,s,l,h):S)){x=!1;break}A||(A=b=="constructor")}if(x&&!A){var D=a.constructor,v=o.constructor;D!=v&&"constructor"in a&&"constructor"in o&&!(typeof D=="function"&&D instanceof D&&typeof v=="function"&&v instanceof v)&&(x=!1)}return h.delete(a),h.delete(o),x}return ym=i,ym}var mm,bE;function sK(){if(bE)return mm;bE=1;var t=k0(),e=fE(),n=aK(),r=oK(),i=tc(),a=mn(),o=Js(),s=Xl(),l=1,u="[object Arguments]",h="[object Array]",f="[object Object]",d=Object.prototype,p=d.hasOwnProperty;function m(_,y,b,k,T,x){var A=a(_),C=a(y),L=A?h:i(_),S=C?h:i(y);L=L==u?f:L,S=S==u?f:S;var D=L==f,v=S==f,M=L==S;if(M&&o(_)){if(!o(y))return!1;A=!0,D=!1}if(M&&!D)return x||(x=new t),A||s(_)?e(_,y,b,k,T,x):n(_,y,L,b,k,T,x);if(!(b&l)){var w=D&&p.call(_,"__wrapped__"),I=v&&p.call(y,"__wrapped__");if(w||I){var B=w?_.value():_,$=I?y.value():y;return x||(x=new t),T(B,$,b,k,x)}}return M?(x||(x=new t),r(_,y,b,k,T,x)):!1}return mm=m,mm}var bm,_E;function vE(){if(_E)return bm;_E=1;var t=sK(),e=Oi();function n(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,o,n,s)}return bm=n,bm}var _m,xE;function cK(){if(xE)return _m;xE=1;var t=k0(),e=vE(),n=1,r=2;function i(a,o,s,l){var u=s.length,h=u,f=!l;if(a==null)return!h;for(a=Object(a);u--;){var d=s[u];if(f&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++u<h;){d=s[u];var p=d[0],m=a[p],_=d[1];if(f&&d[2]){if(m===void 0&&!(p in a))return!1}else{var y=new t;if(l)var b=l(m,_,p,a,o,y);if(!(b===void 0?e(_,m,n|r,l,y):b))return!1}}return!0}return _m=i,_m}var vm,kE;function wE(){if(kE)return vm;kE=1;var t=Rr;function e(n){return n===n&&!t(n)}return vm=e,vm}var xm,TE;function lK(){if(TE)return xm;TE=1;var t=wE(),e=Ja();function n(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,t(s)]}return i}return xm=n,xm}var km,EE;function CE(){if(EE)return km;EE=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return km=t,km}var wm,SE;function uK(){if(SE)return wm;SE=1;var t=cK(),e=lK(),n=CE();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===i||t(o,i,a)}}return wm=r,wm}var Tm,AE;function ec(){if(AE)return Tm;AE=1;var t=Po,e=Oi(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return Tm=r,Tm}var Em,ME;function Cm(){if(ME)return Em;ME=1;var t=mn(),e=ec(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(t(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||o!=null&&a in Object(o)}return Em=i,Em}var Sm,LE;function hK(){if(LE)return Sm;LE=1;var t=q1,e=500;function n(r){var i=t(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return Sm=n,Sm}var Am,BE;function dK(){if(BE)return Am;BE=1;var t=hK(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,u){a.push(l?u.replace(n,"$1"):s||o)}),a});return Am=r,Am}var Mm,NE;function L0(){if(NE)return Mm;NE=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return Mm=t,Mm}var Lm,DE;function fK(){if(DE)return Lm;DE=1;var t=Ys,e=L0(),n=mn(),r=ec(),i=1/0,a=t?t.prototype:void 0,o=a?a.toString:void 0;function s(l){if(typeof l=="string")return l;if(n(l))return e(l,s)+"";if(r(l))return o?o.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return Lm=s,Lm}var Bm,OE;function IE(){if(OE)return Bm;OE=1;var t=fK();function e(n){return n==null?"":t(n)}return Bm=e,Bm}var Nm,RE;function B0(){if(RE)return Nm;RE=1;var t=mn(),e=Cm(),n=dK(),r=IE();function i(a,o){return t(a)?a:e(a,o)?[a]:n(r(a))}return Nm=i,Nm}var Dm,FE;function Zl(){if(FE)return Dm;FE=1;var t=ec(),e=1/0;function n(r){if(typeof r=="string"||t(r))return r;var i=r+"";return i=="0"&&1/r==-e?"-0":i}return Dm=n,Dm}var Om,$E;function N0(){if($E)return Om;$E=1;var t=B0(),e=Zl();function n(r,i){i=t(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return Om=n,Om}var Im,PE;function pK(){if(PE)return Im;PE=1;var t=N0();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return Im=e,Im}var Rm,YE;function gK(){if(YE)return Rm;YE=1;function t(e,n){return e!=null&&n in Object(e)}return Rm=t,Rm}var Fm,zE;function jE(){if(zE)return Fm;zE=1;var t=B0(),e=ql(),n=mn(),r=E0(),i=Hg(),a=Zl();function o(s,l,u){l=t(l,s);for(var h=-1,f=l.length,d=!1;++h<f;){var p=a(l[h]);if(!(d=s!=null&&u(s,p)))break;s=s[p]}return d||++h!=f?d:(f=s==null?0:s.length,!!f&&i(f)&&r(p,f)&&(n(s)||e(s)))}return Fm=o,Fm}var $m,UE;function HE(){if(UE)return $m;UE=1;var t=gK(),e=jE();function n(r,i){return r!=null&&e(r,i,t)}return $m=n,$m}var Pm,WE;function yK(){if(WE)return Pm;WE=1;var t=vE(),e=pK(),n=HE(),r=Cm(),i=wE(),a=CE(),o=Zl(),s=1,l=2;function u(h,f){return r(h)&&i(f)?a(o(h),f):function(d){var p=e(d,h);return p===void 0&&p===f?n(d,h):t(f,p,s|l)}}return Pm=u,Pm}var Ym,VE;function GE(){if(VE)return Ym;VE=1;function t(e){return function(n){return n==null?void 0:n[e]}}return Ym=t,Ym}var zm,qE;function mK(){if(qE)return zm;qE=1;var t=N0();function e(n){return function(r){return t(r,n)}}return zm=e,zm}var jm,XE;function bK(){if(XE)return jm;XE=1;var t=GE(),e=mK(),n=Cm(),r=Zl();function i(a){return n(a)?t(r(a)):e(a)}return jm=i,jm}var Um,ZE;function oa(){if(ZE)return Um;ZE=1;var t=uK(),e=yK(),n=Vo(),r=mn(),i=bK();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return Um=a,Um}var Hm,QE;function KE(){if(QE)return Hm;QE=1;var t=rT(),e=tK(),n=oa(),r=mn();function i(a,o){var s=r(a)?t:e;return s(a,n(o,3))}return Hm=i,Hm}var Wm,JE;function _K(){if(JE)return Wm;JE=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return Wm=n,Wm}var Vm,tC;function Gm(){if(tC)return Vm;tC=1;var t=_K(),e=jE();function n(r,i){return r!=null&&e(r,i,t)}return Vm=n,Vm}var qm,eC;function vK(){if(eC)return qm;eC=1;var t=ey(),e=tc(),n=ql(),r=mn(),i=aa(),a=Js(),o=S0(),s=Xl(),l="[object Map]",u="[object Set]",h=Object.prototype,f=h.hasOwnProperty;function d(p){if(p==null)return!0;if(i(p)&&(r(p)||typeof p=="string"||typeof p.splice=="function"||a(p)||s(p)||n(p)))return!p.length;var m=e(p);if(m==l||m==u)return!p.size;if(o(p))return!t(p).length;for(var _ in p)if(f.call(p,_))return!1;return!0}return qm=d,qm}var Xm,nC;function rC(){if(nC)return Xm;nC=1;function t(e){return e===void 0}return Xm=t,Xm}var Zm,iC;function aC(){if(iC)return Zm;iC=1;var t=M0(),e=aa();function n(r,i){var a=-1,o=e(r)?Array(r.length):[];return t(r,function(s,l,u){o[++a]=i(s,l,u)}),o}return Zm=n,Zm}var Qm,oC;function sC(){if(oC)return Qm;oC=1;var t=L0(),e=oa(),n=aC(),r=mn();function i(a,o){var s=r(a)?t:n;return s(a,e(o,3))}return Qm=i,Qm}var Km,cC;function xK(){if(cC)return Km;cC=1;function t(e,n,r,i){var a=-1,o=e==null?0:e.length;for(i&&o&&(r=e[++a]);++a<o;)r=n(r,e[a],a,e);return r}return Km=t,Km}var Jm,lC;function kK(){if(lC)return Jm;lC=1;function t(e,n,r,i,a){return a(e,function(o,s,l){r=i?(i=!1,o):n(r,o,s,l)}),r}return Jm=t,Jm}var t3,uC;function hC(){if(uC)return t3;uC=1;var t=xK(),e=M0(),n=oa(),r=kK(),i=mn();function a(o,s,l){var u=i(o)?t:r,h=arguments.length<3;return u(o,n(s,4),l,h,e)}return t3=a,t3}var e3,dC;function wK(){if(dC)return e3;dC=1;var t=Po,e=mn(),n=Oi(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return e3=i,e3}var n3,fC;function TK(){if(fC)return n3;fC=1;var t=GE(),e=t("length");return n3=e,n3}var r3,pC;function EK(){if(pC)return r3;pC=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+t+i+a+"]");function l(u){return s.test(u)}return r3=l,r3}var i3,gC;function CK(){if(gC)return i3;gC=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="["+t+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",h="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",m=u+"?",_="["+a+"]?",y="(?:"+p+"(?:"+[h,f,d].join("|")+")"+_+m+")*",b=_+m+y,k="(?:"+[h+s+"?",s,f,d,o].join("|")+")",T=RegExp(l+"(?="+l+")|"+k+b,"g");function x(A){for(var C=T.lastIndex=0;T.test(A);)++C;return C}return i3=x,i3}var a3,yC;function SK(){if(yC)return a3;yC=1;var t=TK(),e=EK(),n=CK();function r(i){return e(i)?n(i):t(i)}return a3=r,a3}var o3,mC;function AK(){if(mC)return o3;mC=1;var t=ey(),e=tc(),n=aa(),r=wK(),i=SK(),a="[object Map]",o="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=e(l);return u==a||u==o?l.size:t(l).length}return o3=s,o3}var s3,bC;function MK(){if(bC)return s3;bC=1;var t=Lg(),e=IT(),n=Ky(),r=oa(),i=A0(),a=mn(),o=Js(),s=zs,l=Rr,u=Xl();function h(f,d,p){var m=a(f),_=m||o(f)||u(f);if(d=r(d,4),p==null){var y=f&&f.constructor;_?p=m?new y:[]:l(f)?p=s(y)?e(i(f)):{}:p={}}return(_?t:n)(f,function(b,k,T){return d(p,b,k,T)}),p}return s3=h,s3}var c3,_C;function LK(){if(_C)return c3;_C=1;var t=Ys,e=ql(),n=mn(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return c3=i,c3}var l3,vC;function u3(){if(vC)return l3;vC=1;var t=my(),e=LK();function n(r,i,a,o,s){var l=-1,u=r.length;for(a||(a=e),s||(s=[]);++l<u;){var h=r[l];i>0&&a(h)?i>1?n(h,i-1,a,o,s):t(s,h):o||(s[s.length]=h)}return s}return l3=n,l3}var h3,xC;function BK(){if(xC)return h3;xC=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return h3=t,h3}var d3,kC;function wC(){if(kC)return d3;kC=1;var t=BK(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),u=Array(l);++s<l;)u[s]=o[i+s];s=-1;for(var h=Array(i+1);++s<i;)h[s]=o[s];return h[i]=a(u),t(r,this,h)}}return d3=n,d3}var f3,TC;function NK(){if(TC)return f3;TC=1;var t=Gy(),e=xw(),n=Vo(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return f3=r,f3}var p3,EC;function DK(){if(EC)return p3;EC=1;var t=800,e=16,n=Date.now;function r(i){var a=0,o=0;return function(){var s=n(),l=e-(s-o);if(o=s,l>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return p3=r,p3}var g3,CC;function SC(){if(CC)return g3;CC=1;var t=NK(),e=DK(),n=e(t);return g3=n,g3}var y3,AC;function D0(){if(AC)return y3;AC=1;var t=Vo(),e=wC(),n=SC();function r(i,a){return n(e(i,a,t),i+"")}return y3=r,y3}var m3,MC;function LC(){if(MC)return m3;MC=1;function t(e,n,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(n(e[o],o,e))return o;return-1}return m3=t,m3}var b3,BC;function OK(){if(BC)return b3;BC=1;function t(e){return e!==e}return b3=t,b3}var _3,NC;function IK(){if(NC)return _3;NC=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return _3=t,_3}var v3,DC;function RK(){if(DC)return v3;DC=1;var t=LC(),e=OK(),n=IK();function r(i,a,o){return a===a?n(i,a,o):t(i,e,o)}return v3=r,v3}var x3,OC;function FK(){if(OC)return x3;OC=1;var t=RK();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return x3=e,x3}var k3,IC;function $K(){if(IC)return k3;IC=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return k3=t,k3}var w3,RC;function PK(){if(RC)return w3;RC=1;function t(){}return w3=t,w3}var T3,FC;function YK(){if(FC)return T3;FC=1;var t=xT(),e=PK(),n=pm(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return T3=i,T3}var E3,$C;function zK(){if($C)return E3;$C=1;var t=cE(),e=FK(),n=$K(),r=hE(),i=YK(),a=pm(),o=200;function s(l,u,h){var f=-1,d=e,p=l.length,m=!0,_=[],y=_;if(h)m=!1,d=n;else if(p>=o){var b=u?null:i(l);if(b)return a(b);m=!1,d=r,y=new t}else y=u?[]:_;t:for(;++f<p;){var k=l[f],T=u?u(k):k;if(k=h||k!==0?k:0,m&&T===T){for(var x=y.length;x--;)if(y[x]===T)continue t;u&&y.push(T),_.push(k)}else d(y,T,h)||(y!==_&&y.push(T),_.push(k))}return _}return E3=s,E3}var C3,PC;function YC(){if(PC)return C3;PC=1;var t=aa(),e=Oi();function n(r){return e(r)&&t(r)}return C3=n,C3}var S3,zC;function jK(){if(zC)return S3;zC=1;var t=u3(),e=D0(),n=zK(),r=YC(),i=e(function(a){return n(t(a,1,r,!0))});return S3=i,S3}var A3,jC;function UK(){if(jC)return A3;jC=1;var t=L0();function e(n,r){return t(r,function(i){return n[i]})}return A3=e,A3}var M3,UC;function HC(){if(UC)return M3;UC=1;var t=UK(),e=Ja();function n(r){return r==null?[]:t(r,e(r))}return M3=n,M3}var O0;if(typeof Ta=="function")try{O0={clone:QQ(),constant:Gy(),each:im(),filter:KE(),has:Gm(),isArray:mn(),isEmpty:vK(),isFunction:zs,isUndefined:rC(),keys:Ja(),map:sC(),reduce:hC(),size:AK(),transform:MK(),union:jK(),values:HC()}}catch{}O0||(O0=window._);var Yr=O0,me=Yr,L3=Ce,HK="\0",Go="\0",WC="";function Ce(t){this._isDirected=me.has(t,"directed")?t.directed:!0,this._isMultigraph=me.has(t,"multigraph")?t.multigraph:!1,this._isCompound=me.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=me.constant(void 0),this._defaultEdgeLabelFn=me.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Go]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}Ce.prototype._nodeCount=0,Ce.prototype._edgeCount=0,Ce.prototype.isDirected=function(){return this._isDirected},Ce.prototype.isMultigraph=function(){return this._isMultigraph},Ce.prototype.isCompound=function(){return this._isCompound},Ce.prototype.setGraph=function(t){return this._label=t,this},Ce.prototype.graph=function(){return this._label},Ce.prototype.setDefaultNodeLabel=function(t){return me.isFunction(t)||(t=me.constant(t)),this._defaultNodeLabelFn=t,this},Ce.prototype.nodeCount=function(){return this._nodeCount},Ce.prototype.nodes=function(){return me.keys(this._nodes)},Ce.prototype.sources=function(){var t=this;return me.filter(this.nodes(),function(e){return me.isEmpty(t._in[e])})},Ce.prototype.sinks=function(){var t=this;return me.filter(this.nodes(),function(e){return me.isEmpty(t._out[e])})},Ce.prototype.setNodes=function(t,e){var n=arguments,r=this;return me.each(t,function(i){n.length>1?r.setNode(i,e):r.setNode(i)}),this},Ce.prototype.setNode=function(t,e){return me.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Go,this._children[t]={},this._children[Go][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},Ce.prototype.node=function(t){return this._nodes[t]},Ce.prototype.hasNode=function(t){return me.has(this._nodes,t)},Ce.prototype.removeNode=function(t){var e=this;if(me.has(this._nodes,t)){var n=function(r){e.removeEdge(e._edgeObjs[r])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],me.each(this.children(t),function(r){e.setParent(r)}),delete this._children[t]),me.each(me.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],me.each(me.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},Ce.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(me.isUndefined(e))e=Go;else{e+="";for(var n=e;!me.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},Ce.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},Ce.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==Go)return e}},Ce.prototype.children=function(t){if(me.isUndefined(t)&&(t=Go),this._isCompound){var e=this._children[t];if(e)return me.keys(e)}else{if(t===Go)return this.nodes();if(this.hasNode(t))return[]}},Ce.prototype.predecessors=function(t){var e=this._preds[t];if(e)return me.keys(e)},Ce.prototype.successors=function(t){var e=this._sucs[t];if(e)return me.keys(e)},Ce.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return me.union(e,this.successors(t))},Ce.prototype.isLeaf=function(t){var e;return this.isDirected()?e=this.successors(t):e=this.neighbors(t),e.length===0},Ce.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;me.each(this._nodes,function(a,o){t(o)&&e.setNode(o,a)}),me.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,n.edge(a))});var r={};function i(a){var o=n.parent(a);return o===void 0||e.hasNode(o)?(r[a]=o,o):o in r?r[o]:i(o)}return this._isCompound&&me.each(e.nodes(),function(a){e.setParent(a,i(a))}),e},Ce.prototype.setDefaultEdgeLabel=function(t){return me.isFunction(t)||(t=me.constant(t)),this._defaultEdgeLabelFn=t,this},Ce.prototype.edgeCount=function(){return this._edgeCount},Ce.prototype.edges=function(){return me.values(this._edgeObjs)},Ce.prototype.setPath=function(t,e){var n=this,r=arguments;return me.reduce(t,function(i,a){return r.length>1?n.setEdge(i,a,e):n.setEdge(i,a),a}),this},Ce.prototype.setEdge=function(){var t,e,n,r,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,e=a.w,n=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,me.isUndefined(n)||(n=""+n);var o=Ql(this._isDirected,t,e,n);if(me.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=r),this;if(!me.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[o]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=WK(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,VC(this._preds[e],t),VC(this._sucs[t],e),this._in[e][o]=s,this._out[t][o]=s,this._edgeCount++,this},Ce.prototype.edge=function(t,e,n){var r=arguments.length===1?B3(this._isDirected,arguments[0]):Ql(this._isDirected,t,e,n);return this._edgeLabels[r]},Ce.prototype.hasEdge=function(t,e,n){var r=arguments.length===1?B3(this._isDirected,arguments[0]):Ql(this._isDirected,t,e,n);return me.has(this._edgeLabels,r)},Ce.prototype.removeEdge=function(t,e,n){var r=arguments.length===1?B3(this._isDirected,arguments[0]):Ql(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],GC(this._preds[e],t),GC(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},Ce.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=me.values(n);return e?me.filter(r,function(i){return i.v===e}):r}},Ce.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=me.values(n);return e?me.filter(r,function(i){return i.w===e}):r}},Ce.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};function VC(t,e){t[e]?t[e]++:t[e]=1}function GC(t,e){--t[e]||delete t[e]}function Ql(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}return i+WC+a+WC+(me.isUndefined(r)?HK:r)}function WK(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}function B3(t,e){return Ql(t,e.v,e.w,e.name)}var VK="2.1.8",GK={Graph:L3,version:VK},Ii=Yr,qK=L3,XK={write:ZK,read:JK};function ZK(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:QK(t),edges:KK(t)};return Ii.isUndefined(t.graph())||(e.value=Ii.clone(t.graph())),e}function QK(t){return Ii.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return Ii.isUndefined(n)||(i.value=n),Ii.isUndefined(r)||(i.parent=r),i})}function KK(t){return Ii.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return Ii.isUndefined(e.name)||(r.name=e.name),Ii.isUndefined(n)||(r.value=n),r})}function JK(t){var e=new qK(t.options).setGraph(t.value);return Ii.each(t.nodes,function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),Ii.each(t.edges,function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var I0=Yr,tJ=eJ;function eJ(t){var e={},n=[],r;function i(a){I0.has(e,a)||(e[a]=!0,r.push(a),I0.each(t.successors(a),i),I0.each(t.predecessors(a),i))}return I0.each(t.nodes(),function(a){r=[],i(a),r.length&&n.push(r)}),n}var qC=Yr,XC=zr;function zr(){this._arr=[],this._keyIndices={}}zr.prototype.size=function(){return this._arr.length},zr.prototype.keys=function(){return this._arr.map(function(t){return t.key})},zr.prototype.has=function(t){return qC.has(this._keyIndices,t)},zr.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority},zr.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},zr.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!qC.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},zr.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},zr.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},zr.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},zr.prototype._decrease=function(t){for(var e=this._arr,n=e[t].priority,r;t!==0&&(r=t>>1,!(e[r].priority<n));)this._swap(t,r),t=r},zr.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],a=n[e];n[t]=a,n[e]=i,r[a.key]=t,r[i.key]=e};var nJ=Yr,rJ=XC,ZC=aJ,iJ=nJ.constant(1);function aJ(t,e,n,r){return oJ(t,String(e),n||iJ,r||function(i){return t.outEdges(i)})}function oJ(t,e,n,r){var i={},a=new rJ,o,s,l=function(u){var h=u.v!==o?u.v:u.w,f=i[h],d=n(u),p=s.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+d);p<f.distance&&(f.distance=p,f.predecessor=o,a.decrease(h,p))};for(t.nodes().forEach(function(u){var h=u===e?0:Number.POSITIVE_INFINITY;i[u]={distance:h},a.add(u,h)});a.size()>0&&(o=a.removeMin(),s=i[o],s.distance!==Number.POSITIVE_INFINITY);)r(o).forEach(l);return i}var sJ=ZC,cJ=Yr,lJ=uJ;function uJ(t,e,n){return cJ.transform(t.nodes(),function(r,i){r[i]=sJ(t,i,e,n)},{})}var QC=Yr,KC=hJ;function hJ(t){var e=0,n=[],r={},i=[];function a(o){var s=r[o]={onStack:!0,lowlink:e,index:e++};if(n.push(o),t.successors(o).forEach(function(h){QC.has(r,h)?r[h].onStack&&(s.lowlink=Math.min(s.lowlink,r[h].index)):(a(h),s.lowlink=Math.min(s.lowlink,r[h].lowlink))}),s.lowlink===s.index){var l=[],u;do u=n.pop(),r[u].onStack=!1,l.push(u);while(o!==u);i.push(l)}}return t.nodes().forEach(function(o){QC.has(r,o)||a(o)}),i}var dJ=Yr,fJ=KC,pJ=gJ;function gJ(t){return dJ.filter(fJ(t),function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var yJ=Yr,mJ=_J,bJ=yJ.constant(1);function _J(t,e,n){return vJ(t,e||bJ,n||function(r){return t.outEdges(r)})}function vJ(t,e,n){var r={},i=t.nodes();return i.forEach(function(a){r[a]={},r[a][a]={distance:0},i.forEach(function(o){a!==o&&(r[a][o]={distance:Number.POSITIVE_INFINITY})}),n(a).forEach(function(o){var s=o.v===a?o.w:o.v,l=e(o);r[a][s]={distance:l,predecessor:a}})}),i.forEach(function(a){var o=r[a];i.forEach(function(s){var l=r[s];i.forEach(function(u){var h=l[a],f=o[u],d=l[u],p=h.distance+f.distance;p<d.distance&&(d.distance=p,d.predecessor=f.predecessor)})})}),r}var Kl=Yr,JC=tS;tS.CycleException=R0;function tS(t){var e={},n={},r=[];function i(a){if(Kl.has(n,a))throw new R0;Kl.has(e,a)||(n[a]=!0,e[a]=!0,Kl.each(t.predecessors(a),i),delete n[a],r.push(a))}if(Kl.each(t.sinks(),i),Kl.size(e)!==t.nodeCount())throw new R0;return r}function R0(){}R0.prototype=new Error;var eS=JC,xJ=kJ;function kJ(t){try{eS(t)}catch(e){if(e instanceof eS.CycleException)return!1;throw e}return!0}var F0=Yr,nS=wJ;function wJ(t,e,n){F0.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return F0.each(e,function(o){if(!t.hasNode(o))throw new Error("Graph does not have node: "+o);rS(t,o,n==="post",a,r,i)}),i}function rS(t,e,n,r,i,a){F0.has(r,e)||(r[e]=!0,n||a.push(e),F0.each(i(e),function(o){rS(t,o,n,r,i,a)}),n&&a.push(e))}var TJ=nS,EJ=CJ;function CJ(t,e){return TJ(t,e,"post")}var SJ=nS,AJ=MJ;function MJ(t,e){return SJ(t,e,"pre")}var iS=Yr,LJ=L3,BJ=XC,NJ=DJ;function DJ(t,e){var n=new LJ,r={},i=new BJ,a;function o(l){var u=l.v===a?l.w:l.v,h=i.priority(u);if(h!==void 0){var f=e(l);f<h&&(r[u]=a,i.decrease(u,f))}}if(t.nodeCount()===0)return n;iS.each(t.nodes(),function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var s=!1;i.size()>0;){if(a=i.removeMin(),iS.has(r,a))n.setEdge(a,r[a]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(a).forEach(o)}return n}var OJ={components:tJ,dijkstra:ZC,dijkstraAll:lJ,findCycles:pJ,floydWarshall:mJ,isAcyclic:xJ,postorder:EJ,preorder:AJ,prim:NJ,tarjan:KC,topsort:JC},aS=GK,un={Graph:aS.Graph,json:XK,alg:OJ,version:aS.version},N3,oS;function pi(){if(oS)return N3;oS=1;var t;if(typeof Ta=="function")try{t=un}catch{}return t||(t=window.graphlib),N3=t,N3}var D3,sS;function IJ(){if(sS)return D3;sS=1;var t=UT(),e=1,n=4;function r(i){return t(i,e|n)}return D3=r,D3}var O3,cS;function $0(){if(cS)return O3;cS=1;var t=Us,e=aa(),n=E0(),r=Rr;function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&n(o,s.length):l=="string"&&o in s)?t(s[o],a):!1}return O3=i,O3}var I3,lS;function uS(){if(lS)return I3;lS=1;var t=D0(),e=Us,n=$0(),r=Wo(),i=Object.prototype,a=i.hasOwnProperty,o=t(function(s,l){s=Object(s);var u=-1,h=l.length,f=h>2?l[2]:void 0;for(f&&n(l[0],l[1],f)&&(h=1);++u<h;)for(var d=l[u],p=r(d),m=-1,_=p.length;++m<_;){var y=p[m],b=s[y];(b===void 0||e(b,i[y])&&!a.call(s,y))&&(s[y]=d[y])}return s});return I3=o,I3}var R3,hS;function RJ(){if(hS)return R3;hS=1;var t=oa(),e=aa(),n=Ja();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var u=t(o,3);a=n(a),o=function(f){return u(l[f],f,l)}}var h=i(a,o,s);return h>-1?l[u?a[h]:h]:void 0}}return R3=r,R3}var F3,dS;function FJ(){if(dS)return F3;dS=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return F3=e,F3}var $3,fS;function $J(){if(fS)return $3;fS=1;var t=FJ(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return $3=n,$3}var P3,pS;function PJ(){if(pS)return P3;pS=1;var t=$J(),e=Rr,n=ec(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=e(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=a.test(u);return f||o.test(u)?s(u.slice(2),f?2:8):i.test(u)?r:+u}return P3=l,P3}var Y3,gS;function yS(){if(gS)return Y3;gS=1;var t=PJ(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return Y3=r,Y3}var z3,mS;function YJ(){if(mS)return z3;mS=1;var t=yS();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return z3=e,z3}var j3,bS;function zJ(){if(bS)return j3;bS=1;var t=LC(),e=oa(),n=YJ(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var u=s==null?0:n(s);return u<0&&(u=r(l+u,0)),t(a,e(o,3),u)}return j3=i,j3}var U3,_S;function jJ(){if(_S)return U3;_S=1;var t=RJ(),e=zJ(),n=t(e);return U3=n,U3}var H3,vS;function xS(){if(vS)return H3;vS=1;var t=u3();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return H3=e,H3}var W3,kS;function UJ(){if(kS)return W3;kS=1;var t=Zy(),e=tE(),n=Wo();function r(i,a){return i==null?i:t(i,e(a),n)}return W3=r,W3}var V3,wS;function HJ(){if(wS)return V3;wS=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return V3=t,V3}var G3,TS;function WJ(){if(TS)return G3;TS=1;var t=w0(),e=Ky(),n=oa();function r(i,a){var o={};return a=n(a,3),e(i,function(s,l,u){t(o,l,a(s,l,u))}),o}return G3=r,G3}var q3,ES;function X3(){if(ES)return q3;ES=1;var t=ec();function e(n,r,i){for(var a=-1,o=n.length;++a<o;){var s=n[a],l=r(s);if(l!=null&&(u===void 0?l===l&&!t(l):i(l,u)))var u=l,h=s}return h}return q3=e,q3}var Z3,CS;function VJ(){if(CS)return Z3;CS=1;function t(e,n){return e>n}return Z3=t,Z3}var Q3,SS;function GJ(){if(SS)return Q3;SS=1;var t=X3(),e=VJ(),n=Vo();function r(i){return i&&i.length?t(i,n,e):void 0}return Q3=r,Q3}var K3,AS;function MS(){if(AS)return K3;AS=1;var t=w0(),e=Us;function n(r,i,a){(a!==void 0&&!e(r[i],a)||a===void 0&&!(i in r))&&t(r,i,a)}return K3=n,K3}var J3,LS;function BS(){if(LS)return J3;LS=1;var t=Po,e=A0(),n=Oi(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function u(h){if(!n(h)||t(h)!=r)return!1;var f=e(h);if(f===null)return!0;var d=s.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&o.call(d)==l}return J3=u,J3}var t4,NS;function DS(){if(NS)return t4;NS=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return t4=t,t4}var e4,OS;function qJ(){if(OS)return e4;OS=1;var t=Gl(),e=Wo();function n(r){return t(r,e(r))}return e4=n,e4}var n4,IS;function XJ(){if(IS)return n4;IS=1;var t=MS(),e=Jw(),n=NT(),r=eT(),i=FT(),a=ql(),o=mn(),s=YC(),l=Js(),u=zs,h=Rr,f=BS(),d=Xl(),p=DS(),m=qJ();function _(y,b,k,T,x,A,C){var L=p(y,k),S=p(b,k),D=C.get(S);if(D){t(y,k,D);return}var v=A?A(L,S,k+"",y,b,C):void 0,M=v===void 0;if(M){var w=o(S),I=!w&&l(S),B=!w&&!I&&d(S);v=S,w||I||B?o(L)?v=L:s(L)?v=r(L):I?(M=!1,v=e(S,!0)):B?(M=!1,v=n(S,!0)):v=[]:f(S)||a(S)?(v=L,a(L)?v=m(L):(!h(L)||u(L))&&(v=i(S))):M=!1}M&&(C.set(S,v),x(v,S,T,A,C),C.delete(S)),t(y,k,v)}return n4=_,n4}var r4,RS;function ZJ(){if(RS)return r4;RS=1;var t=k0(),e=MS(),n=Zy(),r=XJ(),i=Rr,a=Wo(),o=DS();function s(l,u,h,f,d){l!==u&&n(u,function(p,m){if(d||(d=new t),i(p))r(l,u,m,h,s,f,d);else{var _=f?f(o(l,m),p,m+"",l,u,d):void 0;_===void 0&&(_=p),e(l,m,_)}},a)}return r4=s,r4}var i4,FS;function QJ(){if(FS)return i4;FS=1;var t=D0(),e=$0();function n(r){return t(function(i,a){var o=-1,s=a.length,l=s>1?a[s-1]:void 0,u=s>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(s--,l):void 0,u&&e(a[0],a[1],u)&&(l=s<3?void 0:l,s=1),i=Object(i);++o<s;){var h=a[o];h&&r(i,h,o,l)}return i})}return i4=n,i4}var a4,$S;function KJ(){if($S)return a4;$S=1;var t=ZJ(),e=QJ(),n=e(function(r,i,a){t(r,i,a)});return a4=n,a4}var o4,PS;function YS(){if(PS)return o4;PS=1;function t(e,n){return e<n}return o4=t,o4}var s4,zS;function JJ(){if(zS)return s4;zS=1;var t=X3(),e=YS(),n=Vo();function r(i){return i&&i.length?t(i,n,e):void 0}return s4=r,s4}var c4,jS;function ttt(){if(jS)return c4;jS=1;var t=X3(),e=oa(),n=YS();function r(i,a){return i&&i.length?t(i,e(a,2),n):void 0}return c4=r,c4}var l4,US;function ett(){if(US)return l4;US=1;var t=ii,e=function(){return t.Date.now()};return l4=e,l4}var u4,HS;function ntt(){if(HS)return u4;HS=1;var t=T0(),e=B0(),n=E0(),r=Rr,i=Zl();function a(o,s,l,u){if(!r(o))return o;s=e(s,o);for(var h=-1,f=s.length,d=f-1,p=o;p!=null&&++h<f;){var m=i(s[h]),_=l;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(h!=d){var y=p[m];_=u?u(y,m,p):void 0,_===void 0&&(_=r(y)?y:n(s[h+1])?[]:{})}t(p,m,_),p=p[m]}return o}return u4=a,u4}var h4,WS;function rtt(){if(WS)return h4;WS=1;var t=N0(),e=ntt(),n=B0();function r(i,a,o){for(var s=-1,l=a.length,u={};++s<l;){var h=a[s],f=t(i,h);o(f,h)&&e(u,n(h,i),f)}return u}return h4=r,h4}var d4,VS;function itt(){if(VS)return d4;VS=1;var t=rtt(),e=HE();function n(r,i){return t(r,i,function(a,o){return e(r,o)})}return d4=n,d4}var f4,GS;function att(){if(GS)return f4;GS=1;var t=xS(),e=wC(),n=SC();function r(i){return n(e(i,void 0,t),i+"")}return f4=r,f4}var p4,qS;function XS(){if(qS)return p4;qS=1;var t=itt(),e=att(),n=e(function(r,i){return r==null?{}:t(r,i)});return p4=n,p4}var g4,ZS;function ott(){if(ZS)return g4;ZS=1;var t=Math.ceil,e=Math.max;function n(r,i,a,o){for(var s=-1,l=e(t((i-r)/(a||1)),0),u=Array(l);l--;)u[o?l:++s]=r,r+=a;return u}return g4=n,g4}var y4,QS;function stt(){if(QS)return y4;QS=1;var t=ott(),e=$0(),n=yS();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),s=s===void 0?a<o?1:-1:n(s),t(a,o,s,i)}}return y4=r,y4}var m4,KS;function JS(){if(KS)return m4;KS=1;var t=stt(),e=t();return m4=e,m4}var b4,tA;function ctt(){if(tA)return b4;tA=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return b4=t,b4}var _4,eA;function ltt(){if(eA)return _4;eA=1;var t=ec();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,o=n===n,s=t(n),l=r!==void 0,u=r===null,h=r===r,f=t(r);if(!u&&!f&&!s&&n>r||s&&l&&h&&!u&&!f||a&&l&&h||!i&&h||!o)return 1;if(!a&&!s&&!f&&n<r||f&&i&&o&&!a&&!s||u&&i&&o||!l&&o||!h)return-1}return 0}return _4=e,_4}var v4,nA;function utt(){if(nA)return v4;nA=1;var t=ltt();function e(n,r,i){for(var a=-1,o=n.criteria,s=r.criteria,l=o.length,u=i.length;++a<l;){var h=t(o[a],s[a]);if(h){if(a>=u)return h;var f=i[a];return h*(f=="desc"?-1:1)}}return n.index-r.index}return v4=e,v4}var x4,rA;function htt(){if(rA)return x4;rA=1;var t=L0(),e=N0(),n=oa(),r=aC(),i=ctt(),a=C0(),o=utt(),s=Vo(),l=mn();function u(h,f,d){f.length?f=t(f,function(_){return l(_)?function(y){return e(y,_.length===1?_[0]:_)}:_}):f=[s];var p=-1;f=t(f,a(n));var m=r(h,function(_,y,b){var k=t(f,function(T){return T(_)});return{criteria:k,index:++p,value:_}});return i(m,function(_,y){return o(_,y,d)})}return x4=u,x4}var k4,iA;function dtt(){if(iA)return k4;iA=1;var t=u3(),e=htt(),n=D0(),r=$0(),i=n(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return k4=i,k4}var w4,aA;function oA(){if(aA)return w4;aA=1;var t=IE(),e=0;function n(r){var i=++e;return t(r)+i}return w4=n,w4}var T4,sA;function ftt(){if(sA)return T4;sA=1;function t(e,n,r){for(var i=-1,a=e.length,o=n.length,s={};++i<a;){var l=i<o?n[i]:void 0;r(s,e[i],l)}return s}return T4=t,T4}var E4,cA;function ptt(){if(cA)return E4;cA=1;var t=T0(),e=ftt();function n(r,i){return e(r||[],i||[],t)}return E4=n,E4}var C4,lA;function Ge(){if(lA)return C4;lA=1;var t;if(typeof Ta=="function")try{t={cloneDeep:IJ(),constant:Gy(),defaults:uS(),each:im(),filter:KE(),find:jJ(),flatten:xS(),forEach:nE(),forIn:UJ(),has:Gm(),isUndefined:rC(),last:HJ(),map:sC(),mapValues:WJ(),max:GJ(),merge:KJ(),min:JJ(),minBy:ttt(),now:ett(),pick:XS(),range:JS(),reduce:hC(),sortBy:dtt(),uniqueId:oA(),values:HC(),zipObject:ptt()}}catch{}return t||(t=window._),C4=t,C4}var S4,uA;function gtt(){if(uA)return S4;uA=1,S4=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return S4}var A4,hA;function ytt(){if(hA)return A4;hA=1;var t=Ge(),e=pi().Graph,n=gtt();A4=i;var r=t.constant(1);function i(u,h){if(u.nodeCount()<=1)return[];var f=s(u,h||r),d=a(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(d,function(p){return u.outEdges(p.v,p.w)}),!0)}function a(u,h,f){for(var d=[],p=h[h.length-1],m=h[0],_;u.nodeCount();){for(;_=m.dequeue();)o(u,h,f,_);for(;_=p.dequeue();)o(u,h,f,_);if(u.nodeCount()){for(var y=h.length-2;y>0;--y)if(_=h[y].dequeue(),_){d=d.concat(o(u,h,f,_,!0));break}}}return d}function o(u,h,f,d,p){var m=p?[]:void 0;return t.forEach(u.inEdges(d.v),function(_){var y=u.edge(_),b=u.node(_.v);p&&m.push({v:_.v,w:_.w}),b.out-=y,l(h,f,b)}),t.forEach(u.outEdges(d.v),function(_){var y=u.edge(_),b=_.w,k=u.node(b);k.in-=y,l(h,f,k)}),u.removeNode(d.v),m}function s(u,h){var f=new e,d=0,p=0;t.forEach(u.nodes(),function(y){f.setNode(y,{v:y,in:0,out:0})}),t.forEach(u.edges(),function(y){var b=f.edge(y.v,y.w)||0,k=h(y),T=b+k;f.setEdge(y.v,y.w,T),p=Math.max(p,f.node(y.v).out+=k),d=Math.max(d,f.node(y.w).in+=k)});var m=t.range(p+d+3).map(function(){return new n}),_=d+1;return t.forEach(f.nodes(),function(y){l(m,_,f.node(y))}),{graph:f,buckets:m,zeroIdx:_}}function l(u,h,f){f.out?f.in?u[f.out-f.in+h].enqueue(f):u[u.length-1].enqueue(f):u[0].enqueue(f)}return A4}var M4,dA;function mtt(){if(dA)return M4;dA=1;var t=Ge(),e=ytt();M4={run:n,undo:i};function n(a){var o=a.graph().acyclicer==="greedy"?e(a,s(a)):r(a);t.forEach(o,function(l){var u=a.edge(l);a.removeEdge(l),u.forwardName=l.name,u.reversed=!0,a.setEdge(l.w,l.v,u,t.uniqueId("rev"))});function s(l){return function(u){return l.edge(u).weight}}}function r(a){var o=[],s={},l={};function u(h){t.has(l,h)||(l[h]=!0,s[h]=!0,t.forEach(a.outEdges(h),function(f){t.has(s,f.w)?o.push(f):u(f.w)}),delete s[h])}return t.forEach(a.nodes(),u),o}function i(a){t.forEach(a.edges(),function(o){var s=a.edge(o);if(s.reversed){a.removeEdge(o);var l=s.forwardName;delete s.reversed,delete s.forwardName,a.setEdge(o.w,o.v,s,l)}})}return M4}var L4,fA;function br(){if(fA)return L4;fA=1;var t=Ge(),e=pi().Graph;L4={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:o,intersectRect:s,buildLayerMatrix:l,normalizeRanks:u,removeEmptyRanks:h,addBorderNode:f,maxRank:d,partition:p,time:m,notime:_};function n(y,b,k,T){var x;do x=t.uniqueId(T);while(y.hasNode(x));return k.dummy=b,y.setNode(x,k),x}function r(y){var b=new e().setGraph(y.graph());return t.forEach(y.nodes(),function(k){b.setNode(k,y.node(k))}),t.forEach(y.edges(),function(k){var T=b.edge(k.v,k.w)||{weight:0,minlen:1},x=y.edge(k);b.setEdge(k.v,k.w,{weight:T.weight+x.weight,minlen:Math.max(T.minlen,x.minlen)})}),b}function i(y){var b=new e({multigraph:y.isMultigraph()}).setGraph(y.graph());return t.forEach(y.nodes(),function(k){y.children(k).length||b.setNode(k,y.node(k))}),t.forEach(y.edges(),function(k){b.setEdge(k,y.edge(k))}),b}function a(y){var b=t.map(y.nodes(),function(k){var T={};return t.forEach(y.outEdges(k),function(x){T[x.w]=(T[x.w]||0)+y.edge(x).weight}),T});return t.zipObject(y.nodes(),b)}function o(y){var b=t.map(y.nodes(),function(k){var T={};return t.forEach(y.inEdges(k),function(x){T[x.v]=(T[x.v]||0)+y.edge(x).weight}),T});return t.zipObject(y.nodes(),b)}function s(y,b){var k=y.x,T=y.y,x=b.x-k,A=b.y-T,C=y.width/2,L=y.height/2;if(!x&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var S,D;return Math.abs(A)*C>Math.abs(x)*L?(A<0&&(L=-L),S=L*x/A,D=L):(x<0&&(C=-C),S=C,D=C*A/x),{x:k+S,y:T+D}}function l(y){var b=t.map(t.range(d(y)+1),function(){return[]});return t.forEach(y.nodes(),function(k){var T=y.node(k),x=T.rank;t.isUndefined(x)||(b[x][T.order]=k)}),b}function u(y){var b=t.min(t.map(y.nodes(),function(k){return y.node(k).rank}));t.forEach(y.nodes(),function(k){var T=y.node(k);t.has(T,"rank")&&(T.rank-=b)})}function h(y){var b=t.min(t.map(y.nodes(),function(A){return y.node(A).rank})),k=[];t.forEach(y.nodes(),function(A){var C=y.node(A).rank-b;k[C]||(k[C]=[]),k[C].push(A)});var T=0,x=y.graph().nodeRankFactor;t.forEach(k,function(A,C){t.isUndefined(A)&&C%x!==0?--T:T&&t.forEach(A,function(L){y.node(L).rank+=T})})}function f(y,b,k,T){var x={width:0,height:0};return arguments.length>=4&&(x.rank=k,x.order=T),n(y,"border",x,b)}function d(y){return t.max(t.map(y.nodes(),function(b){var k=y.node(b).rank;if(!t.isUndefined(k))return k}))}function p(y,b){var k={lhs:[],rhs:[]};return t.forEach(y,function(T){b(T)?k.lhs.push(T):k.rhs.push(T)}),k}function m(y,b){var k=t.now();try{return b()}finally{console.log(y+" time: "+(t.now()-k)+"ms")}}function _(y,b){return b()}return L4}var B4,pA;function btt(){if(pA)return B4;pA=1;var t=Ge(),e=br();B4={run:n,undo:i};function n(a){a.graph().dummyChains=[],t.forEach(a.edges(),function(o){r(a,o)})}function r(a,o){var s=o.v,l=a.node(s).rank,u=o.w,h=a.node(u).rank,f=o.name,d=a.edge(o),p=d.labelRank;if(h!==l+1){a.removeEdge(o);var m,_,y;for(y=0,++l;l<h;++y,++l)d.points=[],_={width:0,height:0,edgeLabel:d,edgeObj:o,rank:l},m=e.addDummyNode(a,"edge",_,"_d"),l===p&&(_.width=d.width,_.height=d.height,_.dummy="edge-label",_.labelpos=d.labelpos),a.setEdge(s,m,{weight:d.weight},f),y===0&&a.graph().dummyChains.push(m),s=m;a.setEdge(s,u,{weight:d.weight},f)}}function i(a){t.forEach(a.graph().dummyChains,function(o){var s=a.node(o),l=s.edgeLabel,u;for(a.setEdge(s.edgeObj,l);s.dummy;)u=a.successors(o)[0],a.removeNode(o),l.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(l.x=s.x,l.y=s.y,l.width=s.width,l.height=s.height),o=u,s=a.node(o)})}return B4}var N4,gA;function P0(){if(gA)return N4;gA=1;var t=Ge();N4={longestPath:e,slack:n};function e(r){var i={};function a(o){var s=r.node(o);if(t.has(i,o))return s.rank;i[o]=!0;var l=t.min(t.map(r.outEdges(o),function(u){return a(u.w)-r.edge(u).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),s.rank=l}t.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return N4}var D4,yA;function mA(){if(yA)return D4;yA=1;var t=Ge(),e=pi().Graph,n=P0().slack;D4=r;function r(s){var l=new e({directed:!1}),u=s.nodes()[0],h=s.nodeCount();l.setNode(u,{});for(var f,d;i(l,s)<h;)f=a(l,s),d=l.hasNode(f.v)?n(s,f):-n(s,f),o(l,s,d);return l}function i(s,l){function u(h){t.forEach(l.nodeEdges(h),function(f){var d=f.v,p=h===d?f.w:d;!s.hasNode(p)&&!n(l,f)&&(s.setNode(p,{}),s.setEdge(h,p,{}),u(p))})}return t.forEach(s.nodes(),u),s.nodeCount()}function a(s,l){return t.minBy(l.edges(),function(u){if(s.hasNode(u.v)!==s.hasNode(u.w))return n(l,u)})}function o(s,l,u){t.forEach(s.nodes(),function(h){l.node(h).rank+=u})}return D4}var O4,bA;function _tt(){if(bA)return O4;bA=1;var t=Ge(),e=mA(),n=P0().slack,r=P0().longestPath,i=pi().alg.preorder,a=pi().alg.postorder,o=br().simplify;O4=s,s.initLowLimValues=f,s.initCutValues=l,s.calcCutValue=h,s.leaveEdge=p,s.enterEdge=m,s.exchangeEdges=_;function s(T){T=o(T),r(T);var x=e(T);f(x),l(x,T);for(var A,C;A=p(x);)C=m(x,T,A),_(x,T,A,C)}function l(T,x){var A=a(T,T.nodes());A=A.slice(0,A.length-1),t.forEach(A,function(C){u(T,x,C)})}function u(T,x,A){var C=T.node(A),L=C.parent;T.edge(A,L).cutvalue=h(T,x,A)}function h(T,x,A){var C=T.node(A),L=C.parent,S=!0,D=x.edge(A,L),v=0;return D||(S=!1,D=x.edge(L,A)),v=D.weight,t.forEach(x.nodeEdges(A),function(M){var w=M.v===A,I=w?M.w:M.v;if(I!==L){var B=w===S,$=x.edge(M).weight;if(v+=B?$:-$,b(T,A,I)){var F=T.edge(A,I).cutvalue;v+=B?-F:F}}}),v}function f(T,x){arguments.length<2&&(x=T.nodes()[0]),d(T,{},1,x)}function d(T,x,A,C,L){var S=A,D=T.node(C);return x[C]=!0,t.forEach(T.neighbors(C),function(v){t.has(x,v)||(A=d(T,x,A,v,C))}),D.low=S,D.lim=A++,L?D.parent=L:delete D.parent,A}function p(T){return t.find(T.edges(),function(x){return T.edge(x).cutvalue<0})}function m(T,x,A){var C=A.v,L=A.w;x.hasEdge(C,L)||(C=A.w,L=A.v);var S=T.node(C),D=T.node(L),v=S,M=!1;S.lim>D.lim&&(v=D,M=!0);var w=t.filter(x.edges(),function(I){return M===k(T,T.node(I.v),v)&&M!==k(T,T.node(I.w),v)});return t.minBy(w,function(I){return n(x,I)})}function _(T,x,A,C){var L=A.v,S=A.w;T.removeEdge(L,S),T.setEdge(C.v,C.w,{}),f(T),l(T,x),y(T,x)}function y(T,x){var A=t.find(T.nodes(),function(L){return!x.node(L).parent}),C=i(T,A);C=C.slice(1),t.forEach(C,function(L){var S=T.node(L).parent,D=x.edge(L,S),v=!1;D||(D=x.edge(S,L),v=!0),x.node(L).rank=x.node(S).rank+(v?D.minlen:-D.minlen)})}function b(T,x,A){return T.hasEdge(x,A)}function k(T,x,A){return A.low<=x.lim&&x.lim<=A.lim}return O4}var I4,_A;function vtt(){if(_A)return I4;_A=1;var t=P0(),e=t.longestPath,n=mA(),r=_tt();I4=i;function i(l){switch(l.graph().ranker){case"network-simplex":s(l);break;case"tight-tree":o(l);break;case"longest-path":a(l);break;default:s(l)}}var a=e;function o(l){e(l),n(l)}function s(l){r(l)}return I4}var R4,vA;function xtt(){if(vA)return R4;vA=1;var t=Ge();R4=e;function e(i){var a=r(i);t.forEach(i.graph().dummyChains,function(o){for(var s=i.node(o),l=s.edgeObj,u=n(i,a,l.v,l.w),h=u.path,f=u.lca,d=0,p=h[d],m=!0;o!==l.w;){if(s=i.node(o),m){for(;(p=h[d])!==f&&i.node(p).maxRank<s.rank;)d++;p===f&&(m=!1)}if(!m){for(;d<h.length-1&&i.node(p=h[d+1]).minRank<=s.rank;)d++;p=h[d]}i.setParent(o,p),o=i.successors(o)[0]}})}function n(i,a,o,s){var l=[],u=[],h=Math.min(a[o].low,a[s].low),f=Math.max(a[o].lim,a[s].lim),d,p;d=o;do d=i.parent(d),l.push(d);while(d&&(a[d].low>h||f>a[d].lim));for(p=d,d=s;(d=i.parent(d))!==p;)u.push(d);return{path:l.concat(u.reverse()),lca:p}}function r(i){var a={},o=0;function s(l){var u=o;t.forEach(i.children(l),s),a[l]={low:u,lim:o++}}return t.forEach(i.children(),s),a}return R4}var F4,xA;function ktt(){if(xA)return F4;xA=1;var t=Ge(),e=br();F4={run:n,cleanup:o};function n(s){var l=e.addDummyNode(s,"root",{},"_root"),u=i(s),h=t.max(t.values(u))-1,f=2*h+1;s.graph().nestingRoot=l,t.forEach(s.edges(),function(p){s.edge(p).minlen*=f});var d=a(s)+1;t.forEach(s.children(),function(p){r(s,l,f,d,h,u,p)}),s.graph().nodeRankFactor=f}function r(s,l,u,h,f,d,p){var m=s.children(p);if(!m.length){p!==l&&s.setEdge(l,p,{weight:0,minlen:u});return}var _=e.addBorderNode(s,"_bt"),y=e.addBorderNode(s,"_bb"),b=s.node(p);s.setParent(_,p),b.borderTop=_,s.setParent(y,p),b.borderBottom=y,t.forEach(m,function(k){r(s,l,u,h,f,d,k);var T=s.node(k),x=T.borderTop?T.borderTop:k,A=T.borderBottom?T.borderBottom:k,C=T.borderTop?h:2*h,L=x!==A?1:f-d[p]+1;s.setEdge(_,x,{weight:C,minlen:L,nestingEdge:!0}),s.setEdge(A,y,{weight:C,minlen:L,nestingEdge:!0})}),s.parent(p)||s.setEdge(l,_,{weight:0,minlen:f+d[p]})}function i(s){var l={};function u(h,f){var d=s.children(h);d&&d.length&&t.forEach(d,function(p){u(p,f+1)}),l[h]=f}return t.forEach(s.children(),function(h){u(h,1)}),l}function a(s){return t.reduce(s.edges(),function(l,u){return l+s.edge(u).weight},0)}function o(s){var l=s.graph();s.removeNode(l.nestingRoot),delete l.nestingRoot,t.forEach(s.edges(),function(u){var h=s.edge(u);h.nestingEdge&&s.removeEdge(u)})}return F4}var $4,kA;function wtt(){if(kA)return $4;kA=1;var t=Ge(),e=br();$4=n;function n(i){function a(o){var s=i.children(o),l=i.node(o);if(s.length&&t.forEach(s,a),t.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var u=l.minRank,h=l.maxRank+1;u<h;++u)r(i,"borderLeft","_bl",o,l,u),r(i,"borderRight","_br",o,l,u)}}t.forEach(i.children(),a)}function r(i,a,o,s,l,u){var h={width:0,height:0,rank:u,borderType:a},f=l[a][u-1],d=e.addDummyNode(i,"border",h,o);l[a][u]=d,i.setParent(d,s),f&&i.setEdge(f,d,{weight:1})}return $4}var P4,wA;function Ttt(){if(wA)return P4;wA=1;var t=Ge();P4={adjust:e,undo:n};function e(u){var h=u.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(u)}function n(u){var h=u.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&a(u),(h==="lr"||h==="rl")&&(s(u),r(u))}function r(u){t.forEach(u.nodes(),function(h){i(u.node(h))}),t.forEach(u.edges(),function(h){i(u.edge(h))})}function i(u){var h=u.width;u.width=u.height,u.height=h}function a(u){t.forEach(u.nodes(),function(h){o(u.node(h))}),t.forEach(u.edges(),function(h){var f=u.edge(h);t.forEach(f.points,o),t.has(f,"y")&&o(f)})}function o(u){u.y=-u.y}function s(u){t.forEach(u.nodes(),function(h){l(u.node(h))}),t.forEach(u.edges(),function(h){var f=u.edge(h);t.forEach(f.points,l),t.has(f,"x")&&l(f)})}function l(u){var h=u.x;u.x=u.y,u.y=h}return P4}var Y4,TA;function Ett(){if(TA)return Y4;TA=1;var t=Ge();Y4=e;function e(n){var r={},i=t.filter(n.nodes(),function(u){return!n.children(u).length}),a=t.max(t.map(i,function(u){return n.node(u).rank})),o=t.map(t.range(a+1),function(){return[]});function s(u){if(!t.has(r,u)){r[u]=!0;var h=n.node(u);o[h.rank].push(u),t.forEach(n.successors(u),s)}}var l=t.sortBy(i,function(u){return n.node(u).rank});return t.forEach(l,s),o}return Y4}var z4,EA;function Ctt(){if(EA)return z4;EA=1;var t=Ge();z4=e;function e(r,i){for(var a=0,o=1;o<i.length;++o)a+=n(r,i[o-1],i[o]);return a}function n(r,i,a){for(var o=t.zipObject(a,t.map(a,function(d,p){return p})),s=t.flatten(t.map(i,function(d){return t.sortBy(t.map(r.outEdges(d),function(p){return{pos:o[p.w],weight:r.edge(p).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var u=2*l-1;l-=1;var h=t.map(new Array(u),function(){return 0}),f=0;return t.forEach(s.forEach(function(d){var p=d.pos+l;h[p]+=d.weight;for(var m=0;p>0;)p%2&&(m+=h[p+1]),p=p-1>>1,h[p]+=d.weight;f+=d.weight*m})),f}return z4}var j4,CA;function Stt(){if(CA)return j4;CA=1;var t=Ge();j4=e;function e(n,r){return t.map(r,function(i){var a=n.inEdges(i);if(a.length){var o=t.reduce(a,function(s,l){var u=n.edge(l),h=n.node(l.v);return{sum:s.sum+u.weight*h.order,weight:s.weight+u.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return j4}var U4,SA;function Att(){if(SA)return U4;SA=1;var t=Ge();U4=e;function e(i,a){var o={};t.forEach(i,function(l,u){var h=o[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};t.isUndefined(l.barycenter)||(h.barycenter=l.barycenter,h.weight=l.weight)}),t.forEach(a.edges(),function(l){var u=o[l.v],h=o[l.w];!t.isUndefined(u)&&!t.isUndefined(h)&&(h.indegree++,u.out.push(o[l.w]))});var s=t.filter(o,function(l){return!l.indegree});return n(s)}function n(i){var a=[];function o(u){return function(h){h.merged||(t.isUndefined(h.barycenter)||t.isUndefined(u.barycenter)||h.barycenter>=u.barycenter)&&r(u,h)}}function s(u){return function(h){h.in.push(u),--h.indegree===0&&i.push(h)}}for(;i.length;){var l=i.pop();a.push(l),t.forEach(l.in.reverse(),o(l)),t.forEach(l.out,s(l))}return t.map(t.filter(a,function(u){return!u.merged}),function(u){return t.pick(u,["vs","i","barycenter","weight"])})}function r(i,a){var o=0,s=0;i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=o/s,i.weight=s,i.i=Math.min(a.i,i.i),a.merged=!0}return U4}var H4,AA;function Mtt(){if(AA)return H4;AA=1;var t=Ge(),e=br();H4=n;function n(a,o){var s=e.partition(a,function(_){return t.has(_,"barycenter")}),l=s.lhs,u=t.sortBy(s.rhs,function(_){return-_.i}),h=[],f=0,d=0,p=0;l.sort(i(!!o)),p=r(h,u,p),t.forEach(l,function(_){p+=_.vs.length,h.push(_.vs),f+=_.barycenter*_.weight,d+=_.weight,p=r(h,u,p)});var m={vs:t.flatten(h,!0)};return d&&(m.barycenter=f/d,m.weight=d),m}function r(a,o,s){for(var l;o.length&&(l=t.last(o)).i<=s;)o.pop(),a.push(l.vs),s++;return s}function i(a){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:a?s.i-o.i:o.i-s.i}}return H4}var W4,MA;function Ltt(){if(MA)return W4;MA=1;var t=Ge(),e=Stt(),n=Att(),r=Mtt();W4=i;function i(s,l,u,h){var f=s.children(l),d=s.node(l),p=d?d.borderLeft:void 0,m=d?d.borderRight:void 0,_={};p&&(f=t.filter(f,function(A){return A!==p&&A!==m}));var y=e(s,f);t.forEach(y,function(A){if(s.children(A.v).length){var C=i(s,A.v,u,h);_[A.v]=C,t.has(C,"barycenter")&&o(A,C)}});var b=n(y,u);a(b,_);var k=r(b,h);if(p&&(k.vs=t.flatten([p,k.vs,m],!0),s.predecessors(p).length)){var T=s.node(s.predecessors(p)[0]),x=s.node(s.predecessors(m)[0]);t.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+T.order+x.order)/(k.weight+2),k.weight+=2}return k}function a(s,l){t.forEach(s,function(u){u.vs=t.flatten(u.vs.map(function(h){return l[h]?l[h].vs:h}),!0)})}function o(s,l){t.isUndefined(s.barycenter)?(s.barycenter=l.barycenter,s.weight=l.weight):(s.barycenter=(s.barycenter*s.weight+l.barycenter*l.weight)/(s.weight+l.weight),s.weight+=l.weight)}return W4}var V4,LA;function Btt(){if(LA)return V4;LA=1;var t=Ge(),e=pi().Graph;V4=n;function n(i,a,o){var s=r(i),l=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(u){return i.node(u)});return t.forEach(i.nodes(),function(u){var h=i.node(u),f=i.parent(u);(h.rank===a||h.minRank<=a&&a<=h.maxRank)&&(l.setNode(u),l.setParent(u,f||s),t.forEach(i[o](u),function(d){var p=d.v===u?d.w:d.v,m=l.edge(p,u),_=t.isUndefined(m)?0:m.weight;l.setEdge(p,u,{weight:i.edge(d).weight+_})}),t.has(h,"minRank")&&l.setNode(u,{borderLeft:h.borderLeft[a],borderRight:h.borderRight[a]}))}),l}function r(i){for(var a;i.hasNode(a=t.uniqueId("_root")););return a}return V4}var G4,BA;function Ntt(){if(BA)return G4;BA=1;var t=Ge();G4=e;function e(n,r,i){var a={},o;t.forEach(i,function(s){for(var l=n.parent(s),u,h;l;){if(u=n.parent(l),u?(h=a[u],a[u]=l):(h=o,o=l),h&&h!==l){r.setEdge(h,l);return}l=u}})}return G4}var q4,NA;function Dtt(){if(NA)return q4;NA=1;var t=Ge(),e=Ett(),n=Ctt(),r=Ltt(),i=Btt(),a=Ntt(),o=pi().Graph,s=br();q4=l;function l(d){var p=s.maxRank(d),m=u(d,t.range(1,p+1),"inEdges"),_=u(d,t.range(p-1,-1,-1),"outEdges"),y=e(d);f(d,y);for(var b=Number.POSITIVE_INFINITY,k,T=0,x=0;x<4;++T,++x){h(T%2?m:_,T%4>=2),y=s.buildLayerMatrix(d);var A=n(d,y);A<b&&(x=0,k=t.cloneDeep(y),b=A)}f(d,k)}function u(d,p,m){return t.map(p,function(_){return i(d,_,m)})}function h(d,p){var m=new o;t.forEach(d,function(_){var y=_.graph().root,b=r(_,y,m,p);t.forEach(b.vs,function(k,T){_.node(k).order=T}),a(_,m,b.vs)})}function f(d,p){t.forEach(p,function(m){t.forEach(m,function(_,y){d.node(_).order=y})})}return q4}var X4,DA;function Ott(){if(DA)return X4;DA=1;var t=Ge(),e=pi().Graph,n=br();X4={positionX:m,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:d,findSmallestWidthAlignment:f,balance:p};function r(b,k){var T={};function x(A,C){var L=0,S=0,D=A.length,v=t.last(C);return t.forEach(C,function(M,w){var I=a(b,M),B=I?b.node(I).order:D;(I||M===v)&&(t.forEach(C.slice(S,w+1),function($){t.forEach(b.predecessors($),function(F){var K=b.node(F),nt=K.order;(nt<L||B<nt)&&!(K.dummy&&b.node($).dummy)&&o(T,F,$)})}),S=w+1,L=B)}),C}return t.reduce(k,x),T}function i(b,k){var T={};function x(C,L,S,D,v){var M;t.forEach(t.range(L,S),function(w){M=C[w],b.node(M).dummy&&t.forEach(b.predecessors(M),function(I){var B=b.node(I);B.dummy&&(B.order<D||B.order>v)&&o(T,I,M)})})}function A(C,L){var S=-1,D,v=0;return t.forEach(L,function(M,w){if(b.node(M).dummy==="border"){var I=b.predecessors(M);I.length&&(D=b.node(I[0]).order,x(L,v,w,S,D),v=w,S=D)}x(L,v,L.length,D,C.length)}),L}return t.reduce(k,A),T}function a(b,k){if(b.node(k).dummy)return t.find(b.predecessors(k),function(T){return b.node(T).dummy})}function o(b,k,T){if(k>T){var x=k;k=T,T=x}var A=b[k];A||(b[k]=A={}),A[T]=!0}function s(b,k,T){if(k>T){var x=k;k=T,T=x}return t.has(b[k],T)}function l(b,k,T,x){var A={},C={},L={};return t.forEach(k,function(S){t.forEach(S,function(D,v){A[D]=D,C[D]=D,L[D]=v})}),t.forEach(k,function(S){var D=-1;t.forEach(S,function(v){var M=x(v);if(M.length){M=t.sortBy(M,function(F){return L[F]});for(var w=(M.length-1)/2,I=Math.floor(w),B=Math.ceil(w);I<=B;++I){var $=M[I];C[v]===v&&D<L[$]&&!s(T,v,$)&&(C[$]=v,C[v]=A[v]=A[$],D=L[$])}}})}),{root:A,align:C}}function u(b,k,T,x,A){var C={},L=h(b,k,T,A),S=A?"borderLeft":"borderRight";function D(w,I){for(var B=L.nodes(),$=B.pop(),F={};$;)F[$]?w($):(F[$]=!0,B.push($),B=B.concat(I($))),$=B.pop()}function v(w){C[w]=L.inEdges(w).reduce(function(I,B){return Math.max(I,C[B.v]+L.edge(B))},0)}function M(w){var I=L.outEdges(w).reduce(function($,F){return Math.min($,C[F.w]-L.edge(F))},Number.POSITIVE_INFINITY),B=b.node(w);I!==Number.POSITIVE_INFINITY&&B.borderType!==S&&(C[w]=Math.max(C[w],I))}return D(v,L.predecessors.bind(L)),D(M,L.successors.bind(L)),t.forEach(x,function(w){C[w]=C[T[w]]}),C}function h(b,k,T,x){var A=new e,C=b.graph(),L=_(C.nodesep,C.edgesep,x);return t.forEach(k,function(S){var D;t.forEach(S,function(v){var M=T[v];if(A.setNode(M),D){var w=T[D],I=A.edge(w,M);A.setEdge(w,M,Math.max(L(b,v,D),I||0))}D=v})}),A}function f(b,k){return t.minBy(t.values(k),function(T){var x=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return t.forIn(T,function(C,L){var S=y(b,L)/2;x=Math.max(C+S,x),A=Math.min(C-S,A)}),x-A})}function d(b,k){var T=t.values(k),x=t.min(T),A=t.max(T);t.forEach(["u","d"],function(C){t.forEach(["l","r"],function(L){var S=C+L,D=b[S],v;if(D!==k){var M=t.values(D);v=L==="l"?x-t.min(M):A-t.max(M),v&&(b[S]=t.mapValues(D,function(w){return w+v}))}})})}function p(b,k){return t.mapValues(b.ul,function(T,x){if(k)return b[k.toLowerCase()][x];var A=t.sortBy(t.map(b,x));return(A[1]+A[2])/2})}function m(b){var k=n.buildLayerMatrix(b),T=t.merge(r(b,k),i(b,k)),x={},A;t.forEach(["u","d"],function(L){A=L==="u"?k:t.values(k).reverse(),t.forEach(["l","r"],function(S){S==="r"&&(A=t.map(A,function(w){return t.values(w).reverse()}));var D=(L==="u"?b.predecessors:b.successors).bind(b),v=l(b,A,T,D),M=u(b,A,v.root,v.align,S==="r");S==="r"&&(M=t.mapValues(M,function(w){return-w})),x[L+S]=M})});var C=f(b,x);return d(x,C),p(x,b.graph().align)}function _(b,k,T){return function(x,A,C){var L=x.node(A),S=x.node(C),D=0,v;if(D+=L.width/2,t.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":v=-L.width/2;break;case"r":v=L.width/2;break}if(v&&(D+=T?v:-v),v=0,D+=(L.dummy?k:b)/2,D+=(S.dummy?k:b)/2,D+=S.width/2,t.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":v=S.width/2;break;case"r":v=-S.width/2;break}return v&&(D+=T?v:-v),v=0,D}}function y(b,k){return b.node(k).width}return X4}var Z4,OA;function Itt(){if(OA)return Z4;OA=1;var t=Ge(),e=br(),n=Ott().positionX;Z4=r;function r(a){a=e.asNonCompoundGraph(a),i(a),t.forEach(n(a),function(o,s){a.node(s).x=o})}function i(a){var o=e.buildLayerMatrix(a),s=a.graph().ranksep,l=0;t.forEach(o,function(u){var h=t.max(t.map(u,function(f){return a.node(f).height}));t.forEach(u,function(f){a.node(f).y=l+h/2}),l+=h+s})}return Z4}var Q4,IA;function Rtt(){if(IA)return Q4;IA=1;var t=Ge(),e=mtt(),n=btt(),r=vtt(),i=br().normalizeRanks,a=xtt(),o=br().removeEmptyRanks,s=ktt(),l=wtt(),u=Ttt(),h=Dtt(),f=Itt(),d=br(),p=pi().Graph;Q4=m;function m(Q,q){var it=q&&q.debugTiming?d.time:d.notime;it("layout",function(){var ut=it("  buildLayoutGraph",function(){return D(Q)});it("  runLayout",function(){_(ut,it)}),it("  updateInputGraph",function(){y(Q,ut)})})}function _(Q,q){q("    makeSpaceForEdgeLabels",function(){v(Q)}),q("    removeSelfEdges",function(){z(Q)}),q("    acyclic",function(){e.run(Q)}),q("    nestingGraph.run",function(){s.run(Q)}),q("    rank",function(){r(d.asNonCompoundGraph(Q))}),q("    injectEdgeLabelProxies",function(){M(Q)}),q("    removeEmptyRanks",function(){o(Q)}),q("    nestingGraph.cleanup",function(){s.cleanup(Q)}),q("    normalizeRanks",function(){i(Q)}),q("    assignRankMinMax",function(){w(Q)}),q("    removeEdgeLabelProxies",function(){I(Q)}),q("    normalize.run",function(){n.run(Q)}),q("    parentDummyChains",function(){a(Q)}),q("    addBorderSegments",function(){l(Q)}),q("    order",function(){h(Q)}),q("    insertSelfEdges",function(){Y(Q)}),q("    adjustCoordinateSystem",function(){u.adjust(Q)}),q("    position",function(){f(Q)}),q("    positionSelfEdges",function(){rt(Q)}),q("    removeBorderNodes",function(){nt(Q)}),q("    normalize.undo",function(){n.undo(Q)}),q("    fixupEdgeLabelCoords",function(){F(Q)}),q("    undoCoordinateSystem",function(){u.undo(Q)}),q("    translateGraph",function(){B(Q)}),q("    assignNodeIntersects",function(){$(Q)}),q("    reversePoints",function(){K(Q)}),q("    acyclic.undo",function(){e.undo(Q)})}function y(Q,q){t.forEach(Q.nodes(),function(it){var ut=Q.node(it),V=q.node(it);ut&&(ut.x=V.x,ut.y=V.y,q.children(it).length&&(ut.width=V.width,ut.height=V.height))}),t.forEach(Q.edges(),function(it){var ut=Q.edge(it),V=q.edge(it);ut.points=V.points,t.has(V,"x")&&(ut.x=V.x,ut.y=V.y)}),Q.graph().width=q.graph().width,Q.graph().height=q.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},T=["acyclicer","ranker","rankdir","align"],x=["width","height"],A={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],L={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function D(Q){var q=new p({multigraph:!0,compound:!0}),it=J(Q.graph());return q.setGraph(t.merge({},k,lt(it,b),t.pick(it,T))),t.forEach(Q.nodes(),function(ut){var V=J(Q.node(ut));q.setNode(ut,t.defaults(lt(V,x),A)),q.setParent(ut,Q.parent(ut))}),t.forEach(Q.edges(),function(ut){var V=J(Q.edge(ut));q.setEdge(ut,t.merge({},L,lt(V,C),t.pick(V,S)))}),q}function v(Q){var q=Q.graph();q.ranksep/=2,t.forEach(Q.edges(),function(it){var ut=Q.edge(it);ut.minlen*=2,ut.labelpos.toLowerCase()!=="c"&&(q.rankdir==="TB"||q.rankdir==="BT"?ut.width+=ut.labeloffset:ut.height+=ut.labeloffset)})}function M(Q){t.forEach(Q.edges(),function(q){var it=Q.edge(q);if(it.width&&it.height){var ut=Q.node(q.v),V=Q.node(q.w),j={rank:(V.rank-ut.rank)/2+ut.rank,e:q};d.addDummyNode(Q,"edge-proxy",j,"_ep")}})}function w(Q){var q=0;t.forEach(Q.nodes(),function(it){var ut=Q.node(it);ut.borderTop&&(ut.minRank=Q.node(ut.borderTop).rank,ut.maxRank=Q.node(ut.borderBottom).rank,q=t.max(q,ut.maxRank))}),Q.graph().maxRank=q}function I(Q){t.forEach(Q.nodes(),function(q){var it=Q.node(q);it.dummy==="edge-proxy"&&(Q.edge(it.e).labelRank=it.rank,Q.removeNode(q))})}function B(Q){var q=Number.POSITIVE_INFINITY,it=0,ut=Number.POSITIVE_INFINITY,V=0,j=Q.graph(),P=j.marginx||0,X=j.marginy||0;function O(G){var U=G.x,H=G.y,xt=G.width,ot=G.height;q=Math.min(q,U-xt/2),it=Math.max(it,U+xt/2),ut=Math.min(ut,H-ot/2),V=Math.max(V,H+ot/2)}t.forEach(Q.nodes(),function(G){O(Q.node(G))}),t.forEach(Q.edges(),function(G){var U=Q.edge(G);t.has(U,"x")&&O(U)}),q-=P,ut-=X,t.forEach(Q.nodes(),function(G){var U=Q.node(G);U.x-=q,U.y-=ut}),t.forEach(Q.edges(),function(G){var U=Q.edge(G);t.forEach(U.points,function(H){H.x-=q,H.y-=ut}),t.has(U,"x")&&(U.x-=q),t.has(U,"y")&&(U.y-=ut)}),j.width=it-q+P,j.height=V-ut+X}function $(Q){t.forEach(Q.edges(),function(q){var it=Q.edge(q),ut=Q.node(q.v),V=Q.node(q.w),j,P;it.points?(j=it.points[0],P=it.points[it.points.length-1]):(it.points=[],j=V,P=ut),it.points.unshift(d.intersectRect(ut,j)),it.points.push(d.intersectRect(V,P))})}function F(Q){t.forEach(Q.edges(),function(q){var it=Q.edge(q);if(t.has(it,"x"))switch((it.labelpos==="l"||it.labelpos==="r")&&(it.width-=it.labeloffset),it.labelpos){case"l":it.x-=it.width/2+it.labeloffset;break;case"r":it.x+=it.width/2+it.labeloffset;break}})}function K(Q){t.forEach(Q.edges(),function(q){var it=Q.edge(q);it.reversed&&it.points.reverse()})}function nt(Q){t.forEach(Q.nodes(),function(q){if(Q.children(q).length){var it=Q.node(q),ut=Q.node(it.borderTop),V=Q.node(it.borderBottom),j=Q.node(t.last(it.borderLeft)),P=Q.node(t.last(it.borderRight));it.width=Math.abs(P.x-j.x),it.height=Math.abs(V.y-ut.y),it.x=j.x+it.width/2,it.y=ut.y+it.height/2}}),t.forEach(Q.nodes(),function(q){Q.node(q).dummy==="border"&&Q.removeNode(q)})}function z(Q){t.forEach(Q.edges(),function(q){if(q.v===q.w){var it=Q.node(q.v);it.selfEdges||(it.selfEdges=[]),it.selfEdges.push({e:q,label:Q.edge(q)}),Q.removeEdge(q)}})}function Y(Q){var q=d.buildLayerMatrix(Q);t.forEach(q,function(it){var ut=0;t.forEach(it,function(V,j){var P=Q.node(V);P.order=j+ut,t.forEach(P.selfEdges,function(X){d.addDummyNode(Q,"selfedge",{width:X.label.width,height:X.label.height,rank:P.rank,order:j+ ++ut,e:X.e,label:X.label},"_se")}),delete P.selfEdges})})}function rt(Q){t.forEach(Q.nodes(),function(q){var it=Q.node(q);if(it.dummy==="selfedge"){var ut=Q.node(it.e.v),V=ut.x+ut.width/2,j=ut.y,P=it.x-V,X=ut.height/2;Q.setEdge(it.e,it.label),Q.removeNode(q),it.label.points=[{x:V+2*P/3,y:j-X},{x:V+5*P/6,y:j-X},{x:V+P,y:j},{x:V+5*P/6,y:j+X},{x:V+2*P/3,y:j+X}],it.label.x=it.x,it.label.y=it.y}})}function lt(Q,q){return t.mapValues(t.pick(Q,q),Number)}function J(Q){var q={};return t.forEach(Q,function(it,ut){q[ut.toLowerCase()]=it}),q}return Q4}var K4,RA;function Ftt(){if(RA)return K4;RA=1;var t=Ge(),e=br(),n=pi().Graph;K4={debugOrdering:r};function r(i){var a=e.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+i.node(s).rank)}),t.forEach(i.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),t.forEach(a,function(s,l){var u="layer"+l;o.setNode(u,{rank:"same"}),t.reduce(s,function(h,f){return o.setEdge(h,f,{style:"invis"}),f})}),o}return K4}var FA,$A;function $tt(){return $A||($A=1,FA="0.8.5"),FA}var PA,YA;function zA(){return YA||(YA=1,PA={graphlib:pi(),layout:Rtt(),debug:Ftt(),util:{time:br().time,notime:br().notime},version:$tt()}),PA}var Jl=zA();let jA=0;const Ptt=function(t,e,n,r,i){const a=function(k){switch(k){case i.db.relationType.AGGREGATION:return"aggregation";case i.db.EXTENSION:return"extension";case i.db.COMPOSITION:return"composition";case i.db.DEPENDENCY:return"dependency";case i.db.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(k=>!Number.isNaN(k.y));const o=e.points,s=ja().x(function(k){return k.x}).y(function(k){return k.y}).curve(Fo),l=t.append("path").attr("d",s(o)).attr("id","edge"+jA).attr("class","relation");let u="";r.arrowMarkerAbsolute&&(u=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,u=u.replace(/\(/g,"\\("),u=u.replace(/\)/g,"\\)")),n.relation.lineType==1&&l.attr("class","relation dashed-line"),n.relation.type1!=="none"&&l.attr("marker-start","url("+u+"#"+a(n.relation.type1)+"Start)"),n.relation.type2!=="none"&&l.attr("marker-end","url("+u+"#"+a(n.relation.type2)+"End)");let h,f;const d=e.points.length;let p=we.calcLabelPosition(e.points);h=p.x,f=p.y;let m,_,y,b;if(d%2!==0&&d>1){let k=we.calcCardinalityPosition(n.relation.type1!=="none",e.points,e.points[0]),T=we.calcCardinalityPosition(n.relation.type2!=="none",e.points,e.points[d-1]);W.debug("cardinality_1_point "+JSON.stringify(k)),W.debug("cardinality_2_point "+JSON.stringify(T)),m=k.x,_=k.y,y=T.x,b=T.y}if(typeof n.title<"u"){const k=t.append("g").attr("class","classLabel"),T=k.append("text").attr("class","label").attr("x",h).attr("y",f).attr("fill","red").attr("text-anchor","middle").text(n.title);window.label=T;const x=T.node().getBBox();k.insert("rect",":first-child").attr("class","box").attr("x",x.x-r.padding/2).attr("y",x.y-r.padding/2).attr("width",x.width+r.padding).attr("height",x.height+r.padding)}W.info("Rendering relation "+JSON.stringify(n)),typeof n.relationTitle1<"u"&&n.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",m).attr("y",_).attr("fill","black").attr("font-size","6").text(n.relationTitle1),typeof n.relationTitle2<"u"&&n.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",y).attr("y",b).attr("fill","black").attr("font-size","6").text(n.relationTitle2),jA++},Ytt=function(t,e,n,r){W.debug("Rendering class ",e,n);const i=e.id,a={id:i,label:e.id,width:0,height:0},o=t.append("g").attr("id",r.db.lookUpDomId(i)).attr("class","classGroup");let s;e.link?s=o.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",n.textHeight+n.padding).attr("x",0):s=o.append("text").attr("y",n.textHeight+n.padding).attr("x",0);let l=!0;e.annotations.forEach(function(x){const A=s.append("tspan").text("\xAB"+x+"\xBB");l||A.attr("dy",n.textHeight),l=!1});let u=e.id;e.type!==void 0&&e.type!==""&&(u+="<"+e.type+">");const h=s.append("tspan").text(u).attr("class","title");l||h.attr("dy",n.textHeight);const f=s.node().getBBox().height,d=o.append("line").attr("x1",0).attr("y1",n.padding+f+n.dividerMargin/2).attr("y2",n.padding+f+n.dividerMargin/2),p=o.append("text").attr("x",n.padding).attr("y",f+n.dividerMargin+n.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach(function(x){UA(p,x,l,n),l=!1});const m=p.node().getBBox(),_=o.append("line").attr("x1",0).attr("y1",n.padding+f+n.dividerMargin+m.height).attr("y2",n.padding+f+n.dividerMargin+m.height),y=o.append("text").attr("x",n.padding).attr("y",f+2*n.dividerMargin+m.height+n.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach(function(x){UA(y,x,l,n),l=!1});const b=o.node().getBBox();var k=" ";e.cssClasses.length>0&&(k=k+e.cssClasses.join(" "));const T=o.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",b.width+2*n.padding).attr("height",b.height+n.padding+.5*n.dividerMargin).attr("class",k).node().getBBox().width;return s.node().childNodes.forEach(function(x){x.setAttribute("x",(T-x.getBBox().width)/2)}),e.tooltip&&s.insert("title").text(e.tooltip),d.attr("x2",T),_.attr("x2",T),a.width=T,a.height=b.height+n.padding+.5*n.dividerMargin,a},Y0=function(t){const e=/^(\+|-|~|#)?(\w+)(~\w+~|\[\])?\s+(\w+) *(\*|\$)?$/,n=/^([+|\-|~|#])?(\w+) *\( *(.*)\) *(\*|\$)? *(\w*[~|[\]]*\s*\w*~?)$/;let r=t.match(e),i=t.match(n);return r&&!i?ztt(r):i?jtt(i):Utt(t)},ztt=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",a=t[3]?Va(t[3].trim()):"",o=t[4]?t[4].trim():"",s=t[5]?t[5].trim():"";n=r+i+a+" "+o,e=J4(s)}catch{n=t}return{displayText:n,cssStyle:e}},jtt=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",a=t[3]?Va(t[3].trim()):"",o=t[4]?t[4].trim():"",s=t[5]?" : "+Va(t[5]).trim():"";n=r+i+"("+a+")"+s,e=J4(o)}catch{n=t}return{displayText:n,cssStyle:e}},Utt=function(t){let e="",n="",r="",i=t.indexOf("("),a=t.indexOf(")");if(i>1&&a>i&&a<=t.length){let o="",s="",l=t.substring(0,1);l.match(/\w/)?s=t.substring(0,i).trim():(l.match(/\+|-|~|#/)&&(o=l),s=t.substring(1,i).trim());const u=t.substring(i+1,a);t.substring(a+1,1),n=J4(t.substring(a+1,a+2)),e=o+s+"("+Va(u.trim())+")",a<t.length&&(r=t.substring(a+2).trim(),r!==""&&(r=" : "+Va(r),e+=r))}else e=Va(t);return{displayText:e,cssStyle:n}},UA=function(t,e,n,r){let i=Y0(e);const a=t.append("tspan").attr("x",r.padding).text(i.displayText);i.cssStyle!==""&&a.attr("style",i.cssStyle),n||a.attr("dy",r.textHeight)},J4=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},HA={drawClass:Ytt,drawEdge:Ptt,parseMember:Y0};let tb={};const z0=20,j0=function(t){const e=Object.entries(tb).find(n=>n[1].label===t);if(e)return e[0]},Htt=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Wtt={draw:function(t,e,n,r){const i=at().class;tb={},W.info("Rendering diagram "+t);const a=at().securityLevel;let o;a==="sandbox"&&(o=Lt("#i"+e));const s=Lt(a==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=s.select(`[id='${e}']`);Htt(l);const u=new un.Graph({multigraph:!0});u.setGraph({isMultiGraph:!0}),u.setDefaultEdgeLabel(function(){return{}});const h=r.db.getClasses(),f=Object.keys(h);for(let y=0;y<f.length;y++){const b=h[f[y]],k=HA.drawClass(l,b,i,r);tb[k.id]=k,u.setNode(k.id,k),W.info("Org height: "+k.height)}r.db.getRelations().forEach(function(y){W.info("tjoho"+j0(y.id1)+j0(y.id2)+JSON.stringify(y)),u.setEdge(j0(y.id1),j0(y.id2),{relation:y},y.title||"DEFAULT")}),Jl.layout(u),u.nodes().forEach(function(y){typeof y<"u"&&typeof u.node(y)<"u"&&(W.debug("Node "+y+": "+JSON.stringify(u.node(y))),s.select("#"+r.db.lookUpDomId(y)).attr("transform","translate("+(u.node(y).x-u.node(y).width/2)+","+(u.node(y).y-u.node(y).height/2)+" )"))}),u.edges().forEach(function(y){typeof y<"u"&&typeof u.edge(y)<"u"&&(W.debug("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(u.edge(y))),HA.drawEdge(l,u.edge(y),u.edge(y).relation,i,r))});const d=l.node().getBBox(),p=d.width+z0*2,m=d.height+z0*2;oi(l,m,p,i.useMaxWidth);const _=`${d.x-z0} ${d.y-z0} ${p} ${m}`;W.debug(`viewBox ${_}`),l.attr("viewBox",_),yr(r.db,l,e)}},Vtt=(t,e,n,r)=>{e.forEach(i=>{Gtt[i](t,n,r)})},Gtt={extension:(t,e,n)=>{W.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}};function qtt(t,e){e&&t.attr("style",e)}function Xtt(t){const e=Lt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=t.label,i=t.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+i+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),qtt(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const _r=(t,e,n,r)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),Mn(at().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),W.info("vertexText"+i);const a={isNode:r,label:kd(i).replace(/fa[lrsb]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")};return Xtt(a)}else{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof i=="string"?o=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?o=i:o=[];for(let s=0;s<o.length;s++){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o[s].trim(),a.appendChild(l)}return a}},Un=(t,e,n,r)=>{let i;n?i=n:i="node default";const a=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=a.insert("g").attr("class","label").attr("style",e.labelStyle);let s;typeof e.labelText>"u"?s="":s=typeof e.labelText=="string"?e.labelText:e.labelText[0];const l=o.node().appendChild(_r(ri(kd(s),at()),e.labelStyle,!1,r));let u=l.getBBox();if(Mn(at().flowchart.htmlLabels)){const f=l.children[0],d=Lt(l);u=f.getBoundingClientRect(),d.attr("width",u.width),d.attr("height",u.height)}const h=e.padding/2;return o.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),{shapeSvg:a,bbox:u,halfPadding:h,label:o}},hn=(t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height};function sa(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}let Le={},gi={},WA={};const Ztt=()=>{gi={},WA={},Le={}},U0=(t,e)=>(W.trace("In isDecendant",e," ",t," = ",gi[e].indexOf(t)>=0),gi[e].indexOf(t)>=0),Qtt=(t,e)=>(W.info("Decendants of ",e," is ",gi[e]),W.info("Edge is ",t),t.v===e||t.w===e?!1:gi[e]?!!(gi[e].indexOf(t.v)>=0||U0(t.v,e)||U0(t.w,e)||gi[e].indexOf(t.w)>=0):(W.debug("Tilt, ",e,",not in decendants"),!1)),VA=(t,e,n,r)=>{W.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const i=e.children(t)||[];t!==r&&i.push(t),W.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach(a=>{if(e.children(a).length>0)VA(a,e,n,r);else{const o=e.node(a);W.info("cp ",a," to ",r," with parent ",t),n.setNode(a,o),r!==e.parent(a)&&(W.warn("Setting parent",a,e.parent(a)),n.setParent(a,e.parent(a))),t!==r&&a!==t?(W.debug("Setting parent",a,t),n.setParent(a,t)):(W.info("In copy ",t,"root",r,"data",e.node(t),r),W.debug("Not Setting parent for node=",a,"cluster!==rootId",t!==r,"node!==clusterId",a!==t));const s=e.edges(a);W.debug("Copying Edges",s),s.forEach(l=>{W.info("Edge",l);const u=e.edge(l.v,l.w,l.name);W.info("Edge data",u,r);try{Qtt(l,r)?(W.info("Copying as ",l.v,l.w,u,l.name),n.setEdge(l.v,l.w,u,l.name),W.info("newGraph edges ",n.edges(),n.edge(n.edges()[0]))):W.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",r," clusterId:",t)}catch(h){W.error(h)}})}W.debug("Removing node",a),e.removeNode(a)})},GA=(t,e)=>{const n=e.children(t);let r=[].concat(n);for(let i=0;i<n.length;i++)WA[n[i]]=t,r=r.concat(GA(n[i],e));return r},tu=(t,e)=>{W.trace("Searching",t);const n=e.children(t);if(W.trace("Searching children of id ",t,n),n.length<1)return W.trace("This is a valid node",t),t;for(let r=0;r<n.length;r++){const i=tu(n[r],e);if(i)return W.trace("Found replacement for",t," => ",i),i}},H0=t=>!Le[t]||!Le[t].externalConnections?t:Le[t]?Le[t].id:t,Ktt=(t,e)=>{if(!t||e>10){W.debug("Opting out, no graph ");return}else W.debug("Opting in, graph ");t.nodes().forEach(function(n){t.children(n).length>0&&(W.warn("Cluster identified",n," Replacement id in edges: ",tu(n,t)),gi[n]=GA(n,t),Le[n]={id:tu(n,t),clusterData:t.node(n)})}),t.nodes().forEach(function(n){const r=t.children(n),i=t.edges();r.length>0?(W.debug("Cluster identified",n,gi),i.forEach(a=>{if(a.v!==n&&a.w!==n){const o=U0(a.v,n),s=U0(a.w,n);o^s&&(W.warn("Edge: ",a," leaves cluster ",n),W.warn("Decendants of XXX ",n,": ",gi[n]),Le[n].externalConnections=!0)}})):W.debug("Not a cluster ",n,gi)}),t.edges().forEach(function(n){const r=t.edge(n);W.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(n)),W.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(t.edge(n)));let i=n.v,a=n.w;if(W.warn("Fix XXX",Le,"ids:",n.v,n.w,"Translateing: ",Le[n.v]," --- ",Le[n.w]),Le[n.v]&&Le[n.w]&&Le[n.v]===Le[n.w]){W.warn("Fixing and trixing link to self - removing XXX",n.v,n.w,n.name),W.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),i=H0(n.v),a=H0(n.w),t.removeEdge(n.v,n.w,n.name);const o=n.w+"---"+n.v;t.setNode(o,{domId:o,id:o,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});const s=JSON.parse(JSON.stringify(r)),l=JSON.parse(JSON.stringify(r));s.label="",s.arrowTypeEnd="none",l.label="",s.fromCluster=n.v,l.toCluster=n.v,t.setEdge(i,o,s,n.name+"-cyclic-special"),t.setEdge(o,a,l,n.name+"-cyclic-special")}else(Le[n.v]||Le[n.w])&&(W.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),i=H0(n.v),a=H0(n.w),t.removeEdge(n.v,n.w,n.name),i!==n.v&&(r.fromCluster=n.v),a!==n.w&&(r.toCluster=n.w),W.warn("Fix Replacing with XXX",i,a,n.name),t.setEdge(i,a,r,n.name))}),W.warn("Adjusted Graph",un.json.write(t)),qA(t,0),W.trace(Le)},qA=(t,e)=>{if(W.warn("extractor - ",e,un.json.write(t),t.children("D")),e>10){W.error("Bailing out");return}let n=t.nodes(),r=!1;for(let i=0;i<n.length;i++){const a=n[i],o=t.children(a);r=r||o.length>0}if(!r){W.debug("Done, no node has children",t.nodes());return}W.debug("Nodes = ",n,e);for(let i=0;i<n.length;i++){const a=n[i];if(W.debug("Extracting node",a,Le,Le[a]&&!Le[a].externalConnections,!t.parent(a),t.node(a),t.children("D")," Depth ",e),!Le[a])W.debug("Not a cluster",a,e);else if(!Le[a].externalConnections&&t.children(a)&&t.children(a).length>0){W.warn("Cluster without external connections, without a parent and with children",a,e);let o=t.graph().rankdir==="TB"?"LR":"TB";Le[a]&&Le[a].clusterData&&Le[a].clusterData.dir&&(o=Le[a].clusterData.dir,W.warn("Fixing dir",Le[a].clusterData.dir,o));const s=new un.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:o,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});W.warn("Old graph before copy",un.json.write(t)),VA(a,t,s,a),t.setNode(a,{clusterNode:!0,id:a,clusterData:Le[a].clusterData,labelText:Le[a].labelText,graph:s}),W.warn("New graph after copy node: (",a,")",un.json.write(s)),W.debug("Old graph after copy",un.json.write(t))}else W.warn("Cluster ** ",a," **not meeting the criteria !externalConnections:",!Le[a].externalConnections," no parent: ",!t.parent(a)," children ",t.children(a)&&t.children(a).length>0,t.children("D"),e),W.debug(Le)}n=t.nodes(),W.warn("New list of nodes",n);for(let i=0;i<n.length;i++){const a=n[i],o=t.node(a);W.warn(" Now next level",a,o),o.clusterNode&&qA(o.graph,e+1)}},XA=(t,e)=>{if(e.length===0)return[];let n=Object.assign(e);return e.forEach(r=>{const i=t.children(r),a=XA(t,i);n=n.concat(a)}),n},Jtt=t=>XA(t,t.children());function tet(t,e){return t.intersect(e)}function ZA(t,e,n,r){var i=t.x,a=t.y,o=i-r.x,s=a-r.y,l=Math.sqrt(e*e*s*s+n*n*o*o),u=Math.abs(e*n*o/l);r.x<i&&(u=-u);var h=Math.abs(e*n*s/l);return r.y<a&&(h=-h),{x:i+u,y:a+h}}function eet(t,e,n){return ZA(t,e,e,n)}function net(t,e,n,r){var i,a,o,s,l,u,h,f,d,p,m,_,y,b,k;if(i=e.y-t.y,o=t.x-e.x,l=e.x*t.y-t.x*e.y,d=i*n.x+o*n.y+l,p=i*r.x+o*r.y+l,!(d!==0&&p!==0&&QA(d,p))&&(a=r.y-n.y,s=n.x-r.x,u=r.x*n.y-n.x*r.y,h=a*t.x+s*t.y+u,f=a*e.x+s*e.y+u,!(h!==0&&f!==0&&QA(h,f))&&(m=i*s-a*o,m!==0)))return _=Math.abs(m/2),y=o*u-s*l,b=y<0?(y-_)/m:(y+_)/m,y=a*l-i*u,k=y<0?(y-_)/m:(y+_)/m,{x:b,y:k}}function QA(t,e){return t*e>0}function ret(t,e,n){var r=t.x,i=t.y,a=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(m){o=Math.min(o,m.x),s=Math.min(s,m.y)}):(o=Math.min(o,e.x),s=Math.min(s,e.y));for(var l=r-t.width/2-o,u=i-t.height/2-s,h=0;h<e.length;h++){var f=e[h],d=e[h<e.length-1?h+1:0],p=net(t,n,{x:l+f.x,y:u+f.y},{x:l+d.x,y:u+d.y});p&&a.push(p)}return a.length?(a.length>1&&a.sort(function(m,_){var y=m.x-n.x,b=m.y-n.y,k=Math.sqrt(y*y+b*b),T=_.x-n.x,x=_.y-n.y,A=Math.sqrt(T*T+x*x);return k<A?-1:k===A?0:1}),a[0]):t}const eu=(t,e)=>{var n=t.x,r=t.y,i=e.x-n,a=e.y-r,o=t.width/2,s=t.height/2,l,u;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=a===0?0:s*i/a,u=s):(i<0&&(o=-o),l=o,u=i===0?0:o*a/i),{x:n+l,y:r+u}},rn={node:tet,circle:eet,ellipse:ZA,polygon:ret,rect:eu},iet=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Un(t,e,"node "+e.classes,!0);W.info("Classes = ",e.classes);const a=n.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),hn(e,a),e.intersect=function(o){return rn.rect(e,o)},n},aet=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=i+a,s=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}];W.info("Question main (Circle)");const l=sa(n,o,o,s);return l.attr("style",e.style),hn(e,l),e.intersect=function(u){return W.warn("Intersect called"),rn.polygon(e,s,u)},n},oet=(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,i=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return n.insert("polygon",":first-child").attr("points",i.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return rn.circle(e,14,a)},n},set=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=4,a=r.height+e.padding,o=a/i,s=r.width+2*o+e.padding,l=[{x:o,y:0},{x:s-o,y:0},{x:s,y:-a/2},{x:s-o,y:-a},{x:o,y:-a},{x:0,y:-a/2}],u=sa(n,s,a,l);return u.attr("style",e.style),hn(e,u),e.intersect=function(h){return rn.polygon(e,l,h)},n},cet=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return sa(n,i,a,o).attr("style",e.style),e.width=i+a,e.height=a,e.intersect=function(s){return rn.polygon(e,o,s)},n},uet=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],s=sa(n,i,a,o);return s.attr("style",e.style),hn(e,s),e.intersect=function(l){return rn.polygon(e,o,l)},n},het=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],s=sa(n,i,a,o);return s.attr("style",e.style),hn(e,s),e.intersect=function(l){return rn.polygon(e,o,l)},n},det=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],s=sa(n,i,a,o);return s.attr("style",e.style),hn(e,s),e.intersect=function(l){return rn.polygon(e,o,l)},n},fet=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],s=sa(n,i,a,o);return s.attr("style",e.style),hn(e,s),e.intersect=function(l){return rn.polygon(e,o,l)},n},pet=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],s=sa(n,i,a,o);return s.attr("style",e.style),hn(e,s),e.intersect=function(l){return rn.polygon(e,o,l)},n},get=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=i/2,o=a/(2.5+i/50),s=r.height+o+e.padding,l="M 0,"+o+" a "+a+","+o+" 0,0,0 "+i+" 0 a "+a+","+o+" 0,0,0 "+-i+" 0 l 0,"+s+" a "+a+","+o+" 0,0,0 "+i+" 0 l 0,"+-s,u=n.attr("label-offset-y",o).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-i/2+","+-(s/2+o)+")");return hn(e,u),e.intersect=function(h){const f=rn.rect(e,h),d=f.x-e.x;if(a!=0&&(Math.abs(d)<e.width/2||Math.abs(d)==e.width/2&&Math.abs(f.y-e.y)>e.height/2-o)){let p=o*o*(1-d*d/(a*a));p!=0&&(p=Math.sqrt(p)),p=o-p,h.y-e.y>0&&(p=-p),f.y+=p}return f},n},yet=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Un(t,e,"node "+e.classes,!0);W.trace("Classes = ",e.classes);const a=n.insert("rect",":first-child"),o=r.width+e.padding,s=r.height+e.padding;if(a.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",o).attr("height",s),e.props){const l=new Set(Object.keys(e.props));e.props.borders&&(KA(a,e.props.borders,o,s),l.delete("borders")),l.forEach(u=>{W.warn(`Unknown node property ${u}`)})}return hn(e,a),e.intersect=function(l){return rn.rect(e,l)},n},met=(t,e)=>{const{shapeSvg:n}=Un(t,e,"label",!0);W.trace("Classes = ",e.classes);const r=n.insert("rect",":first-child"),i=0,a=0;if(r.attr("width",i).attr("height",a),n.attr("class","label edgeLabel"),e.props){const o=new Set(Object.keys(e.props));e.props.borders&&(KA(r,e.props.borders,i,a),o.delete("borders")),o.forEach(s=>{W.warn(`Unknown node property ${s}`)})}return hn(e,r),e.intersect=function(o){return rn.rect(e,o)},n};function KA(t,e,n,r){const i=[],a=s=>{i.push(s),i.push(0)},o=s=>{i.push(0),i.push(s)};e.includes("t")?(W.debug("add top border"),a(n)):o(n),e.includes("r")?(W.debug("add right border"),a(r)):o(r),e.includes("b")?(W.debug("add bottom border"),a(n)):o(n),e.includes("l")?(W.debug("add left border"),a(r)):o(r),t.attr("stroke-dasharray",i.join(" "))}const bet=(t,e)=>{let n;e.classes?n="node "+e.classes:n="node default";const r=t.insert("g").attr("class",n).attr("id",e.domId||e.id),i=r.insert("rect",":first-child"),a=r.insert("line"),o=r.insert("g").attr("class","label"),s=e.labelText.flat?e.labelText.flat():e.labelText;let l="";typeof s=="object"?l=s[0]:l=s,W.info("Label text abc79",l,s,typeof s=="object");const u=o.node().appendChild(_r(l,e.labelStyle,!0,!0));let h={width:0,height:0};if(Mn(at().flowchart.htmlLabels)){const _=u.children[0],y=Lt(u);h=_.getBoundingClientRect(),y.attr("width",h.width),y.attr("height",h.height)}W.info("Text 2",s);const f=s.slice(1,s.length);let d=u.getBBox();const p=o.node().appendChild(_r(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0));if(Mn(at().flowchart.htmlLabels)){const _=p.children[0],y=Lt(p);h=_.getBoundingClientRect(),y.attr("width",h.width),y.attr("height",h.height)}const m=e.padding/2;return Lt(p).attr("transform","translate( "+(h.width>d.width?0:(d.width-h.width)/2)+", "+(d.height+m+5)+")"),Lt(u).attr("transform","translate( "+(h.width<d.width?0:-(d.width-h.width)/2)+", "+0+")"),h=o.node().getBBox(),o.attr("transform","translate("+-h.width/2+", "+(-h.height/2-m+3)+")"),i.attr("class","outer title-state").attr("x",-h.width/2-m).attr("y",-h.height/2-m).attr("width",h.width+e.padding).attr("height",h.height+e.padding),a.attr("class","divider").attr("x1",-h.width/2-m).attr("x2",h.width/2+m).attr("y1",-h.height/2-m+d.height+m).attr("y2",-h.height/2-m+d.height+m),hn(e,i),e.intersect=function(_){return rn.rect(e,_)},r},_et=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.height+e.padding,a=r.width+i/4+e.padding,o=n.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-a/2).attr("y",-i/2).attr("width",a).attr("height",i);return hn(e,o),e.intersect=function(s){return rn.rect(e,s)},n},vet=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Un(t,e,void 0,!0),a=n.insert("circle",":first-child");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),W.info("Circle main"),hn(e,a),e.intersect=function(o){return W.info("Circle intersect",e,r.width/2+i,o),rn.circle(e,r.width/2+i,o)},n},xet=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Un(t,e,void 0,!0),a=5,o=n.insert("g",":first-child"),s=o.insert("circle"),l=o.insert("circle");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i+a).attr("width",r.width+e.padding+a*2).attr("height",r.height+e.padding+a*2),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),W.info("DoubleCircle main"),hn(e,s),e.intersect=function(u){return W.info("DoubleCircle intersect",e,r.width/2+i+a,u),rn.circle(e,r.width/2+i+a,u)},n},ket=(t,e)=>{const{shapeSvg:n,bbox:r}=Un(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],s=sa(n,i,a,o);return s.attr("style",e.style),hn(e,s),e.intersect=function(l){return rn.polygon(e,o,l)},n},wet=(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),hn(e,r),e.intersect=function(i){return rn.circle(e,7,i)},n},JA=(t,e,n)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,a=10;n==="LR"&&(i=10,a=70);const o=r.append("rect").attr("x",-1*i/2).attr("y",-1*a/2).attr("width",i).attr("height",a).attr("class","fork-join");return hn(e,o),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(s){return rn.rect(e,s)},r},tM={question:aet,rect:yet,labelRect:met,rectWithTitle:bet,choice:oet,circle:vet,doublecircle:xet,stadium:_et,hexagon:set,rect_left_inv_arrow:cet,lean_right:uet,lean_left:het,trapezoid:det,inv_trapezoid:fet,rect_right_inv_arrow:pet,cylinder:get,start:wet,end:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child"),i=n.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),hn(e,i),e.intersect=function(a){return rn.circle(e,7,a)},n},note:iet,subroutine:ket,fork:JA,join:JA,class_box:(t,e)=>{const n=e.padding/2,r=4,i=8;let a;e.classes?a="node "+e.classes:a="node default";const o=t.insert("g").attr("class",a).attr("id",e.domId||e.id),s=o.insert("rect",":first-child"),l=o.insert("line"),u=o.insert("line");let h=0,f=r;const d=o.insert("g").attr("class","label");let p=0;const m=e.classData.annotations&&e.classData.annotations[0],_=e.classData.annotations[0]?"\xAB"+e.classData.annotations[0]+"\xBB":"",y=d.node().appendChild(_r(_,e.labelStyle,!0,!0));let b=y.getBBox();if(Mn(at().flowchart.htmlLabels)){const S=y.children[0],D=Lt(y);b=S.getBoundingClientRect(),D.attr("width",b.width),D.attr("height",b.height)}e.classData.annotations[0]&&(f+=b.height+r,h+=b.width);let k=e.classData.id;e.classData.type!==void 0&&e.classData.type!==""&&(at().flowchart.htmlLabels?k+="&lt;"+e.classData.type+"&gt;":k+="<"+e.classData.type+">");const T=d.node().appendChild(_r(k,e.labelStyle,!0,!0));Lt(T).attr("class","classTitle");let x=T.getBBox();if(Mn(at().flowchart.htmlLabels)){const S=T.children[0],D=Lt(T);x=S.getBoundingClientRect(),D.attr("width",x.width),D.attr("height",x.height)}f+=x.height+r,x.width>h&&(h=x.width);const A=[];e.classData.members.forEach(S=>{const D=Y0(S);let v=D.displayText;at().flowchart.htmlLabels&&(v=v.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const M=d.node().appendChild(_r(v,D.cssStyle?D.cssStyle:e.labelStyle,!0,!0));let w=M.getBBox();if(Mn(at().flowchart.htmlLabels)){const I=M.children[0],B=Lt(M);w=I.getBoundingClientRect(),B.attr("width",w.width),B.attr("height",w.height)}w.width>h&&(h=w.width),f+=w.height+r,A.push(M)}),f+=i;const C=[];if(e.classData.methods.forEach(S=>{const D=Y0(S);let v=D.displayText;at().flowchart.htmlLabels&&(v=v.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const M=d.node().appendChild(_r(v,D.cssStyle?D.cssStyle:e.labelStyle,!0,!0));let w=M.getBBox();if(Mn(at().flowchart.htmlLabels)){const I=M.children[0],B=Lt(M);w=I.getBoundingClientRect(),B.attr("width",w.width),B.attr("height",w.height)}w.width>h&&(h=w.width),f+=w.height+r,C.push(M)}),f+=i,m){let S=(h-b.width)/2;Lt(y).attr("transform","translate( "+(-1*h/2+S)+", "+-1*f/2+")"),p=b.height+r}let L=(h-x.width)/2;return Lt(T).attr("transform","translate( "+(-1*h/2+L)+", "+(-1*f/2+p)+")"),p+=x.height+r,l.attr("class","divider").attr("x1",-h/2-n).attr("x2",h/2+n).attr("y1",-f/2-n+i+p).attr("y2",-f/2-n+i+p),p+=i,A.forEach(S=>{Lt(S).attr("transform","translate( "+-h/2+", "+(-1*f/2+p+i/2)+")"),p+=x.height+r}),p+=i,u.attr("class","divider").attr("x1",-h/2-n).attr("x2",h/2+n).attr("y1",-f/2-n+i+p).attr("y2",-f/2-n+i+p),p+=i,C.forEach(S=>{Lt(S).attr("transform","translate( "+-h/2+", "+(-1*f/2+p)+")"),p+=x.height+r}),s.attr("class","outer title-state").attr("x",-h/2-n).attr("y",-(f/2)-n).attr("width",h+e.padding).attr("height",f+e.padding),hn(e,s),e.intersect=function(S){return rn.rect(e,S)},o}};let nc={};const Tet=(t,e,n)=>{let r,i;if(e.link){let a;at().securityLevel==="sandbox"?a="_top":e.linkTarget&&(a=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",a),i=tM[e.shape](r,e,n)}else i=tM[e.shape](t,e,n),r=i;e.tooltip&&i.attr("title",e.tooltip),e.class&&i.attr("class","node default "+e.class),nc[e.id]=r,e.haveCallback&&nc[e.id].attr("class",nc[e.id].attr("class")+" clickable")},Eet=(t,e)=>{nc[e.id]=t},Cet=()=>{nc={}},eM=t=>{const e=nc[t.id];W.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},Aet={rect:(t,e)=>{W.trace("Creating subgraph rect for ",e.id,e);const n=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),a=i.node().appendChild(_r(e.labelText,e.labelStyle,void 0,!0));let o=a.getBBox();if(Mn(at().flowchart.htmlLabels)){const f=a.children[0],d=Lt(a);o=f.getBoundingClientRect(),d.attr("width",o.width),d.attr("height",o.height)}const s=0*e.padding,l=s/2,u=e.width<=o.width+s?o.width+s:e.width;e.width<=o.width+s?e.diff=(o.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,W.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-u/2).attr("y",e.y-e.height/2-l).attr("width",u).attr("height",e.height+s),i.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2+e.padding/3)+")");const h=r.node().getBBox();return e.width=h.width,e.height=h.height,e.intersect=function(f){return eu(e,f)},n},roundedWithTitle:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),a=n.append("rect"),o=i.node().appendChild(_r(e.labelText,e.labelStyle,void 0,!0));let s=o.getBBox();if(Mn(at().flowchart.htmlLabels)){const d=o.children[0],p=Lt(o);s=d.getBoundingClientRect(),p.attr("width",s.width),p.attr("height",s.height)}s=o.getBBox();const l=0*e.padding,u=l/2,h=e.width<=s.width+e.padding?s.width+e.padding:e.width;e.width<=s.width+e.padding?e.diff=(s.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-h/2-u).attr("y",e.y-e.height/2-u).attr("width",h+l).attr("height",e.height+l),a.attr("class","inner").attr("x",e.x-h/2-u).attr("y",e.y-e.height/2-u+s.height-1).attr("width",h+l).attr("height",e.height+l-s.height-3),i.attr("transform","translate("+(e.x-s.width/2)+", "+(e.y-e.height/2-e.padding/3+(Mn(at().flowchart.htmlLabels)?5:3))+")");const f=r.node().getBBox();return e.height=f.height,e.intersect=function(d){return eu(e,d)},n},noteGroup:(t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,a=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2-a).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const o=r.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(s){return eu(e,s)},n},divider:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,a=i/2;r.attr("class","divider").attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2).attr("width",e.width+i).attr("height",e.height+i);const o=r.node().getBBox();return e.width=o.width,e.height=o.height,e.diff=-e.padding/2,e.intersect=function(s){return eu(e,s)},n}};let nM={};const Met=(t,e)=>{W.trace("Inserting cluster");const n=e.shape||"rect";nM[e.id]=Aet[n](t,e)},Let=()=>{nM={}};let W0={},Dn={};const Bet=()=>{W0={},Dn={}},Net=(t,e)=>{const n=_r(e.label,e.labelStyle),r=t.insert("g").attr("class","edgeLabel"),i=r.insert("g").attr("class","label");i.node().appendChild(n);let a=n.getBBox();if(Mn(at().flowchart.htmlLabels)){const s=n.children[0],l=Lt(n);a=s.getBoundingClientRect(),l.attr("width",a.width),l.attr("height",a.height)}i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),W0[e.id]=r,e.width=a.width,e.height=a.height;let o;if(e.startLabelLeft){const s=_r(e.startLabelLeft,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Dn[e.id]||(Dn[e.id]={}),Dn[e.id].startLeft=l,V0(o,e.startLabelLeft)}if(e.startLabelRight){const s=_r(e.startLabelRight,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=l.node().appendChild(s),u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Dn[e.id]||(Dn[e.id]={}),Dn[e.id].startRight=l,V0(o,e.startLabelRight)}if(e.endLabelLeft){const s=_r(e.endLabelLeft,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),l.node().appendChild(s),Dn[e.id]||(Dn[e.id]={}),Dn[e.id].endLeft=l,V0(o,e.endLabelLeft)}if(e.endLabelRight){const s=_r(e.endLabelRight,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),l.node().appendChild(s),Dn[e.id]||(Dn[e.id]={}),Dn[e.id].endRight=l,V0(o,e.endLabelRight)}};function V0(t,e){at().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}const Det=(t,e)=>{W.info("Moving label abc78 ",t.id,t.label,W0[t.id]);let n=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const r=W0[t.id];let i=t.x,a=t.y;if(n){const o=we.calcLabelPosition(n);W.info("Moving label from (",i,",",a,") to (",o.x,",",o.y,") abc78")}r.attr("transform","translate("+i+", "+a+")")}if(t.startLabelLeft){const r=Dn[t.id].startLeft;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}if(t.startLabelRight){const r=Dn[t.id].startRight;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}if(t.endLabelLeft){const r=Dn[t.id].endLeft;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}if(t.endLabelRight){const r=Dn[t.id].endRight;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}},Oet=(t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),a=Math.abs(e.y-r),o=t.width/2,s=t.height/2;return i>=o||a>=s},Iet=(t,e,n)=>{W.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,a=Math.abs(r-n.x),o=t.width/2;let s=n.x<e.x?o-a:o+a;const l=t.height/2,u=Math.abs(e.y-n.y),h=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*o>Math.abs(r-e.x)*l){let f=n.y<e.y?e.y-l-i:i-l-e.y;s=h*f/u;const d={x:n.x<e.x?n.x+s:n.x-h+s,y:n.y<e.y?n.y+u-f:n.y-u+f};return s===0&&(d.x=e.x,d.y=e.y),h===0&&(d.x=e.x),u===0&&(d.y=e.y),W.warn(`abc89 topp/bott calc, Q ${u}, q ${f}, R ${h}, r ${s}`,d),d}else{n.x<e.x?s=e.x-o-r:s=r-o-e.x;let f=u*s/h,d=n.x<e.x?n.x+h-s:n.x-h+s,p=n.y<e.y?n.y+f:n.y-f;return W.warn(`sides calc abc89, Q ${u}, q ${f}, R ${h}, r ${s}`,{_x:d,_y:p}),s===0&&(d=e.x,p=e.y),h===0&&(d=e.x),u===0&&(p=e.y),{x:d,y:p}}},rM=(t,e)=>{W.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach(a=>{if(W.info("abc88 checking point",a,e),!Oet(e,a)&&!i){const o=Iet(e,r,a);W.warn("abc88 inside",a,r,o),W.warn("abc88 intersection",o);let s=!1;n.forEach(l=>{s=s||l.x===o.x&&l.y===o.y}),n.find(l=>l.x===o.x&&l.y===o.y)?W.warn("abc88 no intersect",o,n):n.push(o),i=!0}else W.warn("abc88 outside",a,r),r=a,i||n.push(a)}),W.warn("abc88 returning points",n),n},Ret=function(t,e,n,r,i,a){let o=n.points,s=!1;const l=a.node(e.v);var u=a.node(e.w);W.info("abc88 InsertEdge: ",n),u.intersect&&l.intersect&&(o=o.slice(1,n.points.length-1),o.unshift(l.intersect(o[0])),W.info("Last point",o[o.length-1],u,u.intersect(o[o.length-1])),o.push(u.intersect(o[o.length-1]))),n.toCluster&&(W.info("to cluster abc88",r[n.toCluster]),o=rM(n.points,r[n.toCluster].node),s=!0),n.fromCluster&&(W.info("from cluster abc88",r[n.fromCluster]),o=rM(o.reverse(),r[n.fromCluster].node).reverse(),s=!0);const h=o.filter(b=>!Number.isNaN(b.y));let f;i==="graph"||i==="flowchart"?f=n.curve||Fo:f=Fo;const d=ja().x(function(b){return b.x}).y(function(b){return b.y}).curve(f);let p;switch(n.thickness){case"normal":p="edge-thickness-normal";break;case"thick":p="edge-thickness-thick";break;case"invisible":p="edge-thickness-thick";break;default:p=""}switch(n.pattern){case"solid":p+=" edge-pattern-solid";break;case"dotted":p+=" edge-pattern-dotted";break;case"dashed":p+=" edge-pattern-dashed";break}const m=t.append("path").attr("d",d(h)).attr("id",n.id).attr("class"," "+p+(n.classes?" "+n.classes:"")).attr("style",n.style);let _="";switch((at().flowchart.arrowMarkerAbsolute||at().state.arrowMarkerAbsolute)&&(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,_=_.replace(/\(/g,"\\("),_=_.replace(/\)/g,"\\)")),W.info("arrowTypeStart",n.arrowTypeStart),W.info("arrowTypeEnd",n.arrowTypeEnd),n.arrowTypeStart){case"arrow_cross":m.attr("marker-start","url("+_+"#"+i+"-crossStart)");break;case"arrow_point":m.attr("marker-start","url("+_+"#"+i+"-pointStart)");break;case"arrow_barb":m.attr("marker-start","url("+_+"#"+i+"-barbStart)");break;case"arrow_circle":m.attr("marker-start","url("+_+"#"+i+"-circleStart)");break;case"aggregation":m.attr("marker-start","url("+_+"#"+i+"-aggregationStart)");break;case"extension":m.attr("marker-start","url("+_+"#"+i+"-extensionStart)");break;case"composition":m.attr("marker-start","url("+_+"#"+i+"-compositionStart)");break;case"dependency":m.attr("marker-start","url("+_+"#"+i+"-dependencyStart)");break;case"lollipop":m.attr("marker-start","url("+_+"#"+i+"-lollipopStart)");break}switch(n.arrowTypeEnd){case"arrow_cross":m.attr("marker-end","url("+_+"#"+i+"-crossEnd)");break;case"arrow_point":m.attr("marker-end","url("+_+"#"+i+"-pointEnd)");break;case"arrow_barb":m.attr("marker-end","url("+_+"#"+i+"-barbEnd)");break;case"arrow_circle":m.attr("marker-end","url("+_+"#"+i+"-circleEnd)");break;case"aggregation":m.attr("marker-end","url("+_+"#"+i+"-aggregationEnd)");break;case"extension":m.attr("marker-end","url("+_+"#"+i+"-extensionEnd)");break;case"composition":m.attr("marker-end","url("+_+"#"+i+"-compositionEnd)");break;case"dependency":m.attr("marker-end","url("+_+"#"+i+"-dependencyEnd)");break;case"lollipop":m.attr("marker-end","url("+_+"#"+i+"-lollipopEnd)");break}let y={};return s&&(y.updatedPath=o),y.originalPath=n.points,y},iM=(t,e,n,r)=>{W.info("Graph in recursive render: XXX",un.json.write(e),r);const i=e.graph().rankdir;W.trace("Dir in recursive render - dir:",i);const a=t.insert("g").attr("class","root");e.nodes()?W.info("Recursive render XXX",e.nodes()):W.info("No nodes found for",e),e.edges().length>0&&W.trace("Recursive edges",e.edge(e.edges()[0]));const o=a.insert("g").attr("class","clusters"),s=a.insert("g").attr("class","edgePaths"),l=a.insert("g").attr("class","edgeLabels"),u=a.insert("g").attr("class","nodes");e.nodes().forEach(function(f){const d=e.node(f);if(typeof r<"u"){const p=JSON.parse(JSON.stringify(r.clusterData));W.info("Setting data for cluster XXX (",f,") ",p,r),e.setNode(r.id,p),e.parent(f)||(W.trace("Setting parent",f,r.id),e.setParent(f,r.id,p))}if(W.info("(Insert) Node XXX"+f+": "+JSON.stringify(e.node(f))),d&&d.clusterNode){W.info("Cluster identified",f,d.width,e.node(f));const p=iM(u,d.graph,n,e.node(f)),m=p.elem;hn(d,m),d.diff=p.diff||0,W.info("Node bounds (abc123)",f,d,d.width,d.x,d.y),Eet(m,d),W.warn("Recursive render complete ",m,d)}else e.children(f).length>0?(W.info("Cluster - the non recursive path XXX",f,d.id,d,e),W.info(tu(d.id,e)),Le[d.id]={id:tu(d.id,e),node:d}):(W.info("Node - the non recursive path",f,d.id,d),Tet(u,e.node(f),i))}),e.edges().forEach(function(f){const d=e.edge(f.v,f.w,f.name);W.info("Edge "+f.v+" -> "+f.w+": "+JSON.stringify(f)),W.info("Edge "+f.v+" -> "+f.w+": ",f," ",JSON.stringify(e.edge(f))),W.info("Fix",Le,"ids:",f.v,f.w,"Translateing: ",Le[f.v],Le[f.w]),Net(l,d)}),e.edges().forEach(function(f){W.info("Edge "+f.v+" -> "+f.w+": "+JSON.stringify(f))}),W.info("#############################################"),W.info("###                Layout                 ###"),W.info("#############################################"),W.info(e),Jl.layout(e),W.info("Graph after layout:",un.json.write(e));let h=0;return Jtt(e).forEach(function(f){const d=e.node(f);W.info("Position "+f+": "+JSON.stringify(e.node(f))),W.info("Position "+f+": ("+d.x,","+d.y,") width: ",d.width," height: ",d.height),d&&d.clusterNode?eM(d):e.children(f).length>0?(Met(o,d),Le[d.id].node=d):eM(d)}),e.edges().forEach(function(f){const d=e.edge(f);W.info("Edge "+f.v+" -> "+f.w+": "+JSON.stringify(d),d);const p=Ret(s,f,d,Le,n,e);Det(d,p)}),e.nodes().forEach(function(f){const d=e.node(f);W.info(f,d.type,d.diff),d.type==="group"&&(h=d.diff)}),{elem:a,diff:h}},eb=(t,e,n,r,i)=>{Vtt(t,n,r,i),Cet(),Bet(),Let(),Ztt(),W.warn("Graph at first:",un.json.write(e)),Ktt(e),W.warn("Graph after:",un.json.write(e)),iM(t,e,r)},Fet=t=>he.sanitizeText(t,at()),$et=function(t,e,n,r){const i=Object.keys(t);W.info("keys:",i),W.info(t),i.forEach(function(a){const o=t[a];let s="";o.cssClasses.length>0&&(s=s+" "+o.cssClasses.join(" "));const l={labelStyle:""};let u=o.text!==void 0?o.text:o.id,h=0,f="";switch(o.type){case"class":f="class_box";break;default:f="class_box"}e.setNode(o.id,{labelStyle:l.labelStyle,shape:f,labelText:Fet(u),classData:o,rx:h,ry:h,class:s,style:l.style,id:o.id,domId:o.domId,tooltip:r.db.getTooltip(o.id)||"",haveCallback:o.haveCallback,link:o.link,width:o.type==="group"?500:void 0,type:o.type,padding:at().flowchart.padding}),W.info("setNode",{labelStyle:l.labelStyle,shape:f,labelText:u,rx:h,ry:h,class:s,style:l.style,id:o.id,width:o.type==="group"?500:void 0,type:o.type,padding:at().flowchart.padding})})},Pet=function(t,e){const n=at().flowchart;let r=0;t.forEach(function(i){r++;const a={};a.classes="relation",a.pattern=i.relation.lineType==1?"dashed":"solid",a.id="id"+r,i.type==="arrow_open"?a.arrowhead="none":a.arrowhead="normal",W.info(a,i),a.startLabelRight=i.relationTitle1==="none"?"":i.relationTitle1,a.endLabelLeft=i.relationTitle2==="none"?"":i.relationTitle2,a.arrowTypeStart=aM(i.relation.type1),a.arrowTypeEnd=aM(i.relation.type2);let o="",s="";if(typeof i.style<"u"){const l=Xa(i.style);o=l.style,s=l.labelStyle}else o="fill:none";a.style=o,a.labelStyle=s,typeof i.interpolate<"u"?a.curve=Li(i.interpolate,pr):typeof t.defaultInterpolate<"u"?a.curve=Li(t.defaultInterpolate,pr):a.curve=Li(n.curve,pr),i.text=i.title,typeof i.text>"u"?typeof i.style<"u"&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",at().flowchart.htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+i.text+"</span>"):(a.labelType="text",a.label=i.text.replace(he.lineBreakRegex,`
`),typeof i.style>"u"&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(i.id1,i.id2,a,r)})},Yet=function(t){Object.keys(t).forEach(function(e){t[e]})},zet=function(t,e,n,r){W.info("Drawing class - ",e);const i=at().flowchart,a=at().securityLevel;W.info("config:",i);const o=i.nodeSpacing||50,s=i.rankSpacing||50,l=new un.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:o,ranksep:s,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),u=r.db.getClasses(),h=r.db.getRelations();W.info(h),$et(u,l,e,r),Pet(h,l);let f;a==="sandbox"&&(f=Lt("#i"+e));const d=Lt(a==="sandbox"?f.nodes()[0].contentDocument.body:"body"),p=d.select(`[id="${e}"]`),m=d.select("#"+e+" g");if(eb(m,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),o0(l,p,i.diagramPadding,i.useMaxWidth),!i.htmlLabels){const _=a==="sandbox"?f.nodes()[0].contentDocument:document,y=_.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let b=0;b<y.length;b++){const k=y[b],T=k.getBBox(),x=_.createElementNS("http://www.w3.org/2000/svg","rect");x.setAttribute("rx",0),x.setAttribute("ry",0),x.setAttribute("width",T.width),x.setAttribute("height",T.height),k.insertBefore(x,k.firstChild)}}yr(r.db,p,e)};function aM(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const jet={setConf:Yet,draw:zet};var nb=function(){var t=function(D,v,M,w){for(M=M||{},w=D.length;w--;M[D[w]]=v);return M},e=[1,2],n=[1,5],r=[6,9,11,23,25,27,29,30,31,49],i=[1,17],a=[1,18],o=[1,19],s=[1,20],l=[1,21],u=[1,22],h=[1,25],f=[1,30],d=[1,31],p=[1,32],m=[1,33],_=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],y=[1,45],b=[30,31,46,47],k=[4,6,9,11,23,25,27,29,30,31,49],T=[42,43,44,45],x=[22,37],A=[1,64],C={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(D,v,M,w,I,B,$){var F=B.length-1;switch(I){case 1:break;case 3:this.$=[];break;case 4:B[F-1].push(B[F]),this.$=B[F-1];break;case 5:case 6:this.$=B[F];break;case 7:case 8:this.$=[];break;case 12:w.addEntity(B[F-4]),w.addEntity(B[F-2]),w.addRelationship(B[F-4],B[F],B[F-2],B[F-3]);break;case 13:w.addEntity(B[F-3]),w.addAttributes(B[F-3],B[F-1]);break;case 14:w.addEntity(B[F-2]);break;case 15:w.addEntity(B[F]);break;case 16:case 17:this.$=B[F].trim(),w.setAccTitle(this.$);break;case 18:case 19:this.$=B[F].trim(),w.setAccDescription(this.$);break;case 20:case 41:this.$=B[F];break;case 21:case 39:case 40:this.$=B[F].replace(/"/g,"");break;case 22:this.$=[B[F]];break;case 23:B[F].push(B[F-1]),this.$=B[F];break;case 24:this.$={attributeType:B[F-1],attributeName:B[F]};break;case 25:this.$={attributeType:B[F-2],attributeName:B[F-1],attributeKeyType:B[F]};break;case 26:this.$={attributeType:B[F-2],attributeName:B[F-1],attributeComment:B[F]};break;case 27:this.$={attributeType:B[F-3],attributeName:B[F-2],attributeKeyType:B[F-1],attributeComment:B[F]};break;case 28:case 29:case 30:this.$=B[F];break;case 31:this.$=B[F].replace(/"/g,"");break;case 32:this.$={cardA:B[F],relType:B[F-1],cardB:B[F-2]};break;case 33:this.$=w.Cardinality.ZERO_OR_ONE;break;case 34:this.$=w.Cardinality.ZERO_OR_MORE;break;case 35:this.$=w.Cardinality.ONE_OR_MORE;break;case 36:this.$=w.Cardinality.ONLY_ONE;break;case 37:this.$=w.Identification.NON_IDENTIFYING;break;case 38:this.$=w.Identification.IDENTIFYING;break;case 42:w.parseDirective("%%{","open_directive");break;case 43:w.parseDirective(B[F],"type_directive");break;case 44:B[F]=B[F].trim().replace(/'/g,'"'),w.parseDirective(B[F],"arg_directive");break;case 45:w.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:e,7:3,12:4,49:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,49:n},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:i,25:a,27:o,29:s,30:l,31:u,49:n},{1:[2,2]},{14:23,15:[1,24],52:h},t([15,52],[2,43]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:15,10:26,12:4,17:16,23:i,25:a,27:o,29:s,30:l,31:u,49:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),t(r,[2,15],{18:27,40:29,20:[1,28],42:f,43:d,44:p,45:m}),{24:[1,34]},{26:[1,35]},{28:[1,36]},t(r,[2,19]),t(_,[2,20]),t(_,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},t(r,[2,5]),{17:40,30:l,31:u},{21:41,22:[1,42],32:43,33:44,37:y},{41:46,46:[1,47],47:[1,48]},t(b,[2,33]),t(b,[2,34]),t(b,[2,35]),t(b,[2,36]),t(r,[2,16]),t(r,[2,17]),t(r,[2,18]),t(k,[2,9]),{14:49,52:h},{52:[2,44]},{15:[1,50]},{22:[1,51]},t(r,[2,14]),{21:52,22:[2,22],32:43,33:44,37:y},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:f,43:d,44:p,45:m},t(T,[2,37]),t(T,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},t(r,[2,13]),{22:[2,23]},t(x,[2,24],{35:61,36:62,38:[1,63],39:A}),t([22,37,38,39],[2,29]),t([30,31],[2,32]),t(k,[2,10]),t(r,[2,12]),t(r,[2,39]),t(r,[2,40]),t(r,[2,41]),t(x,[2,25],{36:65,39:A}),t(x,[2,26]),t([22,37,39],[2,30]),t(x,[2,31]),t(x,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(D,v){if(v.recoverable)this.trace(D);else{var M=new Error(D);throw M.hash=v,M}},parse:function(D){var v=this,M=[0],w=[],I=[null],B=[],$=this.table,F="",K=0,nt=0,z=2,Y=1,rt=B.slice.call(arguments,1),lt=Object.create(this.lexer),J={yy:{}};for(var Q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Q)&&(J.yy[Q]=this.yy[Q]);lt.setInput(D,J.yy),J.yy.lexer=lt,J.yy.parser=this,typeof lt.yylloc>"u"&&(lt.yylloc={});var q=lt.yylloc;B.push(q);var it=lt.options&&lt.options.ranges;typeof J.yy.parseError=="function"?this.parseError=J.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var Dt;return Dt=w.pop()||lt.lex()||Y,typeof Dt!="number"&&(Dt instanceof Array&&(w=Dt,Dt=w.pop()),Dt=v.symbols_[Dt]||Dt),Dt}for(var V,j,P,X,O={},G,U,H,xt;;){if(j=M[M.length-1],this.defaultActions[j]?P=this.defaultActions[j]:((V===null||typeof V>"u")&&(V=ut()),P=$[j]&&$[j][V]),typeof P>"u"||!P.length||!P[0]){var ot="";xt=[];for(G in $[j])this.terminals_[G]&&G>z&&xt.push("'"+this.terminals_[G]+"'");lt.showPosition?ot="Parse error on line "+(K+1)+`:
`+lt.showPosition()+`
Expecting `+xt.join(", ")+", got '"+(this.terminals_[V]||V)+"'":ot="Parse error on line "+(K+1)+": Unexpected "+(V==Y?"end of input":"'"+(this.terminals_[V]||V)+"'"),this.parseError(ot,{text:lt.match,token:this.terminals_[V]||V,line:lt.yylineno,loc:q,expected:xt})}if(P[0]instanceof Array&&P.length>1)throw new Error("Parse Error: multiple actions possible at state: "+j+", token: "+V);switch(P[0]){case 1:M.push(V),I.push(lt.yytext),B.push(lt.yylloc),M.push(P[1]),V=null,nt=lt.yyleng,F=lt.yytext,K=lt.yylineno,q=lt.yylloc;break;case 2:if(U=this.productions_[P[1]][1],O.$=I[I.length-U],O._$={first_line:B[B.length-(U||1)].first_line,last_line:B[B.length-1].last_line,first_column:B[B.length-(U||1)].first_column,last_column:B[B.length-1].last_column},it&&(O._$.range=[B[B.length-(U||1)].range[0],B[B.length-1].range[1]]),X=this.performAction.apply(O,[F,nt,K,J.yy,P[1],I,B].concat(rt)),typeof X<"u")return X;U&&(M=M.slice(0,-1*U*2),I=I.slice(0,-1*U),B=B.slice(0,-1*U)),M.push(this.productions_[P[1]][0]),I.push(O.$),B.push(O._$),H=$[M[M.length-2]][M[M.length-1]],M.push(H);break;case 3:return!0}}return!0}},L=function(){var D={EOF:1,parseError:function(v,M){if(this.yy.parser)this.yy.parser.parseError(v,M);else throw new Error(v)},setInput:function(v,M){return this.yy=M||this.yy||{},this._input=v,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var v=this._input[0];this.yytext+=v,this.yyleng++,this.offset++,this.match+=v,this.matched+=v;var M=v.match(/(?:\r\n?|\n).*/g);return M?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),v},unput:function(v){var M=v.length,w=v.split(/(?:\r\n?|\n)/g);this._input=v+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-M),this.offset-=M;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),w.length-1&&(this.yylineno-=w.length-1);var B=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:w?(w.length===I.length?this.yylloc.first_column:0)+I[I.length-w.length].length-w[0].length:this.yylloc.first_column-M},this.options.ranges&&(this.yylloc.range=[B[0],B[0]+this.yyleng-M]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(v){this.unput(this.match.slice(v))},pastInput:function(){var v=this.matched.substr(0,this.matched.length-this.match.length);return(v.length>20?"...":"")+v.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var v=this.match;return v.length<20&&(v+=this._input.substr(0,20-v.length)),(v.substr(0,20)+(v.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var v=this.pastInput(),M=new Array(v.length+1).join("-");return v+this.upcomingInput()+`
`+M+"^"},test_match:function(v,M){var w,I,B;if(this.options.backtrack_lexer&&(B={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(B.yylloc.range=this.yylloc.range.slice(0))),I=v[0].match(/(?:\r\n?|\n).*/g),I&&(this.yylineno+=I.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+v[0].length},this.yytext+=v[0],this.match+=v[0],this.matches=v,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(v[0].length),this.matched+=v[0],w=this.performAction.call(this,this.yy,this,M,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),w)return w;if(this._backtrack){for(var $ in B)this[$]=B[$];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var v,M,w,I;this._more||(this.yytext="",this.match="");for(var B=this._currentRules(),$=0;$<B.length;$++)if(w=this._input.match(this.rules[B[$]]),w&&(!M||w[0].length>M[0].length)){if(M=w,I=$,this.options.backtrack_lexer){if(v=this.test_match(w,B[$]),v!==!1)return v;if(this._backtrack){M=!1;continue}else return!1}else if(!this.options.flex)break}return M?(v=this.test_match(M,B[I]),v!==!1?v:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var v=this.next();return v||this.lex()},begin:function(v){this.conditionStack.push(v)},popState:function(){var v=this.conditionStack.length-1;return v>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(v){return v=this.conditionStack.length-1-Math.abs(v||0),v>=0?this.conditionStack[v]:"INITIAL"},pushState:function(v){this.begin(v)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(v,M,w,I){switch(w){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:return 37;case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return M.yytext[0];case 29:return 42;case 30:return 43;case 31:return 44;case 32:return 45;case 33:return 42;case 34:return 43;case 35:return 44;case 36:return 46;case 37:return 47;case 38:return 46;case 39:return 46;case 40:return 30;case 41:return M.yytext[0];case 42:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\|o\b)/i,/^(?:\}o\b)/i,/^(?:\}\|)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!0}}};return D}();C.lexer=L;function S(){this.yy={}}return S.prototype=C,C.Parser=S,new S}();nb.parser=nb;const Uet=t=>t.match(/^\s*erDiagram/)!==null;let nu={},rb=[];const Het={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Wet={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},Vet=function(t,e,n){qe.parseDirective(this,t,e,n)},oM=function(t){return typeof nu[t]>"u"&&(nu[t]={attributes:[]},W.info("Added new entity :",t)),nu[t]},Get={Cardinality:Het,Identification:Wet,parseDirective:Vet,getConfig:()=>at().er,addEntity:oM,addAttributes:function(t,e){let n=oM(t),r;for(r=e.length-1;r>=0;r--)n.attributes.push(e[r]),W.debug("Added attribute ",e[r].attributeName)},getEntities:()=>nu,addRelationship:function(t,e,n,r){let i={entityA:t,roleA:e,entityB:n,relSpec:r};rb.push(i),W.debug("Added new relationship :",i)},getRelationships:()=>rb,clear:function(){nu={},rb=[],si()},setAccTitle:$r,getAccTitle:ci,setAccDescription:li,getAccDescription:ui},ca={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},la={ERMarkers:ca,insertMarkers:function(t,e){let n;t.append("defs").append("marker").attr("id",ca.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",ca.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",ca.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",ca.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",ca.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",ca.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),n=t.append("defs").append("marker").attr("id",ca.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),n=t.append("defs").append("marker").attr("id",ca.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}};let G0;const qet=new Uint8Array(16);function Xet(){if(!G0&&(G0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!G0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return G0(qet)}const On=[];for(let t=0;t<256;++t)On.push((t+256).toString(16).slice(1));function Zet(t,e=0){return(On[t[e+0]]+On[t[e+1]]+On[t[e+2]]+On[t[e+3]]+"-"+On[t[e+4]]+On[t[e+5]]+"-"+On[t[e+6]]+On[t[e+7]]+"-"+On[t[e+8]]+On[t[e+9]]+"-"+On[t[e+10]]+On[t[e+11]]+On[t[e+12]]+On[t[e+13]]+On[t[e+14]]+On[t[e+15]]).toLowerCase()}const sM={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Qet(t,e,n){if(sM.randomUUID&&!e&&!t)return sM.randomUUID();t=t||{};const r=t.random||(t.rng||Xet)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Zet(r)}const Ket=/[^A-Za-z0-9]([\W])*/g;let je={},ru=new Map;const Jet=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)je[e[n]]=t[e[n]]},tnt=(t,e,n)=>{const r=je.entityPadding/3,i=je.entityPadding/3,a=je.fontSize*.85,o=e.node().getBBox(),s=[];let l=!1,u=!1,h=0,f=0,d=0,p=0,m=o.height+r*2,_=1;n.forEach(T=>{T.attributeKeyType!==void 0&&(l=!0),T.attributeComment!==void 0&&(u=!0)}),n.forEach(T=>{const x=`${e.node().id}-attr-${_}`;let A=0;const C=Va(T.attributeType),L=t.append("text").attr("class","er entityLabel").attr("id",`${x}-type`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(C),S=t.append("text").attr("class","er entityLabel").attr("id",`${x}-name`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(T.attributeName),D={};D.tn=L,D.nn=S;const v=L.node().getBBox(),M=S.node().getBBox();if(h=Math.max(h,v.width),f=Math.max(f,M.width),A=Math.max(v.height,M.height),l){const w=t.append("text").attr("class","er entityLabel").attr("id",`${x}-key`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(T.attributeKeyType||"");D.kn=w;const I=w.node().getBBox();d=Math.max(d,I.width),A=Math.max(A,I.height)}if(u){const w=t.append("text").attr("class","er entityLabel").attr("id",`${x}-comment`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(T.attributeComment||"");D.cn=w;const I=w.node().getBBox();p=Math.max(p,I.width),A=Math.max(A,I.height)}D.height=A,s.push(D),m+=A+r*2,_+=1});let y=4;l&&(y+=2),u&&(y+=2);const b=h+f+d+p,k={width:Math.max(je.minEntityWidth,Math.max(o.width+je.entityPadding*2,b+i*y)),height:n.length>0?m:Math.max(je.minEntityHeight,o.height+je.entityPadding*2)};if(n.length>0){const T=Math.max(0,(k.width-b-i*y)/(y/2));e.attr("transform","translate("+k.width/2+","+(r+o.height/2)+")");let x=o.height+r*2,A="attributeBoxOdd";s.forEach(C=>{const L=x+r+C.height/2;C.tn.attr("transform","translate("+i+","+L+")");const S=t.insert("rect","#"+C.tn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",0).attr("y",x).attr("width",h+i*2+T).attr("height",C.height+r*2),D=parseFloat(S.attr("x"))+parseFloat(S.attr("width"));C.nn.attr("transform","translate("+(D+i)+","+L+")");const v=t.insert("rect","#"+C.nn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",D).attr("y",x).attr("width",f+i*2+T).attr("height",C.height+r*2);let M=parseFloat(v.attr("x"))+parseFloat(v.attr("width"));if(l){C.kn.attr("transform","translate("+(M+i)+","+L+")");const w=t.insert("rect","#"+C.kn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",M).attr("y",x).attr("width",d+i*2+T).attr("height",C.height+r*2);M=parseFloat(w.attr("x"))+parseFloat(w.attr("width"))}u&&(C.cn.attr("transform","translate("+(M+i)+","+L+")"),t.insert("rect","#"+C.cn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",M).attr("y",x).attr("width",p+i*2+T).attr("height",C.height+r*2)),x+=C.height+r*2,A=A==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else k.height=Math.max(je.minEntityHeight,m),e.attr("transform","translate("+k.width/2+","+k.height/2+")");return k},ent=function(t,e,n){const r=Object.keys(e);let i;return r.forEach(function(a){const o=ont(a,"entity");ru.set(a,o);const s=t.append("g").attr("id",o);i=i===void 0?o:i;const l="text-"+o,u=s.append("text").attr("class","er entityLabel").attr("id",l).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("style","font-family: "+at().fontFamily+"; font-size: "+je.fontSize+"px").text(a),{width:h,height:f}=tnt(s,u,e[a].attributes),d=s.insert("rect","#"+l).attr("class","er entityBox").attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",0).attr("y",0).attr("width",h).attr("height",f).node().getBBox();n.setNode(o,{width:d.width,height:d.height,shape:"rect",id:o})}),i},nnt=function(t,e){e.nodes().forEach(function(n){typeof n<"u"&&typeof e.node(n)<"u"&&t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )")})},cM=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},rnt=function(t,e){return t.forEach(function(n){e.setEdge(ru.get(n.entityA),ru.get(n.entityB),{relationship:n},cM(n))}),t};let lM=0;const int=function(t,e,n,r,i){lM++;const a=n.edge(ru.get(e.entityA),ru.get(e.entityB),cM(e)),o=ja().x(function(p){return p.x}).y(function(p){return p.y}).curve(Fo),s=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",o(a.points)).attr("stroke",je.stroke).attr("fill","none");e.relSpec.relType===i.db.Identification.NON_IDENTIFYING&&s.attr("stroke-dasharray","8,8");let l="";switch(je.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case i.db.Cardinality.ZERO_OR_ONE:s.attr("marker-end","url("+l+"#"+la.ERMarkers.ZERO_OR_ONE_END+")");break;case i.db.Cardinality.ZERO_OR_MORE:s.attr("marker-end","url("+l+"#"+la.ERMarkers.ZERO_OR_MORE_END+")");break;case i.db.Cardinality.ONE_OR_MORE:s.attr("marker-end","url("+l+"#"+la.ERMarkers.ONE_OR_MORE_END+")");break;case i.db.Cardinality.ONLY_ONE:s.attr("marker-end","url("+l+"#"+la.ERMarkers.ONLY_ONE_END+")");break}switch(e.relSpec.cardB){case i.db.Cardinality.ZERO_OR_ONE:s.attr("marker-start","url("+l+"#"+la.ERMarkers.ZERO_OR_ONE_START+")");break;case i.db.Cardinality.ZERO_OR_MORE:s.attr("marker-start","url("+l+"#"+la.ERMarkers.ZERO_OR_MORE_START+")");break;case i.db.Cardinality.ONE_OR_MORE:s.attr("marker-start","url("+l+"#"+la.ERMarkers.ONE_OR_MORE_START+")");break;case i.db.Cardinality.ONLY_ONE:s.attr("marker-start","url("+l+"#"+la.ERMarkers.ONLY_ONE_START+")");break}const u=s.node().getTotalLength(),h=s.node().getPointAtLength(u*.5),f="rel"+lM,d=t.append("text").attr("class","er relationshipLabel").attr("id",f).attr("x",h.x).attr("y",h.y).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("style","font-family: "+at().fontFamily+"; font-size: "+je.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+f).attr("class","er relationshipLabelBox").attr("x",h.x-d.width/2).attr("y",h.y-d.height/2).attr("width",d.width).attr("height",d.height).attr("fill","white").attr("fill-opacity","85%")},ant=function(t,e,n,r){je=at().er,W.info("Drawing ER diagram");const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);la.insertMarkers(o,je);let s;s=new un.Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:je.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const l=ent(o,r.db.getEntities(),s),u=rnt(r.db.getRelationships(),s);Jl.layout(s),nnt(o,s),u.forEach(function(m){int(o,m,s,l,r)});const h=je.diagramPadding,f=o.node().getBBox(),d=f.width+h*2,p=f.height+h*2;oi(o,p,d,je.useMaxWidth),o.attr("viewBox",`${f.x-h} ${f.y-h} ${d} ${p}`),yr(r.db,o,e)};function ont(t="",e=""){const n=t.replace(Ket,"");return`${uM(e)}${uM(n)}${Qet()}`}function uM(t=""){return t.length>0?`${t}-`:""}const snt={setConf:Jet,draw:ant};var q0=function(){var t=function(ur,Yt,ce,Bt){for(ce=ce||{},Bt=ur.length;Bt--;ce[ur[Bt]]=Yt);return ce},e=[1,9],n=[1,7],r=[1,6],i=[1,8],a=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],o=[2,10],s=[1,20],l=[1,21],u=[1,22],h=[1,23],f=[1,30],d=[1,32],p=[1,33],m=[1,34],_=[1,62],y=[1,48],b=[1,52],k=[1,36],T=[1,37],x=[1,38],A=[1,39],C=[1,40],L=[1,56],S=[1,63],D=[1,51],v=[1,53],M=[1,55],w=[1,59],I=[1,60],B=[1,41],$=[1,42],F=[1,43],K=[1,44],nt=[1,61],z=[1,50],Y=[1,54],rt=[1,57],lt=[1,58],J=[1,49],Q=[1,66],q=[1,71],it=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],ut=[1,75],V=[1,74],j=[1,76],P=[20,21,23,81,82],X=[1,99],O=[1,104],G=[1,107],U=[1,108],H=[1,101],xt=[1,106],ot=[1,109],Dt=[1,102],Mt=[1,114],wt=[1,113],Et=[1,103],bt=[1,105],mt=[1,110],Tt=[1,111],kt=[1,112],st=[1,115],Qt=[20,21,22,23,81,82],$t=[20,21,22,23,53,81,82],te=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ht=[20,21,23],qt=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],oe=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Xt=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],Rt=[1,149],Pt=[1,157],yt=[1,158],Ct=[1,159],pt=[1,160],Ft=[1,144],dt=[1,145],Se=[1,141],gt=[1,152],ie=[1,153],se=[1,154],ve=[1,155],de=[1,156],be=[1,161],Gt=[1,162],ee=[1,147],fe=[1,150],ye=[1,146],pe=[1,143],ma=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$e=[1,165],Pe=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],Zt=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],lr=[12,21,22,24],cn=[22,106],Je=[1,250],Ye=[1,245],tt=[1,246],Nt=[1,254],At=[1,251],Kt=[1,248],Ne=[1,247],ze=[1,249],De=[1,252],_n=[1,253],Xe=[1,255],We=[1,273],io=[20,21,23,106],Ae=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],ba={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(ur,Yt,ce,Bt,Fe,et,Vn){var ct=et.length-1;switch(Fe){case 5:Bt.parseDirective("%%{","open_directive");break;case 6:Bt.parseDirective(et[ct],"type_directive");break;case 7:et[ct]=et[ct].trim().replace(/'/g,'"'),Bt.parseDirective(et[ct],"arg_directive");break;case 8:Bt.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(et[ct])||et[ct].length>0)&&et[ct-1].push(et[ct]),this.$=et[ct-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=et[ct];break;case 19:Bt.setDirection("TB"),this.$="TB";break;case 20:Bt.setDirection(et[ct-1]),this.$=et[ct-1];break;case 35:this.$=et[ct-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=Bt.addSubGraph(et[ct-6],et[ct-1],et[ct-4]);break;case 42:this.$=Bt.addSubGraph(et[ct-3],et[ct-1],et[ct-3]);break;case 43:this.$=Bt.addSubGraph(void 0,et[ct-1],void 0);break;case 45:this.$=et[ct].trim(),Bt.setAccTitle(this.$);break;case 46:case 47:this.$=et[ct].trim(),Bt.setAccDescription(this.$);break;case 51:Bt.addLink(et[ct-2].stmt,et[ct],et[ct-1]),this.$={stmt:et[ct],nodes:et[ct].concat(et[ct-2].nodes)};break;case 52:Bt.addLink(et[ct-3].stmt,et[ct-1],et[ct-2]),this.$={stmt:et[ct-1],nodes:et[ct-1].concat(et[ct-3].nodes)};break;case 53:this.$={stmt:et[ct-1],nodes:et[ct-1]};break;case 54:this.$={stmt:et[ct],nodes:et[ct]};break;case 55:this.$=[et[ct]];break;case 56:this.$=et[ct-4].concat(et[ct]);break;case 57:this.$=[et[ct-2]],Bt.setClass(et[ct-2],et[ct]);break;case 58:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"square");break;case 59:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"doublecircle");break;case 60:this.$=et[ct-5],Bt.addVertex(et[ct-5],et[ct-2],"circle");break;case 61:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"ellipse");break;case 62:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"stadium");break;case 63:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"subroutine");break;case 64:this.$=et[ct-7],Bt.addVertex(et[ct-7],et[ct-1],"rect",void 0,void 0,void 0,Object.fromEntries([[et[ct-5],et[ct-3]]]));break;case 65:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"cylinder");break;case 66:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"round");break;case 67:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"diamond");break;case 68:this.$=et[ct-5],Bt.addVertex(et[ct-5],et[ct-2],"hexagon");break;case 69:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"odd");break;case 70:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"trapezoid");break;case 71:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"inv_trapezoid");break;case 72:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"lean_right");break;case 73:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"lean_left");break;case 74:this.$=et[ct],Bt.addVertex(et[ct]);break;case 75:et[ct-1].text=et[ct],this.$=et[ct-1];break;case 76:case 77:et[ct-2].text=et[ct-1],this.$=et[ct-2];break;case 78:this.$=et[ct];break;case 79:var In=Bt.destructLink(et[ct],et[ct-2]);this.$={type:In.type,stroke:In.stroke,length:In.length,text:et[ct-1]};break;case 80:var In=Bt.destructLink(et[ct]);this.$={type:In.type,stroke:In.stroke,length:In.length};break;case 81:this.$=et[ct-1];break;case 83:case 97:case 153:this.$=et[ct-1]+""+et[ct];break;case 98:case 99:this.$=et[ct-4],Bt.addClass(et[ct-2],et[ct]);break;case 100:this.$=et[ct-4],Bt.setClass(et[ct-2],et[ct]);break;case 101:case 109:this.$=et[ct-1],Bt.setClickEvent(et[ct-1],et[ct]);break;case 102:case 110:this.$=et[ct-3],Bt.setClickEvent(et[ct-3],et[ct-2]),Bt.setTooltip(et[ct-3],et[ct]);break;case 103:this.$=et[ct-2],Bt.setClickEvent(et[ct-2],et[ct-1],et[ct]);break;case 104:this.$=et[ct-4],Bt.setClickEvent(et[ct-4],et[ct-3],et[ct-2]),Bt.setTooltip(et[ct-4],et[ct]);break;case 105:case 111:this.$=et[ct-1],Bt.setLink(et[ct-1],et[ct]);break;case 106:case 112:this.$=et[ct-3],Bt.setLink(et[ct-3],et[ct-2]),Bt.setTooltip(et[ct-3],et[ct]);break;case 107:case 113:this.$=et[ct-3],Bt.setLink(et[ct-3],et[ct-2],et[ct]);break;case 108:case 114:this.$=et[ct-5],Bt.setLink(et[ct-5],et[ct-4],et[ct]),Bt.setTooltip(et[ct-5],et[ct-2]);break;case 115:this.$=et[ct-4],Bt.addVertex(et[ct-2],void 0,void 0,et[ct]);break;case 116:case 118:this.$=et[ct-4],Bt.updateLink(et[ct-2],et[ct]);break;case 117:this.$=et[ct-4],Bt.updateLink([et[ct-2]],et[ct]);break;case 119:this.$=et[ct-8],Bt.updateLinkInterpolate([et[ct-6]],et[ct-2]),Bt.updateLink([et[ct-6]],et[ct]);break;case 120:this.$=et[ct-8],Bt.updateLinkInterpolate(et[ct-6],et[ct-2]),Bt.updateLink(et[ct-6],et[ct]);break;case 121:this.$=et[ct-6],Bt.updateLinkInterpolate([et[ct-4]],et[ct]);break;case 122:this.$=et[ct-6],Bt.updateLinkInterpolate(et[ct-4],et[ct]);break;case 123:case 125:this.$=[et[ct]];break;case 124:case 126:et[ct-2].push(et[ct]),this.$=et[ct-2];break;case 128:this.$=et[ct-1]+et[ct];break;case 150:this.$=et[ct];break;case 151:this.$=et[ct-1]+""+et[ct];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},t(a,o,{17:11}),{7:12,13:[1,13]},{16:14,21:n,22:r,24:i},{16:15,21:n,22:r,24:i},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:D,106:v,109:M,111:w,112:I,116:47,118:B,119:$,120:F,121:K,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{8:64,10:[1,65],15:Q},t([10,15],[2,6]),t(a,[2,17]),t(a,[2,18]),t(a,[2,19]),{20:[1,68],21:[1,69],22:q,27:67,30:70},t(it,[2,11]),t(it,[2,12]),t(it,[2,13]),t(it,[2,14]),t(it,[2,15]),t(it,[2,16]),{9:72,20:ut,21:V,23:j,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:ut,21:V,23:j},{9:81,20:ut,21:V,23:j},{9:82,20:ut,21:V,23:j},{9:83,20:ut,21:V,23:j},{9:84,20:ut,21:V,23:j},{9:86,20:ut,21:V,22:[1,85],23:j},t(it,[2,44]),{45:[1,87]},{47:[1,88]},t(it,[2,47]),t(P,[2,54],{30:89,22:q}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:X,52:O,66:G,67:U,84:[1,97],91:H,97:96,98:[1,94],100:[1,95],105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(it,[2,158]),t(it,[2,159]),t(it,[2,160]),t(it,[2,161]),t(Qt,[2,55],{53:[1,116]}),t($t,[2,74],{116:129,40:[1,117],52:_,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:y,67:b,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:L,95:S,105:D,106:v,109:M,111:w,112:I,122:nt,123:z,124:Y,125:rt,126:lt,127:J}),t(te,[2,150]),t(te,[2,175]),t(te,[2,176]),t(te,[2,177]),t(te,[2,178]),t(te,[2,179]),t(te,[2,180]),t(te,[2,181]),t(te,[2,182]),t(te,[2,183]),t(te,[2,184]),t(te,[2,185]),t(te,[2,186]),t(te,[2,187]),t(te,[2,188]),t(te,[2,189]),t(te,[2,190]),{9:130,20:ut,21:V,23:j},{11:131,14:[1,132]},t(Ht,[2,8]),t(a,[2,20]),t(a,[2,26]),t(a,[2,27]),{21:[1,133]},t(qt,[2,34],{30:134,22:q}),t(it,[2,35]),{50:135,51:45,52:_,54:46,66:y,67:b,91:L,95:S,105:D,106:v,109:M,111:w,112:I,116:47,122:nt,123:z,124:Y,125:rt,126:lt,127:J},t(oe,[2,48]),t(oe,[2,49]),t(oe,[2,50]),t(Xt,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:Rt,24:Pt,26:yt,38:Ct,39:139,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),t(it,[2,36]),t(it,[2,37]),t(it,[2,38]),t(it,[2,39]),t(it,[2,40]),{22:Rt,24:Pt,26:yt,38:Ct,39:163,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(ma,o,{17:164}),t(it,[2,45]),t(it,[2,46]),t(P,[2,53],{52:$e}),{26:X,52:O,66:G,67:U,91:H,97:166,102:[1,167],105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{95:[1,168],103:169,105:[1,170]},{26:X,52:O,66:G,67:U,91:H,95:[1,171],97:172,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{26:X,52:O,66:G,67:U,91:H,97:173,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Ht,[2,101],{22:[1,174],99:[1,175]}),t(Ht,[2,105],{22:[1,176]}),t(Ht,[2,109],{115:100,117:178,22:[1,177],26:X,52:O,66:G,67:U,91:H,105:xt,106:ot,109:Dt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),t(Ht,[2,111],{22:[1,179]}),t(Pe,[2,152]),t(Pe,[2,154]),t(Pe,[2,155]),t(Pe,[2,156]),t(Pe,[2,157]),t(Zt,[2,162]),t(Zt,[2,163]),t(Zt,[2,164]),t(Zt,[2,165]),t(Zt,[2,166]),t(Zt,[2,167]),t(Zt,[2,168]),t(Zt,[2,169]),t(Zt,[2,170]),t(Zt,[2,171]),t(Zt,[2,172]),t(Zt,[2,173]),t(Zt,[2,174]),{52:_,54:180,66:y,67:b,91:L,95:S,105:D,106:v,109:M,111:w,112:I,116:47,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:Rt,24:Pt,26:yt,38:Ct,39:181,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:182,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:184,42:pt,52:O,57:[1,183],66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:185,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:186,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:187,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{66:[1,188]},{22:Rt,24:Pt,26:yt,38:Ct,39:189,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:190,42:pt,52:O,66:G,67:U,71:[1,191],73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:192,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:193,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:194,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(te,[2,151]),t(lr,[2,3]),{8:195,15:Q},{15:[2,7]},t(a,[2,28]),t(qt,[2,33]),t(P,[2,51],{30:196,22:q}),t(Xt,[2,75],{22:[1,197]}),{22:[1,198]},{22:Rt,24:Pt,26:yt,38:Ct,39:199,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,66:G,67:U,73:Ft,81:dt,82:[1,200],83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Zt,[2,82]),t(Zt,[2,84]),t(Zt,[2,140]),t(Zt,[2,141]),t(Zt,[2,142]),t(Zt,[2,143]),t(Zt,[2,144]),t(Zt,[2,145]),t(Zt,[2,146]),t(Zt,[2,147]),t(Zt,[2,148]),t(Zt,[2,149]),t(Zt,[2,85]),t(Zt,[2,86]),t(Zt,[2,87]),t(Zt,[2,88]),t(Zt,[2,89]),t(Zt,[2,90]),t(Zt,[2,91]),t(Zt,[2,92]),t(Zt,[2,93]),t(Zt,[2,94]),t(Zt,[2,95]),{9:203,20:ut,21:V,22:Rt,23:j,24:Pt,26:yt,38:Ct,40:[1,202],42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,42:[1,204],43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:D,106:v,109:M,111:w,112:I,116:47,118:B,119:$,120:F,121:K,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:q,30:205},{22:[1,206],26:X,52:O,66:G,67:U,91:H,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:178,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},t(cn,[2,123]),{22:[1,211]},{22:[1,212],26:X,52:O,66:G,67:U,91:H,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:178,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:[1,213],26:X,52:O,66:G,67:U,91:H,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:178,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{84:[1,214]},t(Ht,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},t(Pe,[2,153]),{84:[1,219],101:[1,220]},t(Qt,[2,57],{116:129,52:_,66:y,67:b,91:L,95:S,105:D,106:v,109:M,111:w,112:I,122:nt,123:z,124:Y,125:rt,126:lt,127:J}),{22:Rt,24:Pt,26:yt,38:Ct,41:[1,221],42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,56:[1,222],66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:223,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,58:[1,224],66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,60:[1,225],66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,62:[1,226],66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,64:[1,227],66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{67:[1,228]},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,66:G,67:U,70:[1,229],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,66:G,67:U,72:[1,230],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,39:231,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,41:[1,232],42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,66:G,67:U,73:Ft,75:[1,233],77:[1,234],81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,66:G,67:U,73:Ft,75:[1,236],77:[1,235],81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{9:237,20:ut,21:V,23:j},t(P,[2,52],{52:$e}),t(Xt,[2,77]),t(Xt,[2,76]),{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,66:G,67:U,68:[1,238],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Xt,[2,79]),t(Zt,[2,83]),{22:Rt,24:Pt,26:yt,38:Ct,39:239,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(ma,o,{17:240}),t(it,[2,43]),{51:241,52:_,54:46,66:y,67:b,91:L,95:S,105:D,106:v,109:M,111:w,112:I,116:47,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:Je,66:Ye,67:tt,86:Nt,96:242,102:At,105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},{22:Je,66:Ye,67:tt,86:Nt,96:256,102:At,105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},{22:Je,66:Ye,67:tt,86:Nt,96:257,102:At,104:[1,258],105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},{22:Je,66:Ye,67:tt,86:Nt,96:259,102:At,104:[1,260],105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},{105:[1,261]},{22:Je,66:Ye,67:tt,86:Nt,96:262,102:At,105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},{22:Je,66:Ye,67:tt,86:Nt,96:263,102:At,105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},{26:X,52:O,66:G,67:U,91:H,97:264,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Ht,[2,102]),{84:[1,265]},t(Ht,[2,106],{22:[1,266]}),t(Ht,[2,107]),t(Ht,[2,110]),t(Ht,[2,112],{22:[1,267]}),t(Ht,[2,113]),t($t,[2,58]),t($t,[2,59]),{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,58:[1,268],66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t($t,[2,66]),t($t,[2,61]),t($t,[2,62]),t($t,[2,63]),{66:[1,269]},t($t,[2,65]),t($t,[2,67]),{22:Rt,24:Pt,26:yt,38:Ct,42:pt,52:O,66:G,67:U,72:[1,270],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t($t,[2,69]),t($t,[2,70]),t($t,[2,72]),t($t,[2,71]),t($t,[2,73]),t(lr,[2,4]),t([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:Rt,24:Pt,26:yt,38:Ct,41:[1,271],42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,42:[1,272],43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:D,106:v,109:M,111:w,112:I,116:47,118:B,119:$,120:F,121:K,122:nt,123:z,124:Y,125:rt,126:lt,127:J},t(Qt,[2,56]),t(Ht,[2,115],{106:We}),t(io,[2,125],{108:274,22:Je,66:Ye,67:tt,86:Nt,102:At,105:Kt,109:Ne,110:ze,111:De,112:_n,113:Xe}),t(Ae,[2,127]),t(Ae,[2,129]),t(Ae,[2,130]),t(Ae,[2,131]),t(Ae,[2,132]),t(Ae,[2,133]),t(Ae,[2,134]),t(Ae,[2,135]),t(Ae,[2,136]),t(Ae,[2,137]),t(Ae,[2,138]),t(Ae,[2,139]),t(Ht,[2,116],{106:We}),t(Ht,[2,117],{106:We}),{22:[1,275]},t(Ht,[2,118],{106:We}),{22:[1,276]},t(cn,[2,124]),t(Ht,[2,98],{106:We}),t(Ht,[2,99],{106:We}),t(Ht,[2,100],{115:100,117:178,26:X,52:O,66:G,67:U,91:H,105:xt,106:ot,109:Dt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),t(Ht,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:ut,21:V,23:j},t(it,[2,42]),{22:Je,66:Ye,67:tt,86:Nt,102:At,105:Kt,107:283,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},t(Ae,[2,128]),{26:X,52:O,66:G,67:U,91:H,97:284,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{26:X,52:O,66:G,67:U,91:H,97:285,105:xt,106:ot,109:Dt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Ht,[2,108]),t(Ht,[2,114]),t($t,[2,60]),{22:Rt,24:Pt,26:yt,38:Ct,39:286,42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:140,84:Se,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t($t,[2,68]),t(ma,o,{17:287}),t(io,[2,126],{108:274,22:Je,66:Ye,67:tt,86:Nt,102:At,105:Kt,109:Ne,110:ze,111:De,112:_n,113:Xe}),t(Ht,[2,121],{115:100,117:178,22:[1,288],26:X,52:O,66:G,67:U,91:H,105:xt,106:ot,109:Dt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),t(Ht,[2,122],{115:100,117:178,22:[1,289],26:X,52:O,66:G,67:U,91:H,105:xt,106:ot,109:Dt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),{22:Rt,24:Pt,26:yt,38:Ct,41:[1,290],42:pt,52:O,66:G,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:ve,90:de,91:be,92:Gt,94:142,95:ee,105:xt,106:ot,109:fe,111:Mt,112:wt,113:ye,114:pe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,42:[1,291],43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:D,106:v,109:M,111:w,112:I,116:47,118:B,119:$,120:F,121:K,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:Je,66:Ye,67:tt,86:Nt,96:292,102:At,105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},{22:Je,66:Ye,67:tt,86:Nt,96:293,102:At,105:Kt,107:243,108:244,109:Ne,110:ze,111:De,112:_n,113:Xe},t($t,[2,64]),t(it,[2,41]),t(Ht,[2,119],{106:We}),t(Ht,[2,120],{106:We})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(ur,Yt){if(Yt.recoverable)this.trace(ur);else{var ce=new Error(ur);throw ce.hash=Yt,ce}},parse:function(ur){var Yt=this,ce=[0],Bt=[],Fe=[null],et=[],Vn=this.table,ct="",In=0,gc=0,a5=2,Ed=1,o5=et.slice.call(arguments,1),fn=Object.create(this.lexer),_a={yy:{}};for(var yc in this.yy)Object.prototype.hasOwnProperty.call(this.yy,yc)&&(_a.yy[yc]=this.yy[yc]);fn.setInput(ur,_a.yy),_a.yy.lexer=fn,_a.yy.parser=this,typeof fn.yylloc>"u"&&(fn.yylloc={});var zi=fn.yylloc;et.push(zi);var ku=fn.options&&fn.options.ranges;typeof _a.yy.parseError=="function"?this.parseError=_a.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function wu(){var Ar;return Ar=Bt.pop()||fn.lex()||Ed,typeof Ar!="number"&&(Ar instanceof Array&&(Bt=Ar,Ar=Bt.pop()),Ar=Yt.symbols_[Ar]||Ar),Ar}for(var Rn,ji,Me,mc,Wr={},va,xr,bc,Qo;;){if(ji=ce[ce.length-1],this.defaultActions[ji]?Me=this.defaultActions[ji]:((Rn===null||typeof Rn>"u")&&(Rn=wu()),Me=Vn[ji]&&Vn[ji][Rn]),typeof Me>"u"||!Me.length||!Me[0]){var Tu="";Qo=[];for(va in Vn[ji])this.terminals_[va]&&va>a5&&Qo.push("'"+this.terminals_[va]+"'");fn.showPosition?Tu="Parse error on line "+(In+1)+`:
`+fn.showPosition()+`
Expecting `+Qo.join(", ")+", got '"+(this.terminals_[Rn]||Rn)+"'":Tu="Parse error on line "+(In+1)+": Unexpected "+(Rn==Ed?"end of input":"'"+(this.terminals_[Rn]||Rn)+"'"),this.parseError(Tu,{text:fn.match,token:this.terminals_[Rn]||Rn,line:fn.yylineno,loc:zi,expected:Qo})}if(Me[0]instanceof Array&&Me.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ji+", token: "+Rn);switch(Me[0]){case 1:ce.push(Rn),Fe.push(fn.yytext),et.push(fn.yylloc),ce.push(Me[1]),Rn=null,gc=fn.yyleng,ct=fn.yytext,In=fn.yylineno,zi=fn.yylloc;break;case 2:if(xr=this.productions_[Me[1]][1],Wr.$=Fe[Fe.length-xr],Wr._$={first_line:et[et.length-(xr||1)].first_line,last_line:et[et.length-1].last_line,first_column:et[et.length-(xr||1)].first_column,last_column:et[et.length-1].last_column},ku&&(Wr._$.range=[et[et.length-(xr||1)].range[0],et[et.length-1].range[1]]),mc=this.performAction.apply(Wr,[ct,gc,In,_a.yy,Me[1],Fe,et].concat(o5)),typeof mc<"u")return mc;xr&&(ce=ce.slice(0,-1*xr*2),Fe=Fe.slice(0,-1*xr),et=et.slice(0,-1*xr)),ce.push(this.productions_[Me[1]][0]),Fe.push(Wr.$),et.push(Wr._$),bc=Vn[ce[ce.length-2]][ce[ce.length-1]],ce.push(bc);break;case 3:return!0}}return!0}},Td=function(){var ur={EOF:1,parseError:function(Yt,ce){if(this.yy.parser)this.yy.parser.parseError(Yt,ce);else throw new Error(Yt)},setInput:function(Yt,ce){return this.yy=ce||this.yy||{},this._input=Yt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Yt=this._input[0];this.yytext+=Yt,this.yyleng++,this.offset++,this.match+=Yt,this.matched+=Yt;var ce=Yt.match(/(?:\r\n?|\n).*/g);return ce?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Yt},unput:function(Yt){var ce=Yt.length,Bt=Yt.split(/(?:\r\n?|\n)/g);this._input=Yt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ce),this.offset-=ce;var Fe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Bt.length-1&&(this.yylineno-=Bt.length-1);var et=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Bt?(Bt.length===Fe.length?this.yylloc.first_column:0)+Fe[Fe.length-Bt.length].length-Bt[0].length:this.yylloc.first_column-ce},this.options.ranges&&(this.yylloc.range=[et[0],et[0]+this.yyleng-ce]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Yt){this.unput(this.match.slice(Yt))},pastInput:function(){var Yt=this.matched.substr(0,this.matched.length-this.match.length);return(Yt.length>20?"...":"")+Yt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Yt=this.match;return Yt.length<20&&(Yt+=this._input.substr(0,20-Yt.length)),(Yt.substr(0,20)+(Yt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Yt=this.pastInput(),ce=new Array(Yt.length+1).join("-");return Yt+this.upcomingInput()+`
`+ce+"^"},test_match:function(Yt,ce){var Bt,Fe,et;if(this.options.backtrack_lexer&&(et={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(et.yylloc.range=this.yylloc.range.slice(0))),Fe=Yt[0].match(/(?:\r\n?|\n).*/g),Fe&&(this.yylineno+=Fe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Fe?Fe[Fe.length-1].length-Fe[Fe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Yt[0].length},this.yytext+=Yt[0],this.match+=Yt[0],this.matches=Yt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Yt[0].length),this.matched+=Yt[0],Bt=this.performAction.call(this,this.yy,this,ce,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Bt)return Bt;if(this._backtrack){for(var Vn in et)this[Vn]=et[Vn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Yt,ce,Bt,Fe;this._more||(this.yytext="",this.match="");for(var et=this._currentRules(),Vn=0;Vn<et.length;Vn++)if(Bt=this._input.match(this.rules[et[Vn]]),Bt&&(!ce||Bt[0].length>ce[0].length)){if(ce=Bt,Fe=Vn,this.options.backtrack_lexer){if(Yt=this.test_match(Bt,et[Vn]),Yt!==!1)return Yt;if(this._backtrack){ce=!1;continue}else return!1}else if(!this.options.flex)break}return ce?(Yt=this.test_match(ce,et[Fe]),Yt!==!1?Yt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Yt=this.next();return Yt||this.lex()},begin:function(Yt){this.conditionStack.push(Yt)},popState:function(){var Yt=this.conditionStack.length-1;return Yt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Yt){return Yt=this.conditionStack.length-1-Math.abs(Yt||0),Yt>=0?this.conditionStack[Yt]:"INITIAL"},pushState:function(Yt){this.begin(Yt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Yt,ce,Bt,Fe){switch(Bt){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return Yt.lex.firstGraph()&&this.begin("dir"),24;case 36:return Yt.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:return 101;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return this.popState(),25;case 44:return this.popState(),26;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:return 82;case 67:return 82;case 68:return 82;case 69:return 82;case 70:return 81;case 71:return 81;case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:return 125;case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};return ur}();ba.lexer=Td;function xu(){this.yy={}}return xu.prototype=ba,ba.Parser=xu,new xu}();q0.parser=q0;const cnt=(t,e)=>{var n;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*graph/)!==null},lnt=(t,e)=>{var n;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"&&t.match(/^\s*graph/)!==null?!0:t.match(/^\s*flowchart/)!==null},unt="flowchart-";let hM=0,ib=at(),an={},qo=[],rc=[],Ri=[],X0={},ab={},Z0=0,ob=!0,Fi,Q0,K0=[];const J0=t=>he.sanitizeText(t,ib),hnt=function(t,e,n){qe.parseDirective(this,t,e,n)},td=function(t){const e=Object.keys(an);for(let n=0;n<e.length;n++)if(an[e[n]].id===t)return an[e[n]].domId;return t},dnt=function(t,e,n,r,i,a,o={}){let s,l=t;typeof l>"u"||l.trim().length!==0&&(typeof an[l]>"u"&&(an[l]={id:l,domId:unt+l+"-"+hM,styles:[],classes:[]}),hM++,typeof e<"u"?(ib=at(),s=J0(e.trim()),s[0]==='"'&&s[s.length-1]==='"'&&(s=s.substring(1,s.length-1)),an[l].text=s):typeof an[l].text>"u"&&(an[l].text=t),typeof n<"u"&&(an[l].type=n),typeof r<"u"&&r!==null&&r.forEach(function(u){an[l].styles.push(u)}),typeof i<"u"&&i!==null&&i.forEach(function(u){an[l].classes.push(u)}),typeof a<"u"&&(an[l].dir=a),an[l].props=o)},fnt=function(t,e,n,r){const i={start:t,end:e,type:void 0,text:""};r=n.text,typeof r<"u"&&(i.text=J0(r.trim()),i.text[0]==='"'&&i.text[i.text.length-1]==='"'&&(i.text=i.text.substring(1,i.text.length-1))),typeof n<"u"&&(i.type=n.type,i.stroke=n.stroke,i.length=n.length),qo.push(i)},pnt=function(t,e,n,r){let i,a;for(i=0;i<t.length;i++)for(a=0;a<e.length;a++)fnt(t[i],e[a],n,r)},gnt=function(t,e){t.forEach(function(n){n==="default"?qo.defaultInterpolate=e:qo[n].interpolate=e})},ynt=function(t,e){t.forEach(function(n){n==="default"?qo.defaultStyle=e:(we.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),qo[n].style=e)})},mnt=function(t,e){typeof rc[t]>"u"&&(rc[t]={id:t,styles:[],textStyles:[]}),typeof e<"u"&&e!==null&&e.forEach(function(n){if(n.match("color")){const r=n.replace("fill","bgFill").replace("color","fill");rc[t].textStyles.push(r)}rc[t].styles.push(n)})},bnt=function(t){Fi=t,Fi.match(/.*</)&&(Fi="RL"),Fi.match(/.*\^/)&&(Fi="BT"),Fi.match(/.*>/)&&(Fi="LR"),Fi.match(/.*v/)&&(Fi="TB")},sb=function(t,e){t.split(",").forEach(function(n){let r=n;typeof an[r]<"u"&&an[r].classes.push(e),typeof X0[r]<"u"&&X0[r].classes.push(e)})},_nt=function(t,e){t.split(",").forEach(function(n){typeof e<"u"&&(ab[Q0==="gen-1"?td(n):n]=J0(e))})},vnt=function(t,e,n){let r=td(t);if(at().securityLevel!=="loose"||typeof e>"u")return;let i=[];if(typeof n=="string"){i=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let a=0;a<i.length;a++){let o=i[a].trim();o.charAt(0)==='"'&&o.charAt(o.length-1)==='"'&&(o=o.substr(1,o.length-2)),i[a]=o}}i.length===0&&i.push(t),typeof an[t]<"u"&&(an[t].haveCallback=!0,K0.push(function(){const a=document.querySelector(`[id="${r}"]`);a!==null&&a.addEventListener("click",function(){we.runFunc(e,...i)},!1)}))},xnt=function(t,e,n){t.split(",").forEach(function(r){typeof an[r]<"u"&&(an[r].link=we.formatUrl(e,ib),an[r].linkTarget=n)}),sb(t,"clickable")},knt=function(t){return ab[t]},wnt=function(t,e,n){t.split(",").forEach(function(r){vnt(r,e,n)}),sb(t,"clickable")},Tnt=function(t){K0.forEach(function(e){e(t)})},Ent=function(){return Fi.trim()},Cnt=function(){return an},Snt=function(){return qo},Ant=function(){return rc},dM=function(t){let e=Lt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=Lt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Lt(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=Lt(this);if(n.attr("title")===null)return;const r=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+r.left+(r.right-r.left)/2+"px").style("top",window.scrollY+r.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),Lt(this).classed("hover",!1)})};K0.push(dM);const Mnt=function(t="gen-1"){an={},rc={},qo=[],K0=[dM],Ri=[],X0={},Z0=0,ab=[],ob=!0,Q0=t,si()},Lnt=t=>{Q0=t||"gen-1"},Bnt=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},Nnt=function(t,e,n){let r=t.trim(),i=n.trim();r===i&&i.match(/\s/)&&(r=void 0);function a(h){const f={boolean:{},number:{},string:{}},d=[];let p;return{nodeList:h.filter(function(m){const _=typeof m;return m.stmt&&m.stmt==="dir"?(p=m.value,!1):m.trim()===""?!1:_ in f?f[_].hasOwnProperty(m)?!1:f[_][m]=!0:d.indexOf(m)>=0?!1:d.push(m)}),dir:p}}let o=[];const{nodeList:s,dir:l}=a(o.concat.apply(o,e));if(o=s,Q0==="gen-1")for(let h=0;h<o.length;h++)o[h]=td(o[h]);r=r||"subGraph"+Z0,i=i||"",i=J0(i),Z0=Z0+1;const u={id:r,nodes:o,title:i.trim(),classes:[],dir:l};return W.info("Adding",u.id,u.nodes,u.dir),u.nodes=yM(u,Ri).nodes,Ri.push(u),X0[r]=u,r},Dnt=function(t){for(let e=0;e<Ri.length;e++)if(Ri[e].id===t)return e;return-1};let iu=-1;const fM=[],pM=function(t,e){const n=Ri[e].nodes;if(iu=iu+1,iu>2e3)return;if(fM[iu]=e,Ri[e].id===t)return{result:!0,count:0};let r=0,i=1;for(;r<n.length;){const a=Dnt(n[r]);if(a>=0){const o=pM(t,a);if(o.result)return{result:!0,count:i+o.count};i=i+o.count}r=r+1}return{result:!1,count:i}},Ont=function(t){return fM[t]},Int=function(){iu=-1,Ri.length>0&&pM("none",Ri.length-1)},Rnt=function(){return Ri},Fnt=()=>ob?(ob=!1,!0):!1,$nt=t=>{let e=t.trim(),n="arrow_open";switch(e[0]){case"<":n="arrow_point",e=e.slice(1);break;case"x":n="arrow_cross",e=e.slice(1);break;case"o":n="arrow_circle",e=e.slice(1);break}let r="normal";return e.indexOf("=")!==-1&&(r="thick"),e.indexOf(".")!==-1&&(r="dotted"),{type:n,stroke:r}},Pnt=(t,e)=>{const n=e.length;let r=0;for(let i=0;i<n;++i)e[i]===t&&++r;return r},Ynt=t=>{const e=t.trim();let n=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross",e[0]==="x"&&(r="double_"+r,n=n.slice(1));break;case">":r="arrow_point",e[0]==="<"&&(r="double_"+r,n=n.slice(1));break;case"o":r="arrow_circle",e[0]==="o"&&(r="double_"+r,n=n.slice(1));break}let i="normal",a=n.length-1;n[0]==="="&&(i="thick"),n[0]==="~"&&(i="invisible");let o=Pnt(".",n);return o&&(i="dotted",a=o),{type:r,stroke:i,length:a}},znt=(t,e)=>{const n=Ynt(t);let r;if(e){if(r=$nt(e),r.stroke!==n.stroke)return{type:"INVALID",stroke:"INVALID"};if(r.type==="arrow_open")r.type=n.type;else{if(r.type!==n.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return r.type==="double_arrow"&&(r.type="double_arrow_point"),r.length=n.length,r}return n},gM=(t,e)=>{let n=!1;return t.forEach(r=>{r.nodes.indexOf(e)>=0&&(n=!0)}),n},yM=(t,e)=>{const n=[];return t.nodes.forEach((r,i)=>{gM(e,r)||n.push(t.nodes[i])}),{nodes:n}},ua={parseDirective:hnt,defaultConfig:()=>qs.flowchart,setAccTitle:$r,getAccTitle:ci,getAccDescription:ui,setAccDescription:li,addVertex:dnt,lookUpDomId:td,addLink:pnt,updateLinkInterpolate:gnt,updateLink:ynt,addClass:mnt,setDirection:bnt,setClass:sb,setTooltip:_nt,getTooltip:knt,setClickEvent:wnt,setLink:xnt,bindFunctions:Tnt,getDirection:Ent,getVertices:Cnt,getEdges:Snt,getClasses:Ant,clear:Mnt,setGen:Lnt,defaultStyle:Bnt,addSubGraph:Nnt,getDepthFirstPos:Ont,indexNodes:Int,getSubGraphs:Rnt,destructLink:znt,lex:{firstGraph:Fnt},exists:gM,makeUniq:yM};var ed;if(typeof Ta=="function")try{ed=un}catch{}ed||(ed=window.graphlib);var jnt=ed,nd;if(typeof Ta=="function")try{nd=zA()}catch{}nd||(nd=window.dagre);var mM=nd,bM=Unt;function Unt(t,e){return t.intersect(e)}var cb=Hnt;function Hnt(t,e,n,r){var i=t.x,a=t.y,o=i-r.x,s=a-r.y,l=Math.sqrt(e*e*s*s+n*n*o*o),u=Math.abs(e*n*o/l);r.x<i&&(u=-u);var h=Math.abs(e*n*s/l);return r.y<a&&(h=-h),{x:i+u,y:a+h}}var Wnt=cb,_M=Vnt;function Vnt(t,e,n){return Wnt(t,e,e,n)}var Gnt=qnt;function qnt(t,e,n,r){var i,a,o,s,l,u,h,f,d,p,m,_,y,b,k;if(i=e.y-t.y,o=t.x-e.x,l=e.x*t.y-t.x*e.y,d=i*n.x+o*n.y+l,p=i*r.x+o*r.y+l,!(d!==0&&p!==0&&vM(d,p))&&(a=r.y-n.y,s=n.x-r.x,u=r.x*n.y-n.x*r.y,h=a*t.x+s*t.y+u,f=a*e.x+s*e.y+u,!(h!==0&&f!==0&&vM(h,f))&&(m=i*s-a*o,m!==0)))return _=Math.abs(m/2),y=o*u-s*l,b=y<0?(y-_)/m:(y+_)/m,y=a*l-i*u,k=y<0?(y-_)/m:(y+_)/m,{x:b,y:k}}function vM(t,e){return t*e>0}var Xnt=Gnt,xM=Znt;function Znt(t,e,n){var r=t.x,i=t.y,a=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(function(m){o=Math.min(o,m.x),s=Math.min(s,m.y)});for(var l=r-t.width/2-o,u=i-t.height/2-s,h=0;h<e.length;h++){var f=e[h],d=e[h<e.length-1?h+1:0],p=Xnt(t,n,{x:l+f.x,y:u+f.y},{x:l+d.x,y:u+d.y});p&&a.push(p)}return a.length?(a.length>1&&a.sort(function(m,_){var y=m.x-n.x,b=m.y-n.y,k=Math.sqrt(y*y+b*b),T=_.x-n.x,x=_.y-n.y,A=Math.sqrt(T*T+x*x);return k<A?-1:k===A?0:1}),a[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}var kM=Qnt;function Qnt(t,e){var n=t.x,r=t.y,i=e.x-n,a=e.y-r,o=t.width/2,s=t.height/2,l,u;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=a===0?0:s*i/a,u=s):(i<0&&(o=-o),l=o,u=i===0?0:o*a/i),{x:n+l,y:r+u}}var Knt={node:bM,circle:_M,ellipse:cb,polygon:xM,rect:kM},rd;if(typeof Ta=="function")try{rd={defaults:uS(),each:im(),isFunction:zs,isPlainObject:BS(),pick:XS(),has:Gm(),range:JS(),uniqueId:oA()}}catch{}rd||(rd=window._);var ic=rd;const Jnt=wB(NW);var au;if(!au&&typeof Ta=="function")try{au=Jnt}catch{}au||(au=window.d3);var to=au,wM=ic,jr={isSubgraph:trt,edgeToId:ert,applyStyle:rrt,applyClass:irt,applyTransition:art};function trt(t,e){return!!t.children(e).length}function ert(t){return lb(t.v)+":"+lb(t.w)+":"+lb(t.name)}var nrt=/:/g;function lb(t){return t?String(t).replace(nrt,"\\:"):""}function rrt(t,e){e&&t.attr("style",e)}function irt(t,e,n){e&&t.attr("class",e).attr("class",n+" "+t.attr("class"))}function art(t,e){var n=e.graph();if(wM.isPlainObject(n)){var r=n.transition;if(wM.isFunction(r))return r(t)}return t}var ub,TM;function ort(){if(TM)return ub;TM=1;var t=jr;ub=e;function e(r,i){for(var a=r.append("text"),o=n(i.label).split(`
`),s=0;s<o.length;s++)a.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(o[s]);return t.applyStyle(a,i.labelStyle),a}function n(r){for(var i="",a=!1,o,s=0;s<r.length;++s)if(o=r[s],a){switch(o){case"n":i+=`
`;break;default:i+=o}a=!1}else o==="\\"?a=!0:i+=o;return i}return ub}var srt=jr,hb=crt;function crt(t,e){var n=t.append("foreignObject").attr("width","100000"),r=n.append("xhtml:div");r.attr("xmlns","http://www.w3.org/1999/xhtml");var i=e.label;switch(typeof i){case"function":r.insert(i);break;case"object":r.insert(function(){return i});break;default:r.html(i)}srt.applyStyle(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");var a=r.node().getBoundingClientRect();return n.attr("width",a.width).attr("height",a.height),n}var db,EM;function lrt(){if(EM)return db;EM=1;var t=jr;db=e;function e(n,r){var i=n;return i.node().appendChild(r.label),t.applyStyle(i,r.labelStyle),i}return db}var fb,CM;function pb(){if(CM)return fb;CM=1;var t=ort(),e=hb,n=lrt();fb=r;function r(i,a,o){var s=a.label,l=i.append("g");a.labelType==="svg"?n(l,a):typeof s!="string"||a.labelType==="html"?e(l,a):t(l,a);var u=l.node().getBBox(),h;switch(o){case"top":h=-a.height/2;break;case"bottom":h=a.height/2-u.height;break;default:h=-u.height/2}return l.attr("transform","translate("+-u.width/2+","+h+")"),l}return fb}var gb,SM;function urt(){if(SM)return gb;SM=1;var t=ic,e=pb(),n=jr,r=to;gb=i;function i(a,o,s){var l=o.nodes().filter(function(f){return!n.isSubgraph(o,f)}),u=a.selectAll("g.node").data(l,function(f){return f}).classed("update",!0);u.exit().remove(),u.enter().append("g").attr("class","node").style("opacity",0),u=a.selectAll("g.node"),u.each(function(f){var d=o.node(f),p=r.select(this);n.applyClass(p,d.class,(p.classed("update")?"update ":"")+"node"),p.select("g.label").remove();var m=p.append("g").attr("class","label"),_=e(m,d),y=s[d.shape],b=t.pick(_.node().getBBox(),"width","height");d.elem=this,d.id&&p.attr("id",d.id),d.labelId&&m.attr("id",d.labelId),t.has(d,"width")&&(b.width=d.width),t.has(d,"height")&&(b.height=d.height),b.width+=d.paddingLeft+d.paddingRight,b.height+=d.paddingTop+d.paddingBottom,m.attr("transform","translate("+(d.paddingLeft-d.paddingRight)/2+","+(d.paddingTop-d.paddingBottom)/2+")");var k=r.select(this);k.select(".label-container").remove();var T=y(k,b,d).classed("label-container",!0);n.applyStyle(T,d.style);var x=T.node().getBBox();d.width=x.width,d.height=x.height});var h;return u.exit?h=u.exit():h=u.selectAll(null),n.applyTransition(h,o).style("opacity",0).remove(),u}return gb}var yb,AM;function hrt(){if(AM)return yb;AM=1;var t=jr,e=to,n=pb();yb=r;function r(i,a){var o=a.nodes().filter(function(u){return t.isSubgraph(a,u)}),s=i.selectAll("g.cluster").data(o,function(u){return u});s.selectAll("*").remove(),s.enter().append("g").attr("class","cluster").attr("id",function(u){var h=a.node(u);return h.id}).style("opacity",0),s=i.selectAll("g.cluster"),t.applyTransition(s,a).style("opacity",1),s.each(function(u){var h=a.node(u),f=e.select(this);e.select(this).append("rect");var d=f.append("g").attr("class","label");n(d,h,h.clusterLabelPos)}),s.selectAll("rect").each(function(u){var h=a.node(u),f=e.select(this);t.applyStyle(f,h.style)});var l;return s.exit?l=s.exit():l=s.selectAll(null),t.applyTransition(l,a).style("opacity",0).remove(),s}return yb}var mb,MM;function drt(){if(MM)return mb;MM=1;var t=ic,e=pb(),n=jr,r=to;mb=i;function i(a,o){var s=a.selectAll("g.edgeLabel").data(o.edges(),function(u){return n.edgeToId(u)}).classed("update",!0);s.exit().remove(),s.enter().append("g").classed("edgeLabel",!0).style("opacity",0),s=a.selectAll("g.edgeLabel"),s.each(function(u){var h=r.select(this);h.select(".label").remove();var f=o.edge(u),d=e(h,o.edge(u),0,0).classed("label",!0),p=d.node().getBBox();f.labelId&&d.attr("id",f.labelId),t.has(f,"width")||(f.width=p.width),t.has(f,"height")||(f.height=p.height)});var l;return s.exit?l=s.exit():l=s.selectAll(null),n.applyTransition(l,o).style("opacity",0).remove(),s}return mb}var bb,LM;function frt(){if(LM)return bb;LM=1;var t=ic,e=bM,n=jr,r=to;bb=i;function i(f,d,p){var m=f.selectAll("g.edgePath").data(d.edges(),function(b){return n.edgeToId(b)}).classed("update",!0),_=u(m,d);h(m,d);var y=m.merge!==void 0?m.merge(_):m;return n.applyTransition(y,d).style("opacity",1),y.each(function(b){var k=r.select(this),T=d.edge(b);T.elem=this,T.id&&k.attr("id",T.id),n.applyClass(k,T.class,(k.classed("update")?"update ":"")+"edgePath")}),y.selectAll("path.path").each(function(b){var k=d.edge(b);k.arrowheadId=t.uniqueId("arrowhead");var T=r.select(this).attr("marker-end",function(){return"url("+a(location.href,k.arrowheadId)+")"}).style("fill","none");n.applyTransition(T,d).attr("d",function(x){return o(d,x)}),n.applyStyle(T,k.style)}),y.selectAll("defs *").remove(),y.selectAll("defs").each(function(b){var k=d.edge(b),T=p[k.arrowhead];T(r.select(this),k.arrowheadId,k,"arrowhead")}),y}function a(f,d){var p=f.split("#")[0];return p+"#"+d}function o(f,d){var p=f.edge(d),m=f.node(d.v),_=f.node(d.w),y=p.points.slice(1,p.points.length-1);return y.unshift(e(m,y[0])),y.push(e(_,y[y.length-1])),s(p,y)}function s(f,d){var p=(r.line||r.svg.line)().x(function(m){return m.x}).y(function(m){return m.y});return(p.curve||p.interpolate)(f.curve),p(d)}function l(f){var d=f.getBBox(),p=f.ownerSVGElement.getScreenCTM().inverse().multiply(f.getScreenCTM()).translate(d.width/2,d.height/2);return{x:p.e,y:p.f}}function u(f,d){var p=f.enter().append("g").attr("class","edgePath").style("opacity",0);return p.append("path").attr("class","path").attr("d",function(m){var _=d.edge(m),y=d.node(m.v).elem,b=t.range(_.points.length).map(function(){return l(y)});return s(_,b)}),p.append("defs"),p}function h(f,d){var p=f.exit();n.applyTransition(p,d).style("opacity",0).remove()}return bb}var _b,BM;function prt(){if(BM)return _b;BM=1;var t=jr,e=to;_b=n;function n(r,i){var a=r.filter(function(){return!e.select(this).classed("update")});function o(s){var l=i.node(s);return"translate("+l.x+","+l.y+")"}a.attr("transform",o),t.applyTransition(r,i).style("opacity",1).attr("transform",o)}return _b}var vb,NM;function grt(){if(NM)return vb;NM=1;var t=jr,e=to,n=ic;vb=r;function r(i,a){var o=i.filter(function(){return!e.select(this).classed("update")});function s(l){var u=a.edge(l);return n.has(u,"x")?"translate("+u.x+","+u.y+")":""}o.attr("transform",s),t.applyTransition(i,a).style("opacity",1).attr("transform",s)}return vb}var xb,DM;function yrt(){if(DM)return xb;DM=1;var t=jr,e=to;xb=n;function n(r,i){var a=r.filter(function(){return!e.select(this).classed("update")});function o(s){var l=i.node(s);return"translate("+l.x+","+l.y+")"}a.attr("transform",o),t.applyTransition(r,i).style("opacity",1).attr("transform",o),t.applyTransition(a.selectAll("rect"),i).attr("width",function(s){return i.node(s).width}).attr("height",function(s){return i.node(s).height}).attr("x",function(s){var l=i.node(s);return-l.width/2}).attr("y",function(s){var l=i.node(s);return-l.height/2})}return xb}var kb,OM;function mrt(){if(OM)return kb;OM=1;var t=kM,e=cb,n=_M,r=xM;kb={rect:i,ellipse:a,circle:o,diamond:s};function i(l,u,h){var f=l.insert("rect",":first-child").attr("rx",h.rx).attr("ry",h.ry).attr("x",-u.width/2).attr("y",-u.height/2).attr("width",u.width).attr("height",u.height);return h.intersect=function(d){return t(h,d)},f}function a(l,u,h){var f=u.width/2,d=u.height/2,p=l.insert("ellipse",":first-child").attr("x",-u.width/2).attr("y",-u.height/2).attr("rx",f).attr("ry",d);return h.intersect=function(m){return e(h,f,d,m)},p}function o(l,u,h){var f=Math.max(u.width,u.height)/2,d=l.insert("circle",":first-child").attr("x",-u.width/2).attr("y",-u.height/2).attr("r",f);return h.intersect=function(p){return n(h,f,p)},d}function s(l,u,h){var f=u.width*Math.SQRT2/2,d=u.height*Math.SQRT2/2,p=[{x:0,y:-d},{x:-f,y:0},{x:0,y:d},{x:f,y:0}],m=l.insert("polygon",":first-child").attr("points",p.map(function(_){return _.x+","+_.y}).join(" "));return h.intersect=function(_){return r(h,p,_)},m}return kb}var wb,IM;function brt(){if(IM)return wb;IM=1;var t=jr;wb={default:e,normal:e,vee:n,undirected:r};function e(i,a,o,s){var l=i.append("marker").attr("id",a).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),u=l.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(u,o[s+"Style"]),o[s+"Class"]&&u.attr("class",o[s+"Class"])}function n(i,a,o,s){var l=i.append("marker").attr("id",a).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),u=l.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(u,o[s+"Style"]),o[s+"Class"]&&u.attr("class",o[s+"Class"])}function r(i,a,o,s){var l=i.append("marker").attr("id",a).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),u=l.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(u,o[s+"Style"]),o[s+"Class"]&&u.attr("class",o[s+"Class"])}return wb}var Hn=ic,_rt=to,vrt=mM.layout,xrt=krt;function krt(){var t=urt(),e=hrt(),n=drt(),r=frt(),i=prt(),a=grt(),o=yrt(),s=mrt(),l=brt(),u=function(h,f){Ert(f);var d=ou(h,"output"),p=ou(d,"clusters"),m=ou(d,"edgePaths"),_=n(ou(d,"edgeLabels"),f),y=t(ou(d,"nodes"),f,s);vrt(f),i(y,f),a(_,f),r(m,f,l);var b=e(p,f);o(b,f),Crt(f)};return u.createNodes=function(h){return arguments.length?(t=h,u):t},u.createClusters=function(h){return arguments.length?(e=h,u):e},u.createEdgeLabels=function(h){return arguments.length?(n=h,u):n},u.createEdgePaths=function(h){return arguments.length?(r=h,u):r},u.shapes=function(h){return arguments.length?(s=h,u):s},u.arrows=function(h){return arguments.length?(l=h,u):l},u}var wrt={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},Trt={arrowhead:"normal",curve:_rt.curveLinear};function Ert(t){t.nodes().forEach(function(e){var n=t.node(e);!Hn.has(n,"label")&&!t.children(e).length&&(n.label=e),Hn.has(n,"paddingX")&&Hn.defaults(n,{paddingLeft:n.paddingX,paddingRight:n.paddingX}),Hn.has(n,"paddingY")&&Hn.defaults(n,{paddingTop:n.paddingY,paddingBottom:n.paddingY}),Hn.has(n,"padding")&&Hn.defaults(n,{paddingLeft:n.padding,paddingRight:n.padding,paddingTop:n.padding,paddingBottom:n.padding}),Hn.defaults(n,wrt),Hn.each(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(r){n[r]=Number(n[r])}),Hn.has(n,"width")&&(n._prevWidth=n.width),Hn.has(n,"height")&&(n._prevHeight=n.height)}),t.edges().forEach(function(e){var n=t.edge(e);Hn.has(n,"label")||(n.label=""),Hn.defaults(n,Trt)})}function Crt(t){Hn.each(t.nodes(),function(e){var n=t.node(e);Hn.has(n,"_prevWidth")?n.width=n._prevWidth:delete n.width,Hn.has(n,"_prevHeight")?n.height=n._prevHeight:delete n.height,delete n._prevWidth,delete n._prevHeight})}function ou(t,e){var n=t.select("g."+e);return n.empty()&&(n=t.append("g").attr("class",e)),n}var Srt="0.6.4";/**
* @license
* Copyright (c) 2012-2013 Chris Pettitt
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/var Cr={graphlib:jnt,dagre:mM,intersect:Knt,render:xrt,util:jr,version:Srt};function RM(t,e,n){const r=e.width,i=e.height,a=(r+i)*.9,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],s=ha(t,a,a,o);return n.intersect=function(l){return Cr.intersect.polygon(n,o,l)},s}function FM(t,e,n){const r=e.height,i=r/4,a=e.width+2*i,o=[{x:i,y:0},{x:a-i,y:0},{x:a,y:-r/2},{x:a-i,y:-r},{x:i,y:-r},{x:0,y:-r/2}],s=ha(t,a,r,o);return n.intersect=function(l){return Cr.intersect.polygon(n,o,l)},s}function $M(t,e,n){const r=e.width,i=e.height,a=[{x:-i/2,y:0},{x:r,y:0},{x:r,y:-i},{x:-i/2,y:-i},{x:0,y:-i/2}],o=ha(t,r,i,a);return n.intersect=function(s){return Cr.intersect.polygon(n,a,s)},o}function PM(t,e,n){const r=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:i/6,y:-i}],o=ha(t,r,i,a);return n.intersect=function(s){return Cr.intersect.polygon(n,a,s)},o}function YM(t,e,n){const r=e.width,i=e.height,a=[{x:2*i/6,y:0},{x:r+i/6,y:0},{x:r-2*i/6,y:-i},{x:-i/6,y:-i}],o=ha(t,r,i,a);return n.intersect=function(s){return Cr.intersect.polygon(n,a,s)},o}function zM(t,e,n){const r=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:r+2*i/6,y:0},{x:r-i/6,y:-i},{x:i/6,y:-i}],o=ha(t,r,i,a);return n.intersect=function(s){return Cr.intersect.polygon(n,a,s)},o}function jM(t,e,n){const r=e.width,i=e.height,a=[{x:i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:-2*i/6,y:-i}],o=ha(t,r,i,a);return n.intersect=function(s){return Cr.intersect.polygon(n,a,s)},o}function UM(t,e,n){const r=e.width,i=e.height,a=[{x:0,y:0},{x:r+i/2,y:0},{x:r,y:-i/2},{x:r+i/2,y:-i},{x:0,y:-i}],o=ha(t,r,i,a);return n.intersect=function(s){return Cr.intersect.polygon(n,a,s)},o}function HM(t,e,n){const r=e.height,i=e.width+r/4,a=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-i/2).attr("y",-r/2).attr("width",i).attr("height",r);return n.intersect=function(o){return Cr.intersect.rect(n,o)},a}function WM(t,e,n){const r=e.width,i=e.height,a=[{x:0,y:0},{x:r,y:0},{x:r,y:-i},{x:0,y:-i},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-i},{x:-8,y:-i},{x:-8,y:0}],o=ha(t,r,i,a);return n.intersect=function(s){return Cr.intersect.polygon(n,a,s)},o}function VM(t,e,n){const r=e.width,i=r/2,a=i/(2.5+r/50),o=e.height+a,s="M 0,"+a+" a "+i+","+a+" 0,0,0 "+r+" 0 a "+i+","+a+" 0,0,0 "+-r+" 0 l 0,"+o+" a "+i+","+a+" 0,0,0 "+r+" 0 l 0,"+-o,l=t.attr("label-offset-y",a).insert("path",":first-child").attr("d",s).attr("transform","translate("+-r/2+","+-(o/2+a)+")");return n.intersect=function(u){const h=Cr.intersect.rect(n,u),f=h.x-n.x;if(i!=0&&(Math.abs(f)<n.width/2||Math.abs(f)==n.width/2&&Math.abs(h.y-n.y)>n.height/2-a)){let d=a*a*(1-f*f/(i*i));d!=0&&(d=Math.sqrt(d)),d=a-d,u.y-n.y>0&&(d=-d),h.y+=d}return h},l}function Art(t){t.shapes().question=RM,t.shapes().hexagon=FM,t.shapes().stadium=HM,t.shapes().subroutine=WM,t.shapes().cylinder=VM,t.shapes().rect_left_inv_arrow=$M,t.shapes().lean_right=PM,t.shapes().lean_left=YM,t.shapes().trapezoid=zM,t.shapes().inv_trapezoid=jM,t.shapes().rect_right_inv_arrow=UM}function Mrt(t){t({question:RM}),t({hexagon:FM}),t({stadium:HM}),t({subroutine:WM}),t({cylinder:VM}),t({rect_left_inv_arrow:$M}),t({lean_right:PM}),t({lean_left:YM}),t({trapezoid:zM}),t({inv_trapezoid:jM}),t({rect_right_inv_arrow:UM})}function ha(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("transform","translate("+-e/2+","+n/2+")")}const Lrt={addToRender:Art,addToRenderV2:Mrt},GM={},Brt=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)GM[e[n]]=t[e[n]]},qM=function(t,e,n,r,i,a){const o=r?r.select(`[id="${n}"]`):Lt(`[id="${n}"]`),s=i||document;Object.keys(t).forEach(function(l){const u=t[l];let h="default";u.classes.length>0&&(h=u.classes.join(" "));const f=Xa(u.styles);let d=u.text!==void 0?u.text:u.id,p;if(Mn(at().flowchart.htmlLabels)){const y={label:d.replace(/fa[lrsb]?:fa-[\w-]+/g,b=>`<i class='${b.replace(":"," ")}'></i>`)};p=hb(o,y).node(),p.parentNode.removeChild(p)}else{const y=s.createElementNS("http://www.w3.org/2000/svg","text");y.setAttribute("style",f.labelStyle.replace("color:","fill:"));const b=d.split(he.lineBreakRegex);for(let k=0;k<b.length;k++){const T=s.createElementNS("http://www.w3.org/2000/svg","tspan");T.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),T.setAttribute("dy","1em"),T.setAttribute("x","1"),T.textContent=b[k],y.appendChild(T)}p=y}let m=0,_="";switch(u.type){case"round":m=5,_="rect";break;case"square":_="rect";break;case"diamond":_="question";break;case"hexagon":_="hexagon";break;case"odd":_="rect_left_inv_arrow";break;case"lean_right":_="lean_right";break;case"lean_left":_="lean_left";break;case"trapezoid":_="trapezoid";break;case"inv_trapezoid":_="inv_trapezoid";break;case"odd_right":_="rect_left_inv_arrow";break;case"circle":_="circle";break;case"ellipse":_="ellipse";break;case"stadium":_="stadium";break;case"subroutine":_="subroutine";break;case"cylinder":_="cylinder";break;case"group":_="rect";break;default:_="rect"}W.warn("Adding node",u.id,u.domId),e.setNode(a.db.lookUpDomId(u.id),{labelType:"svg",labelStyle:f.labelStyle,shape:_,label:p,rx:m,ry:m,class:h,style:f.style,id:a.db.lookUpDomId(u.id)})})},XM=function(t,e,n){let r=0,i,a;if(typeof t.defaultStyle<"u"){const o=Xa(t.defaultStyle);i=o.style,a=o.labelStyle}t.forEach(function(o){r++;var s="L-"+o.start+"-"+o.end,l="LS-"+o.start,u="LE-"+o.end;const h={};o.type==="arrow_open"?h.arrowhead="none":h.arrowhead="normal";let f="",d="";if(typeof o.style<"u"){const p=Xa(o.style);f=p.style,d=p.labelStyle}else switch(o.stroke){case"normal":f="fill:none",typeof i<"u"&&(f=i),typeof a<"u"&&(d=a);break;case"dotted":f="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":f=" stroke-width: 3.5px;fill:none";break}h.style=f,h.labelStyle=d,typeof o.interpolate<"u"?h.curve=Li(o.interpolate,pr):typeof t.defaultInterpolate<"u"?h.curve=Li(t.defaultInterpolate,pr):h.curve=Li(GM.curve,pr),typeof o.text>"u"?typeof o.style<"u"&&(h.arrowheadStyle="fill: #333"):(h.arrowheadStyle="fill: #333",h.labelpos="c",Mn(at().flowchart.htmlLabels)?(h.labelType="html",h.label=`<span id="L-${s}" class="edgeLabel L-${l}' L-${u}" style="${h.labelStyle}">${o.text.replace(/fa[lrsb]?:fa-[\w-]+/g,p=>`<i class='${p.replace(":"," ")}'></i>`)}</span>`):(h.labelType="text",h.label=o.text.replace(he.lineBreakRegex,`
`),typeof o.style>"u"&&(h.style=h.style||"stroke: #333; stroke-width: 1.5px;fill:none"),h.labelStyle=h.labelStyle.replace("color:","fill:"))),h.id=s,h.class=l+" "+u,h.minlen=o.length||1,e.setEdge(n.db.lookUpDomId(o.start),n.db.lookUpDomId(o.end),h,r)})},Tb={setConf:Brt,addVertices:qM,addEdges:XM,getClasses:function(t,e){W.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{return}},draw:function(t,e,n,r){W.info("Drawing flowchart"),r.db.clear();const{securityLevel:i,flowchart:a}=at();let o;i==="sandbox"&&(o=Lt("#i"+e));const s=Lt(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=i==="sandbox"?o.nodes()[0].contentDocument:document;try{r.parser.parse(t)}catch{W.debug("Parsing failed")}let u=r.db.getDirection();typeof u>"u"&&(u="TD");const h=a.nodeSpacing||50,f=a.rankSpacing||50,d=new un.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:u,nodesep:h,ranksep:f,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let p;const m=r.db.getSubGraphs();for(let C=m.length-1;C>=0;C--)p=m[C],r.db.addVertex(p.id,p.title,"group",void 0,p.classes);const _=r.db.getVertices();W.warn("Get vertices",_);const y=r.db.getEdges();let b=0;for(b=m.length-1;b>=0;b--){p=m[b],Ru("cluster").append("text");for(let C=0;C<p.nodes.length;C++)W.warn("Setting subgraph",p.nodes[C],r.db.lookUpDomId(p.nodes[C]),r.db.lookUpDomId(p.id)),d.setParent(r.db.lookUpDomId(p.nodes[C]),r.db.lookUpDomId(p.id))}qM(_,d,e,s,l,r),XM(y,d,r);const k=Cr.render,T=new k;Lrt.addToRender(T),T.arrows().none=function(C,L,S,D){const v=C.append("marker").attr("id",L).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");Cr.util.applyStyle(v,S[D+"Style"])},T.arrows().normal=function(C,L){C.append("marker").attr("id",L).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const x=s.select(`[id="${e}"]`);yr(r.db,x,e);const A=s.select("#"+e+" g");for(T(A,d),A.selectAll("g.node").attr("title",function(){return r.db.getTooltip(this.id)}),r.db.indexNodes("subGraph"+b),b=0;b<m.length;b++)if(p=m[b],p.title!=="undefined"){const C=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"] rect'),L=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"]'),S=C[0].x.baseVal.value,D=C[0].y.baseVal.value,v=C[0].width.baseVal.value,M=Lt(L[0]).select(".label");M.attr("transform",`translate(${S+v/2}, ${D+14})`),M.attr("id",e+"Text");for(let w=0;w<p.classes.length;w++)L[0].classList.add(p.classes[w])}if(!a.htmlLabels){const C=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let L=0;L<C.length;L++){const S=C[L],D=S.getBBox(),v=l.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("rx",0),v.setAttribute("ry",0),v.setAttribute("width",D.width),v.setAttribute("height",D.height),S.insertBefore(v,S.firstChild)}}o0(d,x,a.diagramPadding,a.useMaxWidth),Object.keys(_).forEach(function(C){const L=_[C];if(L.link){const S=s.select("#"+e+' [id="'+r.db.lookUpDomId(C)+'"]');if(S){const D=l.createElementNS("http://www.w3.org/2000/svg","a");D.setAttributeNS("http://www.w3.org/2000/svg","class",L.classes.join(" ")),D.setAttributeNS("http://www.w3.org/2000/svg","href",L.link),D.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),i==="sandbox"?D.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):L.linkTarget&&D.setAttributeNS("http://www.w3.org/2000/svg","target",L.linkTarget);const v=S.insert(function(){return D},":first-child"),M=S.select(".label-container");M&&v.append(function(){return M.node()});const w=S.select(".label");w&&v.append(function(){return w.node()})}}})}},ZM={},Nrt=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)ZM[e[n]]=t[e[n]]},QM=function(t,e,n,r,i,a){const o=r.select(`[id="${n}"]`);Object.keys(t).forEach(function(s){const l=t[s];let u="default";l.classes.length>0&&(u=l.classes.join(" "));const h=Xa(l.styles);let f=l.text!==void 0?l.text:l.id,d;if(Mn(at().flowchart.htmlLabels)){const _={label:f.replace(/fa[lrsb]?:fa-[\w-]+/g,y=>`<i class='${y.replace(":"," ")}'></i>`)};d=hb(o,_).node(),d.parentNode.removeChild(d)}else{const _=i.createElementNS("http://www.w3.org/2000/svg","text");_.setAttribute("style",h.labelStyle.replace("color:","fill:"));const y=f.split(he.lineBreakRegex);for(let b=0;b<y.length;b++){const k=i.createElementNS("http://www.w3.org/2000/svg","tspan");k.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),k.setAttribute("dy","1em"),k.setAttribute("x","1"),k.textContent=y[b],_.appendChild(k)}d=_}let p=0,m="";switch(l.type){case"round":p=5,m="rect";break;case"square":m="rect";break;case"diamond":m="question";break;case"hexagon":m="hexagon";break;case"odd":m="rect_left_inv_arrow";break;case"lean_right":m="lean_right";break;case"lean_left":m="lean_left";break;case"trapezoid":m="trapezoid";break;case"inv_trapezoid":m="inv_trapezoid";break;case"odd_right":m="rect_left_inv_arrow";break;case"circle":m="circle";break;case"ellipse":m="ellipse";break;case"stadium":m="stadium";break;case"subroutine":m="subroutine";break;case"cylinder":m="cylinder";break;case"group":m="rect";break;case"doublecircle":m="doublecircle";break;default:m="rect"}e.setNode(l.id,{labelStyle:h.labelStyle,shape:m,labelText:f,rx:p,ry:p,class:u,style:h.style,id:l.id,link:l.link,linkTarget:l.linkTarget,tooltip:a.db.getTooltip(l.id)||"",domId:a.db.lookUpDomId(l.id),haveCallback:l.haveCallback,width:l.type==="group"?500:void 0,dir:l.dir,type:l.type,props:l.props,padding:at().flowchart.padding}),W.info("setNode",{labelStyle:h.labelStyle,shape:m,labelText:f,rx:p,ry:p,class:u,style:h.style,id:l.id,domId:a.db.lookUpDomId(l.id),width:l.type==="group"?500:void 0,type:l.type,dir:l.dir,props:l.props,padding:at().flowchart.padding})})},KM=function(t,e,n){W.info("abc78 edges = ",t);let r=0,i={},a,o;if(typeof t.defaultStyle<"u"){const s=Xa(t.defaultStyle);a=s.style,o=s.labelStyle}t.forEach(function(s){r++;var l="L-"+s.start+"-"+s.end;typeof i[l]>"u"?(i[l]=0,W.info("abc78 new entry",l,i[l])):(i[l]++,W.info("abc78 new entry",l,i[l]));let u=l+"-"+i[l];W.info("abc78 new link id to be used is",l,u,i[l]);var h="LS-"+s.start,f="LE-"+s.end;const d={style:"",labelStyle:""};switch(d.minlen=s.length||1,s.type==="arrow_open"?d.arrowhead="none":d.arrowhead="normal",d.arrowTypeStart="arrow_open",d.arrowTypeEnd="arrow_open",s.type){case"double_arrow_cross":d.arrowTypeStart="arrow_cross";case"arrow_cross":d.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":d.arrowTypeStart="arrow_point";case"arrow_point":d.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":d.arrowTypeStart="arrow_circle";case"arrow_circle":d.arrowTypeEnd="arrow_circle";break}let p="",m="";switch(s.stroke){case"normal":p="fill:none;",typeof a<"u"&&(p=a),typeof o<"u"&&(m=o),d.thickness="normal",d.pattern="solid";break;case"dotted":d.thickness="normal",d.pattern="dotted",d.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":d.thickness="thick",d.pattern="solid",d.style="stroke-width: 3.5px;fill:none;";break;case"invisible":d.thickness="invisible",d.pattern="solid",d.style="stroke-width: 0;fill:none;";break}if(typeof s.style<"u"){const _=Xa(s.style);p=_.style,m=_.labelStyle}d.style=d.style+=p,d.labelStyle=d.labelStyle+=m,typeof s.interpolate<"u"?d.curve=Li(s.interpolate,pr):typeof t.defaultInterpolate<"u"?d.curve=Li(t.defaultInterpolate,pr):d.curve=Li(ZM.curve,pr),typeof s.text>"u"?typeof s.style<"u"&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c"),d.labelType="text",d.label=s.text.replace(he.lineBreakRegex,`
`),typeof s.style>"u"&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),d.labelStyle=d.labelStyle.replace("color:","fill:"),d.id=u,d.classes="flowchart-link "+h+" "+f,e.setEdge(s.start,s.end,d,r)})},Eb={setConf:Nrt,addVertices:QM,addEdges:KM,getClasses:function(t,e){W.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{return}},draw:function(t,e,n,r){W.info("Drawing flowchart"),r.db.clear(),ua.setGen("gen-2"),r.parser.parse(t);let i=r.db.getDirection();typeof i>"u"&&(i="TD");const{securityLevel:a,flowchart:o}=at(),s=o.nodeSpacing||50,l=o.rankSpacing||50;let u;a==="sandbox"&&(u=Lt("#i"+e));const h=Lt(a==="sandbox"?u.nodes()[0].contentDocument.body:"body"),f=a==="sandbox"?u.nodes()[0].contentDocument:document,d=new un.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:i,nodesep:s,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let p;const m=r.db.getSubGraphs();W.info("Subgraphs - ",m);for(let x=m.length-1;x>=0;x--)p=m[x],W.info("Subgraph - ",p),r.db.addVertex(p.id,p.title,"group",void 0,p.classes,p.dir);const _=r.db.getVertices(),y=r.db.getEdges();W.info(y);let b=0;for(b=m.length-1;b>=0;b--){p=m[b],Ru("cluster").append("text");for(let x=0;x<p.nodes.length;x++)W.info("Setting up subgraphs",p.nodes[x],p.id),d.setParent(p.nodes[x],p.id)}QM(_,d,e,h,f,r),KM(y,d);const k=h.select(`[id="${e}"]`);yr(r.db,k,e);const T=h.select("#"+e+" g");if(eb(T,d,["point","circle","cross"],"flowchart",e),o0(d,k,o.diagramPadding,o.useMaxWidth),r.db.indexNodes("subGraph"+b),!o.htmlLabels){const x=f.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let A=0;A<x.length;A++){const C=x[A],L=C.getBBox(),S=f.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",L.width),S.setAttribute("height",L.height),C.insertBefore(S,C.firstChild)}}Object.keys(_).forEach(function(x){const A=_[x];if(A.link){const C=Lt("#"+e+' [id="'+x+'"]');if(C){const L=f.createElementNS("http://www.w3.org/2000/svg","a");L.setAttributeNS("http://www.w3.org/2000/svg","class",A.classes.join(" ")),L.setAttributeNS("http://www.w3.org/2000/svg","href",A.link),L.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),a==="sandbox"?L.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):A.linkTarget&&L.setAttributeNS("http://www.w3.org/2000/svg","target",A.linkTarget);const S=C.insert(function(){return L},":first-child"),D=C.select(".label-container");D&&S.append(function(){return D.node()});const v=C.select(".label");v&&S.append(function(){return v.node()})}}})}};var Cb=function(){var t=function(L,S,D,v){for(D=D||{},v=L.length;v--;D[L[v]]=S);return D},e=[1,3],n=[1,5],r=[7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],i=[1,15],a=[1,16],o=[1,17],s=[1,18],l=[1,19],u=[1,20],h=[1,21],f=[1,22],d=[1,23],p=[1,24],m=[1,25],_=[1,26],y=[1,28],b=[1,30],k=[1,33],T=[5,7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],x={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,excludes:16,includes:17,todayMarker:18,title:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,clickStatement:26,taskTxt:27,taskData:28,openDirective:29,typeDirective:30,closeDirective:31,":":32,argDirective:33,click:34,callbackname:35,callbackargs:36,href:37,clickStatementDebug:38,open_directive:39,type_directive:40,arg_directive:41,close_directive:42,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"excludes",17:"includes",18:"todayMarker",19:"title",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"taskTxt",28:"taskData",32:":",34:"click",35:"callbackname",36:"callbackargs",37:"href",39:"open_directive",40:"type_directive",41:"arg_directive",42:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[26,2],[26,3],[26,3],[26,4],[26,3],[26,4],[26,2],[38,2],[38,3],[38,3],[38,4],[38,3],[38,4],[38,2],[29,1],[30,1],[33,1],[31,1]],performAction:function(L,S,D,v,M,w,I){var B=w.length-1;switch(M){case 2:return w[B-1];case 3:this.$=[];break;case 4:w[B-1].push(w[B]),this.$=w[B-1];break;case 5:case 6:this.$=w[B];break;case 7:case 8:this.$=[];break;case 9:v.setDateFormat(w[B].substr(11)),this.$=w[B].substr(11);break;case 10:v.enableInclusiveEndDates(),this.$=w[B].substr(18);break;case 11:v.TopAxis(),this.$=w[B].substr(8);break;case 12:v.setAxisFormat(w[B].substr(11)),this.$=w[B].substr(11);break;case 13:v.setExcludes(w[B].substr(9)),this.$=w[B].substr(9);break;case 14:v.setIncludes(w[B].substr(9)),this.$=w[B].substr(9);break;case 15:v.setTodayMarker(w[B].substr(12)),this.$=w[B].substr(12);break;case 16:v.setDiagramTitle(w[B].substr(6)),this.$=w[B].substr(6);break;case 17:this.$=w[B].trim(),v.setAccTitle(this.$);break;case 18:case 19:this.$=w[B].trim(),v.setAccDescription(this.$);break;case 20:v.addSection(w[B].substr(8)),this.$=w[B].substr(8);break;case 22:v.addTask(w[B-1],w[B]),this.$="task";break;case 26:this.$=w[B-1],v.setClickEvent(w[B-1],w[B],null);break;case 27:this.$=w[B-2],v.setClickEvent(w[B-2],w[B-1],w[B]);break;case 28:this.$=w[B-2],v.setClickEvent(w[B-2],w[B-1],null),v.setLink(w[B-2],w[B]);break;case 29:this.$=w[B-3],v.setClickEvent(w[B-3],w[B-2],w[B-1]),v.setLink(w[B-3],w[B]);break;case 30:this.$=w[B-2],v.setClickEvent(w[B-2],w[B],null),v.setLink(w[B-2],w[B-1]);break;case 31:this.$=w[B-3],v.setClickEvent(w[B-3],w[B-1],w[B]),v.setLink(w[B-3],w[B-2]);break;case 32:this.$=w[B-1],v.setLink(w[B-1],w[B]);break;case 33:case 39:this.$=w[B-1]+" "+w[B];break;case 34:case 35:case 37:this.$=w[B-2]+" "+w[B-1]+" "+w[B];break;case 36:case 38:this.$=w[B-3]+" "+w[B-2]+" "+w[B-1]+" "+w[B];break;case 40:v.parseDirective("%%{","open_directive");break;case 41:v.parseDirective(w[B],"type_directive");break;case 42:w[B]=w[B].trim().replace(/'/g,'"'),v.parseDirective(w[B],"arg_directive");break;case 43:v.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:e,29:4,39:n},{1:[3]},{3:6,4:2,5:e,29:4,39:n},t(r,[2,3],{6:7}),{30:8,40:[1,9]},{40:[2,40]},{1:[2,1]},{4:29,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:i,13:a,14:o,15:s,16:l,17:u,18:h,19:f,20:d,22:p,24:m,25:_,26:27,27:y,29:4,34:b,39:n},{31:31,32:[1,32],42:k},t([32,42],[2,41]),t(r,[2,8],{1:[2,2]}),t(r,[2,4]),{4:29,10:34,12:i,13:a,14:o,15:s,16:l,17:u,18:h,19:f,20:d,22:p,24:m,25:_,26:27,27:y,29:4,34:b,39:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,9]),t(r,[2,10]),t(r,[2,11]),t(r,[2,12]),t(r,[2,13]),t(r,[2,14]),t(r,[2,15]),t(r,[2,16]),{21:[1,35]},{23:[1,36]},t(r,[2,19]),t(r,[2,20]),t(r,[2,21]),{28:[1,37]},t(r,[2,23]),{35:[1,38],37:[1,39]},{11:[1,40]},{33:41,41:[1,42]},{11:[2,43]},t(r,[2,5]),t(r,[2,17]),t(r,[2,18]),t(r,[2,22]),t(r,[2,26],{36:[1,43],37:[1,44]}),t(r,[2,32],{35:[1,45]}),t(T,[2,24]),{31:46,42:k},{42:[2,42]},t(r,[2,27],{37:[1,47]}),t(r,[2,28]),t(r,[2,30],{36:[1,48]}),{11:[1,49]},t(r,[2,29]),t(r,[2,31]),t(T,[2,25])],defaultActions:{5:[2,40],6:[2,1],33:[2,43],42:[2,42]},parseError:function(L,S){if(S.recoverable)this.trace(L);else{var D=new Error(L);throw D.hash=S,D}},parse:function(L){var S=this,D=[0],v=[],M=[null],w=[],I=this.table,B="",$=0,F=0,K=2,nt=1,z=w.slice.call(arguments,1),Y=Object.create(this.lexer),rt={yy:{}};for(var lt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lt)&&(rt.yy[lt]=this.yy[lt]);Y.setInput(L,rt.yy),rt.yy.lexer=Y,rt.yy.parser=this,typeof Y.yylloc>"u"&&(Y.yylloc={});var J=Y.yylloc;w.push(J);var Q=Y.options&&Y.options.ranges;typeof rt.yy.parseError=="function"?this.parseError=rt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function q(){var xt;return xt=v.pop()||Y.lex()||nt,typeof xt!="number"&&(xt instanceof Array&&(v=xt,xt=v.pop()),xt=S.symbols_[xt]||xt),xt}for(var it,ut,V,j,P={},X,O,G,U;;){if(ut=D[D.length-1],this.defaultActions[ut]?V=this.defaultActions[ut]:((it===null||typeof it>"u")&&(it=q()),V=I[ut]&&I[ut][it]),typeof V>"u"||!V.length||!V[0]){var H="";U=[];for(X in I[ut])this.terminals_[X]&&X>K&&U.push("'"+this.terminals_[X]+"'");Y.showPosition?H="Parse error on line "+($+1)+`:
`+Y.showPosition()+`
Expecting `+U.join(", ")+", got '"+(this.terminals_[it]||it)+"'":H="Parse error on line "+($+1)+": Unexpected "+(it==nt?"end of input":"'"+(this.terminals_[it]||it)+"'"),this.parseError(H,{text:Y.match,token:this.terminals_[it]||it,line:Y.yylineno,loc:J,expected:U})}if(V[0]instanceof Array&&V.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ut+", token: "+it);switch(V[0]){case 1:D.push(it),M.push(Y.yytext),w.push(Y.yylloc),D.push(V[1]),it=null,F=Y.yyleng,B=Y.yytext,$=Y.yylineno,J=Y.yylloc;break;case 2:if(O=this.productions_[V[1]][1],P.$=M[M.length-O],P._$={first_line:w[w.length-(O||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(O||1)].first_column,last_column:w[w.length-1].last_column},Q&&(P._$.range=[w[w.length-(O||1)].range[0],w[w.length-1].range[1]]),j=this.performAction.apply(P,[B,F,$,rt.yy,V[1],M,w].concat(z)),typeof j<"u")return j;O&&(D=D.slice(0,-1*O*2),M=M.slice(0,-1*O),w=w.slice(0,-1*O)),D.push(this.productions_[V[1]][0]),M.push(P.$),w.push(P._$),G=I[D[D.length-2]][D[D.length-1]],D.push(G);break;case 3:return!0}}return!0}},A=function(){var L={EOF:1,parseError:function(S,D){if(this.yy.parser)this.yy.parser.parseError(S,D);else throw new Error(S)},setInput:function(S,D){return this.yy=D||this.yy||{},this._input=S,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var S=this._input[0];this.yytext+=S,this.yyleng++,this.offset++,this.match+=S,this.matched+=S;var D=S.match(/(?:\r\n?|\n).*/g);return D?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),S},unput:function(S){var D=S.length,v=S.split(/(?:\r\n?|\n)/g);this._input=S+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-D),this.offset-=D;var M=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),v.length-1&&(this.yylineno-=v.length-1);var w=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:v?(v.length===M.length?this.yylloc.first_column:0)+M[M.length-v.length].length-v[0].length:this.yylloc.first_column-D},this.options.ranges&&(this.yylloc.range=[w[0],w[0]+this.yyleng-D]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(S){this.unput(this.match.slice(S))},pastInput:function(){var S=this.matched.substr(0,this.matched.length-this.match.length);return(S.length>20?"...":"")+S.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var S=this.match;return S.length<20&&(S+=this._input.substr(0,20-S.length)),(S.substr(0,20)+(S.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var S=this.pastInput(),D=new Array(S.length+1).join("-");return S+this.upcomingInput()+`
`+D+"^"},test_match:function(S,D){var v,M,w;if(this.options.backtrack_lexer&&(w={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(w.yylloc.range=this.yylloc.range.slice(0))),M=S[0].match(/(?:\r\n?|\n).*/g),M&&(this.yylineno+=M.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:M?M[M.length-1].length-M[M.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+S[0].length},this.yytext+=S[0],this.match+=S[0],this.matches=S,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(S[0].length),this.matched+=S[0],v=this.performAction.call(this,this.yy,this,D,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),v)return v;if(this._backtrack){for(var I in w)this[I]=w[I];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var S,D,v,M;this._more||(this.yytext="",this.match="");for(var w=this._currentRules(),I=0;I<w.length;I++)if(v=this._input.match(this.rules[w[I]]),v&&(!D||v[0].length>D[0].length)){if(D=v,M=I,this.options.backtrack_lexer){if(S=this.test_match(v,w[I]),S!==!1)return S;if(this._backtrack){D=!1;continue}else return!1}else if(!this.options.flex)break}return D?(S=this.test_match(D,w[M]),S!==!1?S:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var S=this.next();return S||this.lex()},begin:function(S){this.conditionStack.push(S)},popState:function(){var S=this.conditionStack.length-1;return S>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(S){return S=this.conditionStack.length-1-Math.abs(S||0),S>=0?this.conditionStack[S]:"INITIAL"},pushState:function(S){this.begin(S)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(S,D,v,M){switch(v){case 0:return this.begin("open_directive"),39;case 1:return this.begin("type_directive"),40;case 2:return this.popState(),this.begin("arg_directive"),32;case 3:return this.popState(),this.popState(),42;case 4:return 41;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 37;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 35;case 26:this.popState();break;case 27:return 36;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 34;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 17;case 37:return 16;case 38:return 18;case 39:return"date";case 40:return 19;case 41:return"accDescription";case 42:return 25;case 43:return 27;case 44:return 28;case 45:return 32;case 46:return 7;case 47:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],inclusive:!0}}};return L}();x.lexer=A;function C(){this.yy={}}return C.prototype=x,x.Parser=C,new C}();Cb.parser=Cb;const Drt=t=>t.match(/^\s*gantt/)!==null;let $i="",Sb="",Ab="",su=[],cu=[],Mb={},Lb=[],id=[],ac="";const JM=["active","done","crit","milestone"];let ad=[],lu=!1,Bb=!1,Nb=0;const Ort=function(t,e,n){qe.parseDirective(this,t,e,n)},Irt=function(){Lb=[],id=[],ac="",ad=[],od=0,Ob=void 0,sd=void 0,bn=[],$i="",Sb="",Ab="",su=[],cu=[],lu=!1,Bb=!1,Nb=0,Mb={},si()},Rrt=function(t){Sb=t},Frt=function(){return Sb},$rt=function(t){Ab=t},Prt=function(){return Ab},Yrt=function(t){$i=t},zrt=function(){lu=!0},jrt=function(){return lu},Urt=function(){Bb=!0},Hrt=function(){return Bb},Wrt=function(){return $i},Vrt=function(t){su=t.toLowerCase().split(/[\s,]+/)},Grt=function(){return su},qrt=function(t){cu=t.toLowerCase().split(/[\s,]+/)},Xrt=function(){return cu},Zrt=function(){return Mb},Qrt=function(t){ac=t,Lb.push(t)},Krt=function(){return Lb},Jrt=function(){let t=aL();const e=10;let n=0;for(;!t&&n<e;)t=aL(),n++;return id=bn,id},tL=function(t,e,n,r){return r.indexOf(t.format(e.trim()))>=0?!1:t.isoWeekday()>=6&&n.indexOf("weekends")>=0||n.indexOf(t.format("dddd").toLowerCase())>=0?!0:n.indexOf(t.format(e.trim()))>=0},eL=function(t,e,n,r){if(!n.length||t.manualEndTime)return;let i=Gr(t.startTime,e,!0);i.add(1,"d");let a=Gr(t.endTime,e,!0),o=tit(i,a,e,n,r);t.endTime=a.toDate(),t.renderEndTime=o},tit=function(t,e,n,r,i){let a=!1,o=null;for(;t<=e;)a||(o=e.toDate()),a=tL(t,n,r,i),a&&e.add(1,"d"),t.add(1,"d");return o},Db=function(t,e,n){n=n.trim();const r=/^after\s+([\d\w- ]+)/.exec(n.trim());if(r!==null){let a=null;if(r[1].split(" ").forEach(function(o){let s=sc(o);typeof s<"u"&&(a?s.endTime>a.endTime&&(a=s):a=s)}),a)return a.endTime;{const o=new Date;return o.setHours(0,0,0,0),o}}let i=Gr(n,e.trim(),!0);if(i.isValid())return i.toDate();{W.debug("Invalid date:"+n),W.debug("With date format:"+e.trim());const a=new Date(n);if(typeof a>"u"||isNaN(a.getTime()))throw new Error("Invalid date:"+n);return a}},nL=function(t){const e=/^(\d+(?:\.\d+)?)([yMwdhms]|ms)$/.exec(t.trim());return e!==null?Gr.duration(Number.parseFloat(e[1]),e[2]):Gr.duration.invalid()},rL=function(t,e,n,r){r=r||!1,n=n.trim();let i=Gr(n,e.trim(),!0);if(i.isValid())return r&&i.add(1,"d"),i.toDate();const a=Gr(t),o=nL(n);return o.isValid()&&a.add(o),a.toDate()};let od=0;const oc=function(t){return typeof t>"u"?(od=od+1,"task"+od):t},eit=function(t,e){let n;e.substr(0,1)===":"?n=e.substr(1,e.length):n=e;const r=n.split(","),i={};cL(r,i,JM);for(let o=0;o<r.length;o++)r[o]=r[o].trim();let a="";switch(r.length){case 1:i.id=oc(),i.startTime=t.endTime,a=r[0];break;case 2:i.id=oc(),i.startTime=Db(void 0,$i,r[0]),a=r[1];break;case 3:i.id=oc(r[0]),i.startTime=Db(void 0,$i,r[1]),a=r[2];break}return a&&(i.endTime=rL(i.startTime,$i,a,lu),i.manualEndTime=Gr(a,"YYYY-MM-DD",!0).isValid(),eL(i,$i,cu,su)),i},nit=function(t,e){let n;e.substr(0,1)===":"?n=e.substr(1,e.length):n=e;const r=n.split(","),i={};cL(r,i,JM);for(let a=0;a<r.length;a++)r[a]=r[a].trim();switch(r.length){case 1:i.id=oc(),i.startTime={type:"prevTaskEnd",id:t},i.endTime={data:r[0]};break;case 2:i.id=oc(),i.startTime={type:"getStartDate",startData:r[0]},i.endTime={data:r[1]};break;case 3:i.id=oc(r[0]),i.startTime={type:"getStartDate",startData:r[1]},i.endTime={data:r[2]};break}return i};let Ob,sd,bn=[];const iL={},rit=function(t,e){const n={section:ac,type:ac,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=nit(sd,e);n.raw.startTime=r.startTime,n.raw.endTime=r.endTime,n.id=r.id,n.prevTaskId=sd,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,n.order=Nb,Nb++;const i=bn.push(n);sd=n.id,iL[n.id]=i-1},sc=function(t){const e=iL[t];return bn[e]},iit=function(t,e){const n={section:ac,type:ac,description:t,task:t,classes:[]},r=eit(Ob,e);n.startTime=r.startTime,n.endTime=r.endTime,n.id=r.id,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,Ob=n,id.push(n)},aL=function(){const t=function(n){const r=bn[n];let i="";switch(bn[n].raw.startTime.type){case"prevTaskEnd":{const a=sc(r.prevTaskId);r.startTime=a.endTime;break}case"getStartDate":i=Db(void 0,$i,bn[n].raw.startTime.startData),i&&(bn[n].startTime=i);break}return bn[n].startTime&&(bn[n].endTime=rL(bn[n].startTime,$i,bn[n].raw.endTime.data,lu),bn[n].endTime&&(bn[n].processed=!0,bn[n].manualEndTime=Gr(bn[n].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),eL(bn[n],$i,cu,su))),bn[n].processed};let e=!0;for(let n=0;n<bn.length;n++)t(n),e=e&&bn[n].processed;return e},ait=function(t,e){let n=e;at().securityLevel!=="loose"&&(n=_i(e)),t.split(",").forEach(function(r){typeof sc(r)<"u"&&(sL(r,()=>{window.open(n,"_self")}),Mb[r]=n)}),oL(t,"clickable")},oL=function(t,e){t.split(",").forEach(function(n){let r=sc(n);typeof r<"u"&&r.classes.push(e)})},oit=function(t,e,n){if(at().securityLevel!=="loose"||typeof e>"u")return;let r=[];if(typeof n=="string"){r=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let i=0;i<r.length;i++){let a=r[i].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),r[i]=a}}r.length===0&&r.push(t),typeof sc(t)<"u"&&sL(t,()=>{we.runFunc(e,...r)})},sL=function(t,e){ad.push(function(){const n=document.querySelector(`[id="${t}"]`);n!==null&&n.addEventListener("click",function(){e()})}),ad.push(function(){const n=document.querySelector(`[id="${t}-text"]`);n!==null&&n.addEventListener("click",function(){e()})})},Ib={parseDirective:Ort,getConfig:()=>at().gantt,clear:Irt,setDateFormat:Yrt,getDateFormat:Wrt,enableInclusiveEndDates:zrt,endDatesAreInclusive:jrt,enableTopAxis:Urt,topAxisEnabled:Hrt,setAxisFormat:Rrt,getAxisFormat:Frt,setTodayMarker:$rt,getTodayMarker:Prt,setAccTitle:$r,getAccTitle:ci,setDiagramTitle:h0,getDiagramTitle:d0,setAccDescription:li,getAccDescription:ui,addSection:Qrt,getSections:Krt,getTasks:Jrt,addTask:rit,findTaskById:sc,addTaskOrg:iit,setIncludes:Vrt,getIncludes:Grt,setExcludes:qrt,getExcludes:Xrt,setClickEvent:function(t,e,n){t.split(",").forEach(function(r){oit(r,e,n)}),oL(t,"clickable")},setLink:ait,getLinks:Zrt,bindFunctions:function(t){ad.forEach(function(e){e(t)})},parseDuration:nL,isInvalidDate:tL};function cL(t,e,n){let r=!0;for(;r;)r=!1,n.forEach(function(i){const a="^\\s*"+i+"\\s*$",o=new RegExp(a);t[0].match(o)&&(e[i]=!0,t.shift(1),r=!0)})}const sit=function(){W.debug("Something is calling, setConf, remove the call")};let da;const cit={setConf:sit,draw:function(t,e,n,r){const i=at().gantt,a=at().securityLevel;let o;a==="sandbox"&&(o=Lt("#i"+e));const s=Lt(a==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=a==="sandbox"?o.nodes()[0].contentDocument:document,u=l.getElementById(e);da=u.parentElement.offsetWidth,typeof da>"u"&&(da=1200),typeof i.useWidth<"u"&&(da=i.useWidth);const h=r.db.getTasks(),f=h.length*(i.barHeight+i.barGap)+2*i.topPadding;u.setAttribute("viewBox","0 0 "+da+" "+f);const d=s.select(`[id="${e}"]`),p=Q8().domain([Cc(h,function(v){return v.startTime}),cs(h,function(v){return v.endTime})]).rangeRound([0,da-i.leftPadding-i.rightPadding]);let m=[];for(let v=0;v<h.length;v++)m.push(h[v].type);const _=m;m=L(m);function y(v,M){const w=v.startTime,I=M.startTime;let B=0;return w>I?B=1:w<I&&(B=-1),B}h.sort(y),b(h,da,f),oi(d,f,da,i.useMaxWidth),d.append("text").text(r.db.getDiagramTitle()).attr("x",da/2).attr("y",i.titleTopMargin).attr("class","titleText"),yr(r.db,d,e);function b(v,M,w){const I=i.barHeight,B=I+i.barGap,$=i.topPadding,F=i.leftPadding,K=rp().domain([0,m.length]).range(["#00B9FA","#F95002"]).interpolate(Z_);T(B,$,F,M,w,v,r.db.getExcludes(),r.db.getIncludes()),x(F,$,M,w),k(v,B,$,F,I,K,M),A(B,$),C(F,$,M,w)}function k(v,M,w,I,B,$,F){d.append("g").selectAll("rect").data(v).enter().append("rect").attr("x",0).attr("y",function(z,Y){return Y=z.order,Y*M+w-2}).attr("width",function(){return F-i.rightPadding/2}).attr("height",M).attr("class",function(z){for(let Y=0;Y<m.length;Y++)if(z.type===m[Y])return"section section"+Y%i.numberSectionStyles;return"section section0"});const K=d.append("g").selectAll("rect").data(v).enter(),nt=r.db.getLinks();if(K.append("rect").attr("id",function(z){return z.id}).attr("rx",3).attr("ry",3).attr("x",function(z){return z.milestone?p(z.startTime)+I+.5*(p(z.endTime)-p(z.startTime))-.5*B:p(z.startTime)+I}).attr("y",function(z,Y){return Y=z.order,Y*M+w}).attr("width",function(z){return z.milestone?B:p(z.renderEndTime||z.endTime)-p(z.startTime)}).attr("height",B).attr("transform-origin",function(z,Y){return Y=z.order,(p(z.startTime)+I+.5*(p(z.endTime)-p(z.startTime))).toString()+"px "+(Y*M+w+.5*B).toString()+"px"}).attr("class",function(z){const Y="task";let rt="";z.classes.length>0&&(rt=z.classes.join(" "));let lt=0;for(let Q=0;Q<m.length;Q++)z.type===m[Q]&&(lt=Q%i.numberSectionStyles);let J="";return z.active?z.crit?J+=" activeCrit":J=" active":z.done?z.crit?J=" doneCrit":J=" done":z.crit&&(J+=" crit"),J.length===0&&(J=" task"),z.milestone&&(J=" milestone "+J),J+=lt,J+=" "+rt,Y+J}),K.append("text").attr("id",function(z){return z.id+"-text"}).text(function(z){return z.task}).attr("font-size",i.fontSize).attr("x",function(z){let Y=p(z.startTime),rt=p(z.renderEndTime||z.endTime);z.milestone&&(Y+=.5*(p(z.endTime)-p(z.startTime))-.5*B),z.milestone&&(rt=Y+B);const lt=this.getBBox().width;return lt>rt-Y?rt+lt+1.5*i.leftPadding>F?Y+I-5:rt+I+5:(rt-Y)/2+Y+I}).attr("y",function(z,Y){return Y=z.order,Y*M+i.barHeight/2+(i.fontSize/2-2)+w}).attr("text-height",B).attr("class",function(z){const Y=p(z.startTime);let rt=p(z.endTime);z.milestone&&(rt=Y+B);const lt=this.getBBox().width;let J="";z.classes.length>0&&(J=z.classes.join(" "));let Q=0;for(let it=0;it<m.length;it++)z.type===m[it]&&(Q=it%i.numberSectionStyles);let q="";return z.active&&(z.crit?q="activeCritText"+Q:q="activeText"+Q),z.done?z.crit?q=q+" doneCritText"+Q:q=q+" doneText"+Q:z.crit&&(q=q+" critText"+Q),z.milestone&&(q+=" milestoneText"),lt>rt-Y?rt+lt+1.5*i.leftPadding>F?J+" taskTextOutsideLeft taskTextOutside"+Q+" "+q:J+" taskTextOutsideRight taskTextOutside"+Q+" "+q+" width-"+lt:J+" taskText taskText"+Q+" "+q+" width-"+lt}),at().securityLevel==="sandbox"){let z;z=Lt("#i"+e);const Y=z.nodes()[0].contentDocument;K.filter(function(rt){return typeof nt[rt.id]<"u"}).each(function(rt){var lt=Y.querySelector("#"+rt.id),J=Y.querySelector("#"+rt.id+"-text");const Q=lt.parentNode;var q=Y.createElement("a");q.setAttribute("xlink:href",nt[rt.id]),q.setAttribute("target","_top"),Q.appendChild(q),q.appendChild(lt),q.appendChild(J)})}}function T(v,M,w,I,B,$,F,K){const nt=$.reduce((Q,{startTime:q})=>Q?Math.min(Q,q):q,0),z=$.reduce((Q,{endTime:q})=>Q?Math.max(Q,q):q,0),Y=r.db.getDateFormat();if(!nt||!z)return;const rt=[];let lt=null,J=Gr(nt);for(;J.valueOf()<=z;)r.db.isInvalidDate(J,Y,F,K)?lt?lt.end=J.clone():lt={start:J.clone(),end:J.clone()}:lt&&(rt.push(lt),lt=null),J.add(1,"d");d.append("g").selectAll("rect").data(rt).enter().append("rect").attr("id",function(Q){return"exclude-"+Q.start.format("YYYY-MM-DD")}).attr("x",function(Q){return p(Q.start)+w}).attr("y",i.gridLineStartPadding).attr("width",function(Q){const q=Q.end.clone().add(1,"day");return p(q)-p(Q.start)}).attr("height",B-M-i.gridLineStartPadding).attr("transform-origin",function(Q,q){return(p(Q.start)+w+.5*(p(Q.end)-p(Q.start))).toString()+"px "+(q*v+.5*B).toString()+"px"}).attr("class","exclude-range")}function x(v,M,w,I){let B=X5(p).tickSize(-I+M+i.gridLineStartPadding).tickFormat(kl(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(d.append("g").attr("class","grid").attr("transform","translate("+v+", "+(I-50)+")").call(B).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||i.topAxis){let $=q5(p).tickSize(-I+M+i.gridLineStartPadding).tickFormat(kl(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));d.append("g").attr("class","grid").attr("transform","translate("+v+", "+M+")").call($).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function A(v,M){const w=[];let I=0;for(let B=0;B<m.length;B++)w[B]=[m[B],D(m[B],_)];d.append("g").selectAll("text").data(w).enter().append(function(B){const $=B[0].split(he.lineBreakRegex),F=-($.length-1)/2,K=l.createElementNS("http://www.w3.org/2000/svg","text");K.setAttribute("dy",F+"em");for(let nt=0;nt<$.length;nt++){const z=l.createElementNS("http://www.w3.org/2000/svg","tspan");z.setAttribute("alignment-baseline","central"),z.setAttribute("x","10"),nt>0&&z.setAttribute("dy","1em"),z.textContent=$[nt],K.appendChild(z)}return K}).attr("x",10).attr("y",function(B,$){if($>0)for(let F=0;F<$;F++)return I+=w[$-1][1],B[1]*v/2+I*v+M;else return B[1]*v/2+M}).attr("font-size",i.sectionFontSize).attr("font-size",i.sectionFontSize).attr("class",function(B){for(let $=0;$<m.length;$++)if(B[0]===m[$])return"sectionTitle sectionTitle"+$%i.numberSectionStyles;return"sectionTitle"})}function C(v,M,w,I){const B=r.db.getTodayMarker();if(B==="off")return;const $=d.append("g").attr("class","today"),F=new Date,K=$.append("line");K.attr("x1",p(F)+v).attr("x2",p(F)+v).attr("y1",i.titleTopMargin).attr("y2",I-i.titleTopMargin).attr("class","today"),B!==""&&K.attr("style",B.replace(/,/g,";"))}function L(v){const M={},w=[];for(let I=0,B=v.length;I<B;++I)Object.prototype.hasOwnProperty.call(M,v[I])||(M[v[I]]=!0,w.push(v[I]));return w}function S(v){let M=v.length;const w={};for(;M;)w[v[--M]]=(w[v[M]]||0)+1;return w}function D(v,M){return S(M)[v]||0}}};var Rb=function(){var t=function(a,o,s,l){for(s=s||{},l=a.length;l--;s[a[l]]=o);return s},e=[6,9,10],n={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(a,o,s,l,u,h,f){switch(h.length-1,u){case 1:return l;case 4:break;case 6:l.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(a,o){if(o.recoverable)this.trace(a);else{var s=new Error(a);throw s.hash=o,s}},parse:function(a){var o=this,s=[0],l=[],u=[null],h=[],f=this.table,d="",p=0,m=0,_=2,y=1,b=h.slice.call(arguments,1),k=Object.create(this.lexer),T={yy:{}};for(var x in this.yy)Object.prototype.hasOwnProperty.call(this.yy,x)&&(T.yy[x]=this.yy[x]);k.setInput(a,T.yy),T.yy.lexer=k,T.yy.parser=this,typeof k.yylloc>"u"&&(k.yylloc={});var A=k.yylloc;h.push(A);var C=k.options&&k.options.ranges;typeof T.yy.parseError=="function"?this.parseError=T.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function L(){var nt;return nt=l.pop()||k.lex()||y,typeof nt!="number"&&(nt instanceof Array&&(l=nt,nt=l.pop()),nt=o.symbols_[nt]||nt),nt}for(var S,D,v,M,w={},I,B,$,F;;){if(D=s[s.length-1],this.defaultActions[D]?v=this.defaultActions[D]:((S===null||typeof S>"u")&&(S=L()),v=f[D]&&f[D][S]),typeof v>"u"||!v.length||!v[0]){var K="";F=[];for(I in f[D])this.terminals_[I]&&I>_&&F.push("'"+this.terminals_[I]+"'");k.showPosition?K="Parse error on line "+(p+1)+`:
`+k.showPosition()+`
Expecting `+F.join(", ")+", got '"+(this.terminals_[S]||S)+"'":K="Parse error on line "+(p+1)+": Unexpected "+(S==y?"end of input":"'"+(this.terminals_[S]||S)+"'"),this.parseError(K,{text:k.match,token:this.terminals_[S]||S,line:k.yylineno,loc:A,expected:F})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+D+", token: "+S);switch(v[0]){case 1:s.push(S),u.push(k.yytext),h.push(k.yylloc),s.push(v[1]),S=null,m=k.yyleng,d=k.yytext,p=k.yylineno,A=k.yylloc;break;case 2:if(B=this.productions_[v[1]][1],w.$=u[u.length-B],w._$={first_line:h[h.length-(B||1)].first_line,last_line:h[h.length-1].last_line,first_column:h[h.length-(B||1)].first_column,last_column:h[h.length-1].last_column},C&&(w._$.range=[h[h.length-(B||1)].range[0],h[h.length-1].range[1]]),M=this.performAction.apply(w,[d,m,p,T.yy,v[1],u,h].concat(b)),typeof M<"u")return M;B&&(s=s.slice(0,-1*B*2),u=u.slice(0,-1*B),h=h.slice(0,-1*B)),s.push(this.productions_[v[1]][0]),u.push(w.$),h.push(w._$),$=f[s[s.length-2]][s[s.length-1]],s.push($);break;case 3:return!0}}return!0}},r=function(){var a={EOF:1,parseError:function(o,s){if(this.yy.parser)this.yy.parser.parseError(o,s);else throw new Error(o)},setInput:function(o,s){return this.yy=s||this.yy||{},this._input=o,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var o=this._input[0];this.yytext+=o,this.yyleng++,this.offset++,this.match+=o,this.matched+=o;var s=o.match(/(?:\r\n?|\n).*/g);return s?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),o},unput:function(o){var s=o.length,l=o.split(/(?:\r\n?|\n)/g);this._input=o+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-s),this.offset-=s;var u=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),l.length-1&&(this.yylineno-=l.length-1);var h=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===u.length?this.yylloc.first_column:0)+u[u.length-l.length].length-l[0].length:this.yylloc.first_column-s},this.options.ranges&&(this.yylloc.range=[h[0],h[0]+this.yyleng-s]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(o){this.unput(this.match.slice(o))},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;return o.length<20&&(o+=this._input.substr(0,20-o.length)),(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput(),s=new Array(o.length+1).join("-");return o+this.upcomingInput()+`
`+s+"^"},test_match:function(o,s){var l,u,h;if(this.options.backtrack_lexer&&(h={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(h.yylloc.range=this.yylloc.range.slice(0))),u=o[0].match(/(?:\r\n?|\n).*/g),u&&(this.yylineno+=u.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:u?u[u.length-1].length-u[u.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+o[0].length},this.yytext+=o[0],this.match+=o[0],this.matches=o,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(o[0].length),this.matched+=o[0],l=this.performAction.call(this,this.yy,this,s,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l)return l;if(this._backtrack){for(var f in h)this[f]=h[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var o,s,l,u;this._more||(this.yytext="",this.match="");for(var h=this._currentRules(),f=0;f<h.length;f++)if(l=this._input.match(this.rules[h[f]]),l&&(!s||l[0].length>s[0].length)){if(s=l,u=f,this.options.backtrack_lexer){if(o=this.test_match(l,h[f]),o!==!1)return o;if(this._backtrack){s=!1;continue}else return!1}else if(!this.options.flex)break}return s?(o=this.test_match(s,h[u]),o!==!1?o:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return o||this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){var o=this.conditionStack.length-1;return o>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(o){return o=this.conditionStack.length-1-Math.abs(o||0),o>=0?this.conditionStack[o]:"INITIAL"},pushState:function(o){this.begin(o)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(o,s,l,u){switch(l){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return a}();n.lexer=r;function i(){this.yy={}}return i.prototype=n,n.Parser=i,new i}();Rb.parser=Rb;var lL="",uL=!1;const lit={setMessage:t=>{W.debug("Setting message to: "+t),lL=t},getMessage:()=>lL,setInfo:t=>{uL=t},getInfo:()=>uL,clear:si},uit={draw:(t,e,n,r)=>{try{W.debug(`Rendering info diagram
`+t);const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body").select("#"+e);o.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+n),o.attr("height",100),o.attr("width",400)}catch(i){W.error("Error while rendering info diagram"),W.error(i.message)}}},hit=t=>t.match(/^\s*info/)!==null;var Fb=function(){var t=function(C,L,S,D){for(S=S||{},D=C.length;D--;S[C[D]]=L);return S},e=[1,4],n=[1,5],r=[1,6],i=[1,7],a=[1,9],o=[1,11,13,15,17,19,20,26,27,28,29],s=[2,5],l=[1,6,11,13,15,17,19,20,26,27,28,29],u=[26,27,28],h=[2,8],f=[1,18],d=[1,19],p=[1,20],m=[1,21],_=[1,22],y=[1,23],b=[1,28],k=[6,26,27,28,29],T={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(C,L,S,D,v,M,w){var I=M.length-1;switch(v){case 4:D.setShowData(!0);break;case 7:this.$=M[I-1];break;case 9:D.addSection(M[I-1],D.cleanupValue(M[I]));break;case 10:this.$=M[I].trim(),D.setDiagramTitle(this.$);break;case 11:this.$=M[I].trim(),D.setAccTitle(this.$);break;case 12:case 13:this.$=M[I].trim(),D.setAccDescription(this.$);break;case 14:D.addSection(M[I].substr(8)),this.$=M[I].substr(8);break;case 21:D.parseDirective("%%{","open_directive");break;case 22:D.parseDirective(M[I],"type_directive");break;case 23:M[I]=M[I].trim().replace(/'/g,'"'),D.parseDirective(M[I],"arg_directive");break;case 24:D.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},{1:[3]},{3:10,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},{3:11,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},t(o,s,{7:12,8:[1,13]}),t(l,[2,18]),t(l,[2,19]),t(l,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},t(u,h,{21:8,9:16,10:17,5:24,1:[2,3],11:f,13:d,15:p,17:m,19:_,20:y,29:a}),t(o,s,{7:25}),{23:26,24:[1,27],32:b},t([24,32],[2,22]),t(o,[2,6]),{4:29,26:n,27:r,28:i},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},t(u,[2,13]),t(u,[2,14]),t(u,[2,15]),t(u,h,{21:8,9:16,10:17,5:24,1:[2,4],11:f,13:d,15:p,17:m,19:_,20:y,29:a}),t(k,[2,16]),{25:34,31:[1,35]},t(k,[2,24]),t(o,[2,7]),t(u,[2,9]),t(u,[2,10]),t(u,[2,11]),t(u,[2,12]),{23:36,32:b},{32:[2,23]},t(k,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(C,L){if(L.recoverable)this.trace(C);else{var S=new Error(C);throw S.hash=L,S}},parse:function(C){var L=this,S=[0],D=[],v=[null],M=[],w=this.table,I="",B=0,$=0,F=2,K=1,nt=M.slice.call(arguments,1),z=Object.create(this.lexer),Y={yy:{}};for(var rt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,rt)&&(Y.yy[rt]=this.yy[rt]);z.setInput(C,Y.yy),Y.yy.lexer=z,Y.yy.parser=this,typeof z.yylloc>"u"&&(z.yylloc={});var lt=z.yylloc;M.push(lt);var J=z.options&&z.options.ranges;typeof Y.yy.parseError=="function"?this.parseError=Y.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Q(){var H;return H=D.pop()||z.lex()||K,typeof H!="number"&&(H instanceof Array&&(D=H,H=D.pop()),H=L.symbols_[H]||H),H}for(var q,it,ut,V,j={},P,X,O,G;;){if(it=S[S.length-1],this.defaultActions[it]?ut=this.defaultActions[it]:((q===null||typeof q>"u")&&(q=Q()),ut=w[it]&&w[it][q]),typeof ut>"u"||!ut.length||!ut[0]){var U="";G=[];for(P in w[it])this.terminals_[P]&&P>F&&G.push("'"+this.terminals_[P]+"'");z.showPosition?U="Parse error on line "+(B+1)+`:
`+z.showPosition()+`
Expecting `+G.join(", ")+", got '"+(this.terminals_[q]||q)+"'":U="Parse error on line "+(B+1)+": Unexpected "+(q==K?"end of input":"'"+(this.terminals_[q]||q)+"'"),this.parseError(U,{text:z.match,token:this.terminals_[q]||q,line:z.yylineno,loc:lt,expected:G})}if(ut[0]instanceof Array&&ut.length>1)throw new Error("Parse Error: multiple actions possible at state: "+it+", token: "+q);switch(ut[0]){case 1:S.push(q),v.push(z.yytext),M.push(z.yylloc),S.push(ut[1]),q=null,$=z.yyleng,I=z.yytext,B=z.yylineno,lt=z.yylloc;break;case 2:if(X=this.productions_[ut[1]][1],j.$=v[v.length-X],j._$={first_line:M[M.length-(X||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(X||1)].first_column,last_column:M[M.length-1].last_column},J&&(j._$.range=[M[M.length-(X||1)].range[0],M[M.length-1].range[1]]),V=this.performAction.apply(j,[I,$,B,Y.yy,ut[1],v,M].concat(nt)),typeof V<"u")return V;X&&(S=S.slice(0,-1*X*2),v=v.slice(0,-1*X),M=M.slice(0,-1*X)),S.push(this.productions_[ut[1]][0]),v.push(j.$),M.push(j._$),O=w[S[S.length-2]][S[S.length-1]],S.push(O);break;case 3:return!0}}return!0}},x=function(){var C={EOF:1,parseError:function(L,S){if(this.yy.parser)this.yy.parser.parseError(L,S);else throw new Error(L)},setInput:function(L,S){return this.yy=S||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var S=L.match(/(?:\r\n?|\n).*/g);return S?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var S=L.length,D=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-S),this.offset-=S;var v=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),D.length-1&&(this.yylineno-=D.length-1);var M=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:D?(D.length===v.length?this.yylloc.first_column:0)+v[v.length-D.length].length-D[0].length:this.yylloc.first_column-S},this.options.ranges&&(this.yylloc.range=[M[0],M[0]+this.yyleng-S]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),S=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+S+"^"},test_match:function(L,S){var D,v,M;if(this.options.backtrack_lexer&&(M={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(M.yylloc.range=this.yylloc.range.slice(0))),v=L[0].match(/(?:\r\n?|\n).*/g),v&&(this.yylineno+=v.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:v?v[v.length-1].length-v[v.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],D=this.performAction.call(this,this.yy,this,S,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),D)return D;if(this._backtrack){for(var w in M)this[w]=M[w];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,S,D,v;this._more||(this.yytext="",this.match="");for(var M=this._currentRules(),w=0;w<M.length;w++)if(D=this._input.match(this.rules[M[w]]),D&&(!S||D[0].length>S[0].length)){if(S=D,v=w,this.options.backtrack_lexer){if(L=this.test_match(D,M[w]),L!==!1)return L;if(this._backtrack){S=!1;continue}else return!1}else if(!this.options.flex)break}return S?(L=this.test_match(S,M[v]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var L=this.next();return L||this.lex()},begin:function(L){this.conditionStack.push(L)},popState:function(){var L=this.conditionStack.length-1;return L>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(L){return L=this.conditionStack.length-1-Math.abs(L||0),L>=0?this.conditionStack[L]:"INITIAL"},pushState:function(L){this.begin(L)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(L,S,D,v){switch(D){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return C}();T.lexer=x;function A(){this.yy={}}return A.prototype=T,T.Parser=A,new A}();Fb.parser=Fb;const dit=t=>t.match(/^\s*pie/)!==null;let cd={},$b=!1;const fit={parseDirective:function(t,e,n){qe.parseDirective(this,t,e,n)},getConfig:()=>at().pie,addSection:function(t,e){t=he.sanitizeText(t,at()),typeof cd[t]>"u"&&(cd[t]=e,W.debug("Added new section :",t))},getSections:()=>cd,cleanupValue:function(t){return t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())},clear:function(){cd={},$b=!1,si()},setAccTitle:$r,getAccTitle:ci,setDiagramTitle:h0,getDiagramTitle:d0,setShowData:function(t){$b=t},getShowData:function(){return $b},getAccDescription:ui,setAccDescription:li};let fa=at(),pa;const uu=450,pit={draw:(t,e,n,r)=>{try{fa=at(),W.debug(`Rendering info diagram
`+t);const b=at().securityLevel;let k;b==="sandbox"&&(k=Lt("#i"+e));const T=Lt(b==="sandbox"?k.nodes()[0].contentDocument.body:"body"),x=b==="sandbox"?k.nodes()[0].contentDocument:document;r.db.clear(),r.parser.parse(t),W.debug("Parsed info diagram");const A=x.getElementById(e);pa=A.parentElement.offsetWidth,typeof pa>"u"&&(pa=1200),typeof fa.useWidth<"u"&&(pa=fa.useWidth),typeof fa.pie.useWidth<"u"&&(pa=fa.pie.useWidth);const C=T.select("#"+e);oi(C,uu,pa,fa.pie.useMaxWidth),yr(r.db,C,e),A.setAttribute("viewBox","0 0 "+pa+" "+uu);var i=40,a=18,o=4,s=Math.min(pa,uu)/2-i,l=C.append("g").attr("transform","translate("+pa/2+","+uu/2+")"),u=r.db.getSections(),h=0;Object.keys(u).forEach(function(S){h+=u[S]});const L=fa.themeVariables;var f=[L.pie1,L.pie2,L.pie3,L.pie4,L.pie5,L.pie6,L.pie7,L.pie8,L.pie9,L.pie10,L.pie11,L.pie12],d=o1().range(f),p=R7().value(function(S){return S[1]}),m=p(Object.entries(u)),_=b1().innerRadius(0).outerRadius(s);l.selectAll("mySlices").data(m).enter().append("path").attr("d",_).attr("fill",function(S){return d(S.data[0])}).attr("class","pieCircle"),l.selectAll("mySlices").data(m).enter().append("text").text(function(S){return(S.data[1]/h*100).toFixed(0)+"%"}).attr("transform",function(S){return"translate("+_.centroid(S)+")"}).style("text-anchor","middle").attr("class","slice"),l.append("text").text(r.db.getDiagramTitle()).attr("x",0).attr("y",-(uu-50)/2).attr("class","pieTitleText");var y=l.selectAll(".legend").data(d.domain()).enter().append("g").attr("class","legend").attr("transform",function(S,D){var v=a+o,M=v*d.domain().length/2,w=12*a,I=D*v-M;return"translate("+w+","+I+")"});y.append("rect").attr("width",a).attr("height",a).style("fill",d).style("stroke",d),y.data(m).append("text").attr("x",a+o).attr("y",a-o).text(function(S){return r.db.getShowData()||fa.showData||fa.pie.showData?S.data[0]+" ["+S.data[1]+"]":S.data[0]})}catch(b){W.error("Error while rendering info diagram"),W.error(b)}}};var Pb=function(){var t=function(ut,V,j,P){for(j=j||{},P=ut.length;P--;j[ut[P]]=V);return j},e=[1,3],n=[1,5],r=[1,6],i=[1,7],a=[1,8],o=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],s=[1,22],l=[2,13],u=[1,26],h=[1,27],f=[1,28],d=[1,29],p=[1,30],m=[1,31],_=[1,24],y=[1,32],b=[1,33],k=[1,36],T=[71,72],x=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],A=[1,56],C=[1,57],L=[1,58],S=[1,59],D=[1,60],v=[1,61],M=[1,62],w=[62,63],I=[1,74],B=[1,70],$=[1,71],F=[1,72],K=[1,73],nt=[1,75],z=[1,79],Y=[1,80],rt=[1,77],lt=[1,78],J=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Q={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(ut,V,j,P,X,O,G){var U=O.length-1;switch(X){case 6:this.$=O[U].trim(),P.setAccTitle(this.$);break;case 7:case 8:this.$=O[U].trim(),P.setAccDescription(this.$);break;case 9:P.parseDirective("%%{","open_directive");break;case 10:P.parseDirective(O[U],"type_directive");break;case 11:O[U]=O[U].trim().replace(/'/g,'"'),P.parseDirective(O[U],"arg_directive");break;case 12:P.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:P.addRequirement(O[U-3],O[U-4]);break;case 20:P.setNewReqId(O[U-2]);break;case 21:P.setNewReqText(O[U-2]);break;case 22:P.setNewReqRisk(O[U-2]);break;case 23:P.setNewReqVerifyMethod(O[U-2]);break;case 26:this.$=P.RequirementType.REQUIREMENT;break;case 27:this.$=P.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=P.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=P.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=P.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=P.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=P.RiskLevel.LOW_RISK;break;case 33:this.$=P.RiskLevel.MED_RISK;break;case 34:this.$=P.RiskLevel.HIGH_RISK;break;case 35:this.$=P.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=P.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=P.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=P.VerifyType.VERIFY_TEST;break;case 39:P.addElement(O[U-3]);break;case 40:P.setNewElementType(O[U-2]);break;case 41:P.setNewElementDocRef(O[U-2]);break;case 44:P.addRelationship(O[U-2],O[U],O[U-4]);break;case 45:P.addRelationship(O[U-2],O[U-4],O[U]);break;case 46:this.$=P.Relationships.CONTAINS;break;case 47:this.$=P.Relationships.COPIES;break;case 48:this.$=P.Relationships.DERIVES;break;case 49:this.$=P.Relationships.SATISFIES;break;case 50:this.$=P.Relationships.VERIFIES;break;case 51:this.$=P.Relationships.REFINES;break;case 52:this.$=P.Relationships.TRACES;break}},table:[{3:1,4:2,6:e,9:4,14:n,16:r,18:i,19:a},{1:[3]},{3:10,4:2,5:[1,9],6:e,9:4,14:n,16:r,18:i,19:a},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},t(o,[2,8]),{20:[2,9]},{3:16,4:2,6:e,9:4,14:n,16:r,18:i,19:a},{1:[2,2]},{4:21,5:s,7:17,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{11:34,12:[1,35],22:k},t([12,22],[2,10]),t(o,[2,6]),t(o,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:s,7:38,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:39,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:40,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:41,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:42,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},t(T,[2,26]),t(T,[2,27]),t(T,[2,28]),t(T,[2,29]),t(T,[2,30]),t(T,[2,31]),t(x,[2,55]),t(x,[2,56]),t(o,[2,4]),{13:51,21:[1,52]},t(o,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:A,65:C,66:L,67:S,68:D,69:v,70:M},{61:63,64:A,65:C,66:L,67:S,68:D,69:v,70:M},{11:64,22:k},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},t(w,[2,46]),t(w,[2,47]),t(w,[2,48]),t(w,[2,49]),t(w,[2,50]),t(w,[2,51]),t(w,[2,52]),{63:[1,68]},t(o,[2,5]),{5:I,29:69,30:B,33:$,35:F,37:K,39:nt},{5:z,39:Y,55:76,56:rt,58:lt},{32:81,71:y,72:b},{32:82,71:y,72:b},t(J,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:I,29:87,30:B,33:$,35:F,37:K,39:nt},t(J,[2,25]),t(J,[2,39]),{31:[1,88]},{31:[1,89]},{5:z,39:Y,55:90,56:rt,58:lt},t(J,[2,43]),t(J,[2,44]),t(J,[2,45]),{32:91,71:y,72:b},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},t(J,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},t(J,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:I,29:116,30:B,33:$,35:F,37:K,39:nt},{5:I,29:117,30:B,33:$,35:F,37:K,39:nt},{5:I,29:118,30:B,33:$,35:F,37:K,39:nt},{5:I,29:119,30:B,33:$,35:F,37:K,39:nt},{5:z,39:Y,55:120,56:rt,58:lt},{5:z,39:Y,55:121,56:rt,58:lt},t(J,[2,20]),t(J,[2,21]),t(J,[2,22]),t(J,[2,23]),t(J,[2,40]),t(J,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(ut,V){if(V.recoverable)this.trace(ut);else{var j=new Error(ut);throw j.hash=V,j}},parse:function(ut){var V=this,j=[0],P=[],X=[null],O=[],G=this.table,U="",H=0,xt=0,ot=2,Dt=1,Mt=O.slice.call(arguments,1),wt=Object.create(this.lexer),Et={yy:{}};for(var bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,bt)&&(Et.yy[bt]=this.yy[bt]);wt.setInput(ut,Et.yy),Et.yy.lexer=wt,Et.yy.parser=this,typeof wt.yylloc>"u"&&(wt.yylloc={});var mt=wt.yylloc;O.push(mt);var Tt=wt.options&&wt.options.ranges;typeof Et.yy.parseError=="function"?this.parseError=Et.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function kt(){var yt;return yt=P.pop()||wt.lex()||Dt,typeof yt!="number"&&(yt instanceof Array&&(P=yt,yt=P.pop()),yt=V.symbols_[yt]||yt),yt}for(var st,Qt,$t,te,Ht={},qt,oe,Xt,Rt;;){if(Qt=j[j.length-1],this.defaultActions[Qt]?$t=this.defaultActions[Qt]:((st===null||typeof st>"u")&&(st=kt()),$t=G[Qt]&&G[Qt][st]),typeof $t>"u"||!$t.length||!$t[0]){var Pt="";Rt=[];for(qt in G[Qt])this.terminals_[qt]&&qt>ot&&Rt.push("'"+this.terminals_[qt]+"'");wt.showPosition?Pt="Parse error on line "+(H+1)+`:
`+wt.showPosition()+`
Expecting `+Rt.join(", ")+", got '"+(this.terminals_[st]||st)+"'":Pt="Parse error on line "+(H+1)+": Unexpected "+(st==Dt?"end of input":"'"+(this.terminals_[st]||st)+"'"),this.parseError(Pt,{text:wt.match,token:this.terminals_[st]||st,line:wt.yylineno,loc:mt,expected:Rt})}if($t[0]instanceof Array&&$t.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Qt+", token: "+st);switch($t[0]){case 1:j.push(st),X.push(wt.yytext),O.push(wt.yylloc),j.push($t[1]),st=null,xt=wt.yyleng,U=wt.yytext,H=wt.yylineno,mt=wt.yylloc;break;case 2:if(oe=this.productions_[$t[1]][1],Ht.$=X[X.length-oe],Ht._$={first_line:O[O.length-(oe||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(oe||1)].first_column,last_column:O[O.length-1].last_column},Tt&&(Ht._$.range=[O[O.length-(oe||1)].range[0],O[O.length-1].range[1]]),te=this.performAction.apply(Ht,[U,xt,H,Et.yy,$t[1],X,O].concat(Mt)),typeof te<"u")return te;oe&&(j=j.slice(0,-1*oe*2),X=X.slice(0,-1*oe),O=O.slice(0,-1*oe)),j.push(this.productions_[$t[1]][0]),X.push(Ht.$),O.push(Ht._$),Xt=G[j[j.length-2]][j[j.length-1]],j.push(Xt);break;case 3:return!0}}return!0}},q=function(){var ut={EOF:1,parseError:function(V,j){if(this.yy.parser)this.yy.parser.parseError(V,j);else throw new Error(V)},setInput:function(V,j){return this.yy=j||this.yy||{},this._input=V,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var V=this._input[0];this.yytext+=V,this.yyleng++,this.offset++,this.match+=V,this.matched+=V;var j=V.match(/(?:\r\n?|\n).*/g);return j?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),V},unput:function(V){var j=V.length,P=V.split(/(?:\r\n?|\n)/g);this._input=V+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var O=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===X.length?this.yylloc.first_column:0)+X[X.length-P.length].length-P[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[O[0],O[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(V){this.unput(this.match.slice(V))},pastInput:function(){var V=this.matched.substr(0,this.matched.length-this.match.length);return(V.length>20?"...":"")+V.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var V=this.match;return V.length<20&&(V+=this._input.substr(0,20-V.length)),(V.substr(0,20)+(V.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var V=this.pastInput(),j=new Array(V.length+1).join("-");return V+this.upcomingInput()+`
`+j+"^"},test_match:function(V,j){var P,X,O;if(this.options.backtrack_lexer&&(O={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(O.yylloc.range=this.yylloc.range.slice(0))),X=V[0].match(/(?:\r\n?|\n).*/g),X&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+V[0].length},this.yytext+=V[0],this.match+=V[0],this.matches=V,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(V[0].length),this.matched+=V[0],P=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var G in O)this[G]=O[G];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var V,j,P,X;this._more||(this.yytext="",this.match="");for(var O=this._currentRules(),G=0;G<O.length;G++)if(P=this._input.match(this.rules[O[G]]),P&&(!j||P[0].length>j[0].length)){if(j=P,X=G,this.options.backtrack_lexer){if(V=this.test_match(P,O[G]),V!==!1)return V;if(this._backtrack){j=!1;continue}else return!1}else if(!this.options.flex)break}return j?(V=this.test_match(j,O[X]),V!==!1?V:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(V,j,P,X){switch(P){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return j.yytext=j.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return ut}();Q.lexer=q;function it(){this.yy={}}return it.prototype=Q,Q.Parser=it,new it}();Pb.parser=Pb;const git=t=>t.match(/^\s*requirement(Diagram)?/)!==null;let Yb=[],vr={},hu={},eo={},du={};const yit={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(t,e,n){qe.parseDirective(this,t,e,n)},getConfig:()=>at().req,addRequirement:(t,e)=>(typeof hu[t]>"u"&&(hu[t]={name:t,type:e,id:vr.id,text:vr.text,risk:vr.risk,verifyMethod:vr.verifyMethod}),vr={},hu[t]),getRequirements:()=>hu,setNewReqId:t=>{typeof vr<"u"&&(vr.id=t)},setNewReqText:t=>{typeof vr<"u"&&(vr.text=t)},setNewReqRisk:t=>{typeof vr<"u"&&(vr.risk=t)},setNewReqVerifyMethod:t=>{typeof vr<"u"&&(vr.verifyMethod=t)},setAccTitle:$r,getAccTitle:ci,setAccDescription:li,getAccDescription:ui,addElement:t=>(typeof du[t]>"u"&&(du[t]={name:t,type:eo.type,docRef:eo.docRef},W.info("Added new requirement: ",t)),eo={},du[t]),getElements:()=>du,setNewElementType:t=>{typeof eo<"u"&&(eo.type=t)},setNewElementDocRef:t=>{typeof eo<"u"&&(eo.docRef=t)},addRelationship:(t,e,n)=>{Yb.push({type:t,src:e,dst:n})},getRelationships:()=>Yb,clear:()=>{Yb=[],vr={},hu={},eo={},du={},si()}},zb={CONTAINS:"contains",ARROW:"arrow"},hL={ReqMarkers:zb,insertLineEndings:(t,e)=>{let n=t.append("defs").append("marker").attr("id",zb.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");n.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),n.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),n.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",zb.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)}};let on={},dL=0;const fL=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",on.rect_min_width+"px").attr("height",on.rect_min_height+"px"),pL=(t,e,n)=>{let r=on.rect_min_width/2,i=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",on.rect_padding).attr("dominant-baseline","hanging"),a=0;n.forEach(u=>{a==0?i.append("tspan").attr("text-anchor","middle").attr("x",on.rect_min_width/2).attr("dy",0).text(u):i.append("tspan").attr("text-anchor","middle").attr("x",on.rect_min_width/2).attr("dy",on.line_height*.75).text(u),a++});let o=1.5*on.rect_padding,s=a*on.line_height*.75,l=o+s;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",on.rect_min_width).attr("y1",l).attr("y2",l),{titleNode:i,y:l}},gL=(t,e,n,r)=>{let i=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",on.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),a=0;const o=30;let s=[];return n.forEach(l=>{let u=l.length;for(;u>o&&a<3;){let h=l.substring(0,o);l=l.substring(o,l.length),u=l.length,s[s.length]=h,a++}if(a==3){let h=s[s.length-1];s[s.length-1]=h.substring(0,h.length-4)+"..."}else s[s.length]=l;a=0}),s.forEach(l=>{i.append("tspan").attr("x",on.rect_padding).attr("dy",on.line_height).text(l)}),i},mit=(t,e,n,r)=>{const i=e.node().getTotalLength(),a=e.node().getPointAtLength(i*.5),o="rel"+dL;dL++;const s=t.append("text").attr("class","req relationshipLabel").attr("id",o).attr("x",a.x).attr("y",a.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+o).attr("class","req reqLabelBox").attr("x",a.x-s.width/2).attr("y",a.y-s.height/2).attr("width",s.width).attr("height",s.height).attr("fill","white").attr("fill-opacity","85%")},bit=function(t,e,n,r,i){const a=n.edge(cc(e.src),cc(e.dst)),o=ja().x(function(l){return l.x}).y(function(l){return l.y}),s=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",o(a.points)).attr("fill","none");e.type==i.db.Relationships.CONTAINS?s.attr("marker-start","url("+he.getUrl(on.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(s.attr("stroke-dasharray","10,7"),s.attr("marker-end","url("+he.getUrl(on.arrowMarkerAbsolute)+"#"+hL.ReqMarkers.ARROW+"_line_ending)")),mit(t,s,on,`<<${e.type}>>`)},_it=(t,e,n)=>{Object.keys(t).forEach(r=>{let i=t[r];r=cc(r),W.info("Added new requirement: ",r);const a=n.append("g").attr("id",r),o="req-"+r,s=fL(a,o);let l=pL(a,r+"_title",[`<<${i.type}>>`,`${i.name}`]);gL(a,r+"_body",[`Id: ${i.id}`,`Text: ${i.text}`,`Risk: ${i.risk}`,`Verification: ${i.verifyMethod}`],l.y);const u=s.node().getBBox();e.setNode(r,{width:u.width,height:u.height,shape:"rect",id:r})})},vit=(t,e,n)=>{Object.keys(t).forEach(r=>{let i=t[r];const a=cc(r),o=n.append("g").attr("id",a),s="element-"+a,l=fL(o,s);let u=pL(o,s+"_title",["<<Element>>",`${r}`]);gL(o,s+"_body",[`Type: ${i.type||"Not Specified"}`,`Doc Ref: ${i.docRef||"None"}`],u.y);const h=l.node().getBBox();e.setNode(a,{width:h.width,height:h.height,shape:"rect",id:a})})},xit=(t,e)=>(t.forEach(function(n){let r=cc(n.src),i=cc(n.dst);e.setEdge(r,i,{relationship:n})}),t),kit=function(t,e){e.nodes().forEach(function(n){typeof n<"u"&&typeof e.node(n)<"u"&&(t.select("#"+n),t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )"))})},cc=t=>t.replace(/\s/g,"").replace(/\./g,"_"),wit={draw:(t,e,n,r)=>{on=at().requirement,r.db.clear(),r.parser.parse(t);const i=on.securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);hL.insertLineEndings(o,on);const s=new un.Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:on.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let l=r.db.getRequirements(),u=r.db.getElements(),h=r.db.getRelationships();_it(l,s,o),vit(u,s,o),xit(h,s),Jl.layout(s),kit(o,s),h.forEach(function(_){bit(o,_,s,e,r)});const f=on.rect_padding,d=o.node().getBBox(),p=d.width+f*2,m=d.height+f*2;oi(o,m,p,on.useMaxWidth),o.attr("viewBox",`${d.x-f} ${d.y-f} ${p} ${m}`),yr(r.db,o,e)}};var jb=function(){var t=function(ut,V,j,P){for(j=j||{},P=ut.length;P--;j[ut[P]]=V);return j},e=[1,2],n=[1,3],r=[1,5],i=[1,7],a=[2,5],o=[1,15],s=[1,17],l=[1,18],u=[1,19],h=[1,21],f=[1,22],d=[1,23],p=[1,29],m=[1,30],_=[1,31],y=[1,32],b=[1,33],k=[1,34],T=[1,35],x=[1,36],A=[1,37],C=[1,38],L=[1,39],S=[1,40],D=[1,43],v=[1,44],M=[1,45],w=[1,46],I=[1,47],B=[1,48],$=[1,51],F=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],K=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],nt=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],z=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],Y=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],rt=[67,68,69],lt=[1,121],J=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Q={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(ut,V,j,P,X,O,G){var U=O.length-1;switch(X){case 4:return P.apply(O[U]),O[U];case 5:this.$=[];break;case 6:O[U-1].push(O[U]),this.$=O[U-1];break;case 7:case 8:this.$=O[U];break;case 9:this.$=[];break;case 12:O[U-3].type="addParticipant",O[U-3].description=P.parseMessage(O[U-1]),this.$=O[U-3];break;case 13:O[U-1].type="addParticipant",this.$=O[U-1];break;case 14:O[U-3].type="addActor",O[U-3].description=P.parseMessage(O[U-1]),this.$=O[U-3];break;case 15:O[U-1].type="addActor",this.$=O[U-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(O[U-2]),sequenceIndexStep:Number(O[U-1]),sequenceVisible:!0,signalType:P.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(O[U-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:P.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:P.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:P.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:P.LINETYPE.ACTIVE_START,actor:O[U-1]};break;case 22:this.$={type:"activeEnd",signalType:P.LINETYPE.ACTIVE_END,actor:O[U-1]};break;case 28:P.setDiagramTitle(O[U].substring(6)),this.$=O[U].substring(6);break;case 29:P.setDiagramTitle(O[U].substring(7)),this.$=O[U].substring(7);break;case 30:this.$=O[U].trim(),P.setAccTitle(this.$);break;case 31:case 32:this.$=O[U].trim(),P.setAccDescription(this.$);break;case 33:O[U-1].unshift({type:"loopStart",loopText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.LOOP_START}),O[U-1].push({type:"loopEnd",loopText:O[U-2],signalType:P.LINETYPE.LOOP_END}),this.$=O[U-1];break;case 34:O[U-1].unshift({type:"rectStart",color:P.parseMessage(O[U-2]),signalType:P.LINETYPE.RECT_START}),O[U-1].push({type:"rectEnd",color:P.parseMessage(O[U-2]),signalType:P.LINETYPE.RECT_END}),this.$=O[U-1];break;case 35:O[U-1].unshift({type:"optStart",optText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.OPT_START}),O[U-1].push({type:"optEnd",optText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.OPT_END}),this.$=O[U-1];break;case 36:O[U-1].unshift({type:"altStart",altText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.ALT_START}),O[U-1].push({type:"altEnd",signalType:P.LINETYPE.ALT_END}),this.$=O[U-1];break;case 37:O[U-1].unshift({type:"parStart",parText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.PAR_START}),O[U-1].push({type:"parEnd",signalType:P.LINETYPE.PAR_END}),this.$=O[U-1];break;case 38:O[U-1].unshift({type:"criticalStart",criticalText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.CRITICAL_START}),O[U-1].push({type:"criticalEnd",signalType:P.LINETYPE.CRITICAL_END}),this.$=O[U-1];break;case 39:O[U-1].unshift({type:"breakStart",breakText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.BREAK_START}),O[U-1].push({type:"breakEnd",optText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.BREAK_END}),this.$=O[U-1];break;case 42:this.$=O[U-3].concat([{type:"option",optionText:P.parseMessage(O[U-1]),signalType:P.LINETYPE.CRITICAL_OPTION},O[U]]);break;case 44:this.$=O[U-3].concat([{type:"and",parText:P.parseMessage(O[U-1]),signalType:P.LINETYPE.PAR_AND},O[U]]);break;case 46:this.$=O[U-3].concat([{type:"else",altText:P.parseMessage(O[U-1]),signalType:P.LINETYPE.ALT_ELSE},O[U]]);break;case 47:this.$=[O[U-1],{type:"addNote",placement:O[U-2],actor:O[U-1].actor,text:O[U]}];break;case 48:O[U-2]=[].concat(O[U-1],O[U-1]).slice(0,2),O[U-2][0]=O[U-2][0].actor,O[U-2][1]=O[U-2][1].actor,this.$=[O[U-1],{type:"addNote",placement:P.PLACEMENT.OVER,actor:O[U-2].slice(0,2),text:O[U]}];break;case 49:this.$=[O[U-1],{type:"addLinks",actor:O[U-1].actor,text:O[U]}];break;case 50:this.$=[O[U-1],{type:"addALink",actor:O[U-1].actor,text:O[U]}];break;case 51:this.$=[O[U-1],{type:"addProperties",actor:O[U-1].actor,text:O[U]}];break;case 52:this.$=[O[U-1],{type:"addDetails",actor:O[U-1].actor,text:O[U]}];break;case 55:this.$=[O[U-2],O[U]];break;case 56:this.$=O[U];break;case 57:this.$=P.PLACEMENT.LEFTOF;break;case 58:this.$=P.PLACEMENT.RIGHTOF;break;case 59:this.$=[O[U-4],O[U-1],{type:"addMessage",from:O[U-4].actor,to:O[U-1].actor,signalType:O[U-3],msg:O[U]},{type:"activeStart",signalType:P.LINETYPE.ACTIVE_START,actor:O[U-1]}];break;case 60:this.$=[O[U-4],O[U-1],{type:"addMessage",from:O[U-4].actor,to:O[U-1].actor,signalType:O[U-3],msg:O[U]},{type:"activeEnd",signalType:P.LINETYPE.ACTIVE_END,actor:O[U-4]}];break;case 61:this.$=[O[U-3],O[U-1],{type:"addMessage",from:O[U-3].actor,to:O[U-1].actor,signalType:O[U-2],msg:O[U]}];break;case 62:this.$={type:"addParticipant",actor:O[U]};break;case 63:this.$=P.LINETYPE.SOLID_OPEN;break;case 64:this.$=P.LINETYPE.DOTTED_OPEN;break;case 65:this.$=P.LINETYPE.SOLID;break;case 66:this.$=P.LINETYPE.DOTTED;break;case 67:this.$=P.LINETYPE.SOLID_CROSS;break;case 68:this.$=P.LINETYPE.DOTTED_CROSS;break;case 69:this.$=P.LINETYPE.SOLID_POINT;break;case 70:this.$=P.LINETYPE.DOTTED_POINT;break;case 71:this.$=P.parseMessage(O[U].trim().substring(1));break;case 72:P.parseDirective("%%{","open_directive");break;case 73:P.parseDirective(O[U],"type_directive");break;case 74:O[U]=O[U].trim().replace(/'/g,'"'),P.parseDirective(O[U],"arg_directive");break;case 75:P.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:e,5:n,6:4,7:r,11:6,79:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,11:6,79:i},{3:9,4:e,5:n,6:4,7:r,11:6,79:i},{3:10,4:e,5:n,6:4,7:r,11:6,79:i},t([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],a,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,41:T,42:x,43:A,45:C,47:L,49:S,53:D,58:v,59:M,60:w,61:I,69:B,79:i},{13:49,14:[1,50],82:$},t([14,82],[2,73]),t(F,[2,6]),{6:41,10:52,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,41:T,42:x,43:A,45:C,47:L,49:S,53:D,58:v,59:M,60:w,61:I,69:B,79:i},t(F,[2,8]),t(F,[2,9]),{17:53,69:B},{17:54,69:B},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:B},{17:60,69:B},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},t(F,[2,28]),t(F,[2,29]),{35:[1,66]},{37:[1,67]},t(F,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},t(F,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:B},{17:89,69:B},{17:90,69:B},{17:91,69:B},t([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},t(F,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},t(F,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},t(F,[2,20]),{5:[1,102]},{5:[1,103]},t(F,[2,23]),t(F,[2,24]),t(F,[2,25]),t(F,[2,26]),t(F,[2,27]),t(F,[2,30]),t(F,[2,31]),t(K,a,{8:104}),t(K,a,{8:105}),t(K,a,{8:106}),t(nt,a,{44:107,8:108}),t(z,a,{46:109,8:110}),t(Y,a,{48:111,8:112}),t(K,a,{8:113}),{17:116,67:[1,114],68:[1,115],69:B},t(rt,[2,63]),t(rt,[2,64]),t(rt,[2,65]),t(rt,[2,66]),t(rt,[2,67]),t(rt,[2,68]),t(rt,[2,69]),t(rt,[2,70]),{17:117,69:B},{17:119,57:118,69:B},{69:[2,57]},{69:[2,58]},{55:120,78:lt},{55:122,78:lt},{55:123,78:lt},{55:124,78:lt},t(J,[2,10]),{13:125,82:$},{82:[2,74]},{19:[1,126]},t(F,[2,13]),{19:[1,127]},t(F,[2,15]),{5:[1,128]},t(F,[2,18]),t(F,[2,19]),t(F,[2,21]),t(F,[2,22]),{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,129],41:T,42:x,43:A,45:C,47:L,49:S,53:D,58:v,59:M,60:w,61:I,69:B,79:i},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,130],41:T,42:x,43:A,45:C,47:L,49:S,53:D,58:v,59:M,60:w,61:I,69:B,79:i},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,131],41:T,42:x,43:A,45:C,47:L,49:S,53:D,58:v,59:M,60:w,61:I,69:B,79:i},{40:[1,132]},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[2,45],41:T,42:x,43:A,45:C,47:L,49:S,52:[1,133],53:D,58:v,59:M,60:w,61:I,69:B,79:i},{40:[1,134]},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[2,43],41:T,42:x,43:A,45:C,47:L,49:S,51:[1,135],53:D,58:v,59:M,60:w,61:I,69:B,79:i},{40:[1,136]},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[2,41],41:T,42:x,43:A,45:C,47:L,49:S,50:[1,137],53:D,58:v,59:M,60:w,61:I,69:B,79:i},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,138],41:T,42:x,43:A,45:C,47:L,49:S,53:D,58:v,59:M,60:w,61:I,69:B,79:i},{17:139,69:B},{17:140,69:B},{55:141,78:lt},{55:142,78:lt},{55:143,78:lt},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},t(F,[2,17]),t(F,[2,33]),t(F,[2,34]),t(F,[2,35]),t(F,[2,36]),{19:[1,148]},t(F,[2,37]),{19:[1,149]},t(F,[2,38]),{19:[1,150]},t(F,[2,39]),{55:151,78:lt},{55:152,78:lt},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:B},t(J,[2,11]),t(F,[2,12]),t(F,[2,14]),t(nt,a,{8:108,44:154}),t(z,a,{8:110,46:155}),t(Y,a,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(ut,V){if(V.recoverable)this.trace(ut);else{var j=new Error(ut);throw j.hash=V,j}},parse:function(ut){var V=this,j=[0],P=[],X=[null],O=[],G=this.table,U="",H=0,xt=0,ot=2,Dt=1,Mt=O.slice.call(arguments,1),wt=Object.create(this.lexer),Et={yy:{}};for(var bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,bt)&&(Et.yy[bt]=this.yy[bt]);wt.setInput(ut,Et.yy),Et.yy.lexer=wt,Et.yy.parser=this,typeof wt.yylloc>"u"&&(wt.yylloc={});var mt=wt.yylloc;O.push(mt);var Tt=wt.options&&wt.options.ranges;typeof Et.yy.parseError=="function"?this.parseError=Et.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function kt(){var yt;return yt=P.pop()||wt.lex()||Dt,typeof yt!="number"&&(yt instanceof Array&&(P=yt,yt=P.pop()),yt=V.symbols_[yt]||yt),yt}for(var st,Qt,$t,te,Ht={},qt,oe,Xt,Rt;;){if(Qt=j[j.length-1],this.defaultActions[Qt]?$t=this.defaultActions[Qt]:((st===null||typeof st>"u")&&(st=kt()),$t=G[Qt]&&G[Qt][st]),typeof $t>"u"||!$t.length||!$t[0]){var Pt="";Rt=[];for(qt in G[Qt])this.terminals_[qt]&&qt>ot&&Rt.push("'"+this.terminals_[qt]+"'");wt.showPosition?Pt="Parse error on line "+(H+1)+`:
`+wt.showPosition()+`
Expecting `+Rt.join(", ")+", got '"+(this.terminals_[st]||st)+"'":Pt="Parse error on line "+(H+1)+": Unexpected "+(st==Dt?"end of input":"'"+(this.terminals_[st]||st)+"'"),this.parseError(Pt,{text:wt.match,token:this.terminals_[st]||st,line:wt.yylineno,loc:mt,expected:Rt})}if($t[0]instanceof Array&&$t.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Qt+", token: "+st);switch($t[0]){case 1:j.push(st),X.push(wt.yytext),O.push(wt.yylloc),j.push($t[1]),st=null,xt=wt.yyleng,U=wt.yytext,H=wt.yylineno,mt=wt.yylloc;break;case 2:if(oe=this.productions_[$t[1]][1],Ht.$=X[X.length-oe],Ht._$={first_line:O[O.length-(oe||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(oe||1)].first_column,last_column:O[O.length-1].last_column},Tt&&(Ht._$.range=[O[O.length-(oe||1)].range[0],O[O.length-1].range[1]]),te=this.performAction.apply(Ht,[U,xt,H,Et.yy,$t[1],X,O].concat(Mt)),typeof te<"u")return te;oe&&(j=j.slice(0,-1*oe*2),X=X.slice(0,-1*oe),O=O.slice(0,-1*oe)),j.push(this.productions_[$t[1]][0]),X.push(Ht.$),O.push(Ht._$),Xt=G[j[j.length-2]][j[j.length-1]],j.push(Xt);break;case 3:return!0}}return!0}},q=function(){var ut={EOF:1,parseError:function(V,j){if(this.yy.parser)this.yy.parser.parseError(V,j);else throw new Error(V)},setInput:function(V,j){return this.yy=j||this.yy||{},this._input=V,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var V=this._input[0];this.yytext+=V,this.yyleng++,this.offset++,this.match+=V,this.matched+=V;var j=V.match(/(?:\r\n?|\n).*/g);return j?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),V},unput:function(V){var j=V.length,P=V.split(/(?:\r\n?|\n)/g);this._input=V+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var O=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===X.length?this.yylloc.first_column:0)+X[X.length-P.length].length-P[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[O[0],O[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(V){this.unput(this.match.slice(V))},pastInput:function(){var V=this.matched.substr(0,this.matched.length-this.match.length);return(V.length>20?"...":"")+V.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var V=this.match;return V.length<20&&(V+=this._input.substr(0,20-V.length)),(V.substr(0,20)+(V.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var V=this.pastInput(),j=new Array(V.length+1).join("-");return V+this.upcomingInput()+`
`+j+"^"},test_match:function(V,j){var P,X,O;if(this.options.backtrack_lexer&&(O={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(O.yylloc.range=this.yylloc.range.slice(0))),X=V[0].match(/(?:\r\n?|\n).*/g),X&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+V[0].length},this.yytext+=V[0],this.match+=V[0],this.matches=V,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(V[0].length),this.matched+=V[0],P=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var G in O)this[G]=O[G];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var V,j,P,X;this._more||(this.yytext="",this.match="");for(var O=this._currentRules(),G=0;G<O.length;G++)if(P=this._input.match(this.rules[O[G]]),P&&(!j||P[0].length>j[0].length)){if(j=P,X=G,this.options.backtrack_lexer){if(V=this.test_match(P,O[G]),V!==!1)return V;if(this._backtrack){j=!1;continue}else return!1}else if(!this.options.flex)break}return j?(V=this.test_match(j,O[X]),V!==!1?V:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(V,j,P,X){switch(P){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return j.yytext=j.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return j.yytext=j.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};return ut}();Q.lexer=q;function it(){this.yy={}}return it.prototype=Q,Q.Parser=it,new it}();jb.parser=jb;const Tit=t=>t.match(/^\s*sequenceDiagram/)!==null;let fu,no={},yi=[],ld=!1,Ub;const Eit=function(t,e,n){qe.parseDirective(this,t,e,n)},Hb=function(t,e,n,r){const i=no[t];i&&e===i.name&&n==null||((n==null||n.text==null)&&(n={text:e,wrap:null,type:r}),(r==null||n.text==null)&&(n={text:e,wrap:null,type:r}),no[t]={name:e,description:n.text,wrap:n.wrap===void 0&&lc()||!!n.wrap,prevActor:fu,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},fu&&no[fu]&&(no[fu].nextActor=t),fu=t)},Cit=t=>{let e,n=0;for(e=0;e<yi.length;e++)yi[e].type===gu.ACTIVE_START&&yi[e].from.actor===t&&n++,yi[e].type===gu.ACTIVE_END&&yi[e].from.actor===t&&n--;return n},Sit=function(t,e,n,r){yi.push({from:t,to:e,message:n.text,wrap:n.wrap===void 0&&lc()||!!n.wrap,answer:r})},dn=function(t,e,n={text:void 0,wrap:void 0},r){if(r===gu.ACTIVE_END&&Cit(t.actor)<1){let i=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw i.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},i}return yi.push({from:t,to:e,message:n.text,wrap:n.wrap===void 0&&lc()||!!n.wrap,type:r}),!0},Ait=function(){return yi},Mit=function(){return no},pu=function(t){return no[t]},Lit=function(){return Object.keys(no)},Bit=function(){ld=!0},Nit=function(){ld=!1},Dit=()=>ld,Oit=function(t){Ub=t},lc=()=>typeof Ub<"u"?Ub:at().sequence.wrap,Iit=function(){no={},yi=[],ld=!1,si()},Rit=function(t){const e=t.trim(),n={text:e.replace(/^[:]?(?:no)?wrap:/,"").trim(),wrap:e.match(/^[:]?wrap:/)!==null?!0:e.match(/^[:]?nowrap:/)!==null?!1:void 0};return W.debug("parseMessage:",n),n},gu={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},Fit={FILLED:0,OPEN:1},$it={LEFTOF:0,RIGHTOF:1,OVER:2},yL=function(t,e,n){n.text,n.wrap===void 0&&lc()||n.wrap;const r=[].concat(t,t);yi.push({from:r[0],to:r[1],message:n.text,wrap:n.wrap===void 0&&lc()||!!n.wrap,type:gu.NOTE,placement:e})},mL=function(t,e){const n=pu(t);try{let r=ri(e.text,at());r=r.replace(/&amp;/g,"&"),r=r.replace(/&equals;/g,"=");const i=JSON.parse(r);Wb(n,i)}catch(r){W.error("error while parsing actor link text",r)}},Pit=function(t,e){const n=pu(t);try{const o={};let s=ri(e.text,at());var r=s.indexOf("@");s=s.replace(/&amp;/g,"&"),s=s.replace(/&equals;/g,"=");var i=s.slice(0,r-1).trim(),a=s.slice(r+1).trim();o[i]=a,Wb(n,o)}catch(o){W.error("error while parsing actor link text",o)}};function Wb(t,e){if(t.links==null)t.links=e;else for(let n in e)t.links[n]=e[n]}const bL=function(t,e){const n=pu(t);try{let r=ri(e.text,at());const i=JSON.parse(r);_L(n,i)}catch(r){W.error("error while parsing actor properties text",r)}};function _L(t,e){if(t.properties==null)t.properties=e;else for(let n in e)t.properties[n]=e[n]}const vL=function(t,e){const n=pu(t),r=document.getElementById(e.text);try{const i=r.innerHTML,a=JSON.parse(i);a.properties&&_L(n,a.properties),a.links&&Wb(n,a.links)}catch(i){W.error("error while parsing actor details text",i)}},Yit=function(t,e){if(typeof t<"u"&&typeof t.properties<"u")return t.properties[e]},xL=function(t){if(t instanceof Array)t.forEach(function(e){xL(e)});else switch(t.type){case"sequenceIndex":yi.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":Hb(t.actor,t.actor,t.description,"participant");break;case"addActor":Hb(t.actor,t.actor,t.description,"actor");break;case"activeStart":dn(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":dn(t.actor,void 0,void 0,t.signalType);break;case"addNote":yL(t.actor,t.placement,t.text);break;case"addLinks":mL(t.actor,t.text);break;case"addALink":Pit(t.actor,t.text);break;case"addProperties":bL(t.actor,t.text);break;case"addDetails":vL(t.actor,t.text);break;case"addMessage":dn(t.from,t.to,t.msg,t.signalType);break;case"loopStart":dn(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":dn(void 0,void 0,void 0,t.signalType);break;case"rectStart":dn(void 0,void 0,t.color,t.signalType);break;case"rectEnd":dn(void 0,void 0,void 0,t.signalType);break;case"optStart":dn(void 0,void 0,t.optText,t.signalType);break;case"optEnd":dn(void 0,void 0,void 0,t.signalType);break;case"altStart":dn(void 0,void 0,t.altText,t.signalType);break;case"else":dn(void 0,void 0,t.altText,t.signalType);break;case"altEnd":dn(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":$r(t.text);break;case"parStart":dn(void 0,void 0,t.parText,t.signalType);break;case"and":dn(void 0,void 0,t.parText,t.signalType);break;case"parEnd":dn(void 0,void 0,void 0,t.signalType);break;case"criticalStart":dn(void 0,void 0,t.criticalText,t.signalType);break;case"option":dn(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":dn(void 0,void 0,void 0,t.signalType);break;case"breakStart":dn(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":dn(void 0,void 0,void 0,t.signalType);break}},kL={addActor:Hb,addMessage:Sit,addSignal:dn,addLinks:mL,addDetails:vL,addProperties:bL,autoWrap:lc,setWrap:Oit,enableSequenceNumbers:Bit,disableSequenceNumbers:Nit,showSequenceNumbers:Dit,getMessages:Ait,getActors:Mit,getActor:pu,getActorKeys:Lit,getActorProperty:Yit,getAccTitle:ci,getDiagramTitle:d0,setDiagramTitle:h0,parseDirective:Eit,getConfig:()=>at().sequence,clear:Iit,parseMessage:Rit,LINETYPE:gu,ARROWTYPE:Fit,PLACEMENT:$it,addNote:yL,setAccTitle:$r,apply:xL,setAccDescription:li,getAccDescription:ui};let Vb=[];const zit=t=>{Vb.push(t)},wL=()=>{Vb.forEach(t=>{t()}),Vb=[]},ud=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),typeof e.class<"u"&&n.attr("class",e.class),n},TL=(t,e)=>{zit(()=>{const n=document.querySelectorAll(t);n.length!==0&&(n[0].addEventListener("mouseover",function(){Wit("actor"+e+"_popup")}),n[0].addEventListener("mouseout",function(){Vit("actor"+e+"_popup")}))})},jit=function(t,e,n,r,i){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const a=e.links,o=e.actorCnt,s=e.rectData;var l="none";i&&(l="block !important");const u=t.append("g");u.attr("id","actor"+o+"_popup"),u.attr("class","actorPopupMenu"),u.attr("display",l),TL("#actor"+o+"_popup",o);var h="";typeof s.class<"u"&&(h=" "+s.class);let f=s.width>n?s.width:n;const d=u.append("rect");if(d.attr("class","actorPopupMenuPanel"+h),d.attr("x",s.x),d.attr("y",s.height),d.attr("fill",s.fill),d.attr("stroke",s.stroke),d.attr("width",f),d.attr("height",s.height),d.attr("rx",s.rx),d.attr("ry",s.ry),a!=null){var p=20;for(let y in a){var m=u.append("a"),_=_i(a[y]);m.attr("xlink:href",_),m.attr("target","_blank"),sat(r)(y,m,s.x+10,s.height+p,f,20,{class:"actor"},r),p+=30}}return d.attr("height",p),{height:s.height+p,width:f}},EL=function(t,e,n,r){const i=t.append("image");i.attr("x",e),i.attr("y",n);var a=_i(r);i.attr("xlink:href",a)},CL=function(t,e,n,r){const i=t.append("use");i.attr("x",e),i.attr("y",n);var a=_i(r);i.attr("xlink:href","#"+a)},Uit=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},Hit=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},Wit=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="block")},Vit=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="none")},uc=function(t,e){let n=0,r=0;const i=e.text.split(he.lineBreakRegex);let a=[],o=0,s=()=>e.y;if(typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0)switch(e.valign){case"top":case"start":s=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":s=()=>Math.round(e.y+(n+r+e.textMargin)/2);break;case"bottom":case"end":s=()=>Math.round(e.y+(n+r+2*e.textMargin)-e.textMargin);break}if(typeof e.anchor<"u"&&typeof e.textMargin<"u"&&typeof e.width<"u")switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let l=0;l<i.length;l++){let u=i[l];typeof e.textMargin<"u"&&e.textMargin===0&&typeof e.fontSize<"u"&&(o=l*e.fontSize);const h=t.append("text");if(h.attr("x",e.x),h.attr("y",s()),typeof e.anchor<"u"&&h.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),typeof e.fontFamily<"u"&&h.style("font-family",e.fontFamily),typeof e.fontSize<"u"&&h.style("font-size",e.fontSize),typeof e.fontWeight<"u"&&h.style("font-weight",e.fontWeight),typeof e.fill<"u"&&h.attr("fill",e.fill),typeof e.class<"u"&&h.attr("class",e.class),typeof e.dy<"u"?h.attr("dy",e.dy):o!==0&&h.attr("dy",o),e.tspan){const f=h.append("tspan");f.attr("x",e.x),typeof e.fill<"u"&&f.attr("fill",e.fill),f.text(u)}else h.text(u);typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0&&(r+=(h._groups||h)[0][0].getBBox().height,n=r),a.push(h)}return a},SL=function(t,e){function n(i,a,o,s,l){return i+","+a+" "+(i+o)+","+a+" "+(i+o)+","+(a+s-l)+" "+(i+o-l*1.2)+","+(a+s)+" "+i+","+(a+s)}const r=t.append("polygon");return r.attr("points",n(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,uc(t,e),r};let Pi=-1;const AL=(t,e)=>{!t.selectAll||t.selectAll(".actor-line").attr("class","200").attr("y2",e-55)},Git=function(t,e,n){const r=e.x+e.width/2,i=t.append("g");var a=i;e.y===0&&(Pi++,a.append("line").attr("id","actor"+Pi).attr("x1",r).attr("y1",5).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),a=i.append("g"),e.actorCnt=Pi,e.links!=null&&(a.attr("id","root-"+Pi),TL("#root-"+Pi,Pi)));const o=hd();var s="actor";e.properties!=null&&e.properties.class?s=e.properties.class:o.fill="#eaeaea",o.x=e.x,o.y=e.y,o.width=e.width,o.height=e.height,o.class=s,o.rx=3,o.ry=3;const l=ud(a,o);if(e.rectData=o,e.properties!=null&&e.properties.icon){const h=e.properties.icon.trim();h.charAt(0)==="@"?CL(a,o.x+o.width-20,o.y+10,h.substr(1)):EL(a,o.x+o.width-20,o.y+10,h)}ML(n)(e.description,a,o.x,o.y,o.width,o.height,{class:"actor"},n);let u=e.height;if(l.node){const h=l.node().getBBox();e.height=h.height,u=h.height}return u},qit=function(t,e,n){const r=e.x+e.width/2;e.y===0&&(Pi++,t.append("line").attr("id","actor"+Pi).attr("x1",r).attr("y1",80).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const i=t.append("g");i.attr("class","actor-man");const a=hd();a.x=e.x,a.y=e.y,a.fill="#eaeaea",a.width=e.width,a.height=e.height,a.class="actor",a.rx=3,a.ry=3,i.append("line").attr("id","actor-man-torso"+Pi).attr("x1",r).attr("y1",e.y+25).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("id","actor-man-arms"+Pi).attr("x1",r-18).attr("y1",e.y+33).attr("x2",r+18).attr("y2",e.y+33),i.append("line").attr("x1",r-18).attr("y1",e.y+60).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("x1",r).attr("y1",e.y+45).attr("x2",r+16).attr("y2",e.y+60);const o=i.append("circle");o.attr("cx",e.x+e.width/2),o.attr("cy",e.y+10),o.attr("r",15),o.attr("width",e.width),o.attr("height",e.height);const s=i.node().getBBox();return e.height=s.height,ML(n)(e.description,i,a.x,a.y+35,a.width,a.height,{class:"actor"},n),e.height},Xit=function(t,e,n){switch(e.type){case"actor":return qit(t,e,n);case"participant":return Git(t,e,n)}},Zit=function(t){return t.append("g")},Qit=function(t,e,n,r,i){const a=hd(),o=e.anchored;a.x=e.startx,a.y=e.starty,a.class="activation"+i%3,a.width=e.stopx-e.startx,a.height=n-e.starty,ud(o,a)},Kit=function(t,e,n,r){const{boxMargin:i,boxTextMargin:a,labelBoxHeight:o,labelBoxWidth:s,messageFontFamily:l,messageFontSize:u,messageFontWeight:h}=r,f=t.append("g"),d=function(_,y,b,k){return f.append("line").attr("x1",_).attr("y1",y).attr("x2",b).attr("y2",k).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),typeof e.sections<"u"&&e.sections.forEach(function(_){d(e.startx,_.y,e.stopx,_.y).style("stroke-dasharray","3, 3")});let p=Gb();p.text=n,p.x=e.startx,p.y=e.starty,p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=s||50,p.height=o||20,p.textMargin=a,p.class="labelText",SL(f,p),p=Gb(),p.text=e.title,p.x=e.startx+s/2+(e.stopx-e.startx)/2,p.y=e.starty+i+a,p.anchor="middle",p.valign="middle",p.textMargin=a,p.class="loopText",p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.wrap=!0;let m=uc(f,p);return typeof e.sectionTitles<"u"&&e.sectionTitles.forEach(function(_,y){if(_.message){p.text=_.message,p.x=e.startx+(e.stopx-e.startx)/2,p.y=e.sections[y].y+i+a,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.wrap=e.wrap,m=uc(f,p);let b=Math.round(m.map(k=>(k._groups||k)[0][0].getBBox().height).reduce((k,T)=>k+T));e.sections[y].height+=b-(i+a)}}),e.height=Math.round(e.stopy-e.starty),f},Jit=function(t,e){ud(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},tat=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},eat=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},nat=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},rat=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},iat=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},aat=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},oat=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},Gb=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},hd=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},ML=function(){function t(i,a,o,s,l,u,h){const f=a.append("text").attr("x",o+l/2).attr("y",s+u/2+5).style("text-anchor","middle").text(i);r(f,h)}function e(i,a,o,s,l,u,h,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:m}=f;let _=d&&d.replace?d.replace("px",""):d;const y=i.split(he.lineBreakRegex);for(let b=0;b<y.length;b++){const k=b*_-_*(y.length-1)/2,T=a.append("text").attr("x",o+l/2).attr("y",s).style("text-anchor","middle").style("font-size",d).style("font-weight",m).style("font-family",p);T.append("tspan").attr("x",o+l/2).attr("dy",k).text(y[b]),T.attr("y",s+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(T,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)a.hasOwnProperty(o)&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),sat=function(){function t(i,a,o,s,l,u,h){const f=a.append("text").attr("x",o).attr("y",s).style("text-anchor","start").text(i);r(f,h)}function e(i,a,o,s,l,u,h,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:m}=f,_=i.split(he.lineBreakRegex);for(let y=0;y<_.length;y++){const b=y*d-d*(_.length-1)/2,k=a.append("text").attr("x",o).attr("y",s).style("text-anchor","start").style("font-size",d).style("font-weight",m).style("font-family",p);k.append("tspan").attr("x",o).attr("dy",b).text(_[y]),k.attr("y",s+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)a.hasOwnProperty(o)&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),sn={drawRect:ud,drawText:uc,drawLabel:SL,drawActor:Xit,drawPopup:jit,drawImage:EL,drawEmbeddedImage:CL,anchorElement:Zit,drawActivation:Qit,drawLoop:Kit,drawBackgroundRect:Jit,insertArrowHead:rat,insertArrowFilledHead:iat,insertSequenceNumber:aat,insertArrowCrossHead:oat,insertDatabaseIcon:tat,insertComputerIcon:eat,insertClockIcon:nat,getTextObj:Gb,getNoteRect:hd,popupMenu:Uit,popdownMenu:Hit,fixLifeLineHeights:AL,sanitizeUrl:_i};let ft={};const Ot={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,BL(at())},updateVal:function(t,e,n,r){typeof t[e]>"u"?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=this;let a=0;function o(s){return function(l){a++;const u=i.sequenceItems.length-a+1;i.updateVal(l,"starty",e-u*ft.boxMargin,Math.min),i.updateVal(l,"stopy",r+u*ft.boxMargin,Math.max),i.updateVal(Ot.data,"startx",t-u*ft.boxMargin,Math.min),i.updateVal(Ot.data,"stopx",n+u*ft.boxMargin,Math.max),s!=="activation"&&(i.updateVal(l,"startx",t-u*ft.boxMargin,Math.min),i.updateVal(l,"stopx",n+u*ft.boxMargin,Math.max),i.updateVal(Ot.data,"starty",e-u*ft.boxMargin,Math.min),i.updateVal(Ot.data,"stopy",r+u*ft.boxMargin,Math.max))}}this.sequenceItems.forEach(o()),this.activations.forEach(o("activation"))},insert:function(t,e,n,r){const i=Math.min(t,n),a=Math.max(t,n),o=Math.min(e,r),s=Math.max(e,r);this.updateVal(Ot.data,"startx",i,Math.min),this.updateVal(Ot.data,"starty",o,Math.min),this.updateVal(Ot.data,"stopx",a,Math.max),this.updateVal(Ot.data,"stopy",s,Math.max),this.updateBounds(i,o,a,s)},newActivation:function(t,e,n){const r=n[t.from.actor],i=dd(t.from.actor).length||0,a=r.x+r.width/2+(i-1)*ft.activationWidth/2;this.activations.push({startx:a,starty:this.verticalPos+2,stopx:a+ft.activationWidth,stopy:void 0,actor:t.from.actor,anchored:sn.anchorElement(e)})},endActivation:function(t){const e=this.activations.map(function(n){return n.actor}).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:Ot.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},cat=function(t,e){Ot.bumpVerticalPos(ft.boxMargin),e.height=ft.boxMargin,e.starty=Ot.getVerticalPos();const n=sn.getNoteRect();n.x=e.startx,n.y=e.starty,n.width=e.width||ft.width,n.class="note";const r=t.append("g"),i=sn.drawRect(r,n),a=sn.getTextObj();a.x=e.startx,a.y=e.starty,a.width=n.width,a.dy="1em",a.text=e.message,a.class="noteText",a.fontFamily=ft.noteFontFamily,a.fontSize=ft.noteFontSize,a.fontWeight=ft.noteFontWeight,a.anchor=ft.noteAlign,a.textMargin=ft.noteMargin,a.valign="center";const o=uc(r,a),s=Math.round(o.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,u)=>l+u));i.attr("height",s+2*ft.noteMargin),e.height+=s+2*ft.noteMargin,Ot.bumpVerticalPos(s+2*ft.noteMargin),e.stopy=e.starty+s+2*ft.noteMargin,e.stopx=e.startx+n.width,Ot.insert(e.startx,e.starty,e.stopx,e.stopy),Ot.models.addNote(e)},hc=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),dc=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),qb=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight}),lat=function(t,e){Ot.bumpVerticalPos(10);const{startx:n,stopx:r,message:i}=e,a=he.splitBreaks(i).length,o=we.calculateTextDimensions(i,hc(ft)),s=o.height/a;e.height+=s,Ot.bumpVerticalPos(s);let l,u=o.height-10;const h=o.width;if(n===r){l=Ot.getVerticalPos()+u,ft.rightAngles||(u+=ft.boxMargin,l=Ot.getVerticalPos()+u),u+=30;const f=Math.max(h/2,ft.width/2);Ot.insert(n-f,Ot.getVerticalPos()-10+u,r+f,Ot.getVerticalPos()+30+u)}else u+=ft.boxMargin,l=Ot.getVerticalPos()+u,Ot.insert(n,l-10,r,l);return Ot.bumpVerticalPos(u),e.height+=u,e.stopy=e.starty+e.height,Ot.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l},uat=function(t,e,n,r){const{startx:i,stopx:a,starty:o,message:s,type:l,sequenceIndex:u,sequenceVisible:h}=e,f=we.calculateTextDimensions(s,hc(ft)),d=sn.getTextObj();d.x=i,d.y=o+10,d.width=a-i,d.class="messageText",d.dy="1em",d.text=s,d.fontFamily=ft.messageFontFamily,d.fontSize=ft.messageFontSize,d.fontWeight=ft.messageFontWeight,d.anchor=ft.messageAlign,d.valign="center",d.textMargin=ft.wrapPadding,d.tspan=!1,uc(t,d);const p=f.width;let m;i===a?ft.rightAngles?m=t.append("path").attr("d",`M  ${i},${n} H ${i+Math.max(ft.width/2,p/2)} V ${n+25} H ${i}`):m=t.append("path").attr("d","M "+i+","+n+" C "+(i+60)+","+(n-10)+" "+(i+60)+","+(n+30)+" "+i+","+(n+20)):(m=t.append("line"),m.attr("x1",i),m.attr("y1",n),m.attr("x2",a),m.attr("y2",n)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(m.style("stroke-dasharray","3, 3"),m.attr("class","messageLine1")):m.attr("class","messageLine0");let _="";ft.arrowMarkerAbsolute&&(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,_=_.replace(/\(/g,"\\("),_=_.replace(/\)/g,"\\)")),m.attr("stroke-width",2),m.attr("stroke","none"),m.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&m.attr("marker-end","url("+_+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&m.attr("marker-end","url("+_+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&m.attr("marker-end","url("+_+"#crosshead)"),(h||ft.showSequenceNumbers)&&(m.attr("marker-start","url("+_+"#sequencenumber)"),t.append("text").attr("x",i).attr("y",n+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(u))},Xb=function(t,e,n,r,i,a){if(i.hideUnusedParticipants===!0){const u=new Set;a.forEach(h=>{u.add(h.from),u.add(h.to)}),n=n.filter(h=>u.has(h))}let o=0,s=0,l=0;for(let u=0;u<n.length;u++){const h=e[n[u]];h.width=h.width||ft.width,h.height=Math.max(h.height||ft.height,ft.height),h.margin=h.margin||ft.actorMargin,h.x=o+s,h.y=r;const f=sn.drawActor(t,h,ft);l=Math.max(l,f),Ot.insert(h.x,r,h.x+h.width,h.height),o+=h.width,s+=h.margin,Ot.models.addActor(h)}Ot.bumpVerticalPos(l)},LL=function(t,e,n,r){let i=0,a=0;for(let o=0;o<n.length;o++){const s=e[n[o]],l=fat(s),u=sn.drawPopup(t,s,l,ft,ft.forceMenus,r);u.height>i&&(i=u.height),u.width+s.x>a&&(a=u.width+s.x)}return{maxHeight:i,maxWidth:a}},BL=function(t){pn(ft,t),t.fontFamily&&(ft.actorFontFamily=ft.noteFontFamily=ft.messageFontFamily=t.fontFamily),t.fontSize&&(ft.actorFontSize=ft.noteFontSize=ft.messageFontSize=t.fontSize),t.fontWeight&&(ft.actorFontWeight=ft.noteFontWeight=ft.messageFontWeight=t.fontWeight)},dd=function(t){return Ot.activations.filter(function(e){return e.actor===t})},NL=function(t,e){const n=e[t],r=dd(t),i=r.reduce(function(o,s){return Math.min(o,s.startx)},n.x+n.width/2),a=r.reduce(function(o,s){return Math.max(o,s.stopx)},n.x+n.width/2);return[i,a]};function Yi(t,e,n,r,i){Ot.bumpVerticalPos(n);let a=r;if(e.id&&e.message&&t[e.id]){const o=t[e.id].width,s=hc(ft);e.message=we.wrapLabel(`[${e.message}]`,o-2*ft.wrapPadding,s),e.width=o,e.wrap=!0;const l=we.calculateTextDimensions(e.message,s),u=Math.max(l.height,ft.labelBoxHeight);a=r+u,W.debug(`${u} - ${e.message}`)}i(e),Ot.bumpVerticalPos(a)}const hat=function(t,e,n,r){const{securityLevel:i,sequence:a}=at();ft=a;let o;i==="sandbox"&&(o=Lt("#i"+e));const s=Lt(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=i==="sandbox"?o.nodes()[0].contentDocument:document;Ot.init(),W.debug(r.db);const u=i==="sandbox"?s.select(`[id="${e}"]`):Lt(`[id="${e}"]`),h=r.db.getActors(),f=r.db.getActorKeys(),d=r.db.getMessages(),p=r.db.getDiagramTitle(),m=dat(h,d,r);ft.height=pat(h,m),sn.insertComputerIcon(u),sn.insertDatabaseIcon(u),sn.insertClockIcon(u),Xb(u,h,f,0,ft,d);const _=mat(d,h,m,r);sn.insertArrowHead(u),sn.insertArrowCrossHead(u),sn.insertArrowFilledHead(u),sn.insertSequenceNumber(u);function y(M,w){const I=Ot.endActivation(M);I.starty+18>w&&(I.starty=w-6,w+=12),sn.drawActivation(u,I,w,ft,dd(M.from.actor).length),Ot.insert(I.startx,w-10,I.stopx,w)}let b=1,k=1;const T=[];d.forEach(function(M){let w,I,B;switch(M.type){case r.db.LINETYPE.NOTE:I=M.noteModel,cat(u,I);break;case r.db.LINETYPE.ACTIVE_START:Ot.newActivation(M,u,h);break;case r.db.LINETYPE.ACTIVE_END:y(M,Ot.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:Yi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.LOOP_END:w=Ot.endLoop(),sn.drawLoop(u,w,"loop",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.RECT_START:Yi(_,M,ft.boxMargin,ft.boxMargin,$=>Ot.newLoop(void 0,$.message));break;case r.db.LINETYPE.RECT_END:w=Ot.endLoop(),sn.drawBackgroundRect(u,w),Ot.models.addLoop(w),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos());break;case r.db.LINETYPE.OPT_START:Yi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.OPT_END:w=Ot.endLoop(),sn.drawLoop(u,w,"opt",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.ALT_START:Yi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.ALT_ELSE:Yi(_,M,ft.boxMargin+ft.boxTextMargin,ft.boxMargin,$=>Ot.addSectionToLoop($));break;case r.db.LINETYPE.ALT_END:w=Ot.endLoop(),sn.drawLoop(u,w,"alt",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.PAR_START:Yi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.PAR_AND:Yi(_,M,ft.boxMargin+ft.boxTextMargin,ft.boxMargin,$=>Ot.addSectionToLoop($));break;case r.db.LINETYPE.PAR_END:w=Ot.endLoop(),sn.drawLoop(u,w,"par",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.AUTONUMBER:b=M.message.start||b,k=M.message.step||k,M.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:Yi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.CRITICAL_OPTION:Yi(_,M,ft.boxMargin+ft.boxTextMargin,ft.boxMargin,$=>Ot.addSectionToLoop($));break;case r.db.LINETYPE.CRITICAL_END:w=Ot.endLoop(),sn.drawLoop(u,w,"critical",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.BREAK_START:Yi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.BREAK_END:w=Ot.endLoop(),sn.drawLoop(u,w,"break",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;default:try{B=M.msgModel,B.starty=Ot.getVerticalPos(),B.sequenceIndex=b,B.sequenceVisible=r.db.showSequenceNumbers();const $=lat(u,B);T.push({messageModel:B,lineStarty:$}),Ot.models.addMessage(B)}catch($){W.error("error while drawing message",$)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(M.type)&&(b=b+k)}),T.forEach(M=>uat(u,M.messageModel,M.lineStarty,r)),ft.mirrorActors&&(Ot.bumpVerticalPos(ft.boxMargin*2),Xb(u,h,f,Ot.getVerticalPos(),ft,d),Ot.bumpVerticalPos(ft.boxMargin),AL(u,Ot.getVerticalPos()));const x=LL(u,h,f,l),{bounds:A}=Ot.getBounds();W.debug("For line height fix Querying: #"+e+" .actor-line"),Ru("#"+e+" .actor-line").attr("y2",A.stopy);let C=A.stopy-A.starty;C<x.maxHeight&&(C=x.maxHeight);let L=C+2*ft.diagramMarginY;ft.mirrorActors&&(L=L-ft.boxMargin+ft.bottomMarginAdj);let S=A.stopx-A.startx;S<x.maxWidth&&(S=x.maxWidth);const D=S+2*ft.diagramMarginX;p&&u.append("text").text(p).attr("x",(A.stopx-A.startx)/2-2*ft.diagramMarginX).attr("y",-25),oi(u,L,D,ft.useMaxWidth);const v=p?40:0;u.attr("viewBox",A.startx-ft.diagramMarginX+" -"+(ft.diagramMarginY+v)+" "+D+" "+(L+v)),yr(r.db,u,e),W.debug("models:",Ot.models)},dat=function(t,e,n){const r={};return e.forEach(function(i){if(t[i.to]&&t[i.from]){const a=t[i.to];if(i.placement===n.db.PLACEMENT.LEFTOF&&!a.prevActor||i.placement===n.db.PLACEMENT.RIGHTOF&&!a.nextActor)return;const o=i.placement!==void 0,s=!o,l=o?dc(ft):hc(ft),u=i.wrap?we.wrapLabel(i.message,ft.width-2*ft.wrapPadding,l):i.message,h=we.calculateTextDimensions(u,l).width+2*ft.wrapPadding;s&&i.from===a.nextActor?r[i.to]=Math.max(r[i.to]||0,h):s&&i.from===a.prevActor?r[i.from]=Math.max(r[i.from]||0,h):s&&i.from===i.to?(r[i.from]=Math.max(r[i.from]||0,h/2),r[i.to]=Math.max(r[i.to]||0,h/2)):i.placement===n.db.PLACEMENT.RIGHTOF?r[i.from]=Math.max(r[i.from]||0,h):i.placement===n.db.PLACEMENT.LEFTOF?r[a.prevActor]=Math.max(r[a.prevActor]||0,h):i.placement===n.db.PLACEMENT.OVER&&(a.prevActor&&(r[a.prevActor]=Math.max(r[a.prevActor]||0,h/2)),a.nextActor&&(r[i.from]=Math.max(r[i.from]||0,h/2)))}}),W.debug("maxMessageWidthPerActor:",r),r},fat=function(t){let e=0;const n=qb(ft);for(const r in t.links){const i=we.calculateTextDimensions(r,n).width+2*ft.wrapPadding+2*ft.boxMargin;e<i&&(e=i)}return e},pat=function(t,e){let n=0;Object.keys(t).forEach(r=>{const i=t[r];i.wrap&&(i.description=we.wrapLabel(i.description,ft.width-2*ft.wrapPadding,qb(ft)));const a=we.calculateTextDimensions(i.description,qb(ft));i.width=i.wrap?ft.width:Math.max(ft.width,a.width+2*ft.wrapPadding),i.height=i.wrap?Math.max(a.height,ft.height):ft.height,n=Math.max(n,i.height)});for(const r in e){const i=t[r];if(!i)continue;const a=t[i.nextActor];if(!a)continue;const o=e[r]+ft.actorMargin-i.width/2-a.width/2;i.margin=Math.max(o,ft.actorMargin)}return Math.max(n,ft.height)},gat=function(t,e,n){const r=e[t.from].x,i=e[t.to].x,a=t.wrap&&t.message;let o=we.calculateTextDimensions(a?we.wrapLabel(t.message,ft.width,dc(ft)):t.message,dc(ft));const s={width:a?ft.width:Math.max(ft.width,o.width+2*ft.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===n.db.PLACEMENT.RIGHTOF?(s.width=a?Math.max(ft.width,o.width):Math.max(e[t.from].width/2+e[t.to].width/2,o.width+2*ft.noteMargin),s.startx=r+(e[t.from].width+ft.actorMargin)/2):t.placement===n.db.PLACEMENT.LEFTOF?(s.width=Math.max(a?ft.width:e[t.from].width/2+e[t.to].width/2,o.width+2*ft.noteMargin),s.startx=r-s.width+(e[t.from].width-ft.actorMargin)/2):t.to===t.from?(o=we.calculateTextDimensions(a?we.wrapLabel(t.message,Math.max(ft.width,e[t.from].width),dc(ft)):t.message,dc(ft)),s.width=a?Math.max(ft.width,e[t.from].width):Math.max(e[t.from].width,ft.width,o.width+2*ft.noteMargin),s.startx=r+(e[t.from].width-s.width)/2):(s.width=Math.abs(r+e[t.from].width/2-(i+e[t.to].width/2))+ft.actorMargin,s.startx=r<i?r+e[t.from].width/2-ft.actorMargin/2:i+e[t.to].width/2-ft.actorMargin/2),a&&(s.message=we.wrapLabel(t.message,s.width-2*ft.wrapPadding,dc(ft))),W.debug(`NM:[${s.startx},${s.stopx},${s.starty},${s.stopy}:${s.width},${s.height}=${t.message}]`),s},yat=function(t,e,n){let r=!1;if([n.db.LINETYPE.SOLID_OPEN,n.db.LINETYPE.DOTTED_OPEN,n.db.LINETYPE.SOLID,n.db.LINETYPE.DOTTED,n.db.LINETYPE.SOLID_CROSS,n.db.LINETYPE.DOTTED_CROSS,n.db.LINETYPE.SOLID_POINT,n.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(r=!0),!r)return{};const i=NL(t.from,e),a=NL(t.to,e),o=i[0]<=a[0]?1:0,s=i[0]<a[0]?0:1,l=i.concat(a),u=Math.abs(a[s]-i[o]);t.wrap&&t.message&&(t.message=we.wrapLabel(t.message,Math.max(u+2*ft.wrapPadding,ft.width),hc(ft)));const h=we.calculateTextDimensions(t.message,hc(ft));return{width:Math.max(t.wrap?0:h.width+2*ft.wrapPadding,u+2*ft.wrapPadding,ft.width),height:0,startx:i[o],stopx:a[s],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,l),toBounds:Math.max.apply(null,l)}},mat=function(t,e,n,r){const i={},a=[];let o,s,l;return t.forEach(function(u){switch(u.id=we.random({length:10}),u.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:a.push({id:u.id,msg:u.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:u.message&&(o=a.pop(),i[o.id]=o,i[u.id]=o,a.push(o));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:o=a.pop(),i[o.id]=o;break;case r.db.LINETYPE.ACTIVE_START:{const h=e[u.from?u.from.actor:u.to.actor],f=dd(u.from?u.from.actor:u.to.actor).length,d=h.x+h.width/2+(f-1)*ft.activationWidth/2,p={startx:d,stopx:d+ft.activationWidth,actor:u.from.actor,enabled:!0};Ot.activations.push(p)}break;case r.db.LINETYPE.ACTIVE_END:{const h=Ot.activations.map(f=>f.actor).lastIndexOf(u.from.actor);delete Ot.activations.splice(h,1)[0]}break}u.placement!==void 0?(s=gat(u,e,r),u.noteModel=s,a.forEach(h=>{o=h,o.from=Math.min(o.from,s.startx),o.to=Math.max(o.to,s.startx+s.width),o.width=Math.max(o.width,Math.abs(o.from-o.to))-ft.labelBoxWidth})):(l=yat(u,e,r),u.msgModel=l,l.startx&&l.stopx&&a.length>0&&a.forEach(h=>{if(o=h,l.startx===l.stopx){const f=e[u.from],d=e[u.to];o.from=Math.min(f.x-l.width/2,f.x-f.width/2,o.from),o.to=Math.max(d.x+l.width/2,d.x+f.width/2,o.to),o.width=Math.max(o.width,Math.abs(o.to-o.from))-ft.labelBoxWidth}else o.from=Math.min(l.startx,o.from),o.to=Math.max(l.stopx,o.to),o.width=Math.max(o.width,l.width)-ft.labelBoxWidth}))}),Ot.activations=[],W.debug("Loop type widths:",i),i},DL={bounds:Ot,drawActors:Xb,drawActorsPopup:LL,setConf:BL,draw:hat};var fd=function(){var t=function(nt,z,Y,rt){for(Y=Y||{},rt=nt.length;rt--;Y[nt[rt]]=z);return Y},e=[1,2],n=[1,3],r=[1,5],i=[1,7],a=[2,5],o=[1,15],s=[1,17],l=[1,19],u=[1,20],h=[1,21],f=[1,22],d=[1,33],p=[1,23],m=[1,24],_=[1,25],y=[1,26],b=[1,27],k=[1,30],T=[1,31],x=[1,32],A=[1,35],C=[1,36],L=[1,37],S=[1,38],D=[1,34],v=[1,41],M=[1,4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],w=[1,4,5,12,13,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],I=[1,4,5,7,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],B=[4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],$={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,idStatement:11,DESCR:12,"-->":13,HIDE_EMPTY:14,scale:15,WIDTH:16,COMPOSIT_STATE:17,STRUCT_START:18,STRUCT_STOP:19,STATE_DESCR:20,AS:21,ID:22,FORK:23,JOIN:24,CHOICE:25,CONCURRENT:26,note:27,notePosition:28,NOTE_TEXT:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,openDirective:36,typeDirective:37,closeDirective:38,":":39,argDirective:40,direction_tb:41,direction_bt:42,direction_rl:43,direction_lr:44,eol:45,";":46,EDGE_STATE:47,left_of:48,right_of:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",12:"DESCR",13:"-->",14:"HIDE_EMPTY",15:"scale",16:"WIDTH",17:"COMPOSIT_STATE",18:"STRUCT_START",19:"STRUCT_STOP",20:"STATE_DESCR",21:"AS",22:"ID",23:"FORK",24:"JOIN",25:"CHOICE",26:"CONCURRENT",27:"note",29:"NOTE_TEXT",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",39:":",41:"direction_tb",42:"direction_bt",43:"direction_rl",44:"direction_lr",46:";",47:"EDGE_STATE",48:"left_of",49:"right_of",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[6,3],[6,5],[30,1],[30,1],[30,1],[30,1],[45,1],[45,1],[11,1],[11,1],[28,1],[28,1],[36,1],[37,1],[40,1],[38,1]],performAction:function(nt,z,Y,rt,lt,J,Q){var q=J.length-1;switch(lt){case 4:return rt.setRootDoc(J[q]),J[q];case 5:this.$=[];break;case 6:J[q]!="nl"&&(J[q-1].push(J[q]),this.$=J[q-1]);break;case 7:case 8:this.$=J[q];break;case 9:this.$="nl";break;case 10:this.$={stmt:"state",id:J[q],type:"default",description:""};break;case 11:this.$={stmt:"state",id:J[q-1],type:"default",description:rt.trimColon(J[q])};break;case 12:this.$={stmt:"relation",state1:{stmt:"state",id:J[q-2],type:"default",description:""},state2:{stmt:"state",id:J[q],type:"default",description:""}};break;case 13:this.$={stmt:"relation",state1:{stmt:"state",id:J[q-3],type:"default",description:""},state2:{stmt:"state",id:J[q-1],type:"default",description:""},description:J[q].substr(1).trim()};break;case 17:this.$={stmt:"state",id:J[q-3],type:"default",description:"",doc:J[q-1]};break;case 18:var it=J[q],ut=J[q-2].trim();if(J[q].match(":")){var V=J[q].split(":");it=V[0],ut=[ut,V[1]]}this.$={stmt:"state",id:it,type:"default",description:ut};break;case 19:this.$={stmt:"state",id:J[q-3],type:"default",description:J[q-5],doc:J[q-1]};break;case 20:this.$={stmt:"state",id:J[q],type:"fork"};break;case 21:this.$={stmt:"state",id:J[q],type:"join"};break;case 22:this.$={stmt:"state",id:J[q],type:"choice"};break;case 23:this.$={stmt:"state",id:rt.getDividerId(),type:"divider"};break;case 24:this.$={stmt:"state",id:J[q-1].trim(),note:{position:J[q-2].trim(),text:J[q].trim()}};break;case 28:this.$=J[q].trim(),rt.setAccTitle(this.$);break;case 29:case 30:this.$=J[q].trim(),rt.setAccDescription(this.$);break;case 33:rt.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 34:rt.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 35:rt.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 36:rt.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 39:case 40:this.$=J[q];break;case 43:rt.parseDirective("%%{","open_directive");break;case 44:rt.parseDirective(J[q],"type_directive");break;case 45:J[q]=J[q].trim().replace(/'/g,'"'),rt.parseDirective(J[q],"arg_directive");break;case 46:rt.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:e,5:n,6:4,7:r,36:6,50:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,36:6,50:i},{3:9,4:e,5:n,6:4,7:r,36:6,50:i},{3:10,4:e,5:n,6:4,7:r,36:6,50:i},t([1,4,5,14,15,17,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],a,{8:11}),{37:12,51:[1,13]},{51:[2,43]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:o,5:s,6:28,9:14,10:16,11:18,14:l,15:u,17:h,20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:D,50:i},{38:39,39:[1,40],53:v},t([39,53],[2,44]),t(M,[2,6]),{6:28,10:42,11:18,14:l,15:u,17:h,20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:D,50:i},t(M,[2,8]),t(M,[2,9]),t(M,[2,10],{12:[1,43],13:[1,44]}),t(M,[2,14]),{16:[1,45]},t(M,[2,16],{18:[1,46]}),{21:[1,47]},t(M,[2,20]),t(M,[2,21]),t(M,[2,22]),t(M,[2,23]),{28:48,29:[1,49],48:[1,50],49:[1,51]},t(M,[2,26]),t(M,[2,27]),{32:[1,52]},{34:[1,53]},t(M,[2,30]),t(w,[2,39]),t(w,[2,40]),t(M,[2,33]),t(M,[2,34]),t(M,[2,35]),t(M,[2,36]),t(I,[2,31]),{40:54,52:[1,55]},t(I,[2,46]),t(M,[2,7]),t(M,[2,11]),{11:56,22:d,47:D},t(M,[2,15]),t(B,a,{8:57}),{22:[1,58]},{22:[1,59]},{21:[1,60]},{22:[2,41]},{22:[2,42]},t(M,[2,28]),t(M,[2,29]),{38:61,53:v},{53:[2,45]},t(M,[2,12],{12:[1,62]}),{4:o,5:s,6:28,9:14,10:16,11:18,14:l,15:u,17:h,19:[1,63],20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:D,50:i},t(M,[2,18],{18:[1,64]}),{29:[1,65]},{22:[1,66]},t(I,[2,32]),t(M,[2,13]),t(M,[2,17]),t(B,a,{8:67}),t(M,[2,24]),t(M,[2,25]),{4:o,5:s,6:28,9:14,10:16,11:18,14:l,15:u,17:h,19:[1,68],20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:D,50:i},t(M,[2,19])],defaultActions:{7:[2,43],8:[2,1],9:[2,2],10:[2,3],50:[2,41],51:[2,42],55:[2,45]},parseError:function(nt,z){if(z.recoverable)this.trace(nt);else{var Y=new Error(nt);throw Y.hash=z,Y}},parse:function(nt){var z=this,Y=[0],rt=[],lt=[null],J=[],Q=this.table,q="",it=0,ut=0,V=2,j=1,P=J.slice.call(arguments,1),X=Object.create(this.lexer),O={yy:{}};for(var G in this.yy)Object.prototype.hasOwnProperty.call(this.yy,G)&&(O.yy[G]=this.yy[G]);X.setInput(nt,O.yy),O.yy.lexer=X,O.yy.parser=this,typeof X.yylloc>"u"&&(X.yylloc={});var U=X.yylloc;J.push(U);var H=X.options&&X.options.ranges;typeof O.yy.parseError=="function"?this.parseError=O.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function xt(){var Qt;return Qt=rt.pop()||X.lex()||j,typeof Qt!="number"&&(Qt instanceof Array&&(rt=Qt,Qt=rt.pop()),Qt=z.symbols_[Qt]||Qt),Qt}for(var ot,Dt,Mt,wt,Et={},bt,mt,Tt,kt;;){if(Dt=Y[Y.length-1],this.defaultActions[Dt]?Mt=this.defaultActions[Dt]:((ot===null||typeof ot>"u")&&(ot=xt()),Mt=Q[Dt]&&Q[Dt][ot]),typeof Mt>"u"||!Mt.length||!Mt[0]){var st="";kt=[];for(bt in Q[Dt])this.terminals_[bt]&&bt>V&&kt.push("'"+this.terminals_[bt]+"'");X.showPosition?st="Parse error on line "+(it+1)+`:
`+X.showPosition()+`
Expecting `+kt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":st="Parse error on line "+(it+1)+": Unexpected "+(ot==j?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(st,{text:X.match,token:this.terminals_[ot]||ot,line:X.yylineno,loc:U,expected:kt})}if(Mt[0]instanceof Array&&Mt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Dt+", token: "+ot);switch(Mt[0]){case 1:Y.push(ot),lt.push(X.yytext),J.push(X.yylloc),Y.push(Mt[1]),ot=null,ut=X.yyleng,q=X.yytext,it=X.yylineno,U=X.yylloc;break;case 2:if(mt=this.productions_[Mt[1]][1],Et.$=lt[lt.length-mt],Et._$={first_line:J[J.length-(mt||1)].first_line,last_line:J[J.length-1].last_line,first_column:J[J.length-(mt||1)].first_column,last_column:J[J.length-1].last_column},H&&(Et._$.range=[J[J.length-(mt||1)].range[0],J[J.length-1].range[1]]),wt=this.performAction.apply(Et,[q,ut,it,O.yy,Mt[1],lt,J].concat(P)),typeof wt<"u")return wt;mt&&(Y=Y.slice(0,-1*mt*2),lt=lt.slice(0,-1*mt),J=J.slice(0,-1*mt)),Y.push(this.productions_[Mt[1]][0]),lt.push(Et.$),J.push(Et._$),Tt=Q[Y[Y.length-2]][Y[Y.length-1]],Y.push(Tt);break;case 3:return!0}}return!0}},F=function(){var nt={EOF:1,parseError:function(z,Y){if(this.yy.parser)this.yy.parser.parseError(z,Y);else throw new Error(z)},setInput:function(z,Y){return this.yy=Y||this.yy||{},this._input=z,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var z=this._input[0];this.yytext+=z,this.yyleng++,this.offset++,this.match+=z,this.matched+=z;var Y=z.match(/(?:\r\n?|\n).*/g);return Y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),z},unput:function(z){var Y=z.length,rt=z.split(/(?:\r\n?|\n)/g);this._input=z+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Y),this.offset-=Y;var lt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),rt.length-1&&(this.yylineno-=rt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:rt?(rt.length===lt.length?this.yylloc.first_column:0)+lt[lt.length-rt.length].length-rt[0].length:this.yylloc.first_column-Y},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-Y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(z){this.unput(this.match.slice(z))},pastInput:function(){var z=this.matched.substr(0,this.matched.length-this.match.length);return(z.length>20?"...":"")+z.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var z=this.match;return z.length<20&&(z+=this._input.substr(0,20-z.length)),(z.substr(0,20)+(z.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var z=this.pastInput(),Y=new Array(z.length+1).join("-");return z+this.upcomingInput()+`
`+Y+"^"},test_match:function(z,Y){var rt,lt,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),lt=z[0].match(/(?:\r\n?|\n).*/g),lt&&(this.yylineno+=lt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lt?lt[lt.length-1].length-lt[lt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+z[0].length},this.yytext+=z[0],this.match+=z[0],this.matches=z,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(z[0].length),this.matched+=z[0],rt=this.performAction.call(this,this.yy,this,Y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),rt)return rt;if(this._backtrack){for(var Q in J)this[Q]=J[Q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var z,Y,rt,lt;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),Q=0;Q<J.length;Q++)if(rt=this._input.match(this.rules[J[Q]]),rt&&(!Y||rt[0].length>Y[0].length)){if(Y=rt,lt=Q,this.options.backtrack_lexer){if(z=this.test_match(rt,J[Q]),z!==!1)return z;if(this._backtrack){Y=!1;continue}else return!1}else if(!this.options.flex)break}return Y?(z=this.test_match(Y,J[lt]),z!==!1?z:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var z=this.next();return z||this.lex()},begin:function(z){this.conditionStack.push(z)},popState:function(){var z=this.conditionStack.length-1;return z>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(z){return z=this.conditionStack.length-1-Math.abs(z||0),z>=0?this.conditionStack[z]:"INITIAL"},pushState:function(z){this.begin(z)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(z,Y,rt,lt){switch(rt){case 0:return 41;case 1:return 42;case 2:return 43;case 3:return 44;case 4:return this.begin("open_directive"),50;case 5:return this.begin("type_directive"),51;case 6:return this.popState(),this.begin("arg_directive"),39;case 7:return this.popState(),this.popState(),53;case 8:return 52;case 9:break;case 10:break;case 11:return 5;case 12:break;case 13:break;case 14:break;case 15:break;case 16:return this.pushState("SCALE"),15;case 17:return 16;case 18:this.popState();break;case 19:return this.begin("acc_title"),31;case 20:return this.popState(),"acc_title_value";case 21:return this.begin("acc_descr"),33;case 22:return this.popState(),"acc_descr_value";case 23:this.begin("acc_descr_multiline");break;case 24:this.popState();break;case 25:return"acc_descr_multiline_value";case 26:this.pushState("STATE");break;case 27:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),23;case 28:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),24;case 29:return this.popState(),Y.yytext=Y.yytext.slice(0,-10).trim(),25;case 30:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),23;case 31:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),24;case 32:return this.popState(),Y.yytext=Y.yytext.slice(0,-10).trim(),25;case 33:return 41;case 34:return 42;case 35:return 43;case 36:return 44;case 37:this.begin("STATE_STRING");break;case 38:return this.popState(),this.pushState("STATE_ID"),"AS";case 39:return this.popState(),"ID";case 40:this.popState();break;case 41:return"STATE_DESCR";case 42:return 17;case 43:this.popState();break;case 44:return this.popState(),this.pushState("struct"),18;case 45:return this.popState(),19;case 46:break;case 47:return this.begin("NOTE"),27;case 48:return this.popState(),this.pushState("NOTE_ID"),48;case 49:return this.popState(),this.pushState("NOTE_ID"),49;case 50:this.popState(),this.pushState("FLOATING_NOTE");break;case 51:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 52:break;case 53:return"NOTE_TEXT";case 54:return this.popState(),"ID";case 55:return this.popState(),this.pushState("NOTE_TEXT"),22;case 56:return this.popState(),Y.yytext=Y.yytext.substr(2).trim(),29;case 57:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),29;case 58:return 7;case 59:return 7;case 60:return 14;case 61:return 47;case 62:return 22;case 63:return Y.yytext=Y.yytext.trim(),12;case 64:return 13;case 65:return 26;case 66:return 5;case 67:return"INVALID"}},rules:[/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[13,14],inclusive:!1},close_directive:{rules:[13,14],inclusive:!1},arg_directive:{rules:[7,8,13,14],inclusive:!1},type_directive:{rules:[6,7,13,14],inclusive:!1},open_directive:{rules:[5,13,14],inclusive:!1},struct:{rules:[13,14,26,33,34,35,36,45,46,47,61,62,63,64,65],inclusive:!1},FLOATING_NOTE_ID:{rules:[54],inclusive:!1},FLOATING_NOTE:{rules:[51,52,53],inclusive:!1},NOTE_TEXT:{rules:[56,57],inclusive:!1},NOTE_ID:{rules:[55],inclusive:!1},NOTE:{rules:[48,49,50],inclusive:!1},acc_descr_multiline:{rules:[24,25],inclusive:!1},acc_descr:{rules:[22],inclusive:!1},acc_title:{rules:[20],inclusive:!1},SCALE:{rules:[17,18],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[39],inclusive:!1},STATE_STRING:{rules:[40,41],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[13,14,27,28,29,30,31,32,37,38,42,43,44],inclusive:!1},ID:{rules:[13,14],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,12,14,15,16,19,21,23,26,44,47,58,59,60,61,62,63,64,66,67],inclusive:!0}}};return nt}();$.lexer=F;function K(){this.yy={}}return K.prototype=$,$.Parser=K,new K}();fd.parser=fd;const bat=(t,e)=>{var n;return((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*stateDiagram/)!==null},_at=(t,e)=>{var n;return!!(t.match(/^\s*stateDiagram-v2/)!==null||t.match(/^\s*stateDiagram/)&&((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},pd=t=>JSON.parse(JSON.stringify(t));let gd=[];const vat=function(t,e,n){qe.parseDirective(this,t,e,n)},xat=t=>{W.info("Setting root doc",t),gd=t},kat=()=>gd,yd=(t,e,n)=>{if(e.stmt==="relation")yd(t,e.state1,!0),yd(t,e.state2,!1);else if(e.stmt==="state"&&e.id==="[*]"&&(e.id=n?t.id+"_start":t.id+"_end",e.start=n),e.doc){const r=[];let i=0,a=[];for(i=0;i<e.doc.length;i++)if(e.doc[i].type==="divider"){const o=pd(e.doc[i]);o.doc=pd(a),r.push(o),a=[]}else a.push(e.doc[i]);if(r.length>0&&a.length>0){const o={stmt:"state",id:l9(),type:"divider",doc:pd(a)};r.push(pd(o)),e.doc=r}e.doc.forEach(o=>yd(e,o,!0))}},wat=()=>(yd({id:"root"},{id:"root",doc:gd},!0),{id:"root",doc:gd}),Tat=t=>{let e;t.doc?e=t.doc:e=t,W.info(e),IL(!0),W.info("Extract",e),e.forEach(n=>{n.stmt==="state"&&bd(n.id,n.type,n.doc,n.description,n.note),n.stmt==="relation"&&RL(n.state1.id,n.state2.id,n.description)})},OL=()=>({relations:[],states:{},documents:{}});let yu={root:OL()},Wn=yu.root,md=0;const bd=function(t,e,n,r,i){typeof Wn.states[t]>"u"?Wn.states[t]={id:t,descriptions:[],type:e,doc:n,note:i}:(Wn.states[t].doc||(Wn.states[t].doc=n),Wn.states[t].type||(Wn.states[t].type=e)),r&&(W.info("Adding state ",t,r),typeof r=="string"&&FL(t,r.trim()),typeof r=="object"&&r.forEach(a=>FL(t,a.trim()))),i&&(Wn.states[t].note=i,Wn.states[t].note.text=he.sanitizeText(Wn.states[t].note.text,at()))},IL=function(t){yu={root:OL()},Wn=yu.root,Wn=yu.root,md=0,PL=[],t||si()},Eat=function(t){return Wn.states[t]},Cat=function(){return Wn.states},Sat=function(){W.info("Documents = ",yu)},Aat=function(){return Wn.relations},RL=function(t,e,n){let r=t,i=e,a="default",o="default";t==="[*]"&&(md++,r="start"+md,a="start"),e==="[*]"&&(i="end"+md,o="end"),bd(r,a),bd(i,o),Wn.relations.push({id1:r,id2:i,title:he.sanitizeText(n,at())})},FL=function(t,e){const n=Wn.states[t];let r=e;r[0]===":"&&(r=r.substr(1).trim()),n.descriptions.push(he.sanitizeText(r,at()))},Mat=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},Lat={LINE:0,DOTTED_LINE:1};let $L=0;const Bat=()=>($L++,"divider-id-"+$L);let PL=[];const Nat=()=>PL;let YL="TB";const ga={parseDirective:vat,getConfig:()=>at().state,addState:bd,clear:IL,getState:Eat,getStates:Cat,getRelations:Aat,getClasses:Nat,getDirection:()=>YL,addRelation:RL,getDividerId:Bat,setDirection:t=>{YL=t},cleanupLabel:Mat,lineType:Lat,relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},logDocuments:Sat,getRootDoc:kat,setRootDoc:xat,getRootDocV2:wat,extract:Tat,trimColon:t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),getAccTitle:ci,setAccTitle:$r,getAccDescription:ui,setAccDescription:li},Dat=t=>t.append("circle").attr("class","start-state").attr("r",at().state.sizeUnit).attr("cx",at().state.padding+at().state.sizeUnit).attr("cy",at().state.padding+at().state.sizeUnit),Oat=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",at().state.textHeight).attr("class","divider").attr("x2",at().state.textHeight*2).attr("y1",0).attr("y2",0),Iat=(t,e)=>{const n=t.append("text").attr("x",2*at().state.padding).attr("y",at().state.textHeight+2*at().state.padding).attr("font-size",at().state.fontSize).attr("class","state-title").text(e.id),r=n.node().getBBox();return t.insert("rect",":first-child").attr("x",at().state.padding).attr("y",at().state.padding).attr("width",r.width+2*at().state.padding).attr("height",r.height+2*at().state.padding).attr("rx",at().state.radius),n},Rat=(t,e)=>{const n=function(f,d,p){const m=f.append("tspan").attr("x",2*at().state.padding).text(d);p||m.attr("dy",at().state.textHeight)},r=t.append("text").attr("x",2*at().state.padding).attr("y",at().state.textHeight+1.3*at().state.padding).attr("font-size",at().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),i=r.height,a=t.append("text").attr("x",at().state.padding).attr("y",i+at().state.padding*.4+at().state.dividerMargin+at().state.textHeight).attr("class","state-description");let o=!0,s=!0;e.descriptions.forEach(function(f){o||(n(a,f,s),s=!1),o=!1});const l=t.append("line").attr("x1",at().state.padding).attr("y1",at().state.padding+i+at().state.dividerMargin/2).attr("y2",at().state.padding+i+at().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),h=Math.max(u.width,r.width);return l.attr("x2",h+3*at().state.padding),t.insert("rect",":first-child").attr("x",at().state.padding).attr("y",at().state.padding).attr("width",h+2*at().state.padding).attr("height",u.height+i+2*at().state.padding).attr("rx",at().state.radius),t},Fat=(t,e,n)=>{const r=at().state.padding,i=2*at().state.padding,a=t.node().getBBox(),o=a.width,s=a.x,l=t.append("text").attr("x",0).attr("y",at().state.titleShift).attr("font-size",at().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+i;let h=Math.max(u,o);h===o&&(h=h+i);let f;const d=t.node().getBBox();e.doc,f=s-r,u>o&&(f=(o-h)/2+r),Math.abs(s-d.x)<r&&u>o&&(f=s-(u-o)/2);const p=1-at().state.textHeight;return t.insert("rect",":first-child").attr("x",f).attr("y",p).attr("class",n?"alt-composit":"composit").attr("width",h).attr("height",d.height+at().state.textHeight+at().state.titleShift+1).attr("rx","0"),l.attr("x",f+r),u<=o&&l.attr("x",s+(h-i)/2-u/2+r),t.insert("rect",":first-child").attr("x",f).attr("y",at().state.titleShift-at().state.textHeight-at().state.padding).attr("width",h).attr("height",at().state.textHeight*3).attr("rx",at().state.radius),t.insert("rect",":first-child").attr("x",f).attr("y",at().state.titleShift-at().state.textHeight-at().state.padding).attr("width",h).attr("height",d.height+3+2*at().state.textHeight).attr("rx",at().state.radius),t},$at=t=>(t.append("circle").attr("class","end-state-outer").attr("r",at().state.sizeUnit+at().state.miniPadding).attr("cx",at().state.padding+at().state.sizeUnit+at().state.miniPadding).attr("cy",at().state.padding+at().state.sizeUnit+at().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",at().state.sizeUnit).attr("cx",at().state.padding+at().state.sizeUnit+2).attr("cy",at().state.padding+at().state.sizeUnit+2)),Pat=(t,e)=>{let n=at().state.forkWidth,r=at().state.forkHeight;if(e.parentId){let i=n;n=r,r=i}return t.append("rect").style("stroke","black").style("fill","black").attr("width",n).attr("height",r).attr("x",at().state.padding).attr("y",at().state.padding)},Yat=(t,e,n,r)=>{let i=0;const a=r.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let o=t.replace(/\r\n/g,"<br/>");o=o.replace(/\n/g,"<br/>");const s=o.split(he.lineBreakRegex);let l=1.25*at().state.noteMargin;for(const u of s){const h=u.trim();if(h.length>0){const f=a.append("tspan");f.text(h),l===0&&(l+=f.node().getBBox().height),i+=l,f.attr("x",e+at().state.noteMargin),f.attr("y",n+i+1.25*at().state.noteMargin)}}return{textWidth:a.node().getBBox().width,textHeight:i}},zat=(t,e)=>{e.attr("class","state-note");const n=e.append("rect").attr("x",0).attr("y",at().state.padding),r=e.append("g"),{textWidth:i,textHeight:a}=Yat(t,0,0,r);return n.attr("height",a+2*at().state.noteMargin),n.attr("width",i+at().state.noteMargin*2),n},zL=function(t,e){const n=e.id,r={id:n,label:e.id,width:0,height:0},i=t.append("g").attr("id",n).attr("class","stateGroup");e.type==="start"&&Dat(i),e.type==="end"&&$at(i),(e.type==="fork"||e.type==="join")&&Pat(i,e),e.type==="note"&&zat(e.note.text,i),e.type==="divider"&&Oat(i),e.type==="default"&&e.descriptions.length===0&&Iat(i,e),e.type==="default"&&e.descriptions.length>0&&Rat(i,e);const a=i.node().getBBox();return r.width=a.width+2*at().state.padding,r.height=a.height+2*at().state.padding,r};let jL=0;const jat=function(t,e,n){const r=function(l){switch(l){case ga.relationType.AGGREGATION:return"aggregation";case ga.relationType.EXTENSION:return"extension";case ga.relationType.COMPOSITION:return"composition";case ga.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter(l=>!Number.isNaN(l.y));const i=e.points,a=ja().x(function(l){return l.x}).y(function(l){return l.y}).curve(Fo),o=t.append("path").attr("d",a(i)).attr("id","edge"+jL).attr("class","transition");let s="";if(at().state.arrowMarkerAbsolute&&(s=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,s=s.replace(/\(/g,"\\("),s=s.replace(/\)/g,"\\)")),o.attr("marker-end","url("+s+"#"+r(ga.relationType.DEPENDENCY)+"End)"),typeof n.title<"u"){const l=t.append("g").attr("class","stateLabel"),{x:u,y:h}=we.calcLabelPosition(e.points),f=he.getRows(n.title);let d=0;const p=[];let m=0,_=0;for(let k=0;k<=f.length;k++){const T=l.append("text").attr("text-anchor","middle").text(f[k]).attr("x",u).attr("y",h+d),x=T.node().getBBox();m=Math.max(m,x.width),_=Math.min(_,x.x),W.info(x.x,u,h+d),d===0&&(d=T.node().getBBox().height,W.info("Title height",d,h)),p.push(T)}let y=d*f.length;if(f.length>1){const k=(f.length-1)*d*.5;p.forEach((T,x)=>T.attr("y",h+x*d-k)),y=d*f.length}const b=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",u-m/2-at().state.padding/2).attr("y",h-y/2-at().state.padding/2-3.5).attr("width",m+at().state.padding).attr("height",y+at().state.padding),W.info(b)}jL++};let Sr;const Zb={},Uat=function(){},Hat=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},Wat=function(t,e,n,r){Sr=at().state;const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body"),s=i==="sandbox"?a.nodes()[0].contentDocument:document;W.debug("Rendering diagram "+t);const l=o.select(`[id='${e}']`);Hat(l),new un.Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const u=r.db.getRootDoc();UL(u,l,void 0,!1,o,s,r);const h=Sr.padding,f=l.node().getBBox(),d=f.width+h*2,p=f.height+h*2,m=d*1.75;oi(l,p,m,Sr.useMaxWidth),l.attr("viewBox",`${f.x-Sr.padding}  ${f.y-Sr.padding} `+d+" "+p),yr(r.db,l,e)},Vat=t=>t?t.length*Sr.fontSizeFactor:1,UL=(t,e,n,r,i,a,o)=>{const s=new un.Graph({compound:!0,multigraph:!0});let l,u=!0;for(l=0;l<t.length;l++)if(t[l].stmt==="relation"){u=!1;break}n?s.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:u?1:Sr.edgeLengthFactor,nodeSep:u?1:50,isMultiGraph:!0}):s.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:u?1:Sr.edgeLengthFactor,nodeSep:u?1:50,ranker:"tight-tree",isMultiGraph:!0}),s.setDefaultEdgeLabel(function(){return{}}),o.db.extract(t);const h=o.db.getStates(),f=o.db.getRelations(),d=Object.keys(h);for(let b=0;b<d.length;b++){const k=h[d[b]];n&&(k.parentId=n);let T;if(k.doc){let x=e.append("g").attr("id",k.id).attr("class","stateGroup");T=UL(k.doc,x,k.id,!r,i,a,o);{x=Fat(x,k,r);let A=x.node().getBBox();T.width=A.width,T.height=A.height+Sr.padding/2,Zb[k.id]={y:Sr.compositTitleSize}}}else T=zL(e,k);if(k.note){const x={descriptions:[],id:k.id+"-note",note:k.note,type:"note"},A=zL(e,x);k.note.position==="left of"?(s.setNode(T.id+"-note",A),s.setNode(T.id,T)):(s.setNode(T.id,T),s.setNode(T.id+"-note",A)),s.setParent(T.id,T.id+"-group"),s.setParent(T.id+"-note",T.id+"-group")}else s.setNode(T.id,T)}W.debug("Count=",s.nodeCount(),s);let p=0;f.forEach(function(b){p++,W.debug("Setting edge",b),s.setEdge(b.id1,b.id2,{relation:b,width:Vat(b.title),height:Sr.labelHeight*he.getRows(b.title).length,labelpos:"c"},"id"+p)}),Jl.layout(s),W.debug("Graph after layout",s.nodes());const m=e.node();s.nodes().forEach(function(b){typeof b<"u"&&typeof s.node(b)<"u"?(W.warn("Node "+b+": "+JSON.stringify(s.node(b))),i.select("#"+m.id+" #"+b).attr("transform","translate("+(s.node(b).x-s.node(b).width/2)+","+(s.node(b).y+(Zb[b]?Zb[b].y:0)-s.node(b).height/2)+" )"),i.select("#"+m.id+" #"+b).attr("data-x-shift",s.node(b).x-s.node(b).width/2),a.querySelectorAll("#"+m.id+" #"+b+" .divider").forEach(k=>{const T=k.parentElement;let x=0,A=0;T&&(T.parentElement&&(x=T.parentElement.getBBox().width),A=parseInt(T.getAttribute("data-x-shift"),10),Number.isNaN(A)&&(A=0)),k.setAttribute("x1",0-A+8),k.setAttribute("x2",x-A-8)})):W.debug("No Node "+b+": "+JSON.stringify(s.node(b)))});let _=m.getBBox();s.edges().forEach(function(b){typeof b<"u"&&typeof s.edge(b)<"u"&&(W.debug("Edge "+b.v+" -> "+b.w+": "+JSON.stringify(s.edge(b))),jat(e,s.edge(b),s.edge(b).relation))}),_=m.getBBox();const y={id:n||"root",label:n||"root",width:0,height:0};return y.width=_.width+2*Sr.padding,y.height=_.height+2*Sr.padding,W.debug("Doc rendered",y,s),y},Gat={setConf:Uat,draw:Wat},qat={},Xat=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)qat[e[n]]=t[e[n]]};let Re={};const Zat=function(t,e){return W.trace("Extracting classes"),e.sb.clear(),e.parser.parse(t),e.sb.getClasses()},_d=(t,e,n,r)=>{if(n.id!=="root"){let i="rect";n.start===!0&&(i="start"),n.start===!1&&(i="end"),n.type!=="default"&&(i=n.type),Re[n.id]||(Re[n.id]={id:n.id,shape:i,description:he.sanitizeText(n.id,at()),classes:"statediagram-state"}),n.description&&(Array.isArray(Re[n.id].description)?(Re[n.id].shape="rectWithTitle",Re[n.id].description.push(n.description)):Re[n.id].description.length>0?(Re[n.id].shape="rectWithTitle",Re[n.id].description===n.id?Re[n.id].description=[n.description]:Re[n.id].description=[Re[n.id].description,n.description]):(Re[n.id].shape="rect",Re[n.id].description=n.description),Re[n.id].description=he.sanitizeTextOrArray(Re[n.id].description,at())),Re[n.id].description.length===1&&Re[n.id].shape==="rectWithTitle"&&(Re[n.id].shape="rect"),!Re[n.id].type&&n.doc&&(W.info("Setting cluster for ",n.id,Qb(n)),Re[n.id].type="group",Re[n.id].dir=Qb(n),Re[n.id].shape=n.type==="divider"?"divider":"roundedWithTitle",Re[n.id].classes=Re[n.id].classes+" "+(r?"statediagram-cluster statediagram-cluster-alt":"statediagram-cluster"));const a={labelStyle:"",shape:Re[n.id].shape,labelText:Re[n.id].description,classes:Re[n.id].classes,style:"",id:n.id,dir:Re[n.id].dir,domId:"state-"+n.id+"-"+ro,type:Re[n.id].type,padding:15};if(n.note){const o={labelStyle:"",shape:"note",labelText:n.note.text,classes:"statediagram-note",style:"",id:n.id+"----note-"+ro,domId:"state-"+n.id+"----note-"+ro,type:Re[n.id].type,padding:15},s={labelStyle:"",shape:"noteGroup",labelText:n.note.text,classes:Re[n.id].classes,style:"",id:n.id+"----parent",domId:"state-"+n.id+"----parent-"+ro,type:"group",padding:0};ro++,t.setNode(n.id+"----parent",s),t.setNode(o.id,o),t.setNode(n.id,a),t.setParent(n.id,n.id+"----parent"),t.setParent(o.id,n.id+"----parent");let l=n.id,u=o.id;n.note.position==="left of"&&(l=o.id,u=n.id),t.setEdge(l,u,{arrowhead:"none",arrowType:"",style:"fill:none",labelStyle:"",classes:"transition note-edge",arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal"})}else t.setNode(n.id,a)}e&&e.id!=="root"&&(W.trace("Setting node ",n.id," to be child of its parent ",e.id),t.setParent(n.id,e.id)),n.doc&&(W.trace("Adding nodes children "),Qat(t,n,n.doc,!r))};let ro=0;const Qat=(t,e,n,r)=>{W.trace("items",n),n.forEach(i=>{if(i.stmt==="state"||i.stmt==="default")_d(t,e,i,r);else if(i.stmt==="relation"){_d(t,e,i.state1,r),_d(t,e,i.state2,r);const a={id:"edge"+ro,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:"fill:none",labelStyle:"",label:he.sanitizeText(i.description,at()),arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal",classes:"transition"};let o=i.state1.id,s=i.state2.id;t.setEdge(o,s,a,ro),ro++}})},Qb=(t,e)=>{let n=e||"TB";if(t.doc)for(let r=0;r<t.doc.length;r++){const i=t.doc[r];i.stmt==="dir"&&(n=i.value)}return n},Kat={setConf:Xat,getClasses:Zat,draw:function(t,e,n,r){W.info("Drawing state diagram (v2)",e),Re={},r.db.getDirection();const{securityLevel:i,state:a}=at(),o=a.nodeSpacing||50,s=a.rankSpacing||50;W.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),W.info(r.db.getRootDocV2());const l=new un.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:Qb(r.db.getRootDocV2()),nodesep:o,ranksep:s,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});_d(l,void 0,r.db.getRootDocV2(),!0);let u;i==="sandbox"&&(u=Lt("#i"+e));const h=Lt(i==="sandbox"?u.nodes()[0].contentDocument.body:"body"),f=h.select(`[id="${e}"]`),d=h.select("#"+e+" g");eb(d,l,["barb"],"statediagram",e);const p=8,m=f.node().getBBox(),_=m.width+p*2,y=m.height+p*2;f.attr("class","statediagram");const b=f.node().getBBox();oi(f,y,_,a.useMaxWidth);const k=`${b.x-p} ${b.y-p} ${_} ${y}`;W.debug(`viewBox ${k}`),f.attr("viewBox",k);const T=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let x=0;x<T.length;x++){const A=T[x],C=A.getBBox(),L=document.createElementNS("http://www.w3.org/2000/svg","rect");L.setAttribute("rx",0),L.setAttribute("ry",0),L.setAttribute("width",C.width),L.setAttribute("height",C.height),A.insertBefore(L,A.firstChild)}yr(r.db,f,e)}};var Kb=function(){var t=function(_,y,b,k){for(b=b||{},k=_.length;k--;b[_[k]]=y);return b},e=[1,2],n=[1,5],r=[6,9,11,17,18,20,22,23,24,26],i=[1,15],a=[1,16],o=[1,17],s=[1,18],l=[1,19],u=[1,20],h=[1,24],f=[4,6,9,11,17,18,20,22,23,24,26],d={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(_,y,b,k,T,x,A){var C=x.length-1;switch(T){case 1:return x[C-1];case 3:this.$=[];break;case 4:x[C-1].push(x[C]),this.$=x[C-1];break;case 5:case 6:this.$=x[C];break;case 7:case 8:this.$=[];break;case 11:k.setDiagramTitle(x[C].substr(6)),this.$=x[C].substr(6);break;case 12:this.$=x[C].trim(),k.setAccTitle(this.$);break;case 13:case 14:this.$=x[C].trim(),k.setAccDescription(this.$);break;case 15:k.addSection(x[C].substr(8)),this.$=x[C].substr(8);break;case 16:k.addTask(x[C-1],x[C]),this.$="task";break;case 18:k.parseDirective("%%{","open_directive");break;case 19:k.parseDirective(x[C],"type_directive");break;case 20:x[C]=x[C].trim().replace(/'/g,'"'),k.parseDirective(x[C],"arg_directive");break;case 21:k.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:e,7:3,12:4,26:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,26:n},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:i,18:a,20:o,22:s,23:l,24:u,26:n},{1:[2,2]},{14:22,15:[1,23],29:h},t([15,29],[2,19]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:21,10:25,12:4,17:i,18:a,20:o,22:s,23:l,24:u,26:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),{19:[1,26]},{21:[1,27]},t(r,[2,14]),t(r,[2,15]),{25:[1,28]},t(r,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},t(r,[2,5]),t(r,[2,12]),t(r,[2,13]),t(r,[2,16]),t(f,[2,9]),{14:32,29:h},{29:[2,20]},{11:[1,33]},t(f,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(_,y){if(y.recoverable)this.trace(_);else{var b=new Error(_);throw b.hash=y,b}},parse:function(_){var y=this,b=[0],k=[],T=[null],x=[],A=this.table,C="",L=0,S=0,D=2,v=1,M=x.slice.call(arguments,1),w=Object.create(this.lexer),I={yy:{}};for(var B in this.yy)Object.prototype.hasOwnProperty.call(this.yy,B)&&(I.yy[B]=this.yy[B]);w.setInput(_,I.yy),I.yy.lexer=w,I.yy.parser=this,typeof w.yylloc>"u"&&(w.yylloc={});var $=w.yylloc;x.push($);var F=w.options&&w.options.ranges;typeof I.yy.parseError=="function"?this.parseError=I.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function K(){var V;return V=k.pop()||w.lex()||v,typeof V!="number"&&(V instanceof Array&&(k=V,V=k.pop()),V=y.symbols_[V]||V),V}for(var nt,z,Y,rt,lt={},J,Q,q,it;;){if(z=b[b.length-1],this.defaultActions[z]?Y=this.defaultActions[z]:((nt===null||typeof nt>"u")&&(nt=K()),Y=A[z]&&A[z][nt]),typeof Y>"u"||!Y.length||!Y[0]){var ut="";it=[];for(J in A[z])this.terminals_[J]&&J>D&&it.push("'"+this.terminals_[J]+"'");w.showPosition?ut="Parse error on line "+(L+1)+`:
`+w.showPosition()+`
Expecting `+it.join(", ")+", got '"+(this.terminals_[nt]||nt)+"'":ut="Parse error on line "+(L+1)+": Unexpected "+(nt==v?"end of input":"'"+(this.terminals_[nt]||nt)+"'"),this.parseError(ut,{text:w.match,token:this.terminals_[nt]||nt,line:w.yylineno,loc:$,expected:it})}if(Y[0]instanceof Array&&Y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+z+", token: "+nt);switch(Y[0]){case 1:b.push(nt),T.push(w.yytext),x.push(w.yylloc),b.push(Y[1]),nt=null,S=w.yyleng,C=w.yytext,L=w.yylineno,$=w.yylloc;break;case 2:if(Q=this.productions_[Y[1]][1],lt.$=T[T.length-Q],lt._$={first_line:x[x.length-(Q||1)].first_line,last_line:x[x.length-1].last_line,first_column:x[x.length-(Q||1)].first_column,last_column:x[x.length-1].last_column},F&&(lt._$.range=[x[x.length-(Q||1)].range[0],x[x.length-1].range[1]]),rt=this.performAction.apply(lt,[C,S,L,I.yy,Y[1],T,x].concat(M)),typeof rt<"u")return rt;Q&&(b=b.slice(0,-1*Q*2),T=T.slice(0,-1*Q),x=x.slice(0,-1*Q)),b.push(this.productions_[Y[1]][0]),T.push(lt.$),x.push(lt._$),q=A[b[b.length-2]][b[b.length-1]],b.push(q);break;case 3:return!0}}return!0}},p=function(){var _={EOF:1,parseError:function(y,b){if(this.yy.parser)this.yy.parser.parseError(y,b);else throw new Error(y)},setInput:function(y,b){return this.yy=b||this.yy||{},this._input=y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var y=this._input[0];this.yytext+=y,this.yyleng++,this.offset++,this.match+=y,this.matched+=y;var b=y.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),y},unput:function(y){var b=y.length,k=y.split(/(?:\r\n?|\n)/g);this._input=y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var T=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===T.length?this.yylloc.first_column:0)+T[T.length-k.length].length-k[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(y){this.unput(this.match.slice(y))},pastInput:function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var y=this.pastInput(),b=new Array(y.length+1).join("-");return y+this.upcomingInput()+`
`+b+"^"},test_match:function(y,b){var k,T,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),T=y[0].match(/(?:\r\n?|\n).*/g),T&&(this.yylineno+=T.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:T?T[T.length-1].length-T[T.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+y[0].length},this.yytext+=y[0],this.match+=y[0],this.matches=y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(y[0].length),this.matched+=y[0],k=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var A in x)this[A]=x[A];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var y,b,k,T;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),A=0;A<x.length;A++)if(k=this._input.match(this.rules[x[A]]),k&&(!b||k[0].length>b[0].length)){if(b=k,T=A,this.options.backtrack_lexer){if(y=this.test_match(k,x[A]),y!==!1)return y;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(y=this.test_match(b,x[T]),y!==!1?y:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(y,b,k,T){switch(k){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return _}();d.lexer=p;function m(){this.yy={}}return m.prototype=d,d.Parser=m,new m}();Kb.parser=Kb;const Jat=t=>t.match(/^\s*journey/)!==null;let fc="";const Jb=[],mu=[],pc=[],tot=function(t,e,n){qe.parseDirective(this,t,e,n)},eot=function(){Jb.length=0,mu.length=0,fc="",pc.length=0,si()},not=function(t){fc=t,Jb.push(t)},rot=function(){return Jb},iot=function(){let t=HL();const e=100;let n=0;for(;!t&&n<e;)t=HL(),n++;return mu.push(...pc),mu},aot=function(){const t=[];return mu.forEach(e=>{e.people&&t.push(...e.people)}),[...new Set(t)].sort()},oot=function(t,e){const n=e.substr(1).split(":");let r=0,i=[];n.length===1?(r=Number(n[0]),i=[]):(r=Number(n[0]),i=n[1].split(","));const a=i.map(s=>s.trim()),o={section:fc,type:fc,people:a,task:t,score:r};pc.push(o)},sot=function(t){const e={section:fc,type:fc,description:t,task:t,classes:[]};mu.push(e)},HL=function(){const t=function(n){return pc[n].processed};let e=!0;for(let n=0;n<pc.length;n++)t(n),e=e&&pc[n].processed;return e},WL={parseDirective:tot,getConfig:()=>at().journey,clear:eot,setDiagramTitle:h0,getDiagramTitle:d0,setAccTitle:$r,getAccTitle:ci,setAccDescription:li,getAccDescription:ui,addSection:not,getSections:rot,getTasks:iot,addTask:oot,addTaskOrg:sot,getActors:function(){return aot()}},vd=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),typeof e.class<"u"&&n.attr("class",e.class),n},cot=function(t,e){const n=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),r=t.append("g");r.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),r.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function i(s){const l=b1().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);s.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(s){const l=b1().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);s.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(s){s.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?i(r):e.score<3?a(r):o(r),n},VL=function(t,e){const n=t.append("circle");return n.attr("cx",e.cx),n.attr("cy",e.cy),n.attr("class","actor-"+e.pos),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("r",e.r),typeof n.class<"u"&&n.attr("class",n.class),typeof e.title<"u"&&n.append("title").text(e.title),n},GL=function(t,e){const n=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),typeof e.class<"u"&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+e.textMargin*2),i.text(n),r},lot=function(t,e){function n(i,a,o,s,l){return i+","+a+" "+(i+o)+","+a+" "+(i+o)+","+(a+s-l)+" "+(i+o-l*1.2)+","+(a+s)+" "+i+","+(a+s)}const r=t.append("polygon");r.attr("points",n(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,GL(t,e)},uot=function(t,e,n){const r=t.append("g"),i=t5();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=n.width,i.height=n.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,vd(r,i),XL(n)(e.text,r,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},n,e.colour)};let qL=-1;const hot=function(t,e,n){const r=e.x+n.width/2,i=t.append("g");qL++;const a=300+5*30;i.append("line").attr("id","task"+qL).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),cot(i,{cx:r,cy:300+(5-e.score)*30,score:e.score});const o=t5();o.x=e.x,o.y=e.y,o.fill=e.fill,o.width=n.width,o.height=n.height,o.class="task task-type-"+e.num,o.rx=3,o.ry=3,vd(i,o);let s=e.x+14;e.people.forEach(l=>{const u=e.actors[l].color,h={cx:s,cy:e.y,r:7,fill:u,stroke:"#000",title:l,pos:e.actors[l].position};VL(i,h),s+=10}),XL(n)(e.task,i,o.x,o.y,o.width,o.height,{class:"task"},n,e.colour)},dot=function(t,e){vd(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},fot=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},t5=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},XL=function(){function t(i,a,o,s,l,u,h,f){const d=a.append("text").attr("x",o+l/2).attr("y",s+u/2+5).style("font-color",f).style("text-anchor","middle").text(i);r(d,h)}function e(i,a,o,s,l,u,h,f,d){const{taskFontSize:p,taskFontFamily:m}=f,_=i.split(/<br\s*\/?>/gi);for(let y=0;y<_.length;y++){const b=y*p-p*(_.length-1)/2,k=a.append("text").attr("x",o+l/2).attr("y",s).attr("fill",d).style("text-anchor","middle").style("font-size",p).style("font-family",m);k.append("tspan").attr("x",o+l/2).attr("dy",b).text(_[y]),k.attr("y",s+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)o in a&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),bu={drawRect:vd,drawCircle:VL,drawSection:uot,drawText:GL,drawLabel:lot,drawTask:hot,drawBackgroundRect:dot,getTextObj:fot,getNoteRect:t5,initGraphics:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}},pot=function(t){Object.keys(t).forEach(function(e){xd[e]=t[e]})},ya={};function got(t){const e=at().journey;let n=60;Object.keys(ya).forEach(r=>{const i=ya[r].color,a={cx:20,cy:n,r:7,fill:i,stroke:"#000",pos:ya[r].position};bu.drawCircle(t,a);const o={x:40,y:n+7,fill:"#666",text:r,textMargin:e.boxTextMargin|5};bu.drawText(t,o),n+=20})}const xd=at().journey,Xo=xd.leftMargin,yot=function(t,e,n,r){const i=at().journey;r.db.clear(),r.parser.parse(t+`
`);const a=at().securityLevel;let o;a==="sandbox"&&(o=Lt("#i"+e));const s=Lt(a==="sandbox"?o.nodes()[0].contentDocument.body:"body");Ur.init();const l=s.select("#"+e);bu.initGraphics(l);const u=r.db.getTasks(),h=r.db.getDiagramTitle(),f=r.db.getActors();for(const b in ya)delete ya[b];let d=0;f.forEach(b=>{ya[b]={color:i.actorColours[d%i.actorColours.length],position:d},d++}),got(l),Ur.insert(0,0,Xo,Object.keys(ya).length*50),mot(l,u,0);const p=Ur.getBounds();h&&l.append("text").text(h).attr("x",Xo).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const m=p.stopy-p.starty+2*i.diagramMarginY,_=Xo+p.stopx+2*i.diagramMarginX;oi(l,m,_,i.useMaxWidth),l.append("line").attr("x1",Xo).attr("y1",i.height*4).attr("x2",_-Xo-4).attr("y2",i.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const y=h?70:0;l.attr("viewBox",`${p.startx} -25 ${_} ${m+y}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",m+y+25),yr(r.db,l,e)},Ur={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,n,r){typeof t[e]>"u"?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=at().journey,a=this;let o=0;function s(l){return function(u){o++;const h=a.sequenceItems.length-o+1;a.updateVal(u,"starty",e-h*i.boxMargin,Math.min),a.updateVal(u,"stopy",r+h*i.boxMargin,Math.max),a.updateVal(Ur.data,"startx",t-h*i.boxMargin,Math.min),a.updateVal(Ur.data,"stopx",n+h*i.boxMargin,Math.max),l!=="activation"&&(a.updateVal(u,"startx",t-h*i.boxMargin,Math.min),a.updateVal(u,"stopx",n+h*i.boxMargin,Math.max),a.updateVal(Ur.data,"starty",e-h*i.boxMargin,Math.min),a.updateVal(Ur.data,"stopy",r+h*i.boxMargin,Math.max))}}this.sequenceItems.forEach(s())},insert:function(t,e,n,r){const i=Math.min(t,n),a=Math.max(t,n),o=Math.min(e,r),s=Math.max(e,r);this.updateVal(Ur.data,"startx",i,Math.min),this.updateVal(Ur.data,"starty",o,Math.min),this.updateVal(Ur.data,"stopx",a,Math.max),this.updateVal(Ur.data,"stopy",s,Math.max),this.updateBounds(i,o,a,s)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},e5=xd.sectionFills,ZL=xd.sectionColours,mot=function(t,e,n){const r=at().journey;let i="";const a=r.height*2+r.diagramMarginY,o=n+a;let s=0,l="#CCC",u="black",h=0;for(let f=0;f<e.length;f++){const d=e[f];if(i!==d.section){l=e5[s%e5.length],h=s%e5.length,u=ZL[s%ZL.length];const m={x:f*r.taskMargin+f*r.width+Xo,y:50,text:d.section,fill:l,num:h,colour:u};bu.drawSection(t,m,r),i=d.section,s++}const p=d.people.reduce((m,_)=>(ya[_]&&(m[_]=ya[_]),m),{});d.x=f*r.taskMargin+f*r.width+Xo,d.y=o,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=u,d.fill=l,d.num=h,d.actors=p,bu.drawTask(t,d,r),Ur.insert(d.x,d.y,d.x+d.width+r.taskMargin,300+5*30)}},QL={setConf:pot,draw:yot};let KL={};const n5={setConf:function(t){KL={...KL,...t}},draw:(t,e,n)=>{try{W.debug(`Renering svg for syntax error
`);const r=Lt("#"+e),i=r.append("g");i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+n),r.attr("height",100),r.attr("width",500),r.attr("viewBox","768 0 912 512")}catch(r){W.error("Error while rendering info diagram"),W.error(mX(r))}}};let JL=!1;const _u=()=>{JL||(JL=!0,Ln("error",{db:{clear:()=>{}},styles:L9,renderer:n5,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},t=>t.toLowerCase().trim()==="error"),Ln("c4",{parser:zl,db:Q9,renderer:sw,styles:F9,init:t=>{sw.setConf(t.c4)}},pZ),Ln("class",{parser:x0,db:Ks,renderer:Wtt,styles:Il,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ks.clear()}},rQ),Ln("classDiagram",{parser:x0,db:Ks,renderer:jet,styles:Il,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ks.clear()}},iQ),Ln("er",{parser:nb,db:Get,renderer:snt,styles:M9},Uet),Ln("gantt",{parser:Cb,db:Ib,renderer:cit,styles:B9},Drt),Ln("info",{parser:Rb,db:lit,renderer:uit,styles:N9},hit),Ln("pie",{parser:Fb,db:fit,renderer:pit,styles:D9},dit),Ln("requirement",{parser:Pb,db:yit,renderer:wit,styles:O9},git),Ln("sequence",{parser:jb,db:kL,renderer:DL,styles:I9,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");kL.setWrap(t.wrap),DL.setConf(t.sequence)}},Tit),Ln("state",{parser:fd,db:ga,renderer:Gat,styles:c0,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ga.clear()}},bat),Ln("stateDiagram",{parser:fd,db:ga,renderer:Kat,styles:c0,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ga.clear()}},_at),Ln("journey",{parser:Kb,db:WL,renderer:QL,styles:R9,init:t=>{QL.setConf(t.journey),WL.clear()}},Jat),Ln("flowchart",{parser:q0,db:ua,renderer:Eb,styles:s0,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Tb.setConf(t.flowchart),ua.clear(),ua.setGen("gen-1")}},cnt),Ln("flowchart-v2",{parser:q0,db:ua,renderer:Eb,styles:s0,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,T9({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),Eb.setConf(t.flowchart),ua.clear(),ua.setGen("gen-2")}},lnt),Ln("gitGraph",{parser:cg,db:aZ,renderer:dZ,styles:fZ},YX))};class vu{constructor(e,n){Vr(this,"type","graph"),Vr(this,"parser"),Vr(this,"renderer"),Vr(this,"db"),Vr(this,"detectTypeFailed",!1);var r,i;this.txt=e;const a=at();this.txt=e;try{this.type=Vp(e,a)}catch(s){this.handleError(s,n),this.type="error",this.detectTypeFailed=!0}const o=Y9(this.type);W.debug("Type "+this.type),this.db=o.db,(i=(r=this.db).clear)==null||i.call(r),this.renderer=o.renderer,this.parser=o.parser,this.parser.parser.yy=this.db,o.init&&(o.init(a),W.debug("Initialized diagram "+this.type,a)),this.txt+=`
`,this.parse(this.txt,n)}parse(e,n){if(this.detectTypeFailed)return!1;try{return e=e+`
`,this.db.clear(),this.parser.parse(e),!0}catch(r){this.handleError(r,n)}return!1}handleError(e,n){if(n)tg(e)?n(e.str,e.hash):n(e);else throw e}getParser(){return this.parser}getType(){return this.type}}const r5=(t,e)=>{const n=Vp(t,at());try{return Y9(n),new vu(t,e)}catch(r){if(!(r instanceof z9))throw W.error(r),r;const i=MV(n);if(!i)throw new Error(`Loader for ${n} not found.`);return i().then(({diagram:a})=>(Ln(n,a,void 0),new vu(t,e)))}};function bot(t,e){return _u(),new vu(t,e).parse(t,e)}async function _ot(t,e){return _u(),(await r5(t,e)).parse(t,e)}const tB=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/#\w+;/g,function(n){const r=n.substring(1,n.length-1);return/^\+?\d+$/.test(r)?"\uFB02\xB0\xB0"+r+"\xB6\xDF":"\uFB02\xB0"+r+"\xB6\xDF"}),e},kd=function(t){let e=t;return e=e.replace(//g,function(){return"&#"}),e=e.replace(//g,function(){return"&"}),e=e.replace(//g,function(){return";"}),e},vot=function(t,e,n,r){var i;_u(),Ol(),e=e.replace(/\r\n?/g,`
`);const a=we.detectInit(e);a&&(zo(a),sg(a));const o=at();W.debug(o),e.length>o.maxTextSize&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let s=Lt("body");if(typeof r<"u"){if(r&&(r.innerHTML=""),o.securityLevel==="sandbox"){const x=Lt(r).append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(x.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt(r);s.append("div").attr("id","d"+t).attr("style","font-family: "+o.fontFamily).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g")}else{const x=document.getElementById(t);x&&x.remove();let A;if(o.securityLevel==="sandbox"?A=document.querySelector("#i"+t):A=document.querySelector("#d"+t),A&&A.remove(),o.securityLevel==="sandbox"){const C=Lt("body").append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(C.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt("body");s.append("div").attr("id","d"+t).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}e=tB(e);let l,u;try{if(l=r5(e),"then"in l)throw new Error("Diagram is a promise")}catch(x){l=new vu("error"),u=x}const h=s.select("#d"+t).node(),f=l.type,d=h.firstChild,p=d.firstChild;let m="";if(o.themeCSS!==void 0&&(m+=`
${o.themeCSS}`),o.fontFamily!==void 0&&(m+=`
:root { --mermaid-font-family: ${o.fontFamily}}`),o.altFontFamily!==void 0&&(m+=`
:root { --mermaid-alt-font-family: ${o.altFontFamily}}`),f==="flowchart"||f==="flowchart-v2"||f==="graph"){const x=Tb.getClasses(e,l),A=o.htmlLabels||((i=o.flowchart)==null?void 0:i.htmlLabels);for(const C in x)A?(m+=`
.${C} > * { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} span { ${x[C].styles.join(" !important; ")} !important; }`):(m+=`
.${C} path { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} rect { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} polygon { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} ellipse { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} circle { ${x[C].styles.join(" !important; ")} !important; }`,x[C].textStyles&&(m+=`
.${C} tspan { ${x[C].textStyles.join(" !important; ")} !important; }`))}const _=((x,A)=>r0(b9(`${x}{${A}}`),x9))(`#${t}`,$9(f,m,o.themeVariables)),y=document.createElement("style");y.innerHTML=`#${t} `+_,d.insertBefore(y,p);try{l.renderer.draw(e,t,i0.version,l)}catch(x){throw n5.draw(e,t,i0.version),x}s.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let b=s.select("#d"+t).node().innerHTML;if(W.debug("cnf.arrowMarkerAbsolute",o.arrowMarkerAbsolute),!Mn(o.arrowMarkerAbsolute)&&o.securityLevel!=="sandbox"&&(b=b.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),b=kd(b),b=b.replace(/<br>/g,"<br/>"),o.securityLevel==="sandbox"){const x=s.select("#d"+t+" svg").node(),A="100%";let C="100%";x&&(C=x.viewBox.baseVal.height+"px"),b=`<iframe style="width:${A};height:${C};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+b+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The \u201Ciframe\u201D tag is not supported by your browser.
</iframe>`}else o.securityLevel!=="loose"&&(b=Sl.sanitize(b,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(typeof n<"u")switch(f){case"flowchart":case"flowchart-v2":n(b,ua.bindFunctions);break;case"gantt":n(b,Ib.bindFunctions);break;case"class":case"classDiagram":n(b,Ks.bindFunctions);break;default:n(b)}else W.debug("CB = undefined!");wL();const k=o.securityLevel==="sandbox"?"#i"+t:"#d"+t,T=Lt(k).node();if(T&&"remove"in T&&T.remove(),u)throw u;return b},xot=async function(t,e,n,r){var i;_u(),Ol(),e=e.replace(/\r\n?/g,`
`);const a=we.detectInit(e);a&&(zo(a),sg(a));const o=at();W.debug(o),e.length>o.maxTextSize&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let s=Lt("body");if(typeof r<"u"){if(r&&(r.innerHTML=""),o.securityLevel==="sandbox"){const x=Lt(r).append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(x.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt(r);s.append("div").attr("id","d"+t).attr("style","font-family: "+o.fontFamily).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g")}else{const x=document.getElementById(t);x&&x.remove();let A;if(o.securityLevel==="sandbox"?A=document.querySelector("#i"+t):A=document.querySelector("#d"+t),A&&A.remove(),o.securityLevel==="sandbox"){const C=Lt("body").append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(C.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt("body");s.append("div").attr("id","d"+t).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}e=tB(e);let l,u;try{l=await r5(e)}catch(x){l=new vu("error"),u=x}const h=s.select("#d"+t).node(),f=l.type,d=h.firstChild,p=d.firstChild;let m="";if(o.themeCSS!==void 0&&(m+=`
${o.themeCSS}`),o.fontFamily!==void 0&&(m+=`
:root { --mermaid-font-family: ${o.fontFamily}}`),o.altFontFamily!==void 0&&(m+=`
:root { --mermaid-alt-font-family: ${o.altFontFamily}}`),f==="flowchart"||f==="flowchart-v2"||f==="graph"){const x=Tb.getClasses(e,l),A=o.htmlLabels||((i=o.flowchart)==null?void 0:i.htmlLabels);for(const C in x)A?(m+=`
.${C} > * { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} span { ${x[C].styles.join(" !important; ")} !important; }`):(m+=`
.${C} path { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} rect { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} polygon { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} ellipse { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} circle { ${x[C].styles.join(" !important; ")} !important; }`,x[C].textStyles&&(m+=`
.${C} tspan { ${x[C].textStyles.join(" !important; ")} !important; }`))}const _=((x,A)=>r0(b9(`${x}{${A}}`),x9))(`#${t}`,$9(f,m,o.themeVariables)),y=document.createElement("style");y.innerHTML=`#${t} `+_,d.insertBefore(y,p);try{await l.renderer.draw(e,t,i0.version,l)}catch(x){throw n5.draw(e,t,i0.version),x}s.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let b=s.select("#d"+t).node().innerHTML;if(W.debug("cnf.arrowMarkerAbsolute",o.arrowMarkerAbsolute),!Mn(o.arrowMarkerAbsolute)&&o.securityLevel!=="sandbox"&&(b=b.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),b=kd(b),b=b.replace(/<br>/g,"<br/>"),o.securityLevel==="sandbox"){const x=s.select("#d"+t+" svg").node(),A="100%";let C="100%";x&&(C=x.viewBox.baseVal.height+"px"),b=`<iframe style="width:${A};height:${C};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+b+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The \u201Ciframe\u201D tag is not supported by your browser.
</iframe>`}else o.securityLevel!=="loose"&&(b=Sl.sanitize(b,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(typeof n<"u")switch(f){case"flowchart":case"flowchart-v2":n(b,ua.bindFunctions);break;case"gantt":n(b,Ib.bindFunctions);break;case"class":case"classDiagram":n(b,Ks.bindFunctions);break;default:n(b)}else W.debug("CB = undefined!");wL();const k=o.securityLevel==="sandbox"?"#i"+t:"#d"+t,T=Lt(k).node();if(T&&"remove"in T&&T.remove(),u)throw u;return b};let Zo={};const kot=function(t,e,n,r){try{if(e!==void 0)switch(e=e.trim(),n){case"open_directive":Zo={};break;case"type_directive":if(!Zo)throw new Error("currentDirective is undefined");Zo.type=e.toLowerCase();break;case"arg_directive":if(!Zo)throw new Error("currentDirective is undefined");Zo.args=JSON.parse(e);break;case"close_directive":wot(t,Zo,r),Zo=void 0;break}}catch(i){W.error(`Error while rendering sequenceDiagram directive: ${e} jison context: ${n}`),W.error(i.message)}},wot=function(t,e,n){switch(W.debug(`Directive type=${e.type} with args:`,e.args),e.type){case"init":case"initialize":{["config"].forEach(r=>{typeof e.args[r]<"u"&&(n==="flowchart-v2"&&(n="flowchart"),e.args[n]=e.args[r],delete e.args[r])}),W.debug("sanitize in handleDirective",e.args),zo(e.args),W.debug("sanitize in handleDirective (done)",e.args),sg(e.args);break}case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap(e.type==="wrap");break;case"themeCss":W.warn("themeCss encountered");break;default:W.warn(`Unhandled directive: source: '%%{${e.type}: ${JSON.stringify(e.args?e.args:{})}}%%`,e);break}};function Tot(t={}){t.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),NX(t),(t==null?void 0:t.theme)&&t.theme in ra?t.themeVariables=ra[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=ra.default.getThemeVariables(t.themeVariables));const e=typeof t=="object"?BX(t):w9();Nd(e.logLevel),_u()}const qe=Object.freeze({render:vot,renderAsync:xot,parse:bot,parseAsync:_ot,parseDirective:kot,initialize:Tot,getConfig:at,setConfig:T9,getSiteConfig:w9,updateSiteConfig:DX,reset:()=>{Ol()},globalReset:()=>{Ol(qs)},defaultConfig:qs});Nd(at().logLevel),Ol(at());let eB=!1;const Eot=async function(t,e,n){try{eB?await iB(t,e,n):rB(t,e,n)}catch(r){W.warn("Syntax Error rendering"),tg(r)&&W.warn(r.str),Hr.parseError&&Hr.parseError(r)}},nB=(t,e,n)=>{W.warn(t),tg(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},rB=function(t,e,n){const r=qe.getConfig();t&&(Hr.sequenceConfig=t),W.debug(`${n?"":"No "}Callback function found`);let i;if(typeof e>"u")i=document.querySelectorAll(".mermaid");else if(typeof e=="string")i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else if(e instanceof NodeList)i=e;else throw new Error("Invalid argument nodes for mermaid.init");W.debug(`Found ${i.length} diagrams`),typeof(t==null?void 0:t.startOnLoad)<"u"&&(W.debug("Start On Load: "+(t==null?void 0:t.startOnLoad)),qe.updateSiteConfig({startOnLoad:t==null?void 0:t.startOnLoad}));const a=new we.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const s=[];for(const l of Array.from(i)){W.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const u=`mermaid-${a.next()}`;o=l.innerHTML,o=we.entityDecode(o).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=we.detectInit(o);h&&W.debug("Detected early reinit: ",h);try{qe.render(u,o,(f,d)=>{l.innerHTML=f,typeof n<"u"&&n(u),d&&d(l)},l)}catch(f){nB(f,s,Hr.parseError)}}if(s.length>0)throw s[0]},Cot=t=>{for(const{id:e,detector:n,loader:r}of t)Zk(e,n,r)},Sot=async t=>{W.debug(`Loading ${t.length} external diagrams`);const e=(await Promise.allSettled(t.map(async({id:n,detector:r,loader:i})=>{const{diagram:a}=await i();Ln(n,a,r)}))).filter(n=>n.status==="rejected");if(e.length>0){W.error(`Failed to load ${e.length} external diagrams`);for(const n of e)W.error(n);throw new Error(`Failed to load ${e.length} external diagrams`)}},iB=async function(t,e,n){const r=qe.getConfig();t&&(Hr.sequenceConfig=t),W.debug(`${n?"":"No "}Callback function found`);let i;if(typeof e>"u")i=document.querySelectorAll(".mermaid");else if(typeof e=="string")i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else if(e instanceof NodeList)i=e;else throw new Error("Invalid argument nodes for mermaid.init");W.debug(`Found ${i.length} diagrams`),typeof(t==null?void 0:t.startOnLoad)<"u"&&(W.debug("Start On Load: "+(t==null?void 0:t.startOnLoad)),qe.updateSiteConfig({startOnLoad:t==null?void 0:t.startOnLoad}));const a=new we.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const s=[];for(const l of Array.from(i)){W.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const u=`mermaid-${a.next()}`;o=l.innerHTML,o=we.entityDecode(o).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=we.detectInit(o);h&&W.debug("Detected early reinit: ",h);try{await qe.renderAsync(u,o,(f,d)=>{l.innerHTML=f,typeof n<"u"&&n(u),d&&d(l)},l)}catch(f){nB(f,s,Hr.parseError)}}if(s.length>0)throw s[0]},Aot=function(t){qe.initialize(t)},Mot=async(t,{lazyLoad:e=!0}={})=>{e?Cot(t):await Sot(t),eB=!0},aB=function(){if(Hr.startOnLoad){const{startOnLoad:t}=qe.getConfig();t&&Hr.init()}};if(typeof document<"u"){/*!
* Wait for document loaded before starting the execution
*/window.addEventListener("load",aB,!1)}const Lot=function(t){Hr.parseError=t},Bot=t=>qe.parse(t,Hr.parseError),wd=[];let i5=!1;const oB=async()=>{if(!i5){for(i5=!0;wd.length>0;){const t=wd.shift();if(t)try{await t()}catch(e){W.error("Error executing queue",e)}}i5=!1}},Not=t=>new Promise((e,n)=>{const r=()=>new Promise((i,a)=>{qe.parseAsync(t,Hr.parseError).then(o=>{i(o),e(o)},o=>{W.error("Error parsing",o),a(o),n(o)})});wd.push(r),oB()}),Dot=(t,e,n,r)=>new Promise((i,a)=>{const o=()=>new Promise((s,l)=>{qe.renderAsync(t,e,n,r).then(u=>{s(u),i(u)},u=>{W.error("Error parsing",u),l(u),a(u)})});wd.push(o),oB()}),Hr={startOnLoad:!0,diagrams:{},mermaidAPI:qe,parse:Bot,parseAsync:Not,render:qe.render,renderAsync:Dot,init:Eot,initThrowsErrors:rB,initThrowsErrorsAsync:iB,registerExternalDiagrams:Mot,initialize:Aot,parseError:void 0,contentLoaded:aB,setParseErrorHandler:Lot};return Hr})})(y5);const Hot=jot(y5.exports),Vot=Uot({__proto__:null,default:Hot},[y5.exports]);export{Vot as m};
