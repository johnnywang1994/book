import{_ as c,r as o,o as l,c as i,a,d as n,e as s,f as e}from"./app-d4cd373e.js";const u={},r=n("h1",{id:"來試用看看原生-web-popover-api",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#來試用看看原生-web-popover-api","aria-hidden":"true"},"#"),s(" 來試用看看原生 Web Popover API")],-1),d=e(`<p>Hi 大家好，我是 Johnny，各位前端工程師們日常工作中一定瘋狂遇到各種 Dialog, Modal, Popover 等等彈出訊息、視窗的功能吧？還在擔心每次專案要用哪個 Library 實作或是自己手刻嗎？</p><p>今天就來介紹一個好玩的 Web API 叫做「Popover API」，可以快速讓前端使用原生的 web api 做到過去類似的彈出視窗功能</p><h2 id="什麼是-popover-api" tabindex="-1"><a class="header-anchor" href="#什麼是-popover-api" aria-hidden="true">#</a> 什麼是 Popover API？</h2><p>Popover API 為開發人員提供「標準」、「一致」、「靈活」的機制，用於在其他頁面內容之上顯示彈出內容。</p><p>網頁開發中，有兩種常見的方法可以在其他內容之上顯示內容</p><ul><li>modal <ul><li>顯示彈出視窗時，頁面的其餘部分將呈現非互動狀態，直到彈出視窗已關閉</li></ul></li><li>non-modal <ul><li>顯示彈出視窗時可以與頁面的其餘部分進行交互</li></ul></li></ul><p><strong>使用 Popover API 建立的 Popover 始終是 non-modal 的</strong></p><h2 id="如何使用-popover-api" tabindex="-1"><a class="header-anchor" href="#如何使用-popover-api" aria-hidden="true">#</a> 如何使用 Popover API?</h2><h3 id="basic-usage" tabindex="-1"><a class="header-anchor" href="#basic-usage" aria-hidden="true">#</a> Basic Usage</h3><ul><li>button 元素 <ul><li><code>popovertarget</code>: 彈出元素的 <code>id</code></li></ul></li><li>popover 元素 <ul><li>設定 <code>id</code></li><li>設定屬性 <code>popover</code>(元素將在頁面載入時套用 <code>display: none</code> 隱藏)</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">popovertarget</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypopover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Toggle the popover</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypopover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">popover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>auto<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Popover content</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>預設情況下，按鈕的行為為 toggle，或者我們可以使用屬性指定操作開啟、關閉 <code>popovertargetaction</code></p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">popovertarget</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypopover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">popovertargetaction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  Show
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">popovertarget</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypopover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">popovertargetaction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  Hide
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mypopover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">popover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manual<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  Popover content
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="popover-auto-state" tabindex="-1"><a class="header-anchor" href="#popover-auto-state" aria-hidden="true">#</a> Popover auto state</h3><p>當 popover 元素設定為 popover 或 popover=&quot;auto&quot; 時</p><ul><li>可以透過<code>點擊彈出框外部來隱藏</code>彈出框</li><li>透過瀏覽器特定的機制關閉，例如按<code>Esc</code>鍵。</li><li>一次只能顯示一個彈出視窗 - 當已經顯示一個彈出視窗時顯示第二個彈出視窗將隱藏第一個彈出視窗</li></ul><h3 id="popover-manual-state" tabindex="-1"><a class="header-anchor" href="#popover-manual-state" aria-hidden="true">#</a> Popover manual state</h3><p>當設定 popover=&quot;manual&quot; 時</p><ul><li>無法像 auto state 時透過點擊外部或 Esc 鍵關閉</li><li>可以一次顯示多個獨立的彈出窗口</li></ul><h2 id="如何用-javascript-控制-popover" tabindex="-1"><a class="header-anchor" href="#如何用-javascript-控制-popover" aria-hidden="true">#</a> 如何用 Javascript 控制 popover？</h2><p>使用這 3 種方法以 Javascript 控制彈出視窗狀態</p><ul><li><code>HTMLElement.showPopover()</code> 顯示 popover</li><li><code>HTMLElement.hidePopover()</code> 隱藏 popover.</li><li><code>HTMLElement.togglePopover()</code> toggle popover.</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">handleToggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> popover <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;mypopover&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>popover<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;:popover-open&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    popover<span class="token punctuation">.</span><span class="token function">hidePopover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    popover<span class="token punctuation">.</span><span class="token function">showPopover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// or</span>
  popover<span class="token punctuation">.</span><span class="token function">togglePopover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>popover.matches(&quot;:popover-open&quot;)</code> 檢查很重要，避免在嘗試顯示已顯示的彈出視窗或隱藏已隱藏的彈出視窗時引發錯誤</p></blockquote><h2 id="如何設計-popover-樣式" tabindex="-1"><a class="header-anchor" href="#如何設計-popover-樣式" aria-hidden="true">#</a> 如何設計 Popover 樣式？</h2><ul><li><code>:popover-open</code> 表示處於顯示狀態的 popover 元素（即具有 popover 屬性的元素）</li><li><code>::backdrop</code> 偽元素是直接放置在頂層顯示彈出框元素後面的全螢幕元素</li></ul><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">#mypopover:popover-open</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">inset</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 4px 8px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#mypopover::backdrop</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>3px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="如何替-popover-加上動畫" tabindex="-1"><a class="header-anchor" href="#如何替-popover-加上動畫" aria-hidden="true">#</a> 如何替 Popover 加上動畫？</h2>`,28),k={href:"https://developer.mozilla.org/en-US/docs/Web/API/Popover_API/Using#animating_popovers",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"@starting-style",-1),m=n("code",null,"display: none",-1),b={href:"/articles/css/starting-style.html",target:"_blank",rel:"noopener noreferrer"},g=e(`<div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">#mypopover</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">inset</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 4px 8px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
  <span class="token comment">/* animate */</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span>
    opacity 0.7s<span class="token punctuation">,</span>
    transform 0.7s<span class="token punctuation">,</span>
    overlay 0.7s allow-discrete<span class="token punctuation">,</span>
    display 0.7s allow-discrete<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#mypopover:popover-open</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@starting-style</span></span> <span class="token punctuation">{</span>
  <span class="token selector">#mypopover:popover-open</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">#mypopover::backdrop</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>0px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span>
    display 0.7s allow-discrete<span class="token punctuation">,</span>
    overlay 0.7s allow-discrete<span class="token punctuation">,</span>
    background-color 0.7s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#mypopover:popover-open::backdrop</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>3px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@starting-style</span></span> <span class="token punctuation">{</span>
  <span class="token selector">#mypopover:popover-open::backdrop</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>0px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),h=n("h2",{id:"結論",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#結論","aria-hidden":"true"},"#"),s(" 結論")],-1),y=n("p",null,"這次介紹了原生的 Web Popover API，雖然目前各瀏覽器支援度還需要驗證，但使用起來還是蠻方便的，如果只是在製作一些小專案或測試時可以使用看看，快速完成相關的功能，今天介紹就到這拉～下篇文章見=V=",-1);function x(f,q){const p=o("SocialBlock"),t=o("ExternalLinkIcon");return l(),i("div",null,[r,a(p,{hashtags:"web-api,popover,javascript,dialog,modal"}),d,n("ul",null,[n("li",null,[n("a",k,[s("animating_popovers"),a(t)]),s(" 這部分稍微複雜點，可以參考官方文件說明，簡單講就是透過 "),v,s(" 屬性，讓 "),m,s(" 能在顯示、隱藏的狀態間進行過渡，具體可參考我的另一篇文章專門說明"),n("a",b,[s("如何不用 setTimeout 幫 display: none 的 DOM 加動畫"),a(t)])])]),g,a(p,{hashtags:"web-api,popover,javascript,dialog,modal"}),h,y])}const P=c(u,[["render",x],["__file","popover-api.html.vue"]]);export{P as default};
