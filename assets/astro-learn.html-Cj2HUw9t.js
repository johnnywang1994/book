import{_ as n,c as a,d as e,o as t}from"./app-bao44jos.js";const l={};function i(c,s){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="astro-入門學習筆記" tabindex="-1"><a class="header-anchor" href="#astro-入門學習筆記"><span>Astro 入門學習筆記</span></a></h1><p>這篇是我使用 Astro <code>v4.0.8</code> 製作一個 Vuepress-like 的部落格後，整理的一篇學習筆記，供日後使用到的時候可以快速複習使用</p><h2 id="why-astro" tabindex="-1"><a class="header-anchor" href="#why-astro"><span>Why Astro?</span></a></h2><p>Astro 是用於建立內容驅動網站（例如部落格、行銷和電子商務）的 Web 框架，與其他框架相比，該架構可減少 JavaScript 開銷和複雜性。</p><h2 id="what-s-different" tabindex="-1"><a class="header-anchor" href="#what-s-different"><span>What&#39;s different</span></a></h2><ul><li>Astro 以內容展示為主要能力，相較於大多數的框架來說，建構複雜的內容呈現時所消耗的性能大幅減少</li><li>內建集成 React, Vue 及其他前端框架能力</li><li>Route handling 內建路由處理</li></ul><h3 id="astro-island" tabindex="-1"><a class="header-anchor" href="#astro-island"><span>Astro Island</span></a></h3><p>Astro 開創並推廣了一種稱為「Islands」的前端架構，幫助您避免單一的 JavaScript 模式並自動從頁面中剝離所有非必要的 JavaScript，從而提高前端效能，透過 <code>.astro</code> 的編譯能輕鬆做到在單一頁面中的不同元件，使用多種的渲染方式 <code>interactive</code>, <code>static:html</code>, \`\` 等等</p><h2 id="install" tabindex="-1"><a class="header-anchor" href="#install"><span>Install</span></a></h2><ul><li>新建專案</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">yarn</span> create astro</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="🧞-commands" tabindex="-1"><a class="header-anchor" href="#🧞-commands"><span>🧞 Commands</span></a></h2><table><thead><tr><th style="text-align:left;">Command</th><th style="text-align:left;">Action</th></tr></thead><tbody><tr><td style="text-align:left;"><code>npm install</code></td><td style="text-align:left;">Installs dependencies</td></tr><tr><td style="text-align:left;"><code>npm run dev</code></td><td style="text-align:left;">Starts local dev server at <code>localhost:4321</code></td></tr><tr><td style="text-align:left;"><code>npm run build</code></td><td style="text-align:left;">Build your production site to <code>./dist/</code></td></tr><tr><td style="text-align:left;"><code>npm run preview</code></td><td style="text-align:left;">Preview your build locally, before deploying</td></tr><tr><td style="text-align:left;"><code>npm run astro ...</code></td><td style="text-align:left;">Run CLI commands like <code>astro add</code>, <code>astro check</code></td></tr><tr><td style="text-align:left;"><code>npm run sync ...</code></td><td style="text-align:left;">Run CLI commands <code>astro sync</code></td></tr><tr><td style="text-align:left;"><code>npm run astro -- --help</code></td><td style="text-align:left;">Get help using the Astro CLI</td></tr></tbody></table><h2 id="🚀-project-structure" tabindex="-1"><a class="header-anchor" href="#🚀-project-structure"><span>🚀 Project Structure</span></a></h2><ul><li><code>astro.config.mjs</code> - Astro configuration 檔案.</li><li><code>public/*</code>: unprocessed assets(fonts, icons, etc.)</li><li><code>src/*</code>: 專案 source code</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">└── 📁src</span>
<span class="line">    └── 📁components</span>
<span class="line">        └── Image.tsx</span>
<span class="line">        └── Link.astro</span>
<span class="line">        └── Link.tsx</span>
<span class="line">        └── ...</span>
<span class="line">    └── 📁config</span>
<span class="line">        └── ...</span>
<span class="line">    └── 📁containers</span>
<span class="line">        └── 📁articles</span>
<span class="line">            └── ...</span>
<span class="line">        └── 📁base</span>
<span class="line">            └── ...</span>
<span class="line">        └── 📁home</span>
<span class="line">            └── ...</span>
<span class="line">    └── 📁content</span>
<span class="line">        └── 📁articles</span>
<span class="line">            └── 📁css</span>
<span class="line">                └── ...</span>
<span class="line">            └── ...</span>
<span class="line">        └── config.ts</span>
<span class="line">    └── 📁hooks</span>
<span class="line">        └── ...</span>
<span class="line">    └── 📁layouts</span>
<span class="line">        └── ...</span>
<span class="line">    └── 📁lib</span>
<span class="line">        └── ...</span>
<span class="line">    └── 📁pages</span>
<span class="line">        └── 📁articles</span>
<span class="line">            └── [...slug].astro</span>
<span class="line">        └── index.astro</span>
<span class="line">    └── 📁stores</span>
<span class="line">        └── ui.tsx</span>
<span class="line">    └── 📁styles</span>
<span class="line">        └── ...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="astro-會進行特殊處理的-folder" tabindex="-1"><a class="header-anchor" href="#astro-會進行特殊處理的-folder"><span>Astro 會進行特殊處理的 folder</span></a></h3><ul><li><code>src/pages</code>: Astro 處理 <a href="https://docs.astro.build/en/core-concepts/astro-pages/" target="_blank" rel="noopener noreferrer">Pages</a> 的地方，會自動把裡面的 <code>.astro</code>, <code>.md</code>, <code>.html</code> 等等根據檔案名稱作為 Route</li><li><code>src/content</code>: Astro 內存放各種 <a href="https://docs.astro.build/en/guides/content-collections/" target="_blank" rel="noopener noreferrer">Content Collections</a> 的地方，通常是 <code>.md</code>, <code>.json</code> 等等，存放在這的檔案可透過 <code>src/content/config.ts</code> 中透過 <code>defineCollection</code> 進行資源的 schema 統一設定，對資源進行檢查，並在任何地方透過內建的 <code>getCollection</code> 函數取出對應資源類型，適合用在 dynamic route 處理靜態資源時使用</li></ul><h3 id="無特殊處理的-folder" tabindex="-1"><a class="header-anchor" href="#無特殊處理的-folder"><span>無特殊處理的 folder</span></a></h3><ul><li><code>src/layouts</code>: 存放 <a href="https://docs.astro.build/en/core-concepts/layouts/" target="_blank" rel="noopener noreferrer">Layouts</a>，可提供 props 提升彈性</li><li><code>src/components</code>, <code>src/containers</code>: 通常用來存放各種 astro, jsx, vue 組件</li><li><code>src/config</code>: 存放各種 config 設定，包含 <code>tailwindcss/theme</code>, <code>site config</code> 等等</li><li><code>src/hooks</code>: 存放 react hooks</li><li><code>src/lib</code>: 存放 utils</li><li><code>src/stores</code>: 存放跨組件 state，官方推薦使用 <a href="https://docs.astro.build/en/core-concepts/sharing-state/#why-nano-stores" target="_blank" rel="noopener noreferrer">nanostores</a></li></ul><h2 id="routing-處理" tabindex="-1"><a class="header-anchor" href="#routing-處理"><span>Routing 處理</span></a></h2><ul><li><a href="https://docs.astro.build/en/core-concepts/routing/" target="_blank" rel="noopener noreferrer">Link</a> Astro 使用標準 HTML <code>&lt;a&gt;</code> 元素在路線之間導覽。沒有提供特定於框架的 <code>&lt;Link&gt;</code> 元件</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># Example: Static routes</span>
<span class="line">src/pages/index.astro        -&gt; mysite.com/</span>
<span class="line">src/pages/about.astro        -&gt; mysite.com/about</span>
<span class="line">src/pages/about/index.astro  -&gt; mysite.com/about</span>
<span class="line">src/pages/about/me.astro     -&gt; mysite.com/about/me</span>
<span class="line">src/pages/posts/1.md         -&gt; mysite.com/posts/1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="route-base" tabindex="-1"><a class="header-anchor" href="#route-base"><span>route base</span></a></h3><p>可以在 <a href="https://docs.astro.build/en/reference/configuration-reference/#base" target="_blank" rel="noopener noreferrer">Astro Configuration</a> 中使用 <code>base</code> 調整 route 的 base 路徑</p><h2 id="astro-語法" tabindex="-1"><a class="header-anchor" href="#astro-語法"><span>Astro 語法</span></a></h2><ul><li><a href="https://docs.astro.build/en/core-concepts/astro-syntax/" target="_blank" rel="noopener noreferrer">Link</a> 基本上 <code>.astro</code> 語法與 <code>jsx</code> 非常類似，最重要差別在使用 <code>class</code> 而不是 <code>className</code>，並且綁定事件需使用原生 js 的方式，因為在 <code>.astro</code> 的上部 script 中是在 server 端或 build time 執行，添加事件需使用 <code>&lt;script&gt;</code> tag 處理</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;button clicked!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="view-transition" tabindex="-1"><a class="header-anchor" href="#view-transition"><span>View Transition</span></a></h2><ul><li><a href="https://docs.astro.build/en/tutorials/add-view-transitions/" target="_blank" rel="noopener noreferrer">Link</a> 添加 Astro page 切換時過場動畫</li></ul><h3 id="update-script" tabindex="-1"><a class="header-anchor" href="#update-script"><span>Update Script</span></a></h3><ul><li><a href="https://docs.astro.build/en/tutorials/add-view-transitions/#update-scripts" target="_blank" rel="noopener noreferrer">Link</a> 使用 View Transition 時需注意，某些 script 不會像 full reload 再跑一次的問題，需要使用 Astro 提供的兩個 event 來特別處理 <code>astro:page-load</code>, <code>astro:page-swap</code></li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">loadTheme</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">const</span> lastTheme <span class="token operator">=</span></span>
<span class="line">		localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>LocalStorageKeys<span class="token punctuation">.</span>Theme<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">getDefaultTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;dark&quot;</span><span class="token punctuation">,</span> lastTheme <span class="token operator">===</span> <span class="token string">&#39;dark&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;main-content&#39;</span><span class="token punctuation">)</span><span class="token operator">?.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&#39;hidden&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;astro:page-load&#39;</span><span class="token punctuation">,</span> loadTheme<span class="token punctuation">)</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="typescript" tabindex="-1"><a class="header-anchor" href="#typescript"><span>Typescript</span></a></h2><p>使用 Astro Typescript 時需要注意以下幾種情況</p><h3 id="src-components" tabindex="-1"><a class="header-anchor" href="#src-components"><span>src/components</span></a></h3><p>雖然 <code>.astro</code> 可以處理 ts 語法，但如果在 <code>reload Astro Project</code> 或建立新的 ts 內容後，沒有引入使用到的 component，有可能會跳出 tslint error（或根據情況應該要跳出 error 但卻沒有自動 ts 驗證到），解決方式是需要將該 ts 內容（假設是一個組件），引入到一個 page 組件當中並打開該 page 檔案查看，藉此讓 Astro 編譯到該 ts 內容，只要 Astro 編譯到該內容後就會去執行相關的 ts 檢驗</p><h3 id="src-content" tabindex="-1"><a class="header-anchor" href="#src-content"><span>src/content</span></a></h3><p>另外如果是 <code>src/content</code> 的內容，如果之前完全沒有任何內容在 <code>src/content</code> 裡，突然新增內容後，需要手動跑 <code>npx astro sync</code>，告訴 Astro 去檢驗 content collection 的內容並產出對應的 ts schema type</p><h2 id="ui-frameworks" tabindex="-1"><a class="header-anchor" href="#ui-frameworks"><span>UI Frameworks</span></a></h2><p>Astro 集成了非常多常用的 <a href="https://docs.astro.build/en/guides/integrations-guide/" target="_blank" rel="noopener noreferrer">Frameworks</a>，包含 js, css</p><h3 id="install-tailwindcss" tabindex="-1"><a class="header-anchor" href="#install-tailwindcss"><span>Install Tailwindcss</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ npx astro <span class="token function">add</span> tailwind</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="install-react" tabindex="-1"><a class="header-anchor" href="#install-react"><span>Install react</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ npx astro <span class="token function">add</span> react</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="install-mdx" tabindex="-1"><a class="header-anchor" href="#install-mdx"><span>Install mdx</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ npx astro <span class="token function">add</span> mdx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,47)]))}const r=n(l,[["render",i],["__file","astro-learn.html.vue"]]),p=JSON.parse(`{"path":"/articles/memo/js/astro-learn.html","title":"Astro 入門學習筆記","lang":"zh-TW","frontmatter":{},"headers":[{"level":2,"title":"Why Astro?","slug":"why-astro","link":"#why-astro","children":[]},{"level":2,"title":"What's different","slug":"what-s-different","link":"#what-s-different","children":[{"level":3,"title":"Astro Island","slug":"astro-island","link":"#astro-island","children":[]}]},{"level":2,"title":"Install","slug":"install","link":"#install","children":[]},{"level":2,"title":"🧞 Commands","slug":"🧞-commands","link":"#🧞-commands","children":[]},{"level":2,"title":"🚀 Project Structure","slug":"🚀-project-structure","link":"#🚀-project-structure","children":[{"level":3,"title":"Astro 會進行特殊處理的 folder","slug":"astro-會進行特殊處理的-folder","link":"#astro-會進行特殊處理的-folder","children":[]},{"level":3,"title":"無特殊處理的 folder","slug":"無特殊處理的-folder","link":"#無特殊處理的-folder","children":[]}]},{"level":2,"title":"Routing 處理","slug":"routing-處理","link":"#routing-處理","children":[{"level":3,"title":"route base","slug":"route-base","link":"#route-base","children":[]}]},{"level":2,"title":"Astro 語法","slug":"astro-語法","link":"#astro-語法","children":[]},{"level":2,"title":"View Transition","slug":"view-transition","link":"#view-transition","children":[{"level":3,"title":"Update Script","slug":"update-script","link":"#update-script","children":[]}]},{"level":2,"title":"Typescript","slug":"typescript","link":"#typescript","children":[{"level":3,"title":"src/components","slug":"src-components","link":"#src-components","children":[]},{"level":3,"title":"src/content","slug":"src-content","link":"#src-content","children":[]}]},{"level":2,"title":"UI Frameworks","slug":"ui-frameworks","link":"#ui-frameworks","children":[{"level":3,"title":"Install Tailwindcss","slug":"install-tailwindcss","link":"#install-tailwindcss","children":[]},{"level":3,"title":"Install react","slug":"install-react","link":"#install-react","children":[]},{"level":3,"title":"Install mdx","slug":"install-mdx","link":"#install-mdx","children":[]}]}],"git":{"updatedTime":1704630173000,"contributors":[{"name":"johnnywang","email":"johnnywang@test.com","commits":1,"url":"https://github.com/johnnywang"}]},"filePathRelative":"articles/memo/js/astro-learn.md"}`);export{r as comp,p as data};
