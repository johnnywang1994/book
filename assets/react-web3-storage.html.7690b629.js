import{_ as c,r as p,o as i,c as l,a,d as n,e as s,f as t}from"./app.31edfc4c.js";const r={},u=n("h1",{id:"react-web3-storage",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#react-web3-storage","aria-hidden":"true"},"#"),s(" React Web3 Storage")],-1),d=t('<p>\u55E8~\u5927\u5BB6\u597D!\u6211\u662F Johnny</p><h2 id="\u524D\u8A00" tabindex="-1"><a class="header-anchor" href="#\u524D\u8A00" aria-hidden="true">#</a> \u524D\u8A00</h2><p>\u6709\u611F\u65BC Web3 \u6280\u8853\u7684\u84EC\u52C3\u767C\u5C55\uFF0C\u6700\u8FD1\u5728\u7814\u7A76\u4E00\u4E9B Web3 Storage \u7684 Client API \u5F8C\uFF0C\u6C7A\u5B9A\u52D5\u624B\u7DF4\u7FD2\u5BE6\u4F5C\u4E00\u6CE2\uFF0C\u4E5F\u9806\u4FBF\u7DF4\u7FD2\u4F7F\u7528 React v18(\u4E0D\u904E\u5176\u5BE6\u6C92\u5565\u7528\u5230\u65B0 API XDD)</p><h2 id="\u4ECB\u7D39" tabindex="-1"><a class="header-anchor" href="#\u4ECB\u7D39" aria-hidden="true">#</a> \u4ECB\u7D39</h2><p>Web3 Storage \u662F\u4E00\u7A2E\u5206\u5E03\u5F0F\u53BB\u4E2D\u5FC3\u5316\u5132\u5B58\u7684\u5DE5\u5177\uFF0C\u5E95\u5C64\u5BE6\u969B\u6574\u5408\u4E86 <code>IPFS</code>, <code>FileCoin</code> \u9019\u5169\u500B\u6280\u8853\uFF0C\u4F46\u5C0D\u65BC\u4E00\u822C\u4F7F\u7528\u8005\u800C\u8A00\uFF0C\u76F4\u63A5\u4F7F\u7528\u9019\u5169\u500B\u6280\u8853\u5206\u5E38\u8271\u96E3\uFF0C\u900F\u904E Web3 Storage \u7684\u5DE5\u5177\u6211\u5011\u53EF\u4EE5\u66F4\u65B9\u4FBF\u7684\u4F7F\u7528\u9019\u5169\u500B\u6280\u8853~</p>',5),k=n("code",null,"IPFS",-1),h={href:"https://blockcast.it/2019/10/16/let-me-tell-you-what-is-ipfs/",target:"_blank",rel:"noopener noreferrer"},b=n("h2",{id:"\u5BE6\u4F5C-web3-storage-ui-\u904E\u7A0B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5BE6\u4F5C-web3-storage-ui-\u904E\u7A0B","aria-hidden":"true"},"#"),s(" \u5BE6\u4F5C Web3 Storage UI \u904E\u7A0B")],-1),v={href:"https://react-web3-storage.herokuapp.com/",target:"_blank",rel:"noopener noreferrer"},m=n("code",null,"Web3.Storage",-1),g=n("code",null,"API Token",-1),f={href:"https://web3.storage/docs/",target:"_blank",rel:"noopener noreferrer"},_=t(`<h3 id="\u9996\u5148\u8981\u5B89\u88DD\u5B98\u65B9-api" tabindex="-1"><a class="header-anchor" href="#\u9996\u5148\u8981\u5B89\u88DD\u5B98\u65B9-api" aria-hidden="true">#</a> \u9996\u5148\u8981\u5B89\u88DD\u5B98\u65B9 API</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> web3.storage
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u7522\u751F-client-instance" tabindex="-1"><a class="header-anchor" href="#\u7522\u751F-client-instance" aria-hidden="true">#</a> \u7522\u751F Client Instance</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Web3Storage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;web3.storage&#39;</span>

<span class="token keyword">function</span> <span class="token function">getAccessToken</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">WEB3STORAGE_TOKEN</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">makeStorageClient</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Web3Storage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">token</span><span class="token operator">:</span> <span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5132\u5B58\u4E0A\u50B3\u6A94\u6848" tabindex="-1"><a class="header-anchor" href="#\u5132\u5B58\u4E0A\u50B3\u6A94\u6848" aria-hidden="true">#</a> \u5132\u5B58\u4E0A\u50B3\u6A94\u6848</h3><p>\u900F\u904E <code>put</code> \u65B9\u6CD5\u4E0A\u50B3\u6A94\u6848\u5F8C\uFF0C\u6703\u7372\u5F97\u4E00\u500B cid\uFF0C\u800C\u8A72 cid \u5C31\u662F\u4EE3\u8868\u6A94\u6848\u7684\u4F4D\u7F6E\uFF0C\u53EF\u4EE5\u900F\u904E\u9019\u500B\u683C\u5F0F\u7D44\u5408\u51FA http url \u6253\u958B~ <code>https://dweb.link/ipfs/{cid}</code></p>`,6),w={href:"https://web3.storage/docs/reference/js-client-library/#parameters",target:"_blank",rel:"noopener noreferrer"},y=t(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// files \u53EF\u4EE5\u662F\u591A\u500B\u6A94\u6848\uFF0Coptions \u53EF\u4EE5\u8A2D\u5B9A\u662F\u5426\u6253\u5305\u6210\u4E00\u500B\u8CC7\u6599\u593E</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">storeFiles</span> <span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">makeStorageClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> cid <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;stored files with cid:&#39;</span><span class="token punctuation">,</span> cid<span class="token punctuation">)</span>
  <span class="token keyword">return</span> cid
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7372\u53D6\u6307\u5B9A-cid-\u5167\u6A94\u6848" tabindex="-1"><a class="header-anchor" href="#\u7372\u53D6\u6307\u5B9A-cid-\u5167\u6A94\u6848" aria-hidden="true">#</a> \u7372\u53D6\u6307\u5B9A cid \u5167\u6A94\u6848</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>rootCid<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Web3Response</span>
<span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">files</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Web3File[]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> files<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>file<span class="token punctuation">.</span>cid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>file<span class="token punctuation">.</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u689D\u5217\u5E33\u865F\u4E0B\u6240\u6709-cid-\u7684\u6E05\u55AE" tabindex="-1"><a class="header-anchor" href="#\u689D\u5217\u5E33\u865F\u4E0B\u6240\u6709-cid-\u7684\u6E05\u55AE" aria-hidden="true">#</a> \u689D\u5217\u5E33\u865F\u4E0B\u6240\u6709 cid \u7684\u6E05\u55AE</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Return the names of 10 uploads</span>
<span class="token keyword">const</span> uploadNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> client<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">maxResults</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  uploadNames<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u522A\u9664-cid-\u6A94\u6848" tabindex="-1"><a class="header-anchor" href="#\u522A\u9664-cid-\u6A94\u6848" aria-hidden="true">#</a> \u522A\u9664 cid \u6A94\u6848</h3><p>\u56E0\u70BA\u5B98\u65B9\u76EE\u524D\u4E26\u672A\u63D0\u4F9B API Token \u80FD\u529B\u9032\u884C\u6A94\u6848\u7684\u522A\u9664\uFF0C\u7D93\u904E\u7814\u7A76\u5F8C\u767C\u73FE\uFF0C\u5B98\u65B9\u7684 Web UI \u5728\u547C\u53EB HTTP API \u6642\u5FC5\u9808\u5E36\u8457 <code>Authorization</code>\uFF0C\u800C\u8A72\u9A57\u8B49 <code>idToken</code> \u662F\u7531 <code>Magic Login</code> \u5DE5\u5177\u63D0\u4F9B\uFF0C\u4E5F\u5C31\u8868\u793A\uFF0C\u5982\u679C\u8981\u522A\u9664\u6A94\u6848\uFF0C\u6211\u5011\u5FC5\u9808\u767B\u5165\u5F8C\u53D6\u5F97 <code>idToken</code> \u624D\u80FD\u9032\u884C\u64CD\u4F5C\uFF0C\u4E5F\u8A31\u5728\u672A\u4F86\u5B98\u65B9\u6703\u63A8\u51FA\u76F8\u95DC\u7684 Delete method \u4E5F\u8AAA\u4E0D\u5B9A~</p>`,7),x={href:"https://github.com/johnnywang1994/react-web3-storage.git",target:"_blank",rel:"noopener noreferrer"},S=n("p",null,"\u4ECA\u5929\u7684\u5206\u4EAB\u5C31\u5230\u9019\u908A\uFF0C\u90A3\u6211\u5011\u4E0B\u7BC7\u6587\u7AE0\u898B\u62C9~",-1),j=n("h2",{id:"\u53C3\u8003",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u53C3\u8003","aria-hidden":"true"},"#"),s(" \u53C3\u8003")],-1),I={href:"https://web3.storage/",target:"_blank",rel:"noopener noreferrer"},W={href:"https://github.com/johnnywang1994/react-web3-storage.git",target:"_blank",rel:"noopener noreferrer"};function P(A,T){const o=p("SocialBlock"),e=p("ExternalLinkIcon");return i(),l("div",null,[u,a(o,{hashtags:"react,javascript,web3,web3storage,antd"}),d,n("p",null,[s("\u6709\u95DC "),k,s(" \u7684\u4ECB\u7D39\u53EF\u4EE5\u770B\u9019\u908A - "),n("a",h,[s("IPFS"),a(e)])]),b,n("p",null,[s("\u9019\u6B21\u5BE6\u4F5C\u7684\u7D50\u679C\u5728\u9019-"),n("a",v,[s("React Web3 Storage UI"),a(e)]),s("\uFF0C\u53EF\u4EE5\u900F\u904E\u8F38\u5165\u5728 "),m,s(" \u5B98\u65B9\u767B\u5165\u5F8C\u7522\u751F\u7684 "),g,s(" \u4F7F\u7528\uFF0C\u6216\u662F\u76F4\u63A5\u9EDE\u64CA\u756B\u9762\u53F3\u4E0A\u7684\u4FE1\u7BB1\u767B\u5165\uFF0C\u9019\u500B\u4FE1\u7BB1\u767B\u5165\u7684\u4E32\u63A5\u8207\u5B98\u65B9\u4F7F\u7528\u7684\u662F\u540C\u4E00\u500B Public Key\uFF0C\u5E33\u865F\u672C\u8EAB\u662F\u5171\u7528\u7684~")]),n("p",null,[s("\u5BE6\u4F5C\u904E\u7A0B\u56E0\u70BA\u5BE6\u5728\u727D\u6D89\u592A\u591A"),n("a",f,[s("\u5B98\u65B9 API"),a(e)]),s("\u64CD\u4F5C\uFF0C\u9019\u908A\u50C5\u7C21\u55AE\u4ECB\u7D39\u6700\u6838\u5FC3\u7684 API \u8ABF\u7528")]),_,n("ul",null,[n("li",null,[n("a",w,[s("Options"),a(e)])])]),y,n("p",null,[s("\u6709\u8208\u8DA3\u7684\u670B\u53CB\u5011\u53EF\u4EE5\u53C3\u89C0"),n("a",x,[s("\u6211\u7684\u6E90\u78BC"),a(e)]),s("\u770B\u770B\u779C~")]),S,a(o,{hashtags:"react,javascript,web3,web3storage,antd"}),j,n("ul",null,[n("li",null,[n("a",I,[s("Web3 Storage"),a(e)])]),n("li",null,[n("a",W,[s("Source Code"),a(e)])])])])}const N=c(r,[["render",P],["__file","react-web3-storage.html.vue"]]);export{N as default};
