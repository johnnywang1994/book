import{_ as e,c as i,d as l,o as s}from"./app-Q3VQkFZX.js";const n={};function t(c,a){return s(),i("div",null,a[0]||(a[0]=[l(`<h1 id="靜態資源優化" tabindex="-1"><a class="header-anchor" href="#靜態資源優化"><span>靜態資源優化</span></a></h1><h2 id="圖片" tabindex="-1"><a class="header-anchor" href="#圖片"><span>圖片</span></a></h2><h3 id="jpg-png-gif-webp-應用場景" tabindex="-1"><a class="header-anchor" href="#jpg-png-gif-webp-應用場景"><span>jpg, png, gif, webp 應用場景</span></a></h3><ul><li>jpg: 顏色豐富照片、banner 圖、結構不規則圖形</li><li>png: 純色、透明、線條、圖標、邊緣清晰</li><li>gif: 動圖、圖標</li><li>webp: 圖形、半透明圖</li></ul><h3 id="響應式圖片-srcset" tabindex="-1"><a class="header-anchor" href="#響應式圖片-srcset"><span>響應式圖片(srcset)</span></a></h3><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img-320w.jpg,img-640w.jpg 2x, img-960w.jpg 3x<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="逐步載入" tabindex="-1"><a class="header-anchor" href="#逐步載入"><span>逐步載入</span></a></h3><ul><li>LQIP(low quality image placeholder)、SQIP(SVG quality image placeholder)</li></ul><h3 id="server-side-自動圖片優化-尺寸、格式、壓縮" tabindex="-1"><a class="header-anchor" href="#server-side-自動圖片優化-尺寸、格式、壓縮"><span>Server Side 自動圖片優化(尺寸、格式、壓縮)</span></a></h3><h2 id="文件" tabindex="-1"><a class="header-anchor" href="#文件"><span>文件</span></a></h2><h3 id="html" tabindex="-1"><a class="header-anchor" href="#html"><span>HTML</span></a></h3><ul><li>減少 Nested HTML</li><li>減少 DOM</li></ul><h3 id="css" tabindex="-1"><a class="header-anchor" href="#css"><span>CSS</span></a></h3><ul><li>放置 header 頭部</li><li>減少 expensive 屬性（偽類：<code>nth-child</code>，定位：<code>position: fixed</code>）</li><li>減少樣式層級（<code>div ul li span i { color: red; }</code>）</li><li>避免使用內存佔用過多的屬性（<code>text-indent: -99999px</code>）</li><li>避免使用耗電量大的屬性（CSS 3D Transform, CSS3 Transition, Opacity）</li><li>盡量避免使用 CSS expression <ul><li><code>background-color: expression((new Date()).getHours()%2 ? &quot;#FFF&quot; : &quot;#000&quot; )</code></li></ul></li><li>盡量避免使用通配 selector（<code>ul &gt; li</code>）</li><li>盡量避免類正則的 selector（<code>*= |= ^= $=</code>）</li><li>使用 external CSS，減少 <code>@import</code></li><li>字體部署在 CDN 上，或用 base64 保存在 CSS 中，透過 localStorage 進行 cache</li><li>盡量避免 CSS 同時動畫、延遲動畫初始化、結合 SVG</li></ul><h3 id="js" tabindex="-1"><a class="header-anchor" href="#js"><span>JS</span></a></h3><ul><li>當需要時再優化</li><li>考慮可維護性（考慮整個團隊）</li><li>放 body 尾部避免阻塞渲染</li><li>盡量使用 id selector</li><li>避免使用 eval</li><li>使用事件節流、委託</li><li>避免大量 JS 動畫</li><li>盡量使用 CSS3, Canvas 動畫</li><li>合理使用 requestAnimationFrame 取代 setTimeout, setInterval</li><li>cache DOM</li><li>cache AJAX</li></ul><h3 id="cache" tabindex="-1"><a class="header-anchor" href="#cache"><span>Cache</span></a></h3><ul><li>Cookie: 會話管理</li><li>sessionStorage: 頁面應用間傳值</li><li>localStorage: 緩存靜態文件CSS/JS、緩存不常變更的 API data、儲存地理位置資訊、</li><li>indexedDB: 客戶端大量結構化資料儲存、離線使用、少修改常訪問</li></ul><h3 id="避免重繪" tabindex="-1"><a class="header-anchor" href="#避免重繪"><span>避免重繪</span></a></h3><ul><li>避免使用 Table、Float 佈局</li><li>圖片盡量設置 width, height</li><li>使用 viewport 限制螢幕縮放級別</li><li>避免頻繁操作 DOM, style 屬性（一次性操作較好，現代框架 diff 算法主要就在做這件事）</li><li>使用 fragment，避免在 DOM tree 直接操作</li></ul><h3 id="打包優化" tabindex="-1"><a class="header-anchor" href="#打包優化"><span>打包優化</span></a></h3><ul><li>定位大體積 module（安裝分析套件）</li><li>刪除沒用到的依賴</li><li>production 依賴與 dev 環境分離</li><li>避免使用造成 tree shaking 失敗的語法（<code>export default</code>）</li></ul>`,22)]))}const r=e(n,[["render",t]]),d=JSON.parse('{"path":"/articles/memo/fe-performance/static.html","title":"靜態資源優化","lang":"zh-TW","frontmatter":{},"git":{"updatedTime":1721122771000,"contributors":[{"name":"johnnywang","username":"johnnywang","email":"johnnywang@test.com","commits":1,"url":"https://github.com/johnnywang"}],"changelog":[{"hash":"fe140b6c58ff95658ca7b3af6c30d3fa536cd537","time":1721122771000,"email":"johnnywang@test.com","author":"johnnywang","message":"UPD: add fe performance"}]},"filePathRelative":"articles/memo/fe-performance/static.md"}');export{r as comp,d as data};
