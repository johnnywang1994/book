import{_ as o,r as i,o as c,c as l,d as n,e as s,a,f as t}from"./app-1412ef0d.js";const d={},r=t(`<h1 id="astro-入門學習筆記" tabindex="-1"><a class="header-anchor" href="#astro-入門學習筆記" aria-hidden="true">#</a> Astro 入門學習筆記</h1><p>這篇是我使用 Astro <code>v4.0.8</code> 製作一個 Vuepress-like 的部落格後，整理的一篇學習筆記，供日後使用到的時候可以快速複習使用</p><h2 id="why-astro" tabindex="-1"><a class="header-anchor" href="#why-astro" aria-hidden="true">#</a> Why Astro?</h2><p>Astro 是用於建立內容驅動網站（例如部落格、行銷和電子商務）的 Web 框架，與其他框架相比，該架構可減少 JavaScript 開銷和複雜性。</p><h2 id="what-s-different" tabindex="-1"><a class="header-anchor" href="#what-s-different" aria-hidden="true">#</a> What&#39;s different</h2><ul><li>Astro 以內容展示為主要能力，相較於大多數的框架來說，建構複雜的內容呈現時所消耗的性能大幅減少</li><li>內建集成 React, Vue 及其他前端框架能力</li><li>Route handling 內建路由處理</li></ul><h3 id="astro-island" tabindex="-1"><a class="header-anchor" href="#astro-island" aria-hidden="true">#</a> Astro Island</h3><p>Astro 開創並推廣了一種稱為「Islands」的前端架構，幫助您避免單一的 JavaScript 模式並自動從頁面中剝離所有非必要的 JavaScript，從而提高前端效能，透過 <code>.astro</code> 的編譯能輕鬆做到在單一頁面中的不同元件，使用多種的渲染方式 <code>interactive</code>, <code>static:html</code>, \`\` 等等</p><h2 id="install" tabindex="-1"><a class="header-anchor" href="#install" aria-hidden="true">#</a> Install</h2><ul><li>新建專案</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">yarn</span> create astro
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="🧞-commands" tabindex="-1"><a class="header-anchor" href="#🧞-commands" aria-hidden="true">#</a> 🧞 Commands</h2><table><thead><tr><th style="text-align:left;">Command</th><th style="text-align:left;">Action</th></tr></thead><tbody><tr><td style="text-align:left;"><code>npm install</code></td><td style="text-align:left;">Installs dependencies</td></tr><tr><td style="text-align:left;"><code>npm run dev</code></td><td style="text-align:left;">Starts local dev server at <code>localhost:4321</code></td></tr><tr><td style="text-align:left;"><code>npm run build</code></td><td style="text-align:left;">Build your production site to <code>./dist/</code></td></tr><tr><td style="text-align:left;"><code>npm run preview</code></td><td style="text-align:left;">Preview your build locally, before deploying</td></tr><tr><td style="text-align:left;"><code>npm run astro ...</code></td><td style="text-align:left;">Run CLI commands like <code>astro add</code>, <code>astro check</code></td></tr><tr><td style="text-align:left;"><code>npm run sync ...</code></td><td style="text-align:left;">Run CLI commands <code>astro sync</code></td></tr><tr><td style="text-align:left;"><code>npm run astro -- --help</code></td><td style="text-align:left;">Get help using the Astro CLI</td></tr></tbody></table><h2 id="🚀-project-structure" tabindex="-1"><a class="header-anchor" href="#🚀-project-structure" aria-hidden="true">#</a> 🚀 Project Structure</h2><ul><li><code>astro.config.mjs</code> - Astro configuration 檔案.</li><li><code>public/*</code>: unprocessed assets(fonts, icons, etc.)</li><li><code>src/*</code>: 專案 source code</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>└── 📁src
    └── 📁components
        └── Image.tsx
        └── Link.astro
        └── Link.tsx
        └── ...
    └── 📁config
        └── ...
    └── 📁containers
        └── 📁articles
            └── ...
        └── 📁base
            └── ...
        └── 📁home
            └── ...
    └── 📁content
        └── 📁articles
            └── 📁css
                └── ...
            └── ...
        └── config.ts
    └── 📁hooks
        └── ...
    └── 📁layouts
        └── ...
    └── 📁lib
        └── ...
    └── 📁pages
        └── 📁articles
            └── [...slug].astro
        └── index.astro
    └── 📁stores
        └── ui.tsx
    └── 📁styles
        └── ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="astro-會進行特殊處理的-folder" tabindex="-1"><a class="header-anchor" href="#astro-會進行特殊處理的-folder" aria-hidden="true">#</a> Astro 會進行特殊處理的 folder</h3>`,17),p=n("code",null,"src/pages",-1),u={href:"https://docs.astro.build/en/core-concepts/astro-pages/",target:"_blank",rel:"noopener noreferrer"},h=n("code",null,".astro",-1),v=n("code",null,".md",-1),m=n("code",null,".html",-1),b=n("code",null,"src/content",-1),k={href:"https://docs.astro.build/en/guides/content-collections/",target:"_blank",rel:"noopener noreferrer"},g=n("code",null,".md",-1),f=n("code",null,".json",-1),_=n("code",null,"src/content/config.ts",-1),x=n("code",null,"defineCollection",-1),y=n("code",null,"getCollection",-1),w=n("h3",{id:"無特殊處理的-folder",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#無特殊處理的-folder","aria-hidden":"true"},"#"),s(" 無特殊處理的 folder")],-1),A=n("code",null,"src/layouts",-1),L={href:"https://docs.astro.build/en/core-concepts/layouts/",target:"_blank",rel:"noopener noreferrer"},I=t("<li><code>src/components</code>, <code>src/containers</code>: 通常用來存放各種 astro, jsx, vue 組件</li><li><code>src/config</code>: 存放各種 config 設定，包含 <code>tailwindcss/theme</code>, <code>site config</code> 等等</li><li><code>src/hooks</code>: 存放 react hooks</li><li><code>src/lib</code>: 存放 utils</li>",4),C=n("code",null,"src/stores",-1),T={href:"https://docs.astro.build/en/core-concepts/sharing-state/#why-nano-stores",target:"_blank",rel:"noopener noreferrer"},j=n("h2",{id:"routing-處理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#routing-處理","aria-hidden":"true"},"#"),s(" Routing 處理")],-1),q={href:"https://docs.astro.build/en/core-concepts/routing/",target:"_blank",rel:"noopener noreferrer"},S=n("code",null,"<a>",-1),E=n("code",null,"<Link>",-1),V=t(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Example: Static routes
src/pages/index.astro        -&gt; mysite.com/
src/pages/about.astro        -&gt; mysite.com/about
src/pages/about/index.astro  -&gt; mysite.com/about
src/pages/about/me.astro     -&gt; mysite.com/about/me
src/pages/posts/1.md         -&gt; mysite.com/posts/1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="route-base" tabindex="-1"><a class="header-anchor" href="#route-base" aria-hidden="true">#</a> route base</h3>`,2),B={href:"https://docs.astro.build/en/reference/configuration-reference/#base",target:"_blank",rel:"noopener noreferrer"},R=n("code",null,"base",-1),N=n("h2",{id:"astro-語法",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#astro-語法","aria-hidden":"true"},"#"),s(" Astro 語法")],-1),P={href:"https://docs.astro.build/en/core-concepts/astro-syntax/",target:"_blank",rel:"noopener noreferrer"},$=n("code",null,".astro",-1),J=n("code",null,"jsx",-1),W=n("code",null,"class",-1),F=n("code",null,"className",-1),M=n("code",null,".astro",-1),U=n("code",null,"<script>",-1),D=t(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">handleClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;button clicked!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="view-transition" tabindex="-1"><a class="header-anchor" href="#view-transition" aria-hidden="true">#</a> View Transition</h2>`,2),G={href:"https://docs.astro.build/en/tutorials/add-view-transitions/",target:"_blank",rel:"noopener noreferrer"},H=n("h3",{id:"update-script",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#update-script","aria-hidden":"true"},"#"),s(" Update Script")],-1),K={href:"https://docs.astro.build/en/tutorials/add-view-transitions/#update-scripts",target:"_blank",rel:"noopener noreferrer"},z=n("code",null,"astro:page-load",-1),O=n("code",null,"astro:page-swap",-1),Q=t(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token function-variable function">loadTheme</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> lastTheme <span class="token operator">=</span>
		localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>LocalStorageKeys<span class="token punctuation">.</span>Theme<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">getDefaultTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;dark&quot;</span><span class="token punctuation">,</span> lastTheme <span class="token operator">===</span> <span class="token string">&#39;dark&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;main-content&#39;</span><span class="token punctuation">)</span><span class="token operator">?.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&#39;hidden&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;astro:page-load&#39;</span><span class="token punctuation">,</span> loadTheme<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="typescript" tabindex="-1"><a class="header-anchor" href="#typescript" aria-hidden="true">#</a> Typescript</h2><p>使用 Astro Typescript 時需要注意以下幾種情況</p><h3 id="src-components" tabindex="-1"><a class="header-anchor" href="#src-components" aria-hidden="true">#</a> src/components</h3><p>雖然 <code>.astro</code> 可以處理 ts 語法，但如果在 <code>reload Astro Project</code> 或建立新的 ts 內容後，沒有引入使用到的 component，有可能會跳出 tslint error（或根據情況應該要跳出 error 但卻沒有自動 ts 驗證到），解決方式是需要將該 ts 內容（假設是一個組件），引入到一個 page 組件當中並打開該 page 檔案查看，藉此讓 Astro 編譯到該 ts 內容，只要 Astro 編譯到該內容後就會去執行相關的 ts 檢驗</p><h3 id="src-content" tabindex="-1"><a class="header-anchor" href="#src-content" aria-hidden="true">#</a> src/content</h3><p>另外如果是 <code>src/content</code> 的內容，如果之前完全沒有任何內容在 <code>src/content</code> 裡，突然新增內容後，需要手動跑 <code>npx astro sync</code>，告訴 Astro 去檢驗 content collection 的內容並產出對應的 ts schema type</p><h2 id="ui-frameworks" tabindex="-1"><a class="header-anchor" href="#ui-frameworks" aria-hidden="true">#</a> UI Frameworks</h2>`,8),X={href:"https://docs.astro.build/en/guides/integrations-guide/",target:"_blank",rel:"noopener noreferrer"},Y=t(`<h3 id="install-tailwindcss" tabindex="-1"><a class="header-anchor" href="#install-tailwindcss" aria-hidden="true">#</a> Install Tailwindcss</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ npx astro <span class="token function">add</span> tailwind
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="install-react" tabindex="-1"><a class="header-anchor" href="#install-react" aria-hidden="true">#</a> Install react</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ npx astro <span class="token function">add</span> react
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="install-mdx" tabindex="-1"><a class="header-anchor" href="#install-mdx" aria-hidden="true">#</a> Install mdx</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ npx astro <span class="token function">add</span> mdx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,6);function Z(nn,sn){const e=i("ExternalLinkIcon");return c(),l("div",null,[r,n("ul",null,[n("li",null,[p,s(": Astro 處理 "),n("a",u,[s("Pages"),a(e)]),s(" 的地方，會自動把裡面的 "),h,s(", "),v,s(", "),m,s(" 等等根據檔案名稱作為 Route")]),n("li",null,[b,s(": Astro 內存放各種 "),n("a",k,[s("Content Collections"),a(e)]),s(" 的地方，通常是 "),g,s(", "),f,s(" 等等，存放在這的檔案可透過 "),_,s(" 中透過 "),x,s(" 進行資源的 schema 統一設定，對資源進行檢查，並在任何地方透過內建的 "),y,s(" 函數取出對應資源類型，適合用在 dynamic route 處理靜態資源時使用")])]),w,n("ul",null,[n("li",null,[A,s(": 存放 "),n("a",L,[s("Layouts"),a(e)]),s("，可提供 props 提升彈性")]),I,n("li",null,[C,s(": 存放跨組件 state，官方推薦使用 "),n("a",T,[s("nanostores"),a(e)])])]),j,n("ul",null,[n("li",null,[n("a",q,[s("Link"),a(e)]),s(" Astro 使用標準 HTML "),S,s(" 元素在路線之間導覽。沒有提供特定於框架的 "),E,s(" 元件")])]),V,n("p",null,[s("可以在 "),n("a",B,[s("Astro Configuration"),a(e)]),s(" 中使用 "),R,s(" 調整 route 的 base 路徑")]),N,n("ul",null,[n("li",null,[n("a",P,[s("Link"),a(e)]),s(" 基本上 "),$,s(" 語法與 "),J,s(" 非常類似，最重要差別在使用 "),W,s(" 而不是 "),F,s("，並且綁定事件需使用原生 js 的方式，因為在 "),M,s(" 的上部 script 中是在 server 端或 build time 執行，添加事件需使用 "),U,s(" tag 處理")])]),D,n("ul",null,[n("li",null,[n("a",G,[s("Link"),a(e)]),s(" 添加 Astro page 切換時過場動畫")])]),H,n("ul",null,[n("li",null,[n("a",K,[s("Link"),a(e)]),s(" 使用 View Transition 時需注意，某些 script 不會像 full reload 再跑一次的問題，需要使用 Astro 提供的兩個 event 來特別處理 "),z,s(", "),O])]),Q,n("p",null,[s("Astro 集成了非常多常用的 "),n("a",X,[s("Frameworks"),a(e)]),s("，包含 js, css")]),Y])}const an=o(d,[["render",Z],["__file","astro-learn.html.vue"]]);export{an as default};
