import{_ as t,r as e,o as p,c as o,a as s,d as a,e as c,f as l}from"./app.0353c691.js";const i={},u=a("h1",{id:"web-component-\u5B78\u7FD2\u7B46\u8A18",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#web-component-\u5B78\u7FD2\u7B46\u8A18","aria-hidden":"true"},"#"),c(" Web Component \u5B78\u7FD2\u7B46\u8A18")],-1),d=l(`<p>Web component \u4E0D\u662F\u4E00\u500B\u6846\u67B6\uFF0C\u53EA\u662F\u4E00\u7A2E\u65B0\u7684\u700F\u89BD\u5668\u5E95\u5C64 API\uFF0C\u5141\u8A31\u4F7F\u7528\u8005\u5275\u9020\u53EF\u91CD\u7528\u7684\u81EA\u5B9A\u7FA9\u7D44\u4EF6\u3002</p><h2 id="\u6280\u8853\u67B6\u69CB" tabindex="-1"><a class="header-anchor" href="#\u6280\u8853\u67B6\u69CB" aria-hidden="true">#</a> \u6280\u8853\u67B6\u69CB</h2><p>\u4E3B\u8981\u5305\u542B\u4E09\u5927\u90E8\u5206\uFF0C\u5206\u5225\u5982\u4E0B\uFF1A</p><ol><li>Custom elements:</li></ol><blockquote><p>\u7531\u4E00\u7CFB\u5217\u7684 APIs \u7D44\u6210\uFF0C\u5141\u8A31\u7528\u6236\u81EA\u5B9A\u7FA9\u7D44\u4EF6\uFF0C\u4E26\u53EF\u91CD\u8907\u4F7F\u7528\u65BC\u5F8C\u7E8C\u958B\u767C\u3002</p></blockquote><ol start="2"><li>Shadow DOM</li></ol><blockquote><p>\u7531\u4E00\u7CFB\u5217\u7684 APIs \u7D44\u6210\uFF0C\u53EF\u4EE5\u5C0D\u6307\u5B9A DOM \u7BC0\u9EDE\u6DFB\u52A0 shadow\uFF0C\u4F7F\u5176\u5F9E\u8207\u539F document \u5206\u96E2\u6E32\u67D3\uFF0C\u9054\u5230\u7D44\u4EF6\u79C1\u6709\u5316\u3002</p></blockquote><ol start="3"><li>HTML templates</li></ol><blockquote><p><code>template</code>, <code>slot</code> \u6A19\u7C64\uFF0C\u8B93\u4F7F\u7528\u8005\u5B9A\u7FA9\u53EF\u91CD\u8907\u7528\u7684\u6A21\u677F\uFF0C\u8A72\u6A21\u677F\u672C\u8EAB\u6703\u88AB\u96B1\u85CF\u800C\u4E0D\u6703\u986F\u793A\u3002</p></blockquote><h2 id="\u904B\u7528\u7DF4\u7FD2" tabindex="-1"><a class="header-anchor" href="#\u904B\u7528\u7DF4\u7FD2" aria-hidden="true">#</a> \u904B\u7528\u7DF4\u7FD2</h2><h4 id="custom-element" tabindex="-1"><a class="header-anchor" href="#custom-element" aria-hidden="true">#</a> Custom Element</h4><p>Syntax:<br><code>customElements.define(name, constructor, options);</code></p><p>\u6BCF\u500B custom element \u90FD\u662F\u4E00\u500B\u7531 HTMLElement \u7E7C\u627F\u7684\u985E\uFF0C\u5B9A\u7FA9\u4E4B\u5F8C\u53EF\u4EE5\u4F7F\u7528 <code>new</code> \u4F86\u5275\u5EFA\u65B0\u7684 element\uFF0C\u6216\u662F\u76F4\u63A5\u5728 html \u4E2D\u63D2\u5165\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5275\u5EFA Custom Element</span>
<span class="token keyword">class</span> <span class="token class-name">MyButton</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u4E00\u5B9A\u8981\u5148\u7E7C\u627F</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this \u6307\u5411\u5275\u5EFA\u7684 dom \u7BC0\u9EDE</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&lt;button&gt;\u6309\u9215&lt;/button&gt;&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-button&#39;</span><span class="token punctuation">,</span> MyButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0A\u5373\u7C21\u55AE\u5275\u5EFA\u4E86\u4E00\u500B\u5143\u7D20\uFF0C\u5F8C\u7E8C\u53EF\u4EE5\u50CF\u539F\u751F\u6A19\u7C64\u4E00\u6A23\u4F7F\u7528\u5982\u4E0B\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="shadow-root" tabindex="-1"><a class="header-anchor" href="#shadow-root" aria-hidden="true">#</a> Shadow Root</h4><p>Syntax:<br><code>var shadowroot = element.attachShadow({ mode: &#39;open&#39; });</code></p><p>\u5C0D\u6307\u5B9A\u5143\u7D20\u6DFB\u52A0 shadow\uFF0C\u8A72 shadow \u4F4D\u5728\u6307\u5B9A\u5143\u7D20\u4E2D\uFF0C\u5176\u4E2D\u6240\u5305\u542B\u7684\u6240\u6709\u7BC0\u9EDE\u5C07\u79C1\u6709\u5316\uFF0C\u5167\u90E8\u6A23\u5F0F\u4E0D\u6703\u5F71\u97FF\u5230\u5916\u90E8\u3002\u5177\u9AD4\u5BE6\u8E10\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyButton</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5275\u5EFA this \u5167\u90E8\u7684 shadow root</span>
    <span class="token keyword">const</span> shadowRoot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5C07\u6240\u6709\u5C0D this \u7684\u52D5\u4F5C\u8F49\u70BA\u5C0D shadow root \u9032\u884C</span>
    shadowRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&lt;button&gt;\u6309\u9215&lt;/button&gt;&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6253\u958B console \u5C07\u770B\u5230\u5982\u4E0B\u7684\u7BC0\u9EDE</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-button</span><span class="token punctuation">&gt;</span></span>
  #shadow-root(open)
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>\u6309\u9215<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="html-templates" tabindex="-1"><a class="header-anchor" href="#html-templates" aria-hidden="true">#</a> HTML templates</h4><p>Syntax:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-temp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Default Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Default Content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u7C21\u55AE\u5B9A\u7FA9\u5982\u4E0A\u5F8C\uFF0C\u5C07\u5176\u904B\u7528\u5728 custom element \u4E2D\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-element&#39;</span><span class="token punctuation">,</span> 
  <span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#my-temp&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> templateContent <span class="token operator">=</span> template<span class="token punctuation">.</span>content<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>templateContent<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u9032\u968E-\u5C6C\u6027\u76E3\u807D-observedattributes" tabindex="-1"><a class="header-anchor" href="#\u9032\u968E-\u5C6C\u6027\u76E3\u807D-observedattributes" aria-hidden="true">#</a> \u9032\u968E-\u5C6C\u6027\u76E3\u807D observedAttributes</h2><p>Web component \u6709\u63D0\u4F9B\u8A31\u591A\u5E95\u5C64\u8ABF\u7528\u7684 API\uFF0C\u8B93\u7528\u6236\u80FD\u5920\u5177\u6709\u9AD8\u5EA6\u4F7F\u7528\u7684\u5F48\u6027\uFF0C\u5176\u4E2D\u4E00\u500B\u597D\u7528\u7684\u529F\u80FD\u5C31\u662F\u5C6C\u6027\u503C\u76E3\u807D\uFF0C\u85C9\u7531\u76E3\u807D\u5C6C\u6027\uFF0C\u9032\u800C\u5728\u5C6C\u6027\u88AB\u6539\u8B8A\u6642\u8ABF\u7528\u5C0D\u61C9\u7684\u52D5\u4F5C\u3002</p><p>\u9996\u5148\u4F7F\u7528 <code>observedAttributes</code> \u4F86\u5B9A\u7FA9\u9700\u8981\u88AB\u76E3\u807D\u7684\u5C6C\u6027\u968A\u5217\uFF0C\u4E4B\u5F8C\u5728 <code>attributeChangedCallback</code> \u9019\u500B\u65B9\u6CD5\u88E1\u5B9A\u7FA9\u5C6C\u6027\u6539\u8B8A\u6642\u8ABF\u7528\u7684\u56DE\u8ABF\u51FD\u6578\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyText</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;\u9019\u662F\u96B1\u85CF\u5167\u5BB9&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">observedAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&#39;hide&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&#39;hide&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">===</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#39;my-text&#39;</span><span class="token punctuation">,</span> MyText<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-text</span> <span class="token attr-name">hide</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-text</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,32);function k(r,m){const n=e("SocialBlock");return p(),o("div",null,[u,s(n,{hashtags:"javascript,webcomponent"}),d,s(n,{hashtags:"javascript,webcomponent"})])}const b=t(i,[["render",k],["__file","web-component.html.vue"]]);export{b as default};
