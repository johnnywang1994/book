import{_ as t,r as e,o as p,c as o,a as s,d as a,e as c,f as i}from"./app.68a6495c.js";const l={},u=a("h1",{id:"vuex-\u5B78\u7FD2\u7B46\u8A18",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#vuex-\u5B78\u7FD2\u7B46\u8A18","aria-hidden":"true"},"#"),c(" Vuex \u5B78\u7FD2\u7B46\u8A18")],-1),r=i(`<p>\u672C\u7BC7\u662F\u6211\u7684\u5C0D Vue2 \u6642\u671F\u7684 Vuex \u5B78\u7FD2\u7B46\u8A18\uFF0C\u6703\u8207 Redux \u505A\u6BD4\u8F03\uFF0C\u4E92\u76F8\u6BD4\u5C0D\u589E\u52A0\u8A18\u61B6\u6548\u679C\u3002</p><h2 id="store-state-\u7684\u5EFA\u7ACB" tabindex="-1"><a class="header-anchor" href="#store-state-\u7684\u5EFA\u7ACB" aria-hidden="true">#</a> Store, State \u7684\u5EFA\u7ACB</h2><p>\u9996\u5148\u8B1B\u8B1B\u5EFA\u7ACBstore \u7684\u65B9\u5F0F\uFF0C\u5148\u8AAA Redux\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span>

<span class="token keyword">const</span> todoStore <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initState<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vuex\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Redux \u662F\u4F7F\u7528 reducer \u53BB\u5275\u5EFA\u4E0D\u540C\u7684 store\uFF0C\u4E26\u5206\u958B\u7DAD\u8B77\u7BA1\u7406\u6BCF\u500B store\u3002</p><p>Vuex \u7684 mutations \u5C31\u662F Redux \u7684 reducer\uFF0C\u88E1\u9762\u7684 mutation \u5176\u5BE6\u5C31\u662F reducer \u88E1\u5224\u65B7\u7684 action type\uFF0Cstate \u5C31\u662F createStore \u7684\u7B2C\u4E8C\u500B\u53C3\u6578\uFF0C\u4E5F\u5C31\u662F\u521D\u59CB\u5316\u7684 InitState\u3002</p><h2 id="getters" tabindex="-1"><a class="header-anchor" href="#getters" aria-hidden="true">#</a> Getters</h2><p>\u63A5\u6536\u5169\u500B\u53C3\u6578\u8655\u7406\uFF1A</p><ol><li><p>state: \u5C40\u90E8 state</p></li><li><p>getters: \u5C40\u90E8 getters</p></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Johnny&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">info</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39; &#39;</span> <span class="token operator">+</span> state<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reducer-\u8207-mutations" tabindex="-1"><a class="header-anchor" href="#reducer-\u8207-mutations" aria-hidden="true">#</a> Reducer \u8207 Mutations</h2><p>\u57FA\u672C\u4E0A\u5169\u8005\u662F\u4E00\u6A23\u7684\u6771\u897F\uFF0C\u90FD\u662F\u6839\u64DA\u50B3\u5165\u7684action\u53BB\u9032\u884C\u884C\u70BA\u3002</p><p>\u4E26\u4E14\u4E5F\u90FD\u5EFA\u8B70\u4E0D\u8981\u76F4\u63A5\u5C0D\u539F state \u64CD\u4F5C\uFF0C\u800C\u662F\u900F\u904E\u5275\u5EFA\u65B0\u5C0D\u8C61\u8655\u7406\uFF0C\u4E26\u6700\u5F8C\u8986\u84CB\u820A\u7684\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Redux Reducer</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newTodos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// \u4EE5\u65B0\u5C0D\u8C61\u53D6\u4EE3\u820A\u5C0D\u8C61\uFF0C\u5F8C\u7E8C\u90FD\u64CD\u4F5C\u65B0\u5C0D\u8C61\uFF0C\u800C\u4E0D\u76F4\u63A5\u52D5\u820A\u5C0D\u8C61\uFF0Ctodos \u662F\u500B\u6578\u7D44</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;add_item&#39;</span><span class="token operator">:</span>
      newTodos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      state<span class="token punctuation">.</span>todos <span class="token operator">=</span> newTodos<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&#39;del_item&#39;</span><span class="token operator">:</span>
      newTodos<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      state<span class="token punctuation">.</span>todos <span class="token operator">=</span> newTodos<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Vuex Mutations</span>
<span class="token comment">// \u5176\u5BE6\u5C0D\u8C61\u4EE5\u5916\u7684\u6771\u897F\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539\uFF0C\u4F46\u4E0D\u76F4\u63A5\u4FEE\u6539\u820A\u5C0D\u8C61\u662F\u500B\u597D\u7FD2\u6163...</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">add_item</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newTodos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">]</span><span class="token punctuation">;</span>
    newTodos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    state<span class="token punctuation">.</span>todos <span class="token operator">=</span> newTodos<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">del_item</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newTodos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">]</span><span class="token punctuation">;</span>
    newTodos<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    state<span class="token punctuation">.</span>todos <span class="token operator">=</span> newTodos<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mutations
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u89F8\u767C\u4FEE\u6539-state" tabindex="-1"><a class="header-anchor" href="#\u89F8\u767C\u4FEE\u6539-state" aria-hidden="true">#</a> \u89F8\u767C\u4FEE\u6539 state</h2><p>\u89F8\u767C\u65B9\u9762\uFF0CRedux \u662F\u4F7F\u7528 store.dispatch(action) \u7684\u65B9\u5F0F\uFF1A</p><p>\u5C07 action \u4E1F\u7D66 \u521D\u59CB\u5316\u7684 reducer \u53BB\u4F9D\u7167 type \u5224\u65B7\u8655\u7406\u52D5\u4F5C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>todoStore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;add_item&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vuex \u5247\u662F\u4F7F\u7528 store.commit(action) \u6216\u5728\u7D44\u5EFA\u4E2D\u7684 this.$store.commit(action) \u4F86\u53BB\u505A\u8655\u7406\uFF0C</p><p>\u800C Vuex \u4E5F\u53EF\u4EE5\u7528\u5B57\u4E32\u65B9\u5F0F\u9078\u64C7\u53D6\u7528 mutation\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;add_item&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// OR</span>

store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;add_item&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mutations-vs-actions" tabindex="-1"><a class="header-anchor" href="#mutations-vs-actions" aria-hidden="true">#</a> Mutations VS. Actions</h2><p>\u524D\u8005\u5C0E\u81F4\u7684\u6240\u6709\u72C0\u614B\u8B8A\u66F4\u90FD\u5FC5\u9808\u5728\u547C\u53EB\u5F8C\u7D50\u675F\uFF0C\u610F\u5373\u540C\u6B65\u52D5\u4F5C\u3002</p><p>\u82E5\u9700\u4F7F\u7528\u975E\u540C\u6B65\u8ABF\u7528\uFF0C\u8ACB\u4F7F\u7528\u5F8C\u8005\u3002</p><p>\u524D\u9762\u8B1B\u5230\u89F8\u767C\u8ABF\u7528\u4FEE\u6539 state \u6642\uFF0Credux \u4F7F\u7528 dispatch(action) \u7684\u65B9\u5F0F\uFF0C\u5176\u5BE6\u5728 Vuex \u4E2D\u4E5F\u53EF\u4EE5\u3002</p><p>\u8ABF\u7528 Vuex \u7684 Actions \u7684\u65B9\u5F0F\u8DDF Redux \u4E00\u6A23\uFF0C\u4F7F\u7528 store.dispatch(mutation\u540D\u7A31, payload)\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u6B64\u8655\u7684 context \u5C31\u662F store \u672C\u8EAB\u7684\u8907\u88FD\u9AD4</span>
      <span class="token comment">// \u56E0\u6B64\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5982 context.state, context.getters \u4E4B\u985E\u7684\u4F86\u7372\u53D6 state, getters</span>
      context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;increment&#39;</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// \u53EF\u7C21\u5316\u70BA</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;increment&#39;</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528 Actions \u7684\u6642\u6A5F\u6700\u5E38\u898B\u7684\u70BA\uFF0C\u8ABF\u7528 API \u7684\u6642\u5019\uFF0C\u9700\u8981\u540C\u6B65\u8655\u7406\u8CC7\u6599\uFF0C\u4E26\u5224\u65B7\u4E0D\u540C\u56DE\u61C9\u53BB\u8655\u7406\u4E0D\u540C\u7684 mutation\u904B\u4F5C\u3002</p><p>\u6291\u6216\u662F\u76F4\u63A5\u8A2D\u5B9A Action \u8FD4\u56DE\u4E00\u500B Promise \u5C0D\u8C61\uFF0C\u65B9\u4FBF\u5F8C\u7E8C\u8ABF\u7528\u4F7F\u7528\u8655\u7406\u7570\u6B65\u8ACB\u6C42\u3002</p><h2 id="modules-\u6A21\u7D44\u5206\u5272" tabindex="-1"><a class="header-anchor" href="#modules-\u6A21\u7D44\u5206\u5272" aria-hidden="true">#</a> Modules \u6A21\u7D44\u5206\u5272</h2><p>Vuex \u5141\u8A31\u5206\u5272\u6A21\u7D44\uFF0C\u6BCF\u500B\u6A21\u7D44\u64C1\u6709\u81EA\u5DF1\u7684 state, mutations, getters, actions</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> moduleB <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> moduleA<span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> moduleB
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token comment">// -&gt; moduleA \u7684 state</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>b <span class="token comment">// -&gt; moduleB \u7684 state</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u6A21\u7D44\u4E2D\u7684getter \u7B2C\u4E09\u500B\u53C3\u6578\u6307\u5411 rootState</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> getters<span class="token punctuation">,</span> rootState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5408\u4F75\u7684 store \u53EF\u4EE5\u76F4\u63A5\u53D6\u5F97\u5404\u6A21\u7D44\u4E2D\u7684getters, mutations, actions \u7B49\uFF0C\u4F46\u5C0D\u65BC\u6A21\u7D44\u5167\u7684 state \u5FC5\u9808\u7531</p><p>\u500B\u5225\u6A21\u7D44\u540D\u7A31\u9032\u5165\u53D6\u5F97\uFF0C\u6216\u662F\u900F\u904E getters \u5C07\u6A21\u7D44\u5167\u7684\u8CC7\u6599\u66B4\u9732\u51FA\u53BB\u8B80\u53D6\uFF0C\u4F46\u53EA\u80FD\u8B80\uFF0C\u82E5\u9700\u8981\u4FEE\u6539\u6A21\u7D44\u5167 state</p><p>\u9084\u662F\u5FC5\u9808\u8ABF\u7528\u6A21\u7D44\u5167\u7684 mutations \u6216 actions\u3002</p><h2 id="\u76EE\u9304\u67B6\u69CB\u5B98\u65B9\u63D0\u9192" tabindex="-1"><a class="header-anchor" href="#\u76EE\u9304\u67B6\u69CB\u5B98\u65B9\u63D0\u9192" aria-hidden="true">#</a> \u76EE\u9304\u67B6\u69CB\u5B98\u65B9\u63D0\u9192</h2><ol><li><p>\u61C9\u7528\u5C64\u7D1A\u7684\u72C0\u614B\u61C9\u8A72\u96C6\u4E2D\u5230\u55AE\u500B store \u5C0D\u8C61\u4E2D\u3002</p></li><li><p>\u63D0\u4EA4 mutation \u662F\u66F4\u6539\u72C0\u614B\u7684\u552F\u4E00\u65B9\u6CD5\uFF0C\u4E26\u4E14\u9019\u500B\u904E\u7A0B\u662F\u540C\u6B65\u7684\u3002</p></li><li><p>\u7570\u6B65\u908F\u8F2F\u90FD\u61C9\u8A72\u5C01\u88DD\u5230action\u88E1\u9762\u3002</p></li></ol><h2 id="input-\u4F7F\u7528-v-model-\u7D81\u5B9A-vuex-\u6578\u64DA" tabindex="-1"><a class="header-anchor" href="#input-\u4F7F\u7528-v-model-\u7D81\u5B9A-vuex-\u6578\u64DA" aria-hidden="true">#</a> Input \u4F7F\u7528 v-model \u7D81\u5B9A Vuex \u6578\u64DA</h2><p>v-model \u6703\u8A66\u5716\u76F4\u63A5\u4FEE\u6539 obj.message\uFF0C\u800C\u4E0D\u900F\u904E mutation\u3002</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj.message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F7F\u7528 Vuex \u601D\u7DAD\u8655\u7406\uFF0C\u7D66 input \u5C0D\u8C61\u7D81\u5B9A value\uFF0C\u4E26\u76E3\u807D input or change \u4E8B\u4EF6\u8ABF\u7528 action \u4FEE\u6539\u5C0D\u61C9\u5167\u5BB9\u3002</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateMessage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>message
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">updateMessage</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;updateMessage&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F46\u9019\u9EBC\u505A\u4E0D\u50C5\u9EBB\u7169\uFF0C\u66F4\u5931\u53BB v-model \u7684\u4E00\u4E9B\u597D\u7528\u7684\u6548\u679C\uFF0C\u6240\u4EE5\u6211\u5011\u5176\u5BE6\u4E5F\u53EF\u4EE5\u4F7F\u7528 computed \u8A08\u7B97\u5C6C\u6027\u7684getter, setter\u3002</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>obj<span class="token punctuation">.</span>message
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">set</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;updateMessage&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,50);function d(k,v){const n=e("SocialBlock");return p(),o("div",null,[u,s(n,{hashtags:"vuejs,vuex"}),r,s(n,{hashtags:"vuejs,vuex"})])}const b=t(l,[["render",d],["__file","vuex-basic.html.vue"]]);export{b as default};
