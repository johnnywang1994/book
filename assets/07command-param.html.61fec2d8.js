import{_ as a,r as e,o as l,c as i,d as s,e as t,a as o,f as p}from"./app.b0af01ba.js";const c={},r=p(`<h1 id="command-line-params-\u6307\u4EE4\u5217\u53C3\u6578\u8655\u7406" tabindex="-1"><a class="header-anchor" href="#command-line-params-\u6307\u4EE4\u5217\u53C3\u6578\u8655\u7406" aria-hidden="true">#</a> Command Line Params \u6307\u4EE4\u5217\u53C3\u6578\u8655\u7406</h1><h2 id="shift-\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#shift-\u6307\u4EE4" aria-hidden="true">#</a> shift \u6307\u4EE4</h2><p>\u7528\u65BC\u5F9E\u5DE6\u908A\u522A\u6389 n \u500B\u4F4D\u7F6E\u7684\u53C3\u6578\uFF0C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">shift</span> <span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token comment"># n \u9810\u8A2D\u70BA 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7BC4\u4F8B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># bash hello.sh 1 2 3</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$*</span> <span class="token comment"># 1 2 3</span>
<span class="token builtin class-name">shift</span> <span class="token number">2</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$*</span> <span class="token comment"># 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6216\u662F\u88FD\u4F5C\u4E00\u500B\u57F7\u884C\u5B50\u6307\u4EE4\u7684\u5DE5\u5177\u5165\u53E3</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">sub_cmd</span><span class="token operator">=</span><span class="token variable">$1</span><span class="token punctuation">;</span>
<span class="token builtin class-name">shift</span>
/utility_path/bin/<span class="token variable">$sub_cmd</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u9078\u9805\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#\u9078\u9805\u89E3\u6790" aria-hidden="true">#</a> \u9078\u9805\u89E3\u6790</h2><p>shell \u672C\u8EAB\u4E0D\u5340\u5206\u53C3\u6578\u4E2D\u7684\u9078\u9805\u3001\u975E\u9078\u9805\uFF0C\u5FC5\u9808\u5728\u8173\u672C\u5167\u53BB\u89E3\u6790\uFF0C\u5E38\u898B\u4E09\u7A2E\u65B9\u5F0F\uFF1A</p><ul><li>\u624B\u52D5\u89E3\u6790\uFF1A\u7C21\u55AE\u8173\u672C\u72C0\u6CC1\u4E0B\u53EF\u884C\uFF0C\u8907\u96DC\u5EA6\u8D8A\u9AD8\uFF0C\u89E3\u6790\u6210\u672C\u6703\u6307\u6578\u4E0A\u5347</li><li>\u5167\u5EFA\u6307\u4EE4 <code>getops</code>\uFF1A\u63A8\u85A6\uFF0C\u9075\u5B88 POSIX \u898F\u7BC4\uFF0C\u4F46\u50C5\u652F\u63F4\u77ED\u9078\u9805</li><li>\u5916\u90E8\u547D\u4EE4 <code>getop</code>\uFF1Alinux \u6307\u4EE4\uFF0C\u53EF\u4EE5\u89E3\u6790\u9577\u9078\u9805</li></ul><p>\u5E95\u4E0B\u70BA <code>getops</code> \u4F7F\u7528\u7BC4\u4F8B</p><h3 id="getops" tabindex="-1"><a class="header-anchor" href="#getops" aria-hidden="true">#</a> getops</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>getops optstring name <span class="token punctuation">[</span>arg <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>optstring: \u9078\u9805\u63CF\u8FF0\uFF0C<code>&quot;ab:c&quot;</code> \u8868\u793A\u671F\u671B <code>&quot;-a -b bvalue -c&quot;</code>\uFF0C<code>b</code>\u5F8C\u7684<code>:</code>\u8868\u793A\u4E00\u500B\u9078\u9805\u503C</li></ul><p>\u5728 <code>while</code> \u5FAA\u74B0\u4E2D\u4F7F\u7528\uFF0C\u6BCF\u6B21\u89E3\u6790\u4E00\u500B\u9078\u9805</p><ul><li>\u5982\u679C\u89E3\u6790\u5230\u4E00\u500B\u9078\u9805\uFF0C\u8A72\u9078\u9805\u6703\u4FDD\u5B58\u5728\u8B8A\u6578 $name \u4E2D\uFF0C\u9000\u51FA\u78BC\u70BA 0</li><li>\u89E3\u6790\u5230\u4E0D\u5B58\u5728\u7684\u9078\u9805\uFF0C$name \u8FD4\u56DE <code>?</code>\uFF0C\u9000\u51FA\u78BC\u4ECD\u7136\u70BA 0</li><li>\u89E3\u6790\u5230\u7B2C\u4E00\u500B\u975E\u9078\u9805\u6642\uFF0C\u9000\u51FA\u78BC\u70BA 1\uFF0C\u9000\u51FA\u5FAA\u74B0</li></ul><blockquote><p>\u547D\u4EE4\u4F7F\u7528\u4E86\u5169\u500B\u96B1\u5F0F\u8B8A\u91CF<code>$OPTIND</code> (OPTion INDex) \u548C <code>$OPTARG</code> (OPTion ARGument)\u3002</p></blockquote><ul><li><code>$OPTIND</code> \u8A18\u9304\u4E86\u4E0B\u6B21\u89E3\u6790\u7684\u4F4D\u7F6E\uFF08\u5F9E 1 \u958B\u59CB\uFF09\uFF0C\u5728\u6BCF\u6B21\u57F7\u884C\u8173\u672C\u6642\u88AB\u8A2D\u7F6E\u70BA 1\uFF0C\u4E26\u5728\u89E3\u6790\u5F8C\u7D2F\u52A0\u3002</li><li><code>$OPTARG</code> \u8A18\u9304\u4E86\u7576\u524D\u9078\u9805\u5C0D\u61C9\u7684\u503C\uFF08\u5982\u679C\u5B58\u5728\uFF09</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># -c confirm \u4E8C\u6B21\u78BA\u8A8D</span>
<span class="token comment"># -m message \u5FC5\u9808\uFF0C\u522A\u9664\u5099\u8A3B\uFF0C\u5132\u5B58\u5728 log \u4E2D</span>
<span class="token assign-left variable">confirm</span><span class="token operator">=</span><span class="token number">0</span>

<span class="token keyword">while</span> <span class="token builtin class-name">getopts</span> <span class="token string">&quot;cm:&quot;</span> option<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">case</span> <span class="token variable">$option</span> <span class="token keyword">in</span>
    c<span class="token punctuation">)</span> <span class="token assign-left variable">confirm</span><span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
    m<span class="token punctuation">)</span> <span class="token assign-left variable">message</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$OPTARG</span>&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
    ?<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;\u53C3\u6578\u932F\u8AA4&quot;</span><span class="token punctuation">;</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">shift</span> <span class="token variable"><span class="token variable">$((</span>$OPTIND<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> <span class="token comment"># \u53BB\u9664\u53C3\u6578\u4E2D\u5DF2\u89E3\u6790\u7684\u90E8\u5206</span>

<span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable">$@</span>
<span class="token assign-left variable">default_message</span><span class="token operator">=</span><span class="token string">&quot;\u522A\u9664\u6A94\u6848 <span class="token variable">$files</span>&quot;</span>

<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> $confirm <span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;\u662F\u5426\u78BA\u8A8D\u522A\u9664\u6587\u4EF6 <span class="token variable">$files</span> (Y/N):&quot;</span> confirmed
  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$confirmed</span> <span class="token operator">==</span> <span class="token punctuation">[</span>^yY<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># \u5982\u679C\u4E0D\u662F y\u3001Y \u5247\u9000\u51FA</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token function">rm</span> <span class="token variable">$files</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;log: <span class="token variable">\${message<span class="token operator">:-</span>$default_message}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> log.txt
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="reference" tabindex="-1"><a class="header-anchor" href="#reference" aria-hidden="true">#</a> Reference</h2>`,21),d={href:"https://juejin.cn/post/7130983293347954718",target:"_blank",rel:"noopener noreferrer"};function u(k,m){const n=e("ExternalLinkIcon");return l(),i("div",null,[r,s("ul",null,[s("li",null,[s("a",d,[t("Shell \u8173\u672C\u7DE8\u7A0B"),o(n)])])])])}const b=a(c,[["render",u],["__file","07command-param.html.vue"]]);export{b as default};
