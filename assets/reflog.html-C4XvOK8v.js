import{_ as s,c as a,d as e,o as t}from"./app-DPsCAi97.js";const i={};function p(l,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h1 id="git-reflog-指令紀錄" tabindex="-1"><a class="header-anchor" href="#git-reflog-指令紀錄"><span>Git Reflog 指令紀錄</span></a></h1><h2 id="基礎指令" tabindex="-1"><a class="header-anchor" href="#基礎指令"><span>基礎指令</span></a></h2><p>詳細顯示你每個指令的 SHA-1 值，通常用在查找某些 Git 歷史指令紀錄</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">git</span> reflog</span>
<span class="line">d3f40c0 <span class="token punctuation">(</span>HEAD -<span class="token operator">&gt;</span> main<span class="token punctuation">)</span> HEAD@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>: checkout: moving from 895ed93 to main</span>
<span class="line">895ed93 HEAD@<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span>: checkout: moving from 107e82a to 895ed93</span>
<span class="line">107e82a HEAD@<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span>: checkout: moving from main to 107e82a</span>
<span class="line">d3f40c0 <span class="token punctuation">(</span>HEAD -<span class="token operator">&gt;</span> main<span class="token punctuation">)</span> HEAD@<span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span>: reset: moving to HEAD</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>假如我們用 git reset 後找不到原本的 commit 時，就可以透過 git reflog 找到，並用 <code>git reset d3f40c0 --hard</code> 回到某個紀錄上</p><h2 id="清除歷史指令紀錄" tabindex="-1"><a class="header-anchor" href="#清除歷史指令紀錄"><span>清除歷史指令紀錄</span></a></h2><p>預設要等 30天，reflog 紀錄才會過期並消失，如果想要立刻馬上讓操作紀錄過期，可以透過以下指令列集</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 使 reflog 紀錄過期</span></span>
<span class="line">$ <span class="token function">git</span> reflog expire <span class="token parameter variable">--all</span> <span class="token parameter variable">--expire</span><span class="token operator">=</span>now</span>
<span class="line"><span class="token comment"># 查看紀錄是否已 unreachable</span></span>
<span class="line">$ <span class="token function">git</span> <span class="token function">fsck</span> <span class="token parameter variable">--unreachable</span></span>
<span class="line"><span class="token comment"># 啟動 Git 回收機制清除垃圾</span></span>
<span class="line">$ <span class="token function">git</span> gc <span class="token parameter variable">--prune</span><span class="token operator">=</span>now</span>
<span class="line"><span class="token comment"># 查看是否已清空</span></span>
<span class="line">$ <span class="token function">git</span> <span class="token function">fsck</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8)]))}const o=s(i,[["render",p]]),r=JSON.parse('{"path":"/articles/git/reflog.html","title":"Git Reflog 指令紀錄","lang":"zh-TW","frontmatter":{},"git":{"updatedTime":1739535172000,"contributors":[{"name":"johnnywang","username":"johnnywang","email":"johnnywang@test.com","commits":1,"url":"https://github.com/johnnywang"}],"changelog":[{"hash":"0948f04970489d5f555164f01efec10f77f89974","time":1739535172000,"email":"johnnywang@test.com","author":"johnnywang","message":"UPD: add articles"}]},"filePathRelative":"articles/git/reflog.md"}');export{o as comp,r as data};
