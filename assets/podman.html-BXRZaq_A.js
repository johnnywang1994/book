import{_ as a,c as s,d as e,o as i}from"./app-DSxi0WCQ.js";const l={};function c(o,n){return i(),s("div",null,n[0]||(n[0]=[e(`<h1 id="podman-å­¸ç¿’ç­†è¨˜" tabindex="-1"><a class="header-anchor" href="#podman-å­¸ç¿’ç­†è¨˜"><span>Podman å­¸ç¿’ç­†è¨˜</span></a></h1><ul><li><a href="https://podman.io/docs/installation" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡ä»¶æŒ‡å¼•</a></li><li><a href="https://azole.medium.com/podman-on-mac-101-1b7b323a1006" target="_blank" rel="noopener noreferrer">åƒè€ƒæ–‡ç« </a></li><li><a href="https://docs.podman.io/en/latest/Commands.html" target="_blank" rel="noopener noreferrer">æŒ‡ä»¤ç›®éŒ„</a></li></ul><p>Hi å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Johnnyï¼Œé€™ç¯‡æ˜¯ä¸€å€‹å¿«é€Ÿå­¸ç¿’ podman çš„å€‹äººç­†è¨˜ï½ï¼Œå–œæ­¡çš„è©±æ­¡è¿æ”¶è—åˆ†äº«æ‘Ÿ</p><h2 id="ä»‹ç´¹" tabindex="-1"><a class="header-anchor" href="#ä»‹ç´¹"><span>ä»‹ç´¹</span></a></h2><ul><li>Podman æ˜¯ <code>daemonless</code> çš„ container å¼•æ“ï¼Œå¯ä»¥ä»¥ root æˆ–æ˜¯é root çš„æ¨¡å¼ä¾†åŸ·è¡Œï¼Œé è¨­ä½¿ç”¨çš„æ˜¯ rootless</li><li>Podman èƒ½<code>ç›´æ¥èˆ‡ Image registry, containers åŠ images æºé€š</code>ï¼Œä¸¦å…è¨±ä»¥é root çš„ä½¿ç”¨è€…æ¬Šé™ä¾†é‹è¡Œ containersï¼Œå› ç‚ºæä¾›äº†è·Ÿ docker ç›¸å®¹çš„æŒ‡ä»¤ï¼Œè®“ç¿’æ…£ä½¿ç”¨ docker çš„é–‹ç™¼é€™ä¹Ÿèƒ½ç„¡ç—›æ”¹ç”¨ Podman</li></ul><p><img src="https://darumatic.com/media/blog_pics/2020_01/Docker_vs_Podman.png" alt=""></p><h2 id="install" tabindex="-1"><a class="header-anchor" href="#install"><span>Install</span></a></h2><h3 id="mac-å®‰è£" tabindex="-1"><a class="header-anchor" href="#mac-å®‰è£"><span>Mac å®‰è£</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ brew <span class="token function">install</span> <span class="token function">podman</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="åˆå§‹åŒ–-vm" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–-vm"><span>åˆå§‹åŒ– VM</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman</span> machine init</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>åŸ·è¡Œé€™è¡ŒæŒ‡ä»¤æ™‚ï¼ŒPodman æœƒå»æª¢æŸ¥æˆ‘å€‘çš„ host è£¡æ˜¯å¦æœ‰æœ€æ–°çš„ FCOSï¼Œæ²’æœ‰çš„è©±ï¼Œå°±æœƒå»ä¸‹è¼‰ã€‚FCOS çš„å…¨åæ˜¯ Fedora CoreOSï¼Œä»–è¢«è¨­è¨ˆæˆåŸºæ–¼ container çš„æœ€å°åŒ–ç¾åœ¨ä½œæ¥­ç³»çµ±ï¼ŒPodman æœƒç”¨é€™å€‹ä½œæ¥­ç³»çµ±ä¾†å»ºç«‹ VMã€‚</li><li>ç•¶ FCOS è¢«ä¸‹è¼‰å®Œæˆå¾Œï¼Œé‚„æœƒå†å¯«å…©å€‹æª”æ¡ˆ: <ol><li>machine description: ç”¨ä¾†æè¿°å³å°‡å»ºç«‹çš„ VM çš„å±¬æ€§ï¼Œæ˜¯ JSON æ ¼å¼ï¼Œè€Œä¸”æ˜¯è¢«å¯«å…¥ host çš„ filesystem ä¸­ã€‚</li><li>ignition file: ç”¨ä¾†å®¢è£½ FCOS ä½œæ¥­ç³»çµ±çš„ï¼Œä¹Ÿæœƒè¢«å¯«å…¥ host filesystem ä¸­ã€‚</li></ol></li></ul><h3 id="é–‹å•Ÿ-rootful-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é–‹å•Ÿ-rootful-æ¨¡å¼"><span>é–‹å•Ÿ rootful æ¨¡å¼</span></a></h3><p>é è¨­æœƒæ˜¯ rootlessï¼Œå¦‚æœéœ€è¦çµ¦äºˆ VM root æ¬Šé™ï¼Œå¯ä»¥åœ¨ machine åœæ­¢çš„ç‹€æ…‹ä¸‹è¨­å®šå¦‚ä¸‹</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman</span> machine <span class="token builtin class-name">set</span> <span class="token parameter variable">--rootful</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="å•Ÿå‹•-vm" tabindex="-1"><a class="header-anchor" href="#å•Ÿå‹•-vm"><span>å•Ÿå‹• VM</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman</span> machine start</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æŒ‡ä»¤è¢«é‹è¡Œæ™‚ï¼Œmachine çš„è¨­å®šæª”æœƒè¢«è®€å–ï¼Œç„¶å¾Œ Podman æœƒç¢ºä¿é€™å€‹ machine ä¸æ˜¯åœ¨é‹è¡Œä¸­ã€‚ç„¶å¾ŒæœƒåŸºæ–¼é€™äº›è¨­å®šæª”ï¼Œ<code>qemu</code> æœƒè¢«çµ„è£ï¼Œç„¶å¾Œ VM å°±é‹è¡Œ</li><li>ç•¶ VM ç¬¬ä¸€æ¬¡é–‹æ©Ÿæ™‚ï¼Œ<code>ignition file</code> æœƒè¢«æ³¨å…¥åˆ°é€™å€‹ VM ä¸­ï¼Œæ•¸å€‹è¨­å®šä¹Ÿæœƒåœ¨é€™å€‹æ™‚å€™è¢«ä¿®æ”¹ï¼Œç•¶ VM é–‹å®Œæ©Ÿå¾Œï¼Œæœƒæœ‰ä¸€å€‹å«åš gvproxy çš„ç¨‹å¼æœƒåœ¨ host è¢«å•Ÿå‹•ï¼Œgvproxy æœƒè² è²¬ç®¡ç† host èˆ‡ VM ä¹‹é–“çš„ port mappingã€‚æœ€å¾Œ Podman æœƒç‚º root åŠ non-root ä½¿ç”¨è€…è¨­ç½® socket-activated services</li></ul><blockquote><p>QEMU æ˜¯ä¸€å€‹é–‹æºçš„ä»£ç®¡è™›æ“¬æ©Ÿå™¨ï¼ŒPodman æœƒä½¿ç”¨ QEMU ä¾†å»ºç«‹ VMï¼Œæ ¹æ“šç‰ˆæœ¬ä¸åŒï¼Œå¯èƒ½æœƒéœ€è¦æ‰‹å‹•å®‰è£ QEMU</p></blockquote><h3 id="æŸ¥çœ‹å®‰è£è³‡è¨Š" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹å®‰è£è³‡è¨Š"><span>æŸ¥çœ‹å®‰è£è³‡è¨Š</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman</span> info</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ç®¡ç†-machine" tabindex="-1"><a class="header-anchor" href="#ç®¡ç†-machine"><span>ç®¡ç† Machine</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman</span> machine <span class="token parameter variable">--help</span></span>
<span class="line">Manage a virtual machine</span>
<span class="line"></span>
<span class="line">Description:</span>
<span class="line">  Manage a virtual machine. Virtual machines are used to run Podman.</span>
<span class="line"></span>
<span class="line">Usage:</span>
<span class="line">  <span class="token function">podman</span> machine <span class="token punctuation">[</span>command<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">Available Commands:</span>
<span class="line">  init        Initialize a virtual machine</span>
<span class="line">  inspect     Inspect an existing machine</span>
<span class="line">  list        List machines</span>
<span class="line">  <span class="token function">rm</span>          Remove an existing machine</span>
<span class="line">  <span class="token builtin class-name">set</span>         Sets a virtual machine setting</span>
<span class="line">  <span class="token function">ssh</span>         SSH into an existing machine</span>
<span class="line">  start       Start an existing machine</span>
<span class="line">  stop        Stop an existing machine</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage"><span>Usage</span></a></h2><p>åŸºæœ¬å°±è·Ÿ docker ä¸€æ¨£ï¼</p><blockquote><p>å°çŸ¥è­˜ï¼šä¸€èˆ¬ä¾†èªªï¼Œæ­£å¸¸ VM åœ¨å•Ÿå‹•å¾Œæ˜¯ç„¡æ³•ç›´æ¥ç²å–å¤–éƒ¨çš„æª”æ¡ˆçš„ï¼Œä¹Ÿå› æ­¤å¦‚æœéœ€è¦è®“ VM èƒ½æ‹¿åˆ°æœ¬åœ°æª”æ¡ˆï¼Œå¿…é ˆåœ¨å•Ÿå‹• VM æ™‚æ˜ç¢ºæ›è¼‰ä¸€å€‹æœ¬åœ°æª”æ¡ˆä½ç½®é€²å» VM ç•¶ä¸­ï¼Œä½†æ˜¯ï¼ï¼å¥½åŠ åœ¨å¾ <code>podman v4.1.1</code> ç‰ˆæœ¬é–‹å§‹, podman é è¨­æœƒåœ¨ init æŒ‡ä»¤æ™‚è‡ªå‹•ç¶å®š <code>-v $HOME:$HOME</code>ï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿå°±èƒ½åƒå¹³å¸¸ä½¿ç”¨ docker ä¸€æ¨£é€é <code>-v</code> å» mount volume äº†</p></blockquote><p>å¦‚æœéœ€è¦è‡ªå·±èª¿æ•´ VM çš„ volume ç¶å®šä½ç½®ï¼Œç¯„ä¾‹å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># å¦‚æœå·²ç¶“æœ‰æ­£åœ¨è·‘çš„ machine éœ€è¦å…ˆé—œé–‰åˆªé™¤èˆŠçš„ VMï¼Œé è¨­ machine åç¨±ç‚º podman-machine-default</span></span>
<span class="line">$ <span class="token function">podman</span> machine stop</span>
<span class="line">$ <span class="token function">podman</span> machine <span class="token function">rm</span></span>
<span class="line"><span class="token comment"># åˆå§‹åŒ–åŒæ™‚å¸¶ä¸Š -v</span></span>
<span class="line">$ <span class="token function">podman</span> machine init <span class="token parameter variable">-v</span> <span class="token environment constant">$HOME</span><span class="token builtin class-name">:</span><span class="token environment constant">$HOME</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="podman-compose" tabindex="-1"><a class="header-anchor" href="#podman-compose"><span>podman-compose</span></a></h3><p>å¦‚æœéœ€è¦ä½¿ç”¨ <code>docker-compose</code> çš„è©±ï¼Œéœ€è¦å¦å¤–ä¸‹è¼‰ä¸€å€‹ <code>podman-compose</code></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ brew <span class="token function">install</span> <span class="token function">podman-compose</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®‰è£å®Œæˆå¾Œæ“ä½œåŸºæœ¬è·Ÿ docker-compose ä¸€æ¨£</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman-compose</span> up</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="podman-mac-helper-ç›´æ¥ç”¨-docker-æ¨¡å¼æ§åˆ¶-podman" tabindex="-1"><a class="header-anchor" href="#podman-mac-helper-ç›´æ¥ç”¨-docker-æ¨¡å¼æ§åˆ¶-podman"><span>Podman Mac Helper - ç›´æ¥ç”¨ docker æ¨¡å¼æ§åˆ¶ podman</span></a></h3><p>åœ¨åŸ·è¡Œ <code>podman machine start</code> çš„åŒæ™‚ï¼Œæœƒè·³å‡ºä¸€æ®µæç¤ºå¦‚ä¸‹ï¼Œ<code>podman-mac-helper</code> æ˜¯ podman åœ¨ Mac ç’°å¢ƒä¸‹å…¼å®¹ Docker API socket address çš„ä¸€å€‹è¼”åŠ©å¥—ä»¶ï¼Œå¦‚æœæƒ³åœ¨æœ¬åœ°ä½¿ç”¨ podman å°±åƒç”¨ docker ç®¡ç†å®¹å™¨ä¸€æ¨£ï¼Œå»ºè­°å¯ä»¥ä¸€èµ·å®‰è£èµ·ä¾†</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">API forwarding listening on: /Users/wangj/.local/share/containers/podman/machine/podman-machine-default/podman.sock</span>
<span class="line"></span>
<span class="line">The system helper service is not installed; the default Docker API socket</span>
<span class="line">address can&#39;t be used by podman. If you would like to install it run the</span>
<span class="line">following commands:</span>
<span class="line"></span>
<span class="line">        sudo podman-mac-helper install</span>
<span class="line">        podman machine stop; podman machine start</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŸ·è¡Œ podman æä¾›çš„æŒ‡ä»¤å¦‚ä¸‹ï¼Œæˆ‘çš„ podman ç‰ˆæœ¬æ˜¯ <code>4.8.3</code>ï¼Œæ ¹æ“šä½ è‡ªå·±çš„ç‰ˆæœ¬ä¿®æ”¹å–”</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">sudo</span> podman-mac-helper <span class="token function">install</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¿®æ”¹å®Œå¾Œï¼Œæ¥è‘— stop machineï¼Œç„¶å¾Œå†æ¬¡ startï¼Œå°±ä¸æœƒçœ‹åˆ°é€™å€‹æç¤ºæ‘Ÿï¼Œè€Œåœ¨å®‰è£é€™å¥—ä»¶å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥åƒä¸‹é¢é€™æ¨£ç›´æ¥é€é docker æŒ‡ä»¤ä¾†æ“ä½œæ‹‰ï½ï½images çš„é¡¯ç¤ºæ–¹å¼éƒ½æŒ‰ç…§ docker çš„æ–¹å¼å‘ˆç¾äº†</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">docker</span> images</span>
<span class="line">REPOSITORY            TAG           IMAGE ID       CREATED         SIZE</span>
<span class="line">nginx                 latest        c42efe0b5438   <span class="token number">2</span> weeks ago     140MB</span>
<span class="line"><span class="token function">node</span>                  <span class="token number">18.4</span>.0-slim   82f78068089f   <span class="token number">11</span> months ago   248MB</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="issues" tabindex="-1"><a class="header-anchor" href="#issues"><span>Issues</span></a></h2><h3 id="ç„¡æ³•-connect-to-podman-å•é¡Œ" tabindex="-1"><a class="header-anchor" href="#ç„¡æ³•-connect-to-podman-å•é¡Œ"><span>ç„¡æ³• connect to Podman å•é¡Œ</span></a></h3><p>é€™å€‹å•é¡Œå¯ä»¥è©¦è©¦æŠŠç•¶å‰ podman machine åˆªé™¤ä¸¦é‡æ–°å»ºç«‹ä¸€å€‹æ–°çš„</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">Cannot connect to Podman. Please verify your connection to the Linux system using</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman</span> machine stop</span>
<span class="line">$ <span class="token function">podman</span> machine <span class="token function">rm</span> <span class="token parameter variable">-f</span></span>
<span class="line">$ <span class="token function">podman</span> machine init <span class="token parameter variable">--now</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="podman-desktop" tabindex="-1"><a class="header-anchor" href="#podman-desktop"><span>Podman Desktop</span></a></h2><p>å®‰è£å‰è¨˜å¾—å…ˆæŠŠæœ¬åœ°è£çš„ podman åˆªé™¤ä¹¾æ·¨</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token function">podman</span> machine <span class="token function">rm</span></span>
<span class="line">$ brew uninstall <span class="token function">podman</span> qemu</span>
<span class="line">$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> ~/.config/containers</span>
<span class="line">$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> ~/.local/share/containers</span>
<span class="line">$ brew <span class="token function">install</span> podman-desktop</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="podman-compose-1" tabindex="-1"><a class="header-anchor" href="#podman-compose-1"><span>podman-compose</span></a></h3><p>å¦‚æœæœ¬åœ°æ²’æœ‰è£ dockerï¼Œå¯ä»¥ä½¿ç”¨ podman æä¾›çš„ alternative <a href="https://github.com/containers/podman-compose#installation" target="_blank" rel="noopener noreferrer">podman-compose</a></p>`,50)]))}const p=a(l,[["render",c]]),t=JSON.parse('{"path":"/articles/memo/docker/podman.html","title":"Podman å­¸ç¿’ç­†è¨˜","lang":"zh-TW","frontmatter":{},"git":{"updatedTime":1708479491000,"contributors":[{"name":"johnnywang1994","username":"johnnywang1994","email":"42905128+johnnywang1994@users.noreply.github.com","commits":1,"url":"https://github.com/johnnywang1994"},{"name":"johnnywang","username":"johnnywang","email":"johnnywang@test.com","commits":3,"url":"https://github.com/johnnywang"}],"changelog":[{"hash":"99f3c4163d6e4b5cd7468f25c25a2729ad247ce9","time":1708479491000,"email":"johnnywang@test.com","author":"johnnywang","message":"ğŸ› fix bug"},{"hash":"05130fb3c05e2122288c5024834dd8dff3c27120","time":1704630173000,"email":"johnnywang@test.com","author":"johnnywang","message":"UPD: add astro-theme-flash-issue"},{"hash":"59430ca3272d3c9b5f00b820a2b139fca93032fa","time":1686481748000,"email":"42905128+johnnywang1994@users.noreply.github.com","author":"Johnny","message":"Develop (#7)","coAuthors":[{"name":"johnnywang","email":"johnnywang@test.com"}]}]},"filePathRelative":"articles/memo/docker/podman.md"}');export{p as comp,t as data};
