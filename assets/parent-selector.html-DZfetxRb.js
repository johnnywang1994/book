import{_ as t,c as l,b as s,a as p,d as c,e as a,r as i,o}from"./app-BZziB6D2.js";const u={};function r(d,n){const e=i("SocialBlock");return o(),l("div",null,[n[0]||(n[0]=s("h1",{id:"scss-parent-selector",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#scss-parent-selector"},[s("span",null,"SCSS Parent Selector")])],-1)),n[1]||(n[1]=s("h6",{id:"tag-css-scss-parent-selector-at-root",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#tag-css-scss-parent-selector-at-root"},[s("span",null,[a("tag "),s("code",null,"css"),a(", "),s("code",null,"scss"),a(", "),s("code",null,"parent-selector"),a(", "),s("code",null,"@at-root")])])],-1)),p(e,{hashtags:"css,scss"}),n[2]||(n[2]=c(`<p>前端工程師對以下需求一定很熟悉：</p><p>當添加 <code>bold</code> class 給 <code>parent</code> 時，該如何添加 styles 給 <code>Hello World</code></p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token comment">&lt;!-- normal --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- bold --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parent bold<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="作法" tabindex="-1"><a class="header-anchor" href="#作法"><span>作法</span></a></h2><h3 id="添加獨立的-css" tabindex="-1"><a class="header-anchor" href="#添加獨立的-css"><span>添加獨立的 css</span></a></h3><div class="language-css line-numbers-mode" data-highlighter="prismjs" data-ext="css"><pre><code><span class="line"><span class="token selector">.parent .child span</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* 分開寫 */</span></span>
<span class="line"><span class="token selector">.parent.bold .child span</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>這個做法雖然可以，但長遠來看，我們必須將相同對象的 style 分開寫，並不利於長期維護</p><h3 id="使用-scss-封裝" tabindex="-1"><a class="header-anchor" href="#使用-scss-封裝"><span>使用 scss 封裝</span></a></h3><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss"><pre><code><span class="line"><span class="token selector">.parent </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">.child span </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">/* 雖然較好，但還是分開寫 */</span></span>
<span class="line">  <span class="token selector"><span class="token parent important">&amp;</span>.bold .child span </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此方法雖然看起來封裝了，也比前一個利於維護，但對於目標 <code>span</code> 而言還是分開寫的</p><h3 id="使用-scss-at-root-規則" tabindex="-1"><a class="header-anchor" href="#使用-scss-at-root-規則"><span>使用 scss @at-root 規則</span></a></h3><p>scss 的 <code>@at-root</code> 規則會將當前指標指向 root 環境，詳細使用方式可見<a href="https://sass-lang.com/documentation/at-rules/at-root" target="_blank" rel="noopener noreferrer">scss @at-root</a>，如以下範例：</p><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss"><pre><code><span class="line"><span class="token selector">.parent </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">.child </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 1. 後方不接 selector，開放 root</span></span>
<span class="line">    <span class="token atrule"><span class="token rule">@at-root</span></span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token selector">span </span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">// 2. 後方接 selector</span></span>
<span class="line">    <span class="token atrule"><span class="token rule">@at-root</span> span</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// compile to</span></span>
<span class="line"><span class="token selector">span </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但這種方式如果要做上面的需求，我們必須 hardcore，雖然做到了想要的效果（放在一起），但每次都必須手動把整個 path 寫一遍是一件危險的事情。</p><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss"><pre><code><span class="line"><span class="token selector">.parent </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">.child </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">span </span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">// 一起寫，但使用不方便</span></span>
<span class="line">      <span class="token atrule"><span class="token rule">@at-root</span> .parent.bold .child span</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mixin-解法" tabindex="-1"><a class="header-anchor" href="#mixin-解法"><span>mixin 解法</span></a></h3><p>我們使用 scss 的 <a href="https://sass-lang.com/documentation/style-rules/parent-selector" target="_blank" rel="noopener noreferrer">Parent Selector</a> 來幫助我們上面 hardcore 的部分</p><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss"><pre><code><span class="line"><span class="token keyword">@mixin</span> <span class="token function">attach-root</span><span class="token punctuation">(</span><span class="token variable">$new-class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token property"><span class="token variable">$current-selector</span></span><span class="token punctuation">:</span> &amp;<span class="token punctuation">;</span> <span class="token comment">// array</span></span>
<span class="line">  <span class="token property"><span class="token variable">$new-selector</span></span><span class="token punctuation">:</span> []<span class="token punctuation">;</span> <span class="token comment">// new array</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">@each</span> <span class="token selector"><span class="token variable">$item</span> in <span class="token variable">$current-selector</span> </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property"><span class="token variable">$first-node</span></span><span class="token punctuation">:</span> <span class="token function">nth</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> 1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property"><span class="token variable">$appended-node</span></span><span class="token punctuation">:</span> <span class="token variable">$first-node</span> <span class="token operator">+</span> <span class="token variable">$new-class</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token property"><span class="token variable">$new-item</span></span><span class="token punctuation">:</span> <span class="token function">set-nth</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> 1<span class="token punctuation">,</span> <span class="token variable">$appended-node</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// replace target node</span></span>
<span class="line">    <span class="token property"><span class="token variable">$new-selector</span></span><span class="token punctuation">:</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$new-item</span><span class="token punctuation">,</span> <span class="token variable">$new-selector</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token atrule"><span class="token rule">@at-root</span> <span class="token variable">#{$new-selector}</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">@content</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面主要是將 parent selector <code>&amp;</code>儲存為變數，並替換第一個 node selector，加上指定 class 後再重新組回去，最後再用 <code>@at-root</code> 重新放回原位置。</p><p>使用如下：</p><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss"><pre><code><span class="line"><span class="token selector">.parent </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token selector">.child </span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token selector">span </span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">// 一起寫，好用</span></span>
<span class="line">      <span class="token keyword">@include</span> <span class="token function">attach-root</span><span class="token punctuation">(</span><span class="token string">&#39;.bold&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// compile to</span></span>
<span class="line"><span class="token selector">.parent .child span </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">.parent.bold .child span </span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>本篇主要講到兩個 scss 蠻特別的規則 <code>@at-root</code>, <code>parent-selector</code>，這兩個東西雖然看似不知道可以幹嘛，但實際上非常有用～，上面的 mixin 只要稍作修改就能夠變成更萬能的工具摟～（這部分留給讀者自行嘗試拉～）</p><p>以上感謝大家觀看，下次見</p><h5 id="文章參考自-add-class-to-the-most-outer-selector-using-sass-mixin" tabindex="-1"><a class="header-anchor" href="#文章參考自-add-class-to-the-most-outer-selector-using-sass-mixin"><span>文章參考自：<a href="https://pantaley.com/blog/Add-class-to-the-most-outer-selector-using-Sass-mixin/" target="_blank" rel="noopener noreferrer">Add class to the most outer selector using Sass mixin</a></span></a></h5>`,25)),p(e,{hashtags:"css,scss"})])}const v=t(u,[["render",r]]),m=JSON.parse('{"path":"/articles/css/parent-selector.html","title":"SCSS Parent Selector","lang":"zh-TW","frontmatter":{},"git":{"updatedTime":1648521821000,"contributors":[{"name":"Johnny Wang","username":"","email":"wangj@garena.com","commits":2},{"name":"johnnywang1994","username":"johnnywang1994","email":"johnny29621189@kimo.com","commits":2,"url":"https://github.com/johnnywang1994"}],"changelog":[{"hash":"71ccb7693345c8ddc2f554e00f8a0ce73af2b783","time":1648521821000,"email":"johnny29621189@kimo.com","author":"johnnywang1994","message":"UPD: upgrade to v2"},{"hash":"da1521dcf805739a83e5efa4e52581013a51dcad","time":1638541816000,"email":"johnny29621189@kimo.com","author":"johnnywang1994","message":"UPD: update sociallinks"},{"hash":"e4934b227e750cf780d547efbbb68d62ffe4580d","time":1629951525000,"email":"wangj@MBPR-1110-2.local","author":"Johnny Wang","message":"UPD: update"},{"hash":"51e618d93d4f837fbce25a1e1f0a9783cbc46b6a","time":1624012650000,"email":"wangj@garena.com","author":"Johnny Wang","message":"INIT"}]},"filePathRelative":"articles/css/parent-selector.md"}');export{v as comp,m as data};
