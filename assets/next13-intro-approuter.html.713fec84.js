import{_ as c,r as p,o as l,c as i,a,d as n,e as s,f as t}from"./app.29e1f3ff.js";const r={},u=n("h1",{id:"\u5FEB\u901F\u4E0A\u624B-nextjs-v13-\u57FA\u790E\u89C0\u5FF5-approuter-\u7BC7",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5FEB\u901F\u4E0A\u624B-nextjs-v13-\u57FA\u790E\u89C0\u5FF5-approuter-\u7BC7","aria-hidden":"true"},"#"),s(" \u5FEB\u901F\u4E0A\u624B NextJS v13 - \u57FA\u790E\u89C0\u5FF5 AppRouter \u7BC7")],-1),d=t(`<h2 id="\u524D\u8A00" tabindex="-1"><a class="header-anchor" href="#\u524D\u8A00" aria-hidden="true">#</a> \u524D\u8A00</h2><p>Hi \u5927\u5BB6\u597D\uFF0C\u6211\u662F Johnny\uFF0C\u9019\u9663\u5B50\u516C\u53F8\u540C\u4E8B\u958B\u59CB\u63A5\u89F8\u5230 Next13 \u76F8\u95DC\u7684\u958B\u767C\uFF0C\u89BA\u5F97\u6211\u4E5F\u662F\u6642\u5019\u4F86\u7814\u7A76\u4E0B\uFF0C\u7D22\u6027\u82B1\u4E86\u5E7E\u500B\u5C0F\u6642\u5FEB\u901F\u9AD4\u9A57\u4E86\u4E00\u4E0B\uFF0C\u4E26\u5C07\u4E00\u4E9B\u6211\u89BA\u5F97\u6BD4\u8F03\u91CD\u8981\u7684\u7279\u9EDE\u8A18\u9304\u4E0B\u4F86\uFF0C\u9019\u7BC7\u662F\u6211\u901F\u8B80 Next13 \u5B98\u65B9\u6587\u4EF6\u5F8C\u6574\u7406\u7684\u4E00\u500B\u96A8\u6027\u7B46\u8A18\uFF01\u4E3B\u8981\u5305\u542B <code>\u57FA\u790E\u89C0\u5FF5</code>, <code>AppRouter</code> \u7684\u898F\u5247\u7B49\u7B49\uFF0C<code>Data Fetching</code> \u6703\u518D\u51FA\u4E00\u7BC7\u4ECB\u7D39\uFF0C\u672C\u7BC7\u4E3B\u8981\u5C08\u6CE8\u5728 Next13 \u7684\u65B0\u529F\u80FD\u3001\u89C0\u5FF5\u4E0A\u9762\u3002</p><blockquote><p>\u7B46\u8005\u64B0\u5BEB\u6587\u7AE0\u6642 NextJS \u7248\u672C\u70BA <code>v13.4.4</code></p></blockquote><h2 id="\u9996\u5148-nextjs-v13-\u7A76\u7ADF\u505A\u4E86\u5565" tabindex="-1"><a class="header-anchor" href="#\u9996\u5148-nextjs-v13-\u7A76\u7ADF\u505A\u4E86\u5565" aria-hidden="true">#</a> \u9996\u5148 NextJS v13 \u7A76\u7ADF\u505A\u4E86\u5565\uFF1F</h2><p>\u5148\u7C21\u55AE\u7E3D\u7D50\u5E7E\u500B\u6700\u5927\u7684\u7279\u9EDE</p><ul><li><code>\u521D\u59CB\u5316 0 \u914D\u7F6E</code>\uFF0C\u8B93\u65B0\u624B\u4E5F\u80FD\u5C08\u6CE8\u5728\u7406\u89E3 NextJS \u7684\u8CC7\u6599\u593E\u7D50\u69CB\u3001\u6982\u5FF5\uFF0C\u800C\u4E0D\u662F\u6D6A\u8CBB\u6642\u9593\u5728\u4E00\u5806\u975E\u5FC5\u8981\u7684\u521D\u59CB\u8A2D\u5B9A\u3001\u914D\u7F6E</li><li>\u65B0\u7684 <code>App Router \u6A21\u5F0F</code>\uFF0C\u63D0\u4F9B\u9AD8\u5EA6\u5BA2\u88FD\u5316 Routing \u7684\u80FD\u529B</li><li><code>Server Component \u6A21\u5F0F</code>\u53CA\u76F8\u95DC\u597D\u7528 API\uFF0C\u63D0\u4F9B\u958B\u767C\u524D\u7AEF\u7A0B\u5F0F\u6642\u7684\u8CC7\u6599\u8655\u7406\u5B89\u5168\u6027\u3001SEO \u512A\u5316\u80FD\u529B\u3001\u4EE5\u53CA\u76E1\u53EF\u80FD\u5730\u6E1B\u5C11 client side \u6D88\u8017\u7684\u8655\u7406\u6548\u80FD</li><li><code>Server-Centric routing</code> \u5FEB\u901F\u53CD\u61C9\u8DEF\u7531\u5207\u63DB\uFF0CRouter \u5167\u5EFA <code>in-memory client-side cache</code> \u6A5F\u5236\uFF0C\u907F\u514D\u4E0D\u5FC5\u8981\u7684\u9801\u9762\u5167\u5BB9 reload \u5F71\u97FF\u6548\u80FD</li></ul><p>\u4EE5\u4E0A\u662F\u6211\u76EE\u524D\u5C0D\u65BC NextJS v13 \u7684\u4E00\u9EDE\u7406\u89E3\uFF0C\u4E0B\u9762\u5C31\u4F86\u5BE6\u969B\u770B\u770B\u7A0B\u5F0F\u78BC\u5427\uFF01</p><h2 id="\u521D\u59CB\u5316-0-\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u521D\u59CB\u5316-0-\u914D\u7F6E" aria-hidden="true">#</a> \u521D\u59CB\u5316 0 \u914D\u7F6E</h2><p>\u900F\u904E <code>yarn create next-app</code> \u5FEB\u901F\u5EFA\u7ACB\u65B0\u7684 NextApp\uFF0C\u9EDE\u958B <code>next.config.js</code> \u53EA\u6709\u4E0B\u9762\u9019\u6A23\uFF0C\u5C0D\u65BC\u65B0\u7528\u6236\u4F86\u8AAA\u53EF\u4EE5\u5B8C\u5168\u5FFD\u7565\u9019\u500B config \u8A2D\u5B9A\u90E8\u5206\uFF01\u96D6\u7136\u5F8C\u671F\u958B\u767C\u4E00\u5B9A\u6703\u9700\u8981\u8ABF\u6574\uFF0C\u4F46\u5728\u521D\u671F\u5EFA\u7ACB\u5C08\u6848\u6216\u65B0\u624B\u4F86\u8AAA\u975E\u5E38\u65B9\u4FBF\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;next&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>NextConfig<span class="token punctuation">}</span></span> */</span>
<span class="token keyword">const</span> nextConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> nextConfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="server-component-vs-client-component" tabindex="-1"><a class="header-anchor" href="#server-component-vs-client-component" aria-hidden="true">#</a> Server Component VS Client Component</h2><p>\u9810\u8A2D\u70BA <code>Server Component</code>\uFF0C\u53EF\u900F\u904E\u5728\u6A94\u6848\u6700\u4E0A\u65B9\u5B9A\u7FA9 <code>use client</code>, <code>use server</code> \u660E\u78BA\u8A2D\u5B9A</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// \u9810\u8A2D\u5176\u5BE6\u5C31\u662F...\uFF0C\u9664\u4E86 error handling component</span>
<span class="token string">&#39;use server&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> Image <span class="token keyword">from</span> <span class="token string">&#39;next/image&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u5728 server component \u4E2D\u4F7F\u7528\u50CF\u662F <code>useEffect</code>, <code>useState</code> \u7B49 client side only \u7684 hook \u5C07\u6703\u5831\u932F</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ReactServerComponentsError:
You&#39;re importing a component that needs useState. It only works in a Client Component but none of its parents are marked with &quot;use client&quot;, so they&#39;re Server Components by default.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u60F3\u8981\u50CF\u539F\u672C <code>Pages Router</code> \u65B9\u5F0F\u64B0\u5BEB client side component \u53EF\u4EE5\u9019\u6A23\u5BEB</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token string">&#39;use client&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> Image <span class="token keyword">from</span> <span class="token string">&#39;next/image&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// \u4E0B\u9762\u5C31\u662F Pages Router \u65B9\u5F0F\u7684\u539F\u672C\u5BEB\u6CD5\uFF0C\u9019\u88E1\u7701\u7565 =V=</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4EC0\u9EBC\u662F-app-router" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u9EBC\u662F-app-router" aria-hidden="true">#</a> \u4EC0\u9EBC\u662F App Router\uFF1F</h2><p><code>App Router</code> \u662F v13 \u65B0\u4ECB\u7D39\u7684\u4E00\u7A2E routing \u65B9\u5F0F\uFF0C\u8207\u4E4B\u76F8\u5C0D\u904E\u53BB\u7684\u65B9\u5F0F\u88AB\u7A31\u4F5C <code>Pages Router</code>\uFF0C\u53EF\u4EE5\u5728\u5B98\u65B9\u7DB2\u7AD9\u5DE6\u5074\u6309\u9215\u5207\u63DB\u5169\u7A2E\u8DEF\u7531\u6A21\u5F0F\u7684 Documentation</p><blockquote><p>\u70BA\u6C42\u8AAA\u660E\u65B9\u4FBF\uFF0C\u5E95\u4E0B\u5167\u5BB9\u7686\u4EE5 Typescript \u9032\u884C\u8AAA\u660E\uFF0C<code>App Router</code>\u7C21\u7A31<code>A.R</code>\uFF0C<code>Pages Router</code>\u7C21\u7A31<code>P.R</code></p></blockquote><p>\u9996\u5148\u4E86\u89E3\u4E00\u4E0B\u4E00\u500B\u6982\u5FF5\uFF0C\u6BD4\u8F03\u597D\u7406\u89E3\u5F8C\u9762\u63D0\u5230\u7684\u6771\u897F\uFF1A</p><ul><li><code>P.R</code>: \u4EE5 <code>File</code> \u70BA\u55AE\u4F4D\u5B9A\u7FA9\u9801\u9762\uFF0C\u8A72\u9801\u9762\u76F8\u95DC\u8A2D\u5B9A\u5FC5\u9808\u653E\u5728\u5916\u90E8\u7BA1\u7406\u3001\u5F15\u5165\uFF0C\u8F03\u96E3\u5BA2\u88FD\u5316</li><li><code>A.R</code>: \u4EE5 <code>Folder</code> \u70BA\u55AE\u4F4D\u5B9A\u7FA9\u9801\u9762\uFF0C\u8A72\u9801\u9762\u6240\u6709\u76F8\u95DC\u8A2D\u5B9A\u53EF\u76F4\u63A5\u653E\u5728 folder \u5C64\u7D1A\u4E2D\uFF0C\u53EF\u9AD8\u5EA6\u5BA2\u88FD\u5316</li></ul><h3 id="app-\u8CC7\u6599\u593E\u88E1\u90FD\u88DD\u4EC0\u9EBC" tabindex="-1"><a class="header-anchor" href="#app-\u8CC7\u6599\u593E\u88E1\u90FD\u88DD\u4EC0\u9EBC" aria-hidden="true">#</a> app \u8CC7\u6599\u593E\u88E1\u90FD\u88DD\u4EC0\u9EBC\uFF1F</h3><p><code>A.R</code> \u65B9\u5F0F\u5728 <code>app</code> \u8CC7\u6599\u593E\u4E2D\u4E3B\u8981\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u5E7E\u7A2E NextJS \u6703\u9032\u884C\u8655\u7406\u7684\u6587\u4EF6</p><ul><li><code>page.tsx</code>: \u5B9A\u7FA9\u7576\u524D\u5C64\u7D1A\u9801\u9762(\u8207 <code>route.tsx</code> \u4E0D\u53EF\u540C\u6642\u5B58\u5728\u540C\u4E00\u5C64\u4E2D) <ul><li><code>route.tsx</code>: \u5B9A\u7FA9\u7576\u524D\u5C64\u7D1A route handler(\u985E\u4F3C<code>P.R</code>\u65B9\u5F0F\u6642\u7684<code>pages/api/xxx.tsx</code>)</li></ul></li><li><code>layout.tsx</code>: \u5B9A\u7FA9\u7576\u524D\u5C64\u7D1A\u8207\u5B50\u5C64\u5171\u4EAB\u7684 UI \u7248\u578B(\u82E5\u7236\u5C64\u6709 layout\uFF0C\u6703\u88AB\u7236\u5C64 layout \u5305\u88F9\u8D77\u4F86) <ul><li><code>template.tsx</code>: \u8207 <code>layout</code> \u985E\u4F3C\uFF0C\u4F46\u5728\u8DEF\u7531\u5207\u63DB\u6642\u6703 remount \u65B0\u7684 instance\uFF08<code>layout</code> \u82E5\u8DEF\u7531\u5207\u63DB\u524D\u5F8C\u4E00\u6A23\uFF0C\u5247\u76F8\u540C\u90E8\u5206\u4E0D\u6703\u88AB remount \u65B0 instance\uFF09</li></ul></li><li><code>loading.tsx</code>: \u5B9A\u7FA9\u7576\u524D\u5C64\u7D1A\u9801\u9762\u8207\u5B50\u5C64\u7684 loading UI</li><li><code>error.tsx</code>: \u5B9A\u7FA9\u7576\u524D\u5C64\u7D1A\u9801\u9762\u8207\u5B50\u5C64\u7684 error UI\uFF08\u4E0D\u6703 catch \u540C\u4E00\u5C64\u7684 <code>layout.tsx</code> \u932F\u8AA4\uFF0C\u9700\u8981 catch <code>layout.tsx</code> \u932F\u8AA4\u9700\u8981\u5728\u4E0A\u4E00\u5C64\u7D1A\u7684 <code>error.tsx</code> \u4E2D\u8655\u7406\uFF0C\u82E5\u70BA <code>rootLayout</code>\uFF0C\u5247\u8ACB\u5728 <code>global-error.tsx</code> \u4E2D\u8655\u7406\uFF09 <ul><li><code>global-error.tsx</code>: \u8207 <code>error.tsx</code> \u57FA\u672C\u76F8\u540C\uFF0C\u4F46\u4E3B\u8981\u7528\u4F86\u5B9A\u7FA9\u8655\u7406 <code>rootLayout</code> \u7684\u932F\u8AA4</li></ul></li><li><code>not-found.tsx</code>: \u5B9A\u7FA9\u7576 component \u4E2D\u547C\u53EB <code>notFound</code> \u65B9\u6CD5\u6216\u662F\u5339\u914D\u4E0D\u5230\u4EFB\u4F55\u9801\u9762\u6642\u7684 UI</li></ul>`,25),k={href:"https://nextjs.org/docs/getting-started/project-structure#app-routing-conventions",target:"_blank",rel:"noopener noreferrer"},g=n("h2",{id:"page-\u5B9A\u7FA9\u57FA\u672C\u9801\u9762",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#page-\u5B9A\u7FA9\u57FA\u672C\u9801\u9762","aria-hidden":"true"},"#"),s(" Page \u5B9A\u7FA9\u57FA\u672C\u9801\u9762")],-1),v=n("code",null,"/",-1),h=n("code",null,"/about",-1),m={href:"https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes",target:"_blank",rel:"noopener noreferrer"},b=t('<ul><li><code>P.R</code>: <code>pages/index.tsx</code>, <code>pages/about.tsx</code></li><li><code>A.R</code>: <code>app/page.tsx</code>, <code>app/about/page.tsx</code></li></ul><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// `app/page.tsx` is the UI for the `/` URL</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, Home page!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u4E0B\u5716\u662F Nested Routing \u7BC4\u4F8B</strong><img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Fdefining-routes.png&amp;w=3840&amp;q=75" alt=""></p><h3 id="page-\u7684\u7279\u9EDE" tabindex="-1"><a class="header-anchor" href="#page-\u7684\u7279\u9EDE" aria-hidden="true">#</a> Page \u7684\u7279\u9EDE</h3>',4),x=n("li",null,[s("page \u6C38\u9060\u662F\u8DEF\u7531 Tree \u7684\u6700\u672B\u7AEF\u8449\u7247\u90E8\u5206 "),n("img",{src:"https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Fterminology-component-tree.png&w=3840&q=75",alt:""})],-1),_=n("li",null,"\u5982\u679C\u8981\u8B93\u8A72\u5C64\u8DEF\u7531\u53EF\u88AB public \u8A2A\u554F\uFF0C\u5FC5\u9808\u5EFA\u7ACB page",-1),y=n("li",null,[s("page \u9810\u8A2D\u70BA "),n("code",null,"Server Component"),s("\uFF0C\u4F46\u53EF\u4EE5\u624B\u52D5\u8A2D\u5B9A\u70BA "),n("code",null,"Client Component")],-1),f={href:"https://nextjs.org/docs/app/building-your-application/data-fetching",target:"_blank",rel:"noopener noreferrer"},w=t(`<h2 id="layout-\u5B9A\u7FA9\u5171\u4EAB\u7248\u578B" tabindex="-1"><a class="header-anchor" href="#layout-\u5B9A\u7FA9\u5171\u4EAB\u7248\u578B" aria-hidden="true">#</a> Layout \u5B9A\u7FA9\u5171\u4EAB\u7248\u578B</h2><p>\u4EE5\u4E0B\u5169\u7A2E\u6A21\u5F0F\u5206\u5225\u5EFA\u7ACB\u8DEF\u5F91 <code>/</code>, <code>/about</code> \u9801\u9762\u7684 layout\uFF0C\u5176\u4E2D <code>/</code> \u7684 layout \u6703\u5C07 <code>/about</code> \u7684 layout \u5305\u88F9\u5728\u5176\u4E2D</p><ul><li><code>P.R</code>: \u6C92\u6709\u5167\u5EFA\uFF0C\u9700\u624B\u52D5\u8655\u7406\u5B8C\u6210\u9700\u6C42</li><li><code>A.R</code>: <code>app/layout.tsx</code>, <code>app/about/layout.tsx</code></li></ul><blockquote><p>Layout \u5FC5\u9808\u660E\u78BA\u63A5\u6536 prop <code>children</code>\uFF0C\u4E26\u5C07\u5176\u8FD4\u56DE</p></blockquote><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">DashboardLayout</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  children<span class="token punctuation">,</span> <span class="token comment">// will be a page or nested layout</span>
<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u4E0B\u5716\u662F Nested Layout \u7BC4\u4F8B</strong><img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Ffile-conventions-component-hierarchy.png&amp;w=3840&amp;q=75" alt=""><img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Fnested-file-conventions-component-hierarchy.png&amp;w=3840&amp;q=75" alt=""></p><h3 id="layout-\u7684\u7279\u9EDE" tabindex="-1"><a class="header-anchor" href="#layout-\u7684\u7279\u9EDE" aria-hidden="true">#</a> Layout \u7684\u7279\u9EDE</h3>`,7),R=n("li",null,[n("code",null,"app"),s(" \u8CC7\u6599\u593E\u4E2D\uFF0C\u6700\u4E0A\u5C64\u7684 "),n("code",null,"layout.tsx"),s(" \u88AB\u7A31\u70BA "),n("code",null,"RootLayout")],-1),j=n("li",null,[s("\u8DEF\u7531\u4E2D\u7684 "),n("code",null,"layout"),s(" \u53EF\u4EE5 nested\uFF0C\u900F\u904E "),n("code",null,"children"),s(" \u5C64\u5C64\u5305\u88F9")],-1),S={href:"https://nextjs.org/docs/app/building-your-application/routing/route-groups",target:"_blank",rel:"noopener noreferrer"},F=n("code",null,"Route Groups",-1),q=n("li",null,[n("code",null,"layout"),s(" \u9810\u8A2D\u70BA "),n("code",null,"Server Component"),s("\uFF0C\u9664\u4E86 "),n("code",null,"RootLayout"),s(" \u5916\uFF0C\u53EF\u4EE5\u624B\u52D5\u8A2D\u70BA "),n("code",null,"Client Component")],-1),L=n("h3",{id:"\u95DC\u65BC-rootlayout",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u95DC\u65BC-rootlayout","aria-hidden":"true"},"#"),s(" \u95DC\u65BC RootLayout")],-1),N=n("p",null,[s("\u57FA\u672C\u4E0A\u662F\u7528\u4F86\u53D6\u4EE3 "),n("code",null,"P.R"),s(" \u65B9\u5F0F\u4E2D\u7684 "),n("code",null,"_app"),s(", "),n("code",null,"_document")],-1),C=n("li",null,[s("\u5FC5\u9808\u5B58\u5728\u4E14\u70BA "),n("code",null,"Server Component"),s("\uFF0C\u5C07\u5957\u7528\u5230\u6574\u500B\u61C9\u7528\u7A0B\u5F0F\u9801\u9762\u7576\u4E2D")],-1),E=n("li",null,[s("\u5FC5\u9808\u5728\u5176\u4E2D\u5305\u542B "),n("code",null,"<html> and <body>"),s(" tag\uFF0C\u56E0\u70BA NextJS \u4E26\u6C92\u6709\u70BA\u7528\u6236\u5B9A\u7FA9")],-1),P={href:"https://nextjs.org/docs/app/building-your-application/routing/route-groups",target:"_blank",rel:"noopener noreferrer"},A=n("code",null,"Route Groups",-1),I=n("code",null,"multiple root layout",-1),T=n("h2",{id:"head-\u982D-\u53BB\u54EA\u4E86",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#head-\u982D-\u53BB\u54EA\u4E86","aria-hidden":"true"},"#"),s(" Head\uFF08\u982D?\uFF09\u53BB\u54EA\u4E86\uFF1F")],-1),U=n("code",null,"<Head>",-1),G={href:"https://nextjs.org/docs/app/api-reference/functions/generate-metadata#the-metadata-object",target:"_blank",rel:"noopener noreferrer"},J=n("code",null,"metadata object",-1),H={href:"https://nextjs.org/docs/app/api-reference/functions/generate-metadata#generatemetadata-function",target:"_blank",rel:"noopener noreferrer"},D=n("code",null,"generateMetadata function",-1),B=t(`<div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Metadata <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> metadata<span class="token operator">:</span> Metadata <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&#39;Next.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;...&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>\u5B98\u65B9\u826F\u5FC3\u5EFA\u8B70</strong>\uFF1A\u76E1\u91CF\u4F7F\u7528 <code>Metadata API</code>\uFF0C\u4E0D\u8981\u624B\u52D5\u5728 <code>RootLayout</code> \u4F7F\u7528 <code>&lt;head&gt;</code> \u52A0\u5165 <code>&lt;title&gt;</code>, <code>&lt;meta&gt;</code>\u7B49\uFF0C\u524D\u8005\u6703\u81EA\u52D5\u8655\u7406\u5957\u7528 <code>streaming</code>, <code>de-duplicating</code> <code>&lt;head&gt;</code> \u6A19\u7C64\u7684\u529F\u80FD</p></blockquote><h2 id="\u9023\u7D50\u3001\u8DEF\u7531\u5207\u63DB-linking-and-navigating" tabindex="-1"><a class="header-anchor" href="#\u9023\u7D50\u3001\u8DEF\u7531\u5207\u63DB-linking-and-navigating" aria-hidden="true">#</a> \u9023\u7D50\u3001\u8DEF\u7531\u5207\u63DB - Linking and Navigating</h2><h3 id="link" tabindex="-1"><a class="header-anchor" href="#link" aria-hidden="true">#</a> Link</h3>`,4),V=n("code",null,"<Link>",-1),M={href:"https://nextjs.org/docs/app/api-reference/components/link",target:"_blank",rel:"noopener noreferrer"},O=t('<h3 id="navigating-\u6D41\u7A0B\u6A5F\u5236" tabindex="-1"><a class="header-anchor" href="#navigating-\u6D41\u7A0B\u6A5F\u5236" aria-hidden="true">#</a> Navigating \u6D41\u7A0B\u6A5F\u5236</h3><ul><li>route transition \u88AB <code>&lt;Link&gt;</code> or <code>router.push()</code> \u89F8\u767C</li><li>router \u66F4\u65B0 browser \u7DB2\u5740\u5217 URL</li><li>router \u900F\u904E\u91CD\u8907\u5229\u7528\u672A\u6539\u8B8A\u7684 <code>client-side cache</code>(e.g. shared layouts) \u907F\u514D\u4E0D\u5FC5\u8981\u7684\u66F4\u65B0\u5DE5\u4F5C\uFF0C\u4E5F\u7A31\u4F5C <code>partial rendering</code></li><li>\u5982\u679C\u7B26\u5408 <code>soft navigate</code> \u689D\u4EF6\uFF0C\u5247\u76F4\u63A5\u5F9E cache \u8FD4\u56DE\u5167\u5BB9\uFF0C\u4E0D\u6703\u518D\u53BB server \u62FF\u4E00\u6B21\uFF0C\u4E0D\u7B26\u5408\u5247\u9032\u884C <code>hard navigate</code> \u5F9E server \u7372\u53D6 <code>Server Component payload</code></li><li>created \u5F8C\uFF0C\u7576\u5F9E server \u7372\u53D6 payload \u6642\u986F\u793A Loading UI</li><li>router \u5C07 cache \u6216\u66F4\u65B0\u7684 payload \u6E32\u67D3\u5728 client</li></ul>',2),Y=n("code",null,"client-side cache",-1),K={href:"https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#client-side-caching-of-rendered-server-components",target:"_blank",rel:"noopener noreferrer"},X=n("code",null,"soft/hard navigate",-1),$={href:"https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#soft-navigation",target:"_blank",rel:"noopener noreferrer"},z=t('<h2 id="\u8DEF\u7531\u7FA4\u7D44-route-group" tabindex="-1"><a class="header-anchor" href="#\u8DEF\u7531\u7FA4\u7D44-route-group" aria-hidden="true">#</a> \u8DEF\u7531\u7FA4\u7D44 - Route Group</h2><p>\u7C21\u55AE\u4F86\u8AAA\uFF0Croute group \u5C31\u662F\u4E00\u7A2E\u8B93\u6211\u5011\u5728 <code>A.R</code> \u65B9\u5F0F\u7684 <code>app</code> \u8CC7\u6599\u593E\u4E0B\uFF0C\u5C07 routes \u5206\u9580\u5225\u985E\u62C6\u5206\u958B\u4F86\uFF0C\u537B\u53C8\u4E0D\u5F71\u97FF\u539F\u4F86 route \u7684\u89E3\u6790\u6D41\u7A0B\u7684\u4E00\u7A2E\u6280\u8853</p><p>\u5565\u610F\u601D\u52D2\uFF1F\u770B\u5716\u770B\u5716\uFF5E <img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Froute-group-organisation.png&amp;w=3840&amp;q=75" alt=""></p><p>\u900F\u904E <code>(group-name)</code> \u7684\u65B9\u5F0F\uFF0C\u6211\u5011\u5C07\u5C6C\u65BC\u540C\u4E00\u985E\u578B\u7684\u9801\u9762\u96C6\u4E2D\u653E\u5728\u5176\u4E2D\uFF0C\u547D\u540D\u70BA <code>(marketing)</code>\uFF0C\u900F\u904E\u9019\u65B9\u5F0F\u6211\u5011\u53EF\u4EE5\u5F88\u8F15\u6613\u7684\u628A route \u9032\u884C\u5206\u985E\u7BA1\u7406\uFF0C\u5927\u5E45\u63D0\u5347\u958B\u767C\u9AD4\u9A57</p><h3 id="\u540C\u5C64\u7D1A-multiple-layout" tabindex="-1"><a class="header-anchor" href="#\u540C\u5C64\u7D1A-multiple-layout" aria-hidden="true">#</a> \u540C\u5C64\u7D1A Multiple Layout</h3><p>\u53E6\u4E00\u500B route group \u7684\u597D\u7528\u4E4B\u8655\u5728\u65BC\uFF0C\u6211\u5011\u53EF\u4EE5\u5728\u4E0D\u540C group \u4E2D\u5B9A\u7FA9\u53EA\u5C6C\u65BC\u8A72 group \u7684 layout\uFF0C\u4E14\u4E0D\u5F71\u97FF\u5176\u5916\u90E8\u7684\u5176\u4ED6\u9801\u9762 <img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Froute-group-opt-in-layouts.png&amp;w=3840&amp;q=75" alt=""></p><h3 id="multiple-root-layout" tabindex="-1"><a class="header-anchor" href="#multiple-root-layout" aria-hidden="true">#</a> Multiple Root Layout</h3><p>\u5982\u679C\u628A\u6700\u4E0A\u5C64\u7684 <code>app/layout.tsx</code> \u522A\u6389\uFF0C\u4E26\u5728\u5176\u4E2D\u7684 group \u4E2D\u5404\u81EA\u5B9A\u7FA9 <code>layout.tsx</code>\uFF0C\u5C31\u53EF\u4EE5\u8B93\u540C\u4E00\u61C9\u7528\u7A0B\u5F0F\u5957\u7528\u5B8C\u5168\u5169\u5957\u7368\u7ACB\u7684 <code>Root Layout</code>\uFF0C\u5C0D\u65BC\u9700\u8981\u5728\u540C\u4E00\u7CFB\u7D71\u4E2D\u986F\u793A\u5B8C\u5168\u4E0D\u4E92\u76F8\u5F71\u97FF\u7684 layout \u9032\u884C\u958B\u767C\u975E\u5E38\u6709\u5E6B\u52A9 <img src="https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Froute-group-multiple-root-layouts.png&amp;w=3840&amp;q=75" alt=""></p><h3 id="route-group-\u7684\u7279\u9EDE" tabindex="-1"><a class="header-anchor" href="#route-group-\u7684\u7279\u9EDE" aria-hidden="true">#</a> Route Group \u7684\u7279\u9EDE</h3><ul><li>group \u7684\u547D\u540D\u5B8C\u5168\u4E0D\u5F71\u97FF route \u89E3\u6790</li><li>\u8ACB\u52FF\u5728 group \u4E2D\u91CD\u8907\u4F7F\u7528\u76F8\u540C\u7684 URL path\uFF0C\u5C07\u6703\u5831\u932F(<code>(marketing)/about/page.js</code>, <code>(shop)/about/page.js</code> \u5169\u8005\u6703\u885D\u7A81)</li><li>\u5728 multiple root layouts \u9801\u9762\u9593\u5207\u63DB\u8DEF\u7531\u5C07\u89F8\u767C <code>full page load</code> \u6574\u9801\u5237\u65B0\uFF08\u76F8\u5C0D\u65BC\u539F\u672C\u7684 client-side load\uFF09</li></ul><h2 id="\u8F09\u5165\u756B\u9762-loading-ui" tabindex="-1"><a class="header-anchor" href="#\u8F09\u5165\u756B\u9762-loading-ui" aria-hidden="true">#</a> \u8F09\u5165\u756B\u9762 - Loading UI</h2>',11),Q=n("code",null,"loading.tsx",-1),W=n("code",null,"Suspense",-1),Z={href:"https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming",target:"_blank",rel:"noopener noreferrer"},nn=n("img",{src:"https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Floading-overview.png&w=3840&q=75",alt:""},null,-1),sn=t(`<div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Loading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// You can add any UI inside Loading, including a Skeleton.</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingSkeleton</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u932F\u8AA4\u8655\u7406-error-handling" tabindex="-1"><a class="header-anchor" href="#\u932F\u8AA4\u8655\u7406-error-handling" aria-hidden="true">#</a> \u932F\u8AA4\u8655\u7406 - Error Handling</h2>`,2),an=n("code",null,"error.tsx",-1),en=n("code",null,"ErrorBoundary",-1),tn={href:"https://nextjs.org/docs/app/building-your-application/routing/error-handling",target:"_blank",rel:"noopener noreferrer"},on=n("img",{src:"https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Ferror-overview.png&w=3840&q=75",alt:""},null,-1),pn=t(`<div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// Error components \u5FC5\u9808\u70BA Client Components</span>
<span class="token string">&#39;use client&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  error<span class="token punctuation">,</span>
  reset<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  error<span class="token operator">:</span> Error<span class="token punctuation">;</span>
  <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Log the error to an error reporting service</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>error<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// \u5617\u8A66\u900F\u904E re-render \u6062\u5FA9 segment</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Something went wrong!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Try again
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u932F\u8AA4\u6062\u5FA9\u6A5F\u5236-recovering-from-errors" tabindex="-1"><a class="header-anchor" href="#\u932F\u8AA4\u6062\u5FA9\u6A5F\u5236-recovering-from-errors" aria-hidden="true">#</a> \u932F\u8AA4\u6062\u5FA9\u6A5F\u5236 - Recovering From Errors</h3>`,2),cn=n("code",null,"error.tsx",-1),ln=n("code",null,"reset",-1),rn={href:"https://nextjs.org/docs/app/building-your-application/routing/error-handling#recovering-from-errors",target:"_blank",rel:"noopener noreferrer"},un=t(`<blockquote><p><strong>\u6CE8\u610F</strong>\uFF1A<code>error.tsx</code> \u4E26\u4E0D catch \u540C\u5C64 layout \u4E2D\u7684 error\uFF0C\u82E5\u8981 catch layout \u8ACB\u5728\u4E0A\u4E00\u5C64\u4E2D\u7684 <code>error.tsx</code> \u6216\u662F root \u7684 <code>global-error.tsx</code>\u8655\u7406\u3002</p></blockquote><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token string">&#39;use client&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">GlobalError</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  error<span class="token punctuation">,</span>
  reset<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  error<span class="token operator">:</span> Error<span class="token punctuation">;</span>
  <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Something went wrong!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Try again</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8DEF\u7531\u8655\u7406-route-handler" tabindex="-1"><a class="header-anchor" href="#\u8DEF\u7531\u8655\u7406-route-handler" aria-hidden="true">#</a> \u8DEF\u7531\u8655\u7406 - Route Handler</h2><p><code>route.tsx</code> \u8B93\u958B\u767C\u8005\u80FD\u900F\u904E web api <code>request</code>, <code>response</code> \u5C0D\u8ACB\u6C42\u9032\u884C\u8655\u7406\uFF08API...\uFF09\uFF0C\u8207 <code>layout.tsx</code>\u4E00\u6A23\u53EF\u4EE5\u5728 app \u7684\u4EFB\u610F\u5B50\u5C64\u4E2D\u51FA\u73FE\uFF0C\u4F46\u4E0D\u53EF\u8207 <code>page.tsx</code> \u51FA\u73FE\u5728\u540C\u4E00\u5C64\u4E2D\uFF0C\u5C07\u6703\u5831\u932F</p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// app/my-api/route.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NextResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/server&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">GET</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>equest<span class="token operator">:</span> Request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    msg<span class="token operator">:</span> <span class="token string">&#39;Johnny Good Good&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="behaviors" tabindex="-1"><a class="header-anchor" href="#behaviors" aria-hidden="true">#</a> Behaviors</h3>`,6),dn=n("li",null,[s("\u975C\u614B\u8DEF\u7531\u8655\u7406\uFF1A\u9810\u8A2D "),n("code",null,"GET"),s(" \u70BA\u975C\u614B\u8655\u7406")],-1),kn=n("li",null,[s("\u5728 "),n("code",null,"GET"),s(" \u4E2D\u4F7F\u7528\u5230 "),n("code",null,"Request"),s(" object")],-1),gn=n("li",null,[s("\u4F7F\u7528\u5230\u4EFB\u4F55 "),n("code",null,"GET"),s(" \u4EE5\u5916\u7684 HTTP methods")],-1),vn=n("code",null,"cookies",-1),hn=n("code",null,"headers",-1),mn={href:"https://nextjs.org/docs/app/building-your-application/routing/router-handlers#dynamic-functions",target:"_blank",rel:"noopener noreferrer"},bn=n("li",null,[s("\u624B\u52D5\u8A2D\u5B9A "),n("code",null,"Segment Config Options"),s(" \u70BA dynamic mode")],-1),xn=t(`<div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">// app/my-api/products/route.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NextResponse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/server&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token constant">GET</span><span class="token punctuation">(</span>request<span class="token operator">:</span> Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> searchParams <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">https://data.mongodb-api.com/product/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;API-Key&#39;</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATA_API_KEY</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> NextResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> product <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),_n=n("h2",{id:"\u7D50\u8AD6",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7D50\u8AD6","aria-hidden":"true"},"#"),s(" \u7D50\u8AD6")],-1),yn=n("p",null,[s("\u9019\u7BC7\u4E0D\u77E5\u4E0D\u89BA\u53C8\u6253\u4E86\u6709\u9EDE\u9577\uFF0C\u4F46\u9019\u6B21 v13 \u771F\u7684\u5F88\u591A\u65B0\u89C0\u5FF5\uFF0C\u7BC7\u5E45\u4E0A\u7A0D\u5FAE\u8B8A\u5F97\u5F88\u9577\u9084\u8ACB\u5927\u5BB6\u8AD2\u89E3\uFF0C\u4E0D\u904E\u5176\u5BE6\u9019\u6A23\u9084\u6C92\u8B1B\u5B8C XD\uFF0C\u9084\u6709 "),n("code",null,"Data Fetching"),s(" \u7684\u90E8\u5206\u5C31\u7559\u5F85\u4E0B\u4E00\u7BC7\u7D00\u9304\u62C9\uFF5E")],-1),fn=n("p",null,"\u5C0D\u6211\u4F86\u8AAA\uFF0C\u5C0D\u65BC v13 \u7684\u7B2C\u4E00\u5370\u8C61\u662F\u300C\u9019\u662F\u5565\uFF01\uFF1F\u300D\uFF0C\u6C92\u932F\uFF38\uFF24\uFF0C\u76F8\u4FE1\u6709\u5BEB\u904E NextJS \u4E00\u6BB5\u6642\u9593\u7684\u8B80\u8005\u61C9\u8A72\u90FD\u662F\u5DEE\u4E0D\u591A\u9019\u611F\u89BA\uFF0C\u4E0D\u904E\u7D30\u7D30\u770B\u5B8C Documentation \u5F8C\u767C\u89BA\uFF0C\u78BA\u5BE6\u9019\u6B21 v13 \u5F88\u591A\u6539\u7248\u7684\u5167\u5BB9\u89E3\u6C7A\u4E86\u8A31\u591A\u4E4B\u524D\u9047\u5230\u7684\u75DB\u9EDE\uFF0C\u6BD4\u5982 layout \u5BA2\u88FD\u5316\u5F48\u6027\u3001server side \u8207 client side \u4E92\u52D5\u6A21\u5F0F\u3001loading UI \u5957\u7528\u7B49\u7B49\u5728\u4E4B\u524D\u7684\u7248\u672C\u90FD\u9700\u8981\u76F8\u7576\u7684\u7CBE\u529B\u53BB\u81EA\u5DF1\u5BE6\u4F5C\uFF0C\u96D6\u7136\u4E5F\u5F88\u597D\u73A9\u80FD\u5B78\u5230\u6771\u897F\uFF0C\u4F46\u6709\u4E9B\u5730\u65B9\u78BA\u5BE6\u6709\u91CD\u8907\u9020\u8F2A\u5B50\u7684\u611F\u89BA\uFF0Cv13 \u66F4\u591A\u7684\u662F\u5728\u67B6\u69CB\u5C64\u9762\u4E0A\u5F15\u5165\u4E86 Server Component \u7684\u7406\u5FF5\uFF0C\u4E26\u5C07\u5176\u771F\u6B63\u878D\u5165\u5230\u4E86\u539F\u6709\u7684\u958B\u767C\u9AD4\u9A57\u4E2D\uFF0C\u76F8\u4FE1\u4E4B\u5F8C Next \u7684\u5718\u968A\u9084\u6703\u518D\u63A8\u51FA\u66F4\u591A\u8B93\u4EBA\u8033\u76EE\u4E00\u65B0\u7684\u6982\u5FF5\u8207\u60F3\u6CD5\uFF0C\u63A8\u52D5\u793E\u7FA4\u7E7C\u7E8C\u6210\u9577\uFF01",-1),wn=n("p",null,"\u4ECA\u5929\u5C31\u5148\u8A18\u9304\u5230\u9019\u908A\u62C9\uFF0C\u5982\u679C\u89BA\u5F97\u6587\u7AE0\u5C0D\u4F60\u6709\u5E6B\u52A9\u7684\u8A71\uFF0C\u6B61\u8FCE\u5E6B\u6211\u5206\u4EAB\u7D66\u66F4\u591A\u4EBA\u770B\u770B\u5594\uFF5E\u8B1D\u8B1D\u5927\u5BB6 =V=~~ \u63B0\u63B0\uFF5E",-1);function Rn(jn,Sn){const o=p("SocialBlock"),e=p("ExternalLinkIcon");return l(),i("div",null,[u,a(o,{hashtags:"javascript,webpack,vue,react,module-federation"}),d,n("blockquote",null,[n("p",null,[s("\u4EE5\u4E0A\u6A94\u6848\u5728\u5404\u5C64\u4E2D\u6703\u53CD\u8986\u51FA\u73FE\uFF0C\u4E26\u4E0D\u662F\u53EA\u6709\u4E00\u5C64\u5594\uFF01\uFF5E\u9664\u4E86\u4EE5\u4E0A\u57FA\u672C\u7684\u6A94\u6848\u540D\u7A31\u5916\uFF0C\u53EF\u4EE5"),n("a",k,[s("\u53C3\u8003\u9019\u908A"),a(e)]),s("\u67E5\u770B\u5176\u4ED6\u6703\u88AB NextJS \u8655\u7406\u7684\u6A94\u6848\u540D\u7A31\uFF0C\u9664\u4E86\u9019\u4E9B\u6A94\u6848\u540D\u7A31\u5916\u7684\u6A94\u6848\u53EF\u4EE5\u5B89\u5FC3\u653E\u5728\u88E1\u9762\u81EA\u7531\u904B\u7528")])]),g,n("p",null,[s("\u4EE5\u4E0B\u5169\u7A2E\u6A21\u5F0F\u5206\u5225\u5EFA\u7ACB\u8DEF\u5F91 "),v,s(", "),h,s(" \u7684\u9801\u9762\uFF0CDynamic Routing \u6A5F\u5236\u53EF"),n("a",m,[s("\u53C3\u8003\u9019\u908A"),a(e)])]),b,n("ul",null,[x,_,y,n("li",null,[s("page \u53EF\u4EE5\u9032\u884C Fetch Data \u64CD\u4F5C\uFF0C"),n("a",f,[s("\u8A73\u60C5\u8ACB\u898B\u9019\u88E1"),a(e)])])]),w,n("ul",null,[R,j,n("li",null,[s("\u900F\u904E "),n("a",S,[F,a(e)]),s(" \u53EF\u4EE5\u9078\u64C7\u6027\u8B93\u8DEF\u7531\u5957\u7528\u4E0D\u540C\u7684 layout")]),q]),L,N,n("ul",null,[C,E,n("li",null,[s("\u900F\u904E "),n("a",P,[A,a(e)]),s(" \u53EF\u4EE5\u5EFA\u7ACB "),I])]),T,n("p",null,[s("\u904E\u53BB\u6211\u5011\u5E38\u7528 "),U,s(" component \u5E6B\u52A9\u6211\u5011\u5728\u9801\u9762\u4E2D\u5BA2\u88FD\u5316 SEO meta\uFF0C\u73FE\u5728\u6211\u5011\u53EF\u4EE5\u76F4\u63A5\u900F\u904E "),n("a",G,[J,a(e)]),s(" \u6216 "),n("a",H,[D,a(e)]),s(" \u5B9A\u7FA9")]),B,n("p",null,[s("\u9023\u7D50\u5207\u63DB\u540C\u6A23\u4F7F\u7528 NextJS \u63D0\u4F9B\u7684 "),V,s(" \u5C31\u884C\uFF5E\u8A73\u7D30\u6587\u4EF6\u53EF\u4EE5"),n("a",M,[s("\u53C3\u8003\u9019\u908A"),a(e)])]),O,n("blockquote",null,[n("p",null,[s("\u95DC\u65BC "),Y,s(" \u7684"),n("a",K,[s("\u8A73\u7D30\u89E3\u91CB\u8ACB\u770B\u9019\u88E1"),a(e)])])]),n("blockquote",null,[n("p",null,[s("\u95DC\u65BC "),X,s(" \u7684"),n("a",$,[s("\u8A73\u7D30\u89E3\u91CB\u8ACB\u770B\u9019\u88E1"),a(e)])])]),z,n("p",null,[Q,s(" \u57FA\u672C\u4E0A\u662F\u4EE5\u4E0B\u5716\u7D50\u69CB\u7684\u65B9\u5F0F\uFF0C\u5C07\u9801\u9762\u5167\u5BB9\u5305\u88F9\u5728 "),W,s(" \u7576\u4E2D\uFF0C\u8A73\u7D30\u53EF"),n("a",Z,[s("\u53C3\u8003\u9019\u88E1"),a(e)]),nn]),sn,n("p",null,[an,s(" \u57FA\u672C\u4E0A\u662F\u4EE5\u4E0B\u5716\u7D50\u69CB\u7684\u65B9\u5F0F\uFF0C\u5C07\u9801\u9762\u5167\u5BB9\u5305\u88F9\u5728 "),en,s(" \u7576\u4E2D\uFF0C\u8A73\u7D30\u53EF"),n("a",tn,[s("\u53C3\u8003\u9019\u88E1"),a(e)]),on]),pn,n("p",null,[cn,s(" \u63D0\u4F9B\u4E00\u5957\u932F\u8AA4\u6062\u5FA9\u6A5F\u5236\uFF0C\u900F\u904E\u547C\u53EB "),ln,s(" function\uFF0C\u53EF\u4EE5\u8B93 page \u91CD\u65B0\u9032\u884C\u5617\u8A66\u8F09\u5165\uFF0C\u8A73\u7D30\u53EF"),n("a",rn,[s("\u53C3\u8003\u9019\u88E1"),a(e)])]),un,n("ul",null,[dn,n("li",null,[s("\u52D5\u614B\u8DEF\u7531\u8655\u7406\uFF1A\u7B26\u5408\u4EE5\u4E0B\u689D\u4EF6\u5C07\u70BA\u52D5\u614B\u8655\u7406 "),n("ul",null,[kn,gn,n("li",null,[s("\u4F7F\u7528\u5230\u4EFB\u4F55 dynamic function\uFF0C\u6BD4\u5982 "),vn,s(", "),hn,s("\uFF0C\u8A73\u7D30\u53EF"),n("a",mn,[s("\u53C3\u8003\u9019\u88E1"),a(e)])]),bn])])]),xn,a(o,{hashtags:"javascript,webpack,vue,react,module-federation"}),_n,yn,fn,wn])}const qn=c(r,[["render",Rn],["__file","next13-intro-approuter.html.vue"]]);export{qn as default};
